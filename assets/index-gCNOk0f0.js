var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=e=>{let n={};for(var r in e)t(n,r,{get:e[r],enumerable:!0});return n},c=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},l=(n,r,a)=>(a=n==null?{}:e(i(n)),c(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var u=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.portal`),r=Symbol.for(`react.fragment`),i=Symbol.for(`react.strict_mode`),a=Symbol.for(`react.profiler`),o=Symbol.for(`react.consumer`),s=Symbol.for(`react.context`),c=Symbol.for(`react.forward_ref`),l=Symbol.for(`react.suspense`),u=Symbol.for(`react.memo`),d=Symbol.for(`react.lazy`),f=Symbol.for(`react.activity`),p=Symbol.iterator;function m(e){return typeof e!=`object`||!e?null:(e=p&&e[p]||e[`@@iterator`],typeof e==`function`?e:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,_={};function v(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if(typeof e!=`object`&&typeof e!=`function`&&e!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,e,t,`setState`)},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,`forceUpdate`)};function y(){}y.prototype=v.prototype;function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||h}var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var S=Array.isArray;function C(){}var w={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(e,n,r){var i=r.ref;return{$$typeof:t,type:e,key:n,ref:i===void 0?null:i,props:r}}function D(e,t){return E(e.type,t,e.props)}function O(e){return typeof e==`object`&&!!e&&e.$$typeof===t}function ee(e){var t={"=":`=0`,":":`=2`};return`$`+e.replace(/[=:]/g,function(e){return t[e]})}var te=/\/+/g;function ne(e,t){return typeof e==`object`&&e&&e.key!=null?ee(``+e.key):t.toString(36)}function k(e){switch(e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason;default:switch(typeof e.status==`string`?e.then(C,C):(e.status=`pending`,e.then(function(t){e.status===`pending`&&(e.status=`fulfilled`,e.value=t)},function(t){e.status===`pending`&&(e.status=`rejected`,e.reason=t)})),e.status){case`fulfilled`:return e.value;case`rejected`:throw e.reason}}throw e}function re(e,r,i,a,o){var s=typeof e;(s===`undefined`||s===`boolean`)&&(e=null);var c=!1;if(e===null)c=!0;else switch(s){case`bigint`:case`string`:case`number`:c=!0;break;case`object`:switch(e.$$typeof){case t:case n:c=!0;break;case d:return c=e._init,re(c(e._payload),r,i,a,o)}}if(c)return o=o(e),c=a===``?`.`+ne(e,0):a,S(o)?(i=``,c!=null&&(i=c.replace(te,`$&/`)+`/`),re(o,r,i,``,function(e){return e})):o!=null&&(O(o)&&(o=D(o,i+(o.key==null||e&&e.key===o.key?``:(``+o.key).replace(te,`$&/`)+`/`)+c)),r.push(o)),1;c=0;var l=a===``?`.`:a+`:`;if(S(e))for(var u=0;u<e.length;u++)a=e[u],s=l+ne(a,u),c+=re(a,r,i,s,o);else if(u=m(e),typeof u==`function`)for(e=u.call(e),u=0;!(a=e.next()).done;)a=a.value,s=l+ne(a,u++),c+=re(a,r,i,s,o);else if(s===`object`){if(typeof e.then==`function`)return re(k(e),r,i,a,o);throw r=String(e),Error(`Objects are not valid as a React child (found: `+(r===`[object Object]`?`object with keys {`+Object.keys(e).join(`, `)+`}`:r)+`). If you meant to render a collection of children, use an array instead.`)}return c}function ie(e,t,n){if(e==null)return e;var r=[],i=0;return re(e,r,``,``,function(e){return t.call(n,e,i++)}),r}function ae(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var A=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},j={map:ie,forEach:function(e,t,n){ie(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ie(e,function(){t++}),t},toArray:function(e){return ie(e,function(e){return e})||[]},only:function(e){if(!O(e))throw Error(`React.Children.only expected to receive a single React element child.`);return e}};e.Activity=f,e.Children=j,e.Component=v,e.Fragment=r,e.Profiler=a,e.PureComponent=b,e.StrictMode=i,e.Suspense=l,e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,e.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},e.cache=function(e){return function(){return e.apply(null,arguments)}},e.cacheSignal=function(){return null},e.cloneElement=function(e,t,n){if(e==null)throw Error(`The argument must be a React element, but you passed `+e+`.`);var r=g({},e.props),i=e.key;if(t!=null)for(a in t.key!==void 0&&(i=``+t.key),t)!T.call(t,a)||a===`key`||a===`__self`||a===`__source`||a===`ref`&&t.ref===void 0||(r[a]=t[a]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return E(e.type,i,r)},e.createContext=function(e){return e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:o,_context:e},e},e.createElement=function(e,t,n){var r,i={},a=null;if(t!=null)for(r in t.key!==void 0&&(a=``+t.key),t)T.call(t,r)&&r!==`key`&&r!==`__self`&&r!==`__source`&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),c=0;c<o;c++)s[c]=arguments[c+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return E(e,a,i)},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:c,render:e}},e.isValidElement=O,e.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:ae}},e.memo=function(e,t){return{$$typeof:u,type:e,compare:t===void 0?null:t}},e.startTransition=function(e){var t=w.T,n={};w.T=n;try{var r=e(),i=w.S;i!==null&&i(n,r),typeof r==`object`&&r&&typeof r.then==`function`&&r.then(C,A)}catch(e){A(e)}finally{t!==null&&n.types!==null&&(t.types=n.types),w.T=t}},e.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},e.use=function(e){return w.H.use(e)},e.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},e.useCallback=function(e,t){return w.H.useCallback(e,t)},e.useContext=function(e){return w.H.useContext(e)},e.useDebugValue=function(){},e.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},e.useEffect=function(e,t){return w.H.useEffect(e,t)},e.useEffectEvent=function(e){return w.H.useEffectEvent(e)},e.useId=function(){return w.H.useId()},e.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},e.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},e.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},e.useMemo=function(e,t){return w.H.useMemo(e,t)},e.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},e.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},e.useRef=function(e){return w.H.useRef(e)},e.useState=function(e){return w.H.useState(e)},e.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},e.useTransition=function(){return w.H.useTransition()},e.version=`19.2.0`})),d=o(((e,t)=>{t.exports=u()})),f=o((e=>{function t(e,t){var n=e.length;e.push(t);a:for(;0<n;){var r=n-1>>>1,a=e[r];if(0<i(a,t))e[r]=t,e[n]=a,n=r;else break a}}function n(e){return e.length===0?null:e[0]}function r(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;a:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<a&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else if(l<a&&0>i(u,n))e[r]=u,e[l]=n,r=l;else break a}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return n===0?e.id-t.id:n}if(e.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var c=[],l=[],u=1,d=null,f=3,p=!1,m=!1,h=!1,g=!1,_=typeof setTimeout==`function`?setTimeout:null,v=typeof clearTimeout==`function`?clearTimeout:null,y=typeof setImmediate<`u`?setImmediate:null;function b(e){for(var i=n(l);i!==null;){if(i.callback===null)r(l);else if(i.startTime<=e)r(l),i.sortIndex=i.expirationTime,t(c,i);else break;i=n(l)}}function x(e){if(h=!1,b(e),!m)if(n(c)!==null)m=!0,S||(S=!0,O());else{var t=n(l);t!==null&&ne(x,t.startTime-e)}}var S=!1,C=-1,w=5,T=-1;function E(){return g?!0:!(e.unstable_now()-T<w)}function D(){if(g=!1,S){var t=e.unstable_now();T=t;var i=!0;try{a:{m=!1,h&&(h=!1,v(C),C=-1),p=!0;var a=f;try{b:{for(b(t),d=n(c);d!==null&&!(d.expirationTime>t&&E());){var o=d.callback;if(typeof o==`function`){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=t);if(t=e.unstable_now(),typeof s==`function`){d.callback=s,b(t),i=!0;break b}d===n(c)&&r(c),b(t)}else r(c);d=n(c)}if(d!==null)i=!0;else{var u=n(l);u!==null&&ne(x,u.startTime-t),i=!1}}break a}finally{d=null,f=a,p=!1}i=void 0}}finally{i?O():S=!1}}}var O;if(typeof y==`function`)O=function(){y(D)};else if(typeof MessageChannel<`u`){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=D,O=function(){te.postMessage(null)}}else O=function(){_(D,0)};function ne(t,n){C=_(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):w=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,a){var o=e.unstable_now();switch(typeof a==`object`&&a?(a=a.delay,a=typeof a==`number`&&0<a?o+a:o):a=o,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=a+s,r={id:u++,callback:i,priorityLevel:r,startTime:a,expirationTime:s,sortIndex:-1},a>o?(r.sortIndex=a,t(l,r),n(c)===null&&r===n(l)&&(h?(v(C),C=-1):h=!0,ne(x,a-o))):(r.sortIndex=s,t(c,r),m||p||(m=!0,S||(S=!0,O()))),r},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}})),p=o(((e,t)=>{t.exports=f()})),m=o((e=>{var t=d();function n(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for(`react.portal`);function o(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:r==null?null:``+r,children:e,containerInfo:t,implementation:n}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){if(e===`font`)return``;if(typeof t==`string`)return t===`use-credentials`?t:``}e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,e.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(n(299));return o(e,t,null,r)},e.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},e.preconnect=function(e,t){typeof e==`string`&&(t?(t=t.crossOrigin,t=typeof t==`string`?t===`use-credentials`?t:``:void 0):t=null,i.d.C(e,t))},e.prefetchDNS=function(e){typeof e==`string`&&i.d.D(e)},e.preinit=function(e,t){if(typeof e==`string`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin),a=typeof t.integrity==`string`?t.integrity:void 0,o=typeof t.fetchPriority==`string`?t.fetchPriority:void 0;n===`style`?i.d.S(e,typeof t.precedence==`string`?t.precedence:void 0,{crossOrigin:r,integrity:a,fetchPriority:o}):n===`script`&&i.d.X(e,{crossOrigin:r,integrity:a,fetchPriority:o,nonce:typeof t.nonce==`string`?t.nonce:void 0})}},e.preinitModule=function(e,t){if(typeof e==`string`)if(typeof t==`object`&&t){if(t.as==null||t.as===`script`){var n=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0})}}else t??i.d.M(e)},e.preload=function(e,t){if(typeof e==`string`&&typeof t==`object`&&t&&typeof t.as==`string`){var n=t.as,r=c(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:typeof t.integrity==`string`?t.integrity:void 0,nonce:typeof t.nonce==`string`?t.nonce:void 0,type:typeof t.type==`string`?t.type:void 0,fetchPriority:typeof t.fetchPriority==`string`?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==`string`?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==`string`?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==`string`?t.imageSizes:void 0,media:typeof t.media==`string`?t.media:void 0})}},e.preloadModule=function(e,t){if(typeof e==`string`)if(t){var n=c(t.as,t.crossOrigin);i.d.m(e,{as:typeof t.as==`string`&&t.as!==`script`?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity==`string`?t.integrity:void 0})}else i.d.m(e)},e.requestFormReset=function(e){i.d.r(e)},e.unstable_batchedUpdates=function(e,t){return e(t)},e.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},e.useFormStatus=function(){return s.H.useHostTransitionStatus()},e.version=`19.2.0`})),h=o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=m()})),g=o((e=>{var t=p(),n=d(),r=h();function i(e){var t=`https://react.dev/errors/`+e;if(1<arguments.length){t+=`?args[]=`+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+=`&args[]=`+encodeURIComponent(arguments[n])}return`Minified React error #`+e+`; visit `+t+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function s(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l(e){if(o(e)!==e)throw Error(i(188))}function u(e){var t=e.alternate;if(!t){if(t=o(e),t===null)throw Error(i(188));return t===e?e:null}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return l(a),e;if(s===r)return l(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var c=!1,u=a.child;u;){if(u===n){c=!0,n=a,r=s;break}if(u===r){c=!0,r=a,n=s;break}u=u.sibling}if(!c){for(u=s.child;u;){if(u===n){c=!0,n=s,r=a;break}if(u===r){c=!0,r=s,n=a;break}u=u.sibling}if(!c)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function f(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=f(e),t!==null)return t;e=e.sibling}return null}var m=Object.assign,g=Symbol.for(`react.element`),_=Symbol.for(`react.transitional.element`),v=Symbol.for(`react.portal`),y=Symbol.for(`react.fragment`),b=Symbol.for(`react.strict_mode`),x=Symbol.for(`react.profiler`),S=Symbol.for(`react.consumer`),C=Symbol.for(`react.context`),w=Symbol.for(`react.forward_ref`),T=Symbol.for(`react.suspense`),E=Symbol.for(`react.suspense_list`),D=Symbol.for(`react.memo`),O=Symbol.for(`react.lazy`),ee=Symbol.for(`react.activity`),te=Symbol.for(`react.memo_cache_sentinel`),ne=Symbol.iterator;function k(e){return typeof e!=`object`||!e?null:(e=ne&&e[ne]||e[`@@iterator`],typeof e==`function`?e:null)}var re=Symbol.for(`react.client.reference`);function ie(e){if(e==null)return null;if(typeof e==`function`)return e.$$typeof===re?null:e.displayName||e.name||null;if(typeof e==`string`)return e;switch(e){case y:return`Fragment`;case x:return`Profiler`;case b:return`StrictMode`;case T:return`Suspense`;case E:return`SuspenseList`;case ee:return`Activity`}if(typeof e==`object`)switch(e.$$typeof){case v:return`Portal`;case C:return e.displayName||`Context`;case S:return(e._context.displayName||`Context`)+`.Consumer`;case w:var t=e.render;return e=e.displayName,e||=(e=t.displayName||t.name||``,e===``?`ForwardRef`:`ForwardRef(`+e+`)`),e;case D:return t=e.displayName||null,t===null?ie(e.type)||`Memo`:t;case O:t=e._payload,e=e._init;try{return ie(e(t))}catch{}}return null}var ae=Array.isArray,A=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},se=[],ce=-1;function M(e){return{current:e}}function le(e){0>ce||(e.current=se[ce],se[ce]=null,ce--)}function N(e,t){ce++,se[ce]=e.current,e.current=t}var P=M(null),F=M(null),ue=M(null),de=M(null);function fe(e,t){switch(N(ue,t),N(F,e),N(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?_f(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=_f(t),e=vf(t,e);else switch(e){case`svg`:e=1;break;case`math`:e=2;break;default:e=0}}le(P),N(P,e)}function pe(){le(P),le(F),le(ue)}function me(e){e.memoizedState!==null&&N(de,e);var t=P.current,n=vf(t,e.type);t!==n&&(N(F,e),N(P,n))}function he(e){F.current===e&&(le(P),le(F)),de.current===e&&(le(de),Dp._currentValue=oe)}var ge,_e;function ve(e){if(ge===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);ge=t&&t[1]||``,_e=-1<e.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<e.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+ge+e+_e}var ye=!1;function be(e,t){if(!e||ye)return``;ye=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&typeof n.catch==`function`&&n.catch(function(){})}}catch(e){if(e&&r&&typeof e.stack==`string`)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,`name`);i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var c=o.split(`
`),l=s.split(`
`);for(i=r=0;r<c.length&&!c[r].includes(`DetermineComponentFrameRoot`);)r++;for(;i<l.length&&!l[i].includes(`DetermineComponentFrameRoot`);)i++;if(r===c.length||i===l.length)for(r=c.length-1,i=l.length-1;1<=r&&0<=i&&c[r]!==l[i];)i--;for(;1<=r&&0<=i;r--,i--)if(c[r]!==l[i]){if(r!==1||i!==1)do if(r--,i--,0>i||c[r]!==l[i]){var u=`
`+c[r].replace(` at new `,` at `);return e.displayName&&u.includes(`<anonymous>`)&&(u=u.replace(`<anonymous>`,e.displayName)),u}while(1<=r&&0<=i);break}}}finally{ye=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:``)?ve(n):``}function xe(e,t){switch(e.tag){case 26:case 27:case 5:return ve(e.type);case 16:return ve(`Lazy`);case 13:return e.child!==t&&t!==null?ve(`Suspense Fallback`):ve(`Suspense`);case 19:return ve(`SuspenseList`);case 0:case 15:return be(e.type,!1);case 11:return be(e.type.render,!1);case 1:return be(e.type,!0);case 31:return ve(`Activity`);default:return``}}function Se(e){try{var t=``,n=null;do t+=xe(e,n),n=e,e=e.return;while(e);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}var Ce=Object.prototype.hasOwnProperty,we=t.unstable_scheduleCallback,Te=t.unstable_cancelCallback,Ee=t.unstable_shouldYield,De=t.unstable_requestPaint,Oe=t.unstable_now,ke=t.unstable_getCurrentPriorityLevel,Ae=t.unstable_ImmediatePriority,je=t.unstable_UserBlockingPriority,Me=t.unstable_NormalPriority,Ne=t.unstable_LowPriority,Pe=t.unstable_IdlePriority,Fe=t.log,Ie=t.unstable_setDisableYieldValue,Le=null,Re=null;function ze(e){if(typeof Fe==`function`&&Ie(e),Re&&typeof Re.setStrictMode==`function`)try{Re.setStrictMode(Le,e)}catch{}}var Be=Math.clz32?Math.clz32:Ue,Ve=Math.log,He=Math.LN2;function Ue(e){return e>>>=0,e===0?32:31-(Ve(e)/He|0)|0}var We=256,Ge=262144,Ke=4194304;function qe(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Je(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=r&134217727;return s===0?(s=r&~a,s===0?o===0?n||(n=r&~e,n!==0&&(i=qe(n))):i=qe(o):i=qe(s)):(r=s&~a,r===0?(o&=s,o===0?n||(n=s&~e,n!==0&&(i=qe(n))):i=qe(o)):i=qe(r)),i===0?0:t!==0&&t!==i&&(t&a)===0&&(a=i&-i,n=t&-t,a>=n||a===32&&n&4194048)?t:i}function Ye(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ze(){var e=Ke;return Ke<<=1,!(Ke&62914560)&&(Ke=4194304),e}function Qe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $e(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function et(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-Be(n),d=1<<u;s[u]=0,c[u]=-1;var f=l[u];if(f!==null)for(l[u]=null,u=0;u<f.length;u++){var p=f[u];p!==null&&(p.lane&=-536870913)}n&=~d}r!==0&&tt(e,r,0),a!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=a&~(o&~t))}function tt(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Be(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function nt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Be(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function rt(e,t){var n=t&-t;return n=n&42?1:it(n),(n&(e.suspendedLanes|t))===0?n:0}function it(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function at(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ot(){var e=j.p;return e===0?(e=window.event,e===void 0?32:Up(e.type)):e}function st(e,t){var n=j.p;try{return j.p=e,t()}finally{j.p=n}}var ct=Math.random().toString(36).slice(2),lt=`__reactFiber$`+ct,ut=`__reactProps$`+ct,dt=`__reactContainer$`+ct,ft=`__reactEvents$`+ct,pt=`__reactListeners$`+ct,mt=`__reactHandles$`+ct,ht=`__reactResources$`+ct,gt=`__reactMarker$`+ct;function _t(e){delete e[lt],delete e[ut],delete e[ft],delete e[pt],delete e[mt]}function vt(e){var t=e[lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dt]||n[lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bf(e);e!==null;){if(n=e[lt])return n;e=Bf(e)}return t}e=n,n=e.parentNode}return null}function yt(e){if(e=e[lt]||e[dt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function bt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function xt(e){var t=e[ht];return t||=e[ht]={hoistableStyles:new Map,hoistableScripts:new Map},t}function St(e){e[gt]=!0}var Ct=new Set,wt={};function Tt(e,t){Et(e,t),Et(e+`Capture`,t)}function Et(e,t){for(wt[e]=t,e=0;e<t.length;e++)Ct.add(t[e])}var Dt=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),Ot={},kt={};function At(e){return Ce.call(kt,e)?!0:Ce.call(Ot,e)?!1:Dt.test(e)?kt[e]=!0:(Ot[e]=!0,!1)}function jt(e,t,n){if(At(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:e.removeAttribute(t);return;case`boolean`:var r=t.toLowerCase().slice(0,5);if(r!==`data-`&&r!==`aria-`){e.removeAttribute(t);return}}e.setAttribute(t,``+n)}}function Mt(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(t);return}e.setAttribute(t,``+n)}}function Nt(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case`undefined`:case`function`:case`symbol`:case`boolean`:e.removeAttribute(n);return}e.setAttributeNS(t,n,``+r)}}function I(e){switch(typeof e){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return e;case`object`:return e;default:return``}}function Pt(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()===`input`&&(t===`checkbox`||t===`radio`)}function Ft(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&r!==void 0&&typeof r.get==`function`&&typeof r.set==`function`){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=``+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=``+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function It(e){if(!e._valueTracker){var t=Pt(e)?`checked`:`value`;e._valueTracker=Ft(e,t,``+e[t])}}function Lt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r=``;return e&&(r=Pt(e)?e.checked?`true`:`false`:e.value),e=r,e===n?!1:(t.setValue(e),!0)}function Rt(e){if(e||=typeof document<`u`?document:void 0,e===void 0)return null;try{return e.activeElement||e.body}catch{return e.body}}var zt=/[\n"\\]/g;function Bt(e){return e.replace(zt,function(e){return`\\`+e.charCodeAt(0).toString(16)+` `})}function Vt(e,t,n,r,i,a,o,s){e.name=``,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`?e.type=o:e.removeAttribute(`type`),t==null?o!==`submit`&&o!==`reset`||e.removeAttribute(`value`):o===`number`?(t===0&&e.value===``||e.value!=t)&&(e.value=``+I(t)):e.value!==``+I(t)&&(e.value=``+I(t)),t==null?n==null?r!=null&&e.removeAttribute(`value`):Ut(e,o,I(n)):Ut(e,o,I(t)),i==null&&a!=null&&(e.defaultChecked=!!a),i!=null&&(e.checked=i&&typeof i!=`function`&&typeof i!=`symbol`),s!=null&&typeof s!=`function`&&typeof s!=`symbol`&&typeof s!=`boolean`?e.name=``+I(s):e.removeAttribute(`name`)}function Ht(e,t,n,r,i,a,o,s){if(a!=null&&typeof a!=`function`&&typeof a!=`symbol`&&typeof a!=`boolean`&&(e.type=a),t!=null||n!=null){if(!(a!==`submit`&&a!==`reset`||t!=null)){It(e);return}n=n==null?``:``+I(n),t=t==null?n:``+I(t),s||t===e.value||(e.value=t),e.defaultValue=t}r??=i,r=typeof r!=`function`&&typeof r!=`symbol`&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,o!=null&&typeof o!=`function`&&typeof o!=`symbol`&&typeof o!=`boolean`&&(e.name=o),It(e)}function Ut(e,t,n){t===`number`&&Rt(e.ownerDocument)===e||e.defaultValue===``+n||(e.defaultValue=``+n)}function Wt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t[`$`+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty(`$`+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=``+I(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Gt(e,t,n){if(t!=null&&(t=``+I(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n==null?``:``+I(n)}function Kt(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(i(92));if(ae(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}n??=``,t=n}n=I(t),e.defaultValue=n,r=e.textContent,r===n&&r!==``&&r!==null&&(e.value=r),It(e)}function qt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jt=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function Yt(e,t,n){var r=t.indexOf(`--`)===0;n==null||typeof n==`boolean`||n===``?r?e.setProperty(t,``):t===`float`?e.cssFloat=``:e[t]=``:r?e.setProperty(t,n):typeof n!=`number`||n===0||Jt.has(t)?t===`float`?e.cssFloat=n:e[t]=(``+n).trim():e[t]=n+`px`}function Xt(e,t,n){if(t!=null&&typeof t!=`object`)throw Error(i(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf(`--`)===0?e.setProperty(r,``):r===`float`?e.cssFloat=``:e[r]=``);for(var a in t)r=t[a],t.hasOwnProperty(a)&&n[a]!==r&&Yt(e,a,r)}else for(var o in t)t.hasOwnProperty(o)&&Yt(e,o,t[o])}function Zt(e){if(e.indexOf(`-`)===-1)return!1;switch(e){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var Qt=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),$t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function en(e){return $t.test(``+e)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:e}function tn(){}var nn=null;function rn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var an=null,on=null;function sn(e){var t=yt(e);if(t&&(e=t.stateNode)){var n=e[ut]||null;a:switch(e=t.stateNode,t.type){case`input`:if(Vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type===`radio`&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll(`input[name="`+Bt(``+t)+`"][type="radio"]`),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=r[ut]||null;if(!a)throw Error(i(90));Vt(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&Lt(r)}break a;case`textarea`:Gt(e,n.value,n.defaultValue);break a;case`select`:t=n.value,t!=null&&Wt(e,!!n.multiple,t,!1)}}}var cn=!1;function ln(e,t,n){if(cn)return e(t,n);cn=!0;try{return e(t)}finally{if(cn=!1,(an!==null||on!==null)&&(Uu(),an&&(t=an,e=on,on=an=null,sn(t),e)))for(t=0;t<e.length;t++)sn(e[t])}}function un(e,t){var n=e.stateNode;if(n===null)return null;var r=n[ut]||null;if(r===null)return null;n=r[t];a:switch(t){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(r=!r.disabled)||(e=e.type,r=!(e===`button`||e===`input`||e===`select`||e===`textarea`)),e=!r;break a;default:e=!1}if(e)return null;if(n&&typeof n!=`function`)throw Error(i(231,t,typeof n));return n}var dn=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),fn=!1;if(dn)try{var pn={};Object.defineProperty(pn,`passive`,{get:function(){fn=!0}}),window.addEventListener(`test`,pn,pn),window.removeEventListener(`test`,pn,pn)}catch{fn=!1}var mn=null,hn=null,gn=null;function _n(){if(gn)return gn;var e,t=hn,n=t.length,r,i=`value`in mn?mn.value:mn.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return gn=i.slice(e,1<r?1-r:void 0)}function vn(e){var t=e.keyCode;return`charCode`in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yn(){return!0}function bn(){return!1}function xn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented==null?!1===i.returnValue:i.defaultPrevented)?yn:bn,this.isPropagationStopped=bn,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!=`unknown`&&(e.returnValue=!1),this.isDefaultPrevented=yn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=`unknown`&&(e.cancelBubble=!0),this.isPropagationStopped=yn)},persist:function(){},isPersistent:yn}),t}var Sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cn=xn(Sn),wn=m({},Sn,{view:0,detail:0}),Tn=xn(wn),En,Dn,On,kn=m({},wn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return`movementX`in e?e.movementX:(e!==On&&(On&&e.type===`mousemove`?(En=e.screenX-On.screenX,Dn=e.screenY-On.screenY):Dn=En=0,On=e),En)},movementY:function(e){return`movementY`in e?e.movementY:Dn}}),An=xn(kn),jn=m({},kn,{dataTransfer:0}),Mn=xn(jn),Nn=m({},wn,{relatedTarget:0}),Pn=xn(Nn),Fn=m({},Sn,{animationName:0,elapsedTime:0,pseudoElement:0}),In=xn(Fn),Ln=m({},Sn,{clipboardData:function(e){return`clipboardData`in e?e.clipboardData:window.clipboardData}}),Rn=xn(Ln),zn=m({},Sn,{data:0}),Bn=xn(zn),Vn={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},Hn={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},Un={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function Wn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Un[e])?!!t[e]:!1}function Gn(){return Wn}var Kn=m({},wn,{key:function(e){if(e.key){var t=Vn[e.key]||e.key;if(t!==`Unidentified`)return t}return e.type===`keypress`?(e=vn(e),e===13?`Enter`:String.fromCharCode(e)):e.type===`keydown`||e.type===`keyup`?Hn[e.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gn,charCode:function(e){return e.type===`keypress`?vn(e):0},keyCode:function(e){return e.type===`keydown`||e.type===`keyup`?e.keyCode:0},which:function(e){return e.type===`keypress`?vn(e):e.type===`keydown`||e.type===`keyup`?e.keyCode:0}}),qn=xn(Kn),Jn=m({},kn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yn=xn(Jn),Xn=m({},wn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gn}),Zn=xn(Xn),Qn=m({},Sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$n=xn(Qn),er=m({},kn,{deltaX:function(e){return`deltaX`in e?e.deltaX:`wheelDeltaX`in e?-e.wheelDeltaX:0},deltaY:function(e){return`deltaY`in e?e.deltaY:`wheelDeltaY`in e?-e.wheelDeltaY:`wheelDelta`in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tr=xn(er),nr=m({},Sn,{newState:0,oldState:0}),rr=xn(nr),ir=[9,13,27,32],ar=dn&&`CompositionEvent`in window,or=null;dn&&`documentMode`in document&&(or=document.documentMode);var sr=dn&&`TextEvent`in window&&!or,cr=dn&&(!ar||or&&8<or&&11>=or),lr=` `,ur=!1;function dr(e,t){switch(e){case`keyup`:return ir.indexOf(t.keyCode)!==-1;case`keydown`:return t.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function fr(e){return e=e.detail,typeof e==`object`&&`data`in e?e.data:null}var pr=!1;function mr(e,t){switch(e){case`compositionend`:return fr(t);case`keypress`:return t.which===32?(ur=!0,lr):null;case`textInput`:return e=t.data,e===lr&&ur?null:e;default:return null}}function hr(e,t){if(pr)return e===`compositionend`||!ar&&dr(e,t)?(e=_n(),gn=hn=mn=null,pr=!1,e):null;switch(e){case`paste`:return null;case`keypress`:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case`compositionend`:return cr&&t.locale!==`ko`?null:t.data;default:return null}}var gr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t===`input`?!!gr[e.type]:t===`textarea`}function vr(e,t,n,r){an?on?on.push(r):on=[r]:an=r,t=$d(t,`onChange`),0<t.length&&(n=new Cn(`onChange`,`change`,null,n,r),e.push({event:n,listeners:t}))}var L=null,yr=null;function br(e){Gd(e,0)}function xr(e){var t=bt(e);if(Lt(t))return e}function Sr(e,t){if(e===`change`)return t}var Cr=!1;if(dn){var wr;if(dn){var Tr=`oninput`in document;if(!Tr){var Er=document.createElement(`div`);Er.setAttribute(`oninput`,`return;`),Tr=typeof Er.oninput==`function`}wr=Tr}else wr=!1;Cr=wr&&(!document.documentMode||9<document.documentMode)}function Dr(){L&&(L.detachEvent(`onpropertychange`,Or),yr=L=null)}function Or(e){if(e.propertyName===`value`&&xr(yr)){var t=[];vr(t,yr,e,rn(e)),ln(br,t)}}function kr(e,t,n){e===`focusin`?(Dr(),L=t,yr=n,L.attachEvent(`onpropertychange`,Or)):e===`focusout`&&Dr()}function Ar(e){if(e===`selectionchange`||e===`keyup`||e===`keydown`)return xr(yr)}function R(e,t){if(e===`click`)return xr(t)}function jr(e,t){if(e===`input`||e===`change`)return xr(t)}function Mr(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var Nr=typeof Object.is==`function`?Object.is:Mr;function Pr(e,t){if(Nr(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ce.call(t,i)||!Nr(e[i],t[i]))return!1}return!0}function Fr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ir(e,t){var n=Fr(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}a:{for(;n;){if(n.nextSibling){n=n.nextSibling;break a}n=n.parentNode}n=void 0}n=Fr(n)}}function Lr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Lr(e,t.parentNode):`contains`in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Rt(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href==`string`}catch{n=!1}if(n)e=t.contentWindow;else break;t=Rt(e.document)}return t}function zr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t===`input`&&(e.type===`text`||e.type===`search`||e.type===`tel`||e.type===`url`||e.type===`password`)||t===`textarea`||e.contentEditable===`true`)}var Br=dn&&`documentMode`in document&&11>=document.documentMode,Vr=null,Hr=null,Ur=null,Wr=!1;function Gr(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wr||Vr==null||Vr!==Rt(r)||(r=Vr,`selectionStart`in r&&zr(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ur&&Pr(Ur,r)||(Ur=r,r=$d(Hr,`onSelect`),0<r.length&&(t=new Cn(`onSelect`,`select`,null,t,n),e.push({event:t,listeners:r}),t.target=Vr)))}function Kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n[`Webkit`+e]=`webkit`+t,n[`Moz`+e]=`moz`+t,n}var qr={animationend:Kr(`Animation`,`AnimationEnd`),animationiteration:Kr(`Animation`,`AnimationIteration`),animationstart:Kr(`Animation`,`AnimationStart`),transitionrun:Kr(`Transition`,`TransitionRun`),transitionstart:Kr(`Transition`,`TransitionStart`),transitioncancel:Kr(`Transition`,`TransitionCancel`),transitionend:Kr(`Transition`,`TransitionEnd`)},Jr={},Yr={};dn&&(Yr=document.createElement(`div`).style,`AnimationEvent`in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),`TransitionEvent`in window||delete qr.transitionend.transition);function Xr(e){if(Jr[e])return Jr[e];if(!qr[e])return e;var t=qr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Yr)return Jr[e]=t[n];return e}var Zr=Xr(`animationend`),Qr=Xr(`animationiteration`),$r=Xr(`animationstart`),ei=Xr(`transitionrun`),ti=Xr(`transitionstart`),ni=Xr(`transitioncancel`),ri=Xr(`transitionend`),ii=new Map,ai=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);ai.push(`scrollEnd`);function oi(e,t){ii.set(e,t),Tt(t,[e])}var si=typeof reportError==`function`?reportError:function(e){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var t=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof e==`object`&&e&&typeof e.message==`string`?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,e);return}console.error(e)},ci=[],li=0,ui=0;function di(){for(var e=li,t=ui=li=0;t<e;){var n=ci[t];ci[t++]=null;var r=ci[t];ci[t++]=null;var i=ci[t];ci[t++]=null;var a=ci[t];if(ci[t++]=null,r!==null&&i!==null){var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}a!==0&&hi(n,i,a)}}function fi(e,t,n,r){ci[li++]=e,ci[li++]=t,ci[li++]=n,ci[li++]=r,ui|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function pi(e,t,n,r){return fi(e,t,n,r),gi(e)}function mi(e,t){return fi(e,null,null,t),gi(e)}function hi(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var i=!1,a=e.return;a!==null;)a.childLanes|=n,r=a.alternate,r!==null&&(r.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(i=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,i&&t!==null&&(i=31-Be(n),e=a.hiddenUpdates,r=e[i],r===null?e[i]=[t]:r.push(t),t.lane=n|536870912),a):null}function gi(e){if(50<Pu)throw Pu=0,Fu=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var _i={};function vi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yi(e,t,n,r){return new vi(e,t,n,r)}function bi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xi(e,t){var n=e.alternate;return n===null?(n=yi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Si(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ci(e,t,n,r,a,o){var s=0;if(r=e,typeof e==`function`)bi(e)&&(s=1);else if(typeof e==`string`)s=vp(e,n,P.current)?26:e===`html`||e===`head`||e===`body`?27:5;else a:switch(e){case ee:return e=yi(31,n,t,a),e.elementType=ee,e.lanes=o,e;case y:return wi(n.children,a,o,t);case b:s=8,a|=24;break;case x:return e=yi(12,n,t,a|2),e.elementType=x,e.lanes=o,e;case T:return e=yi(13,n,t,a),e.elementType=T,e.lanes=o,e;case E:return e=yi(19,n,t,a),e.elementType=E,e.lanes=o,e;default:if(typeof e==`object`&&e)switch(e.$$typeof){case C:s=10;break a;case S:s=9;break a;case w:s=11;break a;case D:s=14;break a;case O:s=16,r=null;break a}s=29,n=Error(i(130,e===null?`null`:typeof e,``)),r=null}return t=yi(s,n,t,a),t.elementType=e,t.type=r,t.lanes=o,t}function wi(e,t,n,r){return e=yi(7,e,r,t),e.lanes=n,e}function Ti(e,t,n){return e=yi(6,e,null,t),e.lanes=n,e}function Ei(e){var t=yi(18,null,null,0);return t.stateNode=e,t}function Di(e,t,n){return t=yi(4,e.children===null?[]:e.children,e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Oi=new WeakMap;function ki(e,t){if(typeof e==`object`&&e){var n=Oi.get(e);return n===void 0?(t={value:e,source:t,stack:Se(t)},Oi.set(e,t),t):n}return{value:e,source:t,stack:Se(t)}}var Ai=[],ji=0,Mi=null,Ni=0,Pi=[],Fi=0,Ii=null,Li=1,Ri=``;function zi(e,t){Ai[ji++]=Ni,Ai[ji++]=Mi,Mi=e,Ni=t}function Bi(e,t,n){Pi[Fi++]=Li,Pi[Fi++]=Ri,Pi[Fi++]=Ii,Ii=e;var r=Li;e=Ri;var i=32-Be(r)-1;r&=~(1<<i),n+=1;var a=32-Be(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Li=1<<32-Be(t)+i|n<<i|r,Ri=a+e}else Li=1<<a|n<<i|r,Ri=e}function Vi(e){e.return!==null&&(zi(e,1),Bi(e,1,0))}function Hi(e){for(;e===Mi;)Mi=Ai[--ji],Ai[ji]=null,Ni=Ai[--ji],Ai[ji]=null;for(;e===Ii;)Ii=Pi[--Fi],Pi[Fi]=null,Ri=Pi[--Fi],Pi[Fi]=null,Li=Pi[--Fi],Pi[Fi]=null}function Ui(e,t){Pi[Fi++]=Li,Pi[Fi++]=Ri,Pi[Fi++]=Ii,Li=t.id,Ri=t.overflow,Ii=e}var Wi=null,Gi=null,Ki=!1,qi=null,Ji=!1,Yi=Error(i(519));function Xi(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``));throw na(ki(t,e)),Yi}function Zi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[lt]=e,t[ut]=r,n){case`dialog`:Kd(`cancel`,t),Kd(`close`,t);break;case`iframe`:case`object`:case`embed`:Kd(`load`,t);break;case`video`:case`audio`:for(n=0;n<Ud.length;n++)Kd(Ud[n],t);break;case`source`:Kd(`error`,t);break;case`img`:case`image`:case`link`:Kd(`error`,t),Kd(`load`,t);break;case`details`:Kd(`toggle`,t);break;case`input`:Kd(`invalid`,t),Ht(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case`select`:Kd(`invalid`,t);break;case`textarea`:Kd(`invalid`,t),Kt(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!=`string`&&typeof n!=`number`&&typeof n!=`bigint`||t.textContent===``+n||!0===r.suppressHydrationWarning||sf(t.textContent,n)?(r.popover!=null&&(Kd(`beforetoggle`,t),Kd(`toggle`,t)),r.onScroll!=null&&Kd(`scroll`,t),r.onScrollEnd!=null&&Kd(`scrollend`,t),r.onClick!=null&&(t.onclick=tn),t=!0):t=!1,t||Xi(e,!0)}function Qi(e){for(Wi=e.return;Wi;)switch(Wi.tag){case 5:case 31:case 13:Ji=!1;return;case 27:case 3:Ji=!0;return;default:Wi=Wi.return}}function $i(e){if(e!==Wi)return!1;if(!Ki)return Qi(e),Ki=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!==`form`&&n!==`button`)||yf(e.type,e.memoizedProps)),n=!n),n&&Gi&&Xi(e),Qi(e),t===13){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Gi=zf(e)}else if(t===31){if(e=e.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(317));Gi=zf(e)}else t===27?(t=Gi,Df(e.type)?(e=Rf,Rf=null,Gi=e):Gi=t):Gi=Wi?Lf(e.stateNode.nextSibling):null;return!0}function ea(){Gi=Wi=null,Ki=!1}function ta(){var e=qi;return e!==null&&(xu===null?xu=e:xu.push.apply(xu,e),qi=null),e}function na(e){qi===null?qi=[e]:qi.push(e)}var ra=M(null),ia=null,aa=null;function oa(e,t,n){N(ra,t._currentValue),t._currentValue=n}function sa(e){e._currentValue=ra.current,le(ra)}function ca(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t?r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t):(e.childLanes|=t,r!==null&&(r.childLanes|=t)),e===n)break;e=e.return}}function la(e,t,n,r){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){var s=a.child;o=o.firstContext;a:for(;o!==null;){var c=o;o=a;for(var l=0;l<t.length;l++)if(c.context===t[l]){o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),ca(o.return,n,e),r||(s=null);break a}o=c.next}}else if(a.tag===18){if(s=a.return,s===null)throw Error(i(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),ca(s,n,e),s=null}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}}function ua(e,t,n,r){e=null;for(var a=t,o=!1;a!==null;){if(!o){if(a.flags&524288)o=!0;else if(a.flags&262144)break}if(a.tag===10){var s=a.alternate;if(s===null)throw Error(i(387));if(s=s.memoizedProps,s!==null){var c=a.type;Nr(a.pendingProps.value,s.value)||(e===null?e=[c]:e.push(c))}}else if(a===de.current){if(s=a.alternate,s===null)throw Error(i(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e===null?e=[Dp]:e.push(Dp))}a=a.return}e!==null&&la(t,e,n,r),t.flags|=262144}function da(e){for(e=e.firstContext;e!==null;){if(!Nr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function fa(e){ia=e,aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function pa(e){return ha(ia,e)}function ma(e,t){return ia===null&&fa(e),ha(e,t)}function ha(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},aa===null){if(e===null)throw Error(i(308));aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else aa=aa.next=t;return n}var ga=typeof AbortController<`u`?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},_a=t.unstable_scheduleCallback,va=t.unstable_NormalPriority,ya={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ba(){return{controller:new ga,data:new Map,refCount:0}}function xa(e){e.refCount--,e.refCount===0&&_a(va,function(){e.controller.abort()})}var Sa=null,Ca=0,wa=0,Ta=null;function Ea(e,t){if(Sa===null){var n=Sa=[];Ca=0,wa=Fd(),Ta={status:`pending`,value:void 0,then:function(e){n.push(e)}}}return Ca++,t.then(Da,Da),t}function Da(){if(--Ca===0&&Sa!==null){Ta!==null&&(Ta.status=`fulfilled`);var e=Sa;Sa=null,wa=0,Ta=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Oa(e,t){var n=[],r={status:`pending`,value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status=`fulfilled`,r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status=`rejected`,r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}var ka=A.S;A.S=function(e,t){wu=Oe(),typeof t==`object`&&t&&typeof t.then==`function`&&Ea(e,t),ka!==null&&ka(e,t)};var Aa=M(null);function ja(){var e=Aa.current;return e===null?au.pooledCache:e}function Ma(e,t){t===null?N(Aa,Aa.current):N(Aa,t.pool)}function Na(){var e=ja();return e===null?null:{parent:ya._currentValue,pool:e}}var Pa=Error(i(460)),Fa=Error(i(474)),Ia=Error(i(542)),La={then:function(){}};function Ra(e){return e=e.status,e===`fulfilled`||e===`rejected`}function za(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(tn,tn),t=n),t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ua(e),e;default:if(typeof t.status==`string`)t.then(tn,tn);else{if(e=au,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status=`pending`,e.then(function(e){if(t.status===`pending`){var n=t;n.status=`fulfilled`,n.value=e}},function(e){if(t.status===`pending`){var n=t;n.status=`rejected`,n.reason=e}})}switch(t.status){case`fulfilled`:return t.value;case`rejected`:throw e=t.reason,Ua(e),e}throw Va=t,Pa}}function Ba(e){try{var t=e._init;return t(e._payload)}catch(e){throw typeof e==`object`&&e&&typeof e.then==`function`?(Va=e,Pa):e}}var Va=null;function Ha(){if(Va===null)throw Error(i(459));var e=Va;return Va=null,e}function Ua(e){if(e===Pa||e===Ia)throw Error(i(483))}var Wa=null,Ga=0;function Ka(e){var t=Ga;return Ga+=1,Wa===null&&(Wa=[]),za(Wa,e,t)}function qa(e,t){t=t.props.ref,e.ref=t===void 0?null:t}function Ja(e,t){throw t.$$typeof===g?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e===`[object Object]`?`object with keys {`+Object.keys(t).join(`, `)+`}`:e)))}function Ya(e){function t(t,n){if(e){var r=t.deletions;r===null?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;r!==null;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;e!==null;)e.key===null?t.set(e.index,e):t.set(e.key,e),e=e.sibling;return t}function a(e,t){return e=xi(e,t),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?(r=t.alternate,r===null?(t.flags|=67108866,n):(r=r.index,r<n?(t.flags|=67108866,n):r)):(t.flags|=1048576,n)}function s(t){return e&&t.alternate===null&&(t.flags|=67108866),t}function c(e,t,n,r){return t===null||t.tag!==6?(t=Ti(n,e.mode,r),t.return=e,t):(t=a(t,n),t.return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):t!==null&&(t.elementType===i||typeof i==`object`&&i&&i.$$typeof===O&&Ba(i)===t.type)?(t=a(t,n.props),qa(t,n),t.return=e,t):(t=Ci(n.type,n.key,n.props,null,e.mode,r),qa(t,n),t.return=e,t)}function u(e,t,n,r){return t===null||t.tag!==4||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Di(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[]),t.return=e,t)}function d(e,t,n,r,i){return t===null||t.tag!==7?(t=wi(n,e.mode,r,i),t.return=e,t):(t=a(t,n),t.return=e,t)}function f(e,t,n){if(typeof t==`string`&&t!==``||typeof t==`number`||typeof t==`bigint`)return t=Ti(``+t,e.mode,n),t.return=e,t;if(typeof t==`object`&&t){switch(t.$$typeof){case _:return n=Ci(t.type,t.key,t.props,null,e.mode,n),qa(n,t),n.return=e,n;case v:return t=Di(t,e.mode,n),t.return=e,t;case O:return t=Ba(t),f(e,t,n)}if(ae(t)||k(t))return t=wi(t,e.mode,n,null),t.return=e,t;if(typeof t.then==`function`)return f(e,Ka(t),n);if(t.$$typeof===C)return f(e,ma(e,t),n);Ja(e,t)}return null}function p(e,t,n,r){var i=t===null?null:t.key;if(typeof n==`string`&&n!==``||typeof n==`number`||typeof n==`bigint`)return i===null?c(e,t,``+n,r):null;if(typeof n==`object`&&n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case v:return n.key===i?u(e,t,n,r):null;case O:return n=Ba(n),p(e,t,n,r)}if(ae(n)||k(n))return i===null?d(e,t,n,r,null):null;if(typeof n.then==`function`)return p(e,t,Ka(n),r);if(n.$$typeof===C)return p(e,t,ma(e,n),r);Ja(e,n)}return null}function m(e,t,n,r,i){if(typeof r==`string`&&r!==``||typeof r==`number`||typeof r==`bigint`)return e=e.get(n)||null,c(t,e,``+r,i);if(typeof r==`object`&&r){switch(r.$$typeof){case _:return e=e.get(r.key===null?n:r.key)||null,l(t,e,r,i);case v:return e=e.get(r.key===null?n:r.key)||null,u(t,e,r,i);case O:return r=Ba(r),m(e,t,n,r,i)}if(ae(r)||k(r))return e=e.get(n)||null,d(t,e,r,i,null);if(typeof r.then==`function`)return m(e,t,n,Ka(r),i);if(r.$$typeof===C)return m(e,t,n,ma(t,r),i);Ja(t,r)}return null}function h(i,a,s,c){for(var l=null,u=null,d=a,h=a=0,g=null;d!==null&&h<s.length;h++){d.index>h?(g=d,d=null):g=d.sibling;var _=p(i,d,s[h],c);if(_===null){d===null&&(d=g);break}e&&d&&_.alternate===null&&t(i,d),a=o(_,a,h),u===null?l=_:u.sibling=_,u=_,d=g}if(h===s.length)return n(i,d),Ki&&zi(i,h),l;if(d===null){for(;h<s.length;h++)d=f(i,s[h],c),d!==null&&(a=o(d,a,h),u===null?l=d:u.sibling=d,u=d);return Ki&&zi(i,h),l}for(d=r(d);h<s.length;h++)g=m(d,i,h,s[h],c),g!==null&&(e&&g.alternate!==null&&d.delete(g.key===null?h:g.key),a=o(g,a,h),u===null?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),Ki&&zi(i,h),l}function g(a,s,c,l){if(c==null)throw Error(i(151));for(var u=null,d=null,h=s,g=s=0,_=null,v=c.next();h!==null&&!v.done;g++,v=c.next()){h.index>g?(_=h,h=null):_=h.sibling;var y=p(a,h,v.value,l);if(y===null){h===null&&(h=_);break}e&&h&&y.alternate===null&&t(a,h),s=o(y,s,g),d===null?u=y:d.sibling=y,d=y,h=_}if(v.done)return n(a,h),Ki&&zi(a,g),u;if(h===null){for(;!v.done;g++,v=c.next())v=f(a,v.value,l),v!==null&&(s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return Ki&&zi(a,g),u}for(h=r(h);!v.done;g++,v=c.next())v=m(h,a,g,v.value,l),v!==null&&(e&&v.alternate!==null&&h.delete(v.key===null?g:v.key),s=o(v,s,g),d===null?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),Ki&&zi(a,g),u}function b(e,r,o,c){if(typeof o==`object`&&o&&o.type===y&&o.key===null&&(o=o.props.children),typeof o==`object`&&o){switch(o.$$typeof){case _:a:{for(var l=o.key;r!==null;){if(r.key===l){if(l=o.type,l===y){if(r.tag===7){n(e,r.sibling),c=a(r,o.props.children),c.return=e,e=c;break a}}else if(r.elementType===l||typeof l==`object`&&l&&l.$$typeof===O&&Ba(l)===r.type){n(e,r.sibling),c=a(r,o.props),qa(c,o),c.return=e,e=c;break a}n(e,r);break}else t(e,r);r=r.sibling}o.type===y?(c=wi(o.props.children,e.mode,c,o.key),c.return=e,e=c):(c=Ci(o.type,o.key,o.props,null,e.mode,c),qa(c,o),c.return=e,e=c)}return s(e);case v:a:{for(l=o.key;r!==null;){if(r.key===l)if(r.tag===4&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),c=a(r,o.children||[]),c.return=e,e=c;break a}else{n(e,r);break}else t(e,r);r=r.sibling}c=Di(o,e.mode,c),c.return=e,e=c}return s(e);case O:return o=Ba(o),b(e,r,o,c)}if(ae(o))return h(e,r,o,c);if(k(o)){if(l=k(o),typeof l!=`function`)throw Error(i(150));return o=l.call(o),g(e,r,o,c)}if(typeof o.then==`function`)return b(e,r,Ka(o),c);if(o.$$typeof===C)return b(e,r,ma(e,o),c);Ja(e,o)}return typeof o==`string`&&o!==``||typeof o==`number`||typeof o==`bigint`?(o=``+o,r!==null&&r.tag===6?(n(e,r.sibling),c=a(r,o),c.return=e,e=c):(n(e,r),c=Ti(o,e.mode,c),c.return=e,e=c),s(e)):n(e,r)}return function(e,t,n,r){try{Ga=0;var i=b(e,t,n,r);return Wa=null,i}catch(t){if(t===Pa||t===Ia)throw t;var a=yi(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var Xa=Ya(!0),Za=Ya(!1),Qa=!1;function $a(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function to(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function no(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,iu&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=gi(e),hi(e,null,n),t}return fi(e,r,t,n),gi(e)}function ro(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,n&4194048)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,nt(e,n)}}function io(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ao=!1;function oo(){if(ao){var e=Ta;if(e!==null)throw e}}function so(e,t,n,r){ao=!1;var i=e.updateQueue;Qa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,o===null?a=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==o&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,u=l=c=null,s=a;do{var f=s.lane&-536870913,p=f!==s.lane;if(p?(su&f)===f:(r&f)===f){f!==0&&f===wa&&(ao=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});a:{var h=e,g=s;f=t;var _=n;switch(g.tag){case 1:if(h=g.payload,typeof h==`function`){d=h.call(_,d,f);break a}d=h;break a;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,f=typeof h==`function`?h.call(_,d,f):h,f==null)break a;d=m({},d,f);break a;case 2:Qa=!0}}f=s.callback,f!==null&&(e.flags|=64,p&&(e.flags|=8192),p=i.callbacks,p===null?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=p,c=d):u=u.next=p,o|=f;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,a===null&&(i.shared.lanes=0),hu|=o,e.lanes=o,e.memoizedState=d}}function co(e,t){if(typeof e!=`function`)throw Error(i(191,e));e.call(t)}function lo(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)co(n[e],t)}var uo=M(null),fo=M(0);function po(e,t){e=pu,N(fo,e),N(uo,t),pu=e|t.baseLanes}function mo(){N(fo,pu),N(uo,uo.current)}function ho(){pu=fo.current,le(uo),le(fo)}var go=M(null),_o=null;function vo(e){var t=e.alternate;N(Co,Co.current&1),N(go,e),_o===null&&(t===null||uo.current!==null||t.memoizedState!==null)&&(_o=e)}function yo(e){N(Co,Co.current),N(go,e),_o===null&&(_o=e)}function bo(e){e.tag===22?(N(Co,Co.current),N(go,e),_o===null&&(_o=e)):xo(e)}function xo(){N(Co,Co.current),N(go,go.current)}function So(e){le(go),_o===e&&(_o=null),le(Co)}var Co=M(0);function wo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Pf(n)||Ff(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder===`forwards`||t.memoizedProps.revealOrder===`backwards`||t.memoizedProps.revealOrder===`unstable_legacy-backwards`||t.memoizedProps.revealOrder===`together`)){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var To=0,z=null,Eo=null,Do=null,Oo=!1,ko=!1,Ao=!1,jo=0,Mo=0,No=null,Po=0;function Fo(){throw Error(i(321))}function Io(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Nr(e[n],t[n]))return!1;return!0}function Lo(e,t,n,r,i,a){return To=a,z=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?nc:rc,Ao=!1,a=n(r,i),Ao=!1,ko&&(a=zo(t,n,r,i)),Ro(e),a}function Ro(e){A.H=tc;var t=Eo!==null&&Eo.next!==null;if(To=0,Do=Eo=z=null,Oo=!1,Mo=0,No=null,t)throw Error(i(300));e===null||bc||(e=e.dependencies,e!==null&&da(e)&&(bc=!0))}function zo(e,t,n,r){z=e;var a=0;do{if(ko&&(No=null),Mo=0,ko=!1,25<=a)throw Error(i(301));if(a+=1,Do=Eo=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}A.H=ic,o=t(n,r)}while(ko);return o}function Bo(){var e=A.H,t=e.useState()[0];return t=typeof t.then==`function`?qo(t):t,e=e.useState()[0],(Eo===null?null:Eo.memoizedState)!==e&&(z.flags|=1024),t}function Vo(){var e=jo!==0;return jo=0,e}function Ho(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Uo(e){if(Oo){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Oo=!1}To=0,Do=Eo=z=null,ko=!1,Mo=jo=0,No=null}function Wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Do===null?z.memoizedState=Do=e:Do=Do.next=e,Do}function Go(){if(Eo===null){var e=z.alternate;e=e===null?null:e.memoizedState}else e=Eo.next;var t=Do===null?z.memoizedState:Do.next;if(t!==null)Do=t,Eo=e;else{if(e===null)throw z.alternate===null?Error(i(467)):Error(i(310));Eo=e,e={memoizedState:Eo.memoizedState,baseState:Eo.baseState,baseQueue:Eo.baseQueue,queue:Eo.queue,next:null},Do===null?z.memoizedState=Do=e:Do=Do.next=e}return Do}function Ko(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qo(e){var t=Mo;return Mo+=1,No===null&&(No=[]),e=za(No,e,t),t=z,(Do===null?t.memoizedState:Do.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?nc:rc),e}function Jo(e){if(typeof e==`object`&&e){if(typeof e.then==`function`)return qo(e);if(e.$$typeof===C)return pa(e)}throw Error(i(438,String(e)))}function Yo(e){var t=null,n=z.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=z.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(t??={data:[],index:0},n===null&&(n=Ko(),z.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=te;return t.index++,n}function Xo(e,t){return typeof t==`function`?t(e):t}function Zo(e){var t=Go();return Qo(t,Eo,e)}function Qo(e,t,n){var r=e.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var a=e.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}t.baseQueue=a=o,r.pending=null}if(o=e.baseState,a===null)e.memoizedState=o;else{t=a.next;var c=s=null,l=null,u=t,d=!1;do{var f=u.lane&-536870913;if(f===u.lane?(To&f)===f:(su&f)===f){var p=u.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===wa&&(d=!0);else if((To&p)===p){u=u.next,p===wa&&(d=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=f,s=o):l=l.next=f,z.lanes|=p,hu|=p;f=u.action,Ao&&n(o,f),o=u.hasEagerState?u.eagerState:n(o,f)}else p={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(c=l=p,s=o):l=l.next=p,z.lanes|=f,hu|=f;u=u.next}while(u!==null&&u!==t);if(l===null?s=o:l.next=c,!Nr(o,e.memoizedState)&&(bc=!0,d&&(n=Ta,n!==null)))throw n;e.memoizedState=o,e.baseState=s,e.baseQueue=l,r.lastRenderedState=o}return a===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function $o(e){var t=Go(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(a!==null){n.pending=null;var s=a=a.next;do o=e(o,s.action),s=s.next;while(s!==a);Nr(o,t.memoizedState)||(bc=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function es(e,t,n){var r=z,a=Go(),o=Ki;if(o){if(n===void 0)throw Error(i(407));n=n()}else n=t();var s=!Nr((Eo||a).memoizedState,n);if(s&&(a.memoizedState=n,bc=!0),a=a.queue,Ds(rs.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||Do!==null&&Do.memoizedState.tag&1){if(r.flags|=2048,Ss(9,{destroy:void 0},ns.bind(null,r,a,n,t),null),au===null)throw Error(i(349));o||To&127||ts(r,t,n)}return n}function ts(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=z.updateQueue,t===null?(t=Ko(),z.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ns(e,t,n,r){t.value=n,t.getSnapshot=r,os(t)&&ss(e)}function rs(e,t,n){return n(function(){os(t)&&ss(e)})}function os(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nr(e,n)}catch{return!0}}function ss(e){var t=mi(e,2);t!==null&&Ru(t,e,2)}function cs(e){var t=Wo();if(typeof e==`function`){var n=e;if(e=n(),Ao){ze(!0);try{n()}finally{ze(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:e},t}function ls(e,t,n,r){return e.baseState=n,Qo(e,Eo,typeof r==`function`?r:Xo)}function us(e,t,n,r,a){if(Qs(e))throw Error(i(485));if(e=t.action,e!==null){var o={payload:a,action:e,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};A.T===null?o.isTransition=!1:n(!0),r(o),n=t.pending,n===null?(o.next=t.pending=o,ds(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ds(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=A.T,o={};A.T=o;try{var s=n(i,r),c=A.S;c!==null&&c(o,s),fs(e,t,s)}catch(n){ms(e,t,n)}finally{a!==null&&o.types!==null&&(a.types=o.types),A.T=a}}else try{a=n(i,r),fs(e,t,a)}catch(n){ms(e,t,n)}}function fs(e,t,n){typeof n==`object`&&n&&typeof n.then==`function`?n.then(function(n){ps(e,t,n)},function(n){return ms(e,t,n)}):ps(e,t,n)}function ps(e,t,n){t.status=`fulfilled`,t.value=n,hs(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ds(e,n)))}function ms(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status=`rejected`,t.reason=n,hs(t),t=t.next;while(t!==r)}e.action=null}function hs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function gs(e,t){return t}function _s(e,t){if(Ki){var n=au.formState;if(n!==null){a:{var r=z;if(Ki){if(Gi){b:{for(var i=Gi,a=Ji;i.nodeType!==8;){if(!a){i=null;break b}if(i=Lf(i.nextSibling),i===null){i=null;break b}}a=i.data,i=a===`F!`||a===`F`?i:null}if(i){Gi=Lf(i.nextSibling),r=i.data===`F!`;break a}}Xi(r)}r=!1}r&&(t=n[0])}}return n=Wo(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:t},n.queue=r,n=Ys.bind(null,z,r),r.dispatch=n,r=cs(!1),a=Zs.bind(null,z,!1,r.queue),r=Wo(),i={state:t,dispatch:null,action:e,pending:null},r.queue=i,n=us.bind(null,z,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function vs(e){var t=Go();return ys(t,Eo,e)}function ys(e,t,n){if(t=Qo(e,t,gs)[0],e=Zo(Xo)[0],typeof t==`object`&&t&&typeof t.then==`function`)try{var r=qo(t)}catch(e){throw e===Pa?Ia:e}else r=t;t=Go();var i=t.queue,a=i.dispatch;return n!==t.memoizedState&&(z.flags|=2048,Ss(9,{destroy:void 0},bs.bind(null,i,n),null)),[r,a,e]}function bs(e,t){e.action=t}function xs(e){var t=Go(),n=Eo;if(n!==null)return ys(t,n,e);Go(),t=t.memoizedState,n=Go();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ss(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=z.updateQueue,t===null&&(t=Ko(),z.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Cs(){return Go().memoizedState}function ws(e,t,n,r){var i=Wo();z.flags|=e,i.memoizedState=Ss(1|t,{destroy:void 0},n,r===void 0?null:r)}function Ts(e,t,n,r){var i=Go();r=r===void 0?null:r;var a=i.memoizedState.inst;Eo!==null&&r!==null&&Io(r,Eo.memoizedState.deps)?i.memoizedState=Ss(t,a,n,r):(z.flags|=e,i.memoizedState=Ss(1|t,a,n,r))}function Es(e,t){ws(8390656,8,e,t)}function Ds(e,t){Ts(2048,8,e,t)}function Os(e){z.flags|=4;var t=z.updateQueue;if(t===null)t=Ko(),z.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function ks(e){var t=Go().memoizedState;return Os({ref:t,nextImpl:e}),function(){if(iu&2)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function As(e,t){return Ts(4,2,e,t)}function js(e,t){return Ts(4,4,e,t)}function Ms(e,t){if(typeof t==`function`){e=e();var n=t(e);return function(){typeof n==`function`?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ns(e,t,n){n=n==null?null:n.concat([e]),Ts(4,4,Ms.bind(null,t,e),n)}function Ps(){}function Fs(e,t){var n=Go();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Is(e,t){var n=Go();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Io(t,r[1]))return r[0];if(r=e(),Ao){ze(!0);try{e()}finally{ze(!1)}}return n.memoizedState=[r,t],r}function Ls(e,t,n){return n===void 0||To&1073741824&&!(su&261930)?e.memoizedState=t:(e.memoizedState=n,e=Lu(),z.lanes|=e,hu|=e,n)}function Rs(e,t,n,r){return Nr(n,t)?n:uo.current===null?!(To&42)||To&1073741824&&!(su&261930)?(bc=!0,e.memoizedState=n):(e=Lu(),z.lanes|=e,hu|=e,t):(e=Ls(e,n,r),Nr(e,t)||(bc=!0),e)}function zs(e,t,n,r,i){var a=j.p;j.p=a!==0&&8>a?a:8;var o=A.T,s={};A.T=s,Zs(e,!1,t,n);try{var c=i(),l=A.S;if(l!==null&&l(s,c),typeof c==`object`&&c&&typeof c.then==`function`){var u=Oa(c,r);Xs(e,t,u,Iu(e))}else Xs(e,t,r,Iu(e))}catch(n){Xs(e,t,{then:function(){},status:`rejected`,reason:n},Iu())}finally{j.p=a,o!==null&&s.types!==null&&(o.types=s.types),A.T=o}}function Bs(){}function Vs(e,t,n,r){if(e.tag!==5)throw Error(i(476));var a=Hs(e).queue;zs(e,a,t,oe,n===null?Bs:function(){return Us(e),n(r)})}function Hs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:oe},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Us(e){var t=Hs(e);t.next===null&&(t=e.alternate.memoizedState),Xs(e,t.next.queue,{},Iu())}function Ws(){return pa(Dp)}function Gs(){return Go().memoizedState}function Ks(){return Go().memoizedState}function qs(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Iu();e=to(n);var r=no(t,e,n);r!==null&&(Ru(r,t,n),ro(r,t,n)),t={cache:ba()},e.payload=t;return}t=t.return}}function Js(e,t,n){var r=Iu();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Qs(e)?$s(t,n):(n=pi(e,t,n,r),n!==null&&(Ru(n,e,r),ec(n,t,r)))}function Ys(e,t,n){var r=Iu();Xs(e,t,n,r)}function Xs(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qs(e))$s(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Nr(s,o))return fi(e,t,i,0),au===null&&di(),!1}catch{}if(n=pi(e,t,i,r),n!==null)return Ru(n,e,r),ec(n,t,r),!0}return!1}function Zs(e,t,n,r){if(r={lane:2,revertLane:Fd(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Qs(e)){if(t)throw Error(i(479))}else t=pi(e,n,r,2),t!==null&&Ru(t,e,2)}function Qs(e){var t=e.alternate;return e===z||t!==null&&t===z}function $s(e,t){ko=Oo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ec(e,t,n){if(n&4194048){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,nt(e,n)}}var tc={readContext:pa,use:Jo,useCallback:Fo,useContext:Fo,useEffect:Fo,useImperativeHandle:Fo,useLayoutEffect:Fo,useInsertionEffect:Fo,useMemo:Fo,useReducer:Fo,useRef:Fo,useState:Fo,useDebugValue:Fo,useDeferredValue:Fo,useTransition:Fo,useSyncExternalStore:Fo,useId:Fo,useHostTransitionStatus:Fo,useFormState:Fo,useActionState:Fo,useOptimistic:Fo,useMemoCache:Fo,useCacheRefresh:Fo};tc.useEffectEvent=Fo;var nc={readContext:pa,use:Jo,useCallback:function(e,t){return Wo().memoizedState=[e,t===void 0?null:t],e},useContext:pa,useEffect:Es,useImperativeHandle:function(e,t,n){n=n==null?null:n.concat([e]),ws(4194308,4,Ms.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ws(4194308,4,e,t)},useInsertionEffect:function(e,t){ws(4,2,e,t)},useMemo:function(e,t){var n=Wo();t=t===void 0?null:t;var r=e();if(Ao){ze(!0);try{e()}finally{ze(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Wo();if(n!==void 0){var i=n(t);if(Ao){ze(!0);try{n(t)}finally{ze(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Js.bind(null,z,e),[r.memoizedState,e]},useRef:function(e){var t=Wo();return e={current:e},t.memoizedState=e},useState:function(e){e=cs(e);var t=e.queue,n=Ys.bind(null,z,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ps,useDeferredValue:function(e,t){var n=Wo();return Ls(n,e,t)},useTransition:function(){var e=cs(!1);return e=zs.bind(null,z,e.queue,!0,!1),Wo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=z,a=Wo();if(Ki){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),au===null)throw Error(i(349));su&127||ts(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,Es(rs.bind(null,r,o,e),[e]),r.flags|=2048,Ss(9,{destroy:void 0},ns.bind(null,r,o,n,t),null),n},useId:function(){var e=Wo(),t=au.identifierPrefix;if(Ki){var n=Ri,r=Li;n=(r&~(1<<32-Be(r)-1)).toString(32)+n,t=`_`+t+`R_`+n,n=jo++,0<n&&(t+=`H`+n.toString(32)),t+=`_`}else n=Po++,t=`_`+t+`r_`+n.toString(32)+`_`;return e.memoizedState=t},useHostTransitionStatus:Ws,useFormState:_s,useActionState:_s,useOptimistic:function(e){var t=Wo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Zs.bind(null,z,!0,n),n.dispatch=t,[e,t]},useMemoCache:Yo,useCacheRefresh:function(){return Wo().memoizedState=qs.bind(null,z)},useEffectEvent:function(e){var t=Wo(),n={impl:e};return t.memoizedState=n,function(){if(iu&2)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},rc={readContext:pa,use:Jo,useCallback:Fs,useContext:pa,useEffect:Ds,useImperativeHandle:Ns,useInsertionEffect:As,useLayoutEffect:js,useMemo:Is,useReducer:Zo,useRef:Cs,useState:function(){return Zo(Xo)},useDebugValue:Ps,useDeferredValue:function(e,t){var n=Go();return Rs(n,Eo.memoizedState,e,t)},useTransition:function(){var e=Zo(Xo)[0],t=Go().memoizedState;return[typeof e==`boolean`?e:qo(e),t]},useSyncExternalStore:es,useId:Gs,useHostTransitionStatus:Ws,useFormState:vs,useActionState:vs,useOptimistic:function(e,t){var n=Go();return ls(n,Eo,e,t)},useMemoCache:Yo,useCacheRefresh:Ks};rc.useEffectEvent=ks;var ic={readContext:pa,use:Jo,useCallback:Fs,useContext:pa,useEffect:Ds,useImperativeHandle:Ns,useInsertionEffect:As,useLayoutEffect:js,useMemo:Is,useReducer:$o,useRef:Cs,useState:function(){return $o(Xo)},useDebugValue:Ps,useDeferredValue:function(e,t){var n=Go();return Eo===null?Ls(n,e,t):Rs(n,Eo.memoizedState,e,t)},useTransition:function(){var e=$o(Xo)[0],t=Go().memoizedState;return[typeof e==`boolean`?e:qo(e),t]},useSyncExternalStore:es,useId:Gs,useHostTransitionStatus:Ws,useFormState:xs,useActionState:xs,useOptimistic:function(e,t){var n=Go();return Eo===null?(n.baseState=e,[e,n.queue.dispatch]):ls(n,Eo,e,t)},useMemoCache:Yo,useCacheRefresh:Ks};ic.useEffectEvent=ks;function ac(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:m({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var oc={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Iu(),i=to(r);i.payload=t,n!=null&&(i.callback=n),t=no(e,i,r),t!==null&&(Ru(t,e,r),ro(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Iu(),i=to(r);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=no(e,i,r),t!==null&&(Ru(t,e,r),ro(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Iu(),r=to(n);r.tag=2,t!=null&&(r.callback=t),t=no(e,r,n),t!==null&&(Ru(t,e,n),ro(t,e,n))}};function sc(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate==`function`?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Pr(n,r)||!Pr(i,a):!0}function cc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps==`function`&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps==`function`&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oc.enqueueReplaceState(t,t.state,null)}function lc(e,t){var n=t;if(`ref`in t)for(var r in n={},t)r!==`ref`&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=m({},n)),e)n[i]===void 0&&(n[i]=e[i]);return n}function uc(e){si(e)}function dc(e){console.error(e)}function fc(e){si(e)}function pc(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function mc(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function hc(e,t,n){return n=to(n),n.tag=3,n.payload={element:null},n.callback=function(){pc(e,t)},n}function gc(e){return e=to(e),e.tag=3,e}function _c(e,t,n,r){var i=n.type.getDerivedStateFromError;if(typeof i==`function`){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){mc(t,n,r)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch==`function`&&(e.callback=function(){mc(t,n,r),typeof i!=`function`&&(Du===null?Du=new Set([this]):Du.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:e===null?``:e})})}function vc(e,t,n,r,a){if(n.flags|=32768,typeof r==`object`&&r&&typeof r.then==`function`){if(t=n.alternate,t!==null&&ua(t,n,a,!0),n=go.current,n!==null){switch(n.tag){case 31:case 13:return _o===null?Xu():n.alternate===null&&mu===0&&(mu=3),n.flags&=-257,n.flags|=65536,n.lanes=a,r===La?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),hd(e,r,a)),!1;case 22:return n.flags|=65536,r===La?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),hd(e,r,a)),!1}throw Error(i(435,n.tag))}return hd(e,r,a),Xu(),!1}if(Ki)return t=go.current,t===null?(r!==Yi&&(t=Error(i(423),{cause:r}),na(ki(t,n))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,r=ki(r,n),a=hc(e.stateNode,r,a),io(e,a),mu!==4&&(mu=2)):(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=a,r!==Yi&&(e=Error(i(422),{cause:r}),na(ki(e,n)))),!1;var o=Error(i(520),{cause:r});if(o=ki(o,n),bu===null?bu=[o]:bu.push(o),mu!==4&&(mu=2),t===null)return!0;r=ki(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=a&-a,n.lanes|=e,e=hc(n.stateNode,r,e),io(n,e),!1;case 1:if(t=n.type,o=n.stateNode,!(n.flags&128)&&(typeof t.getDerivedStateFromError==`function`||o!==null&&typeof o.componentDidCatch==`function`&&(Du===null||!Du.has(o))))return n.flags|=65536,a&=-a,n.lanes|=a,a=gc(a),_c(a,e,n,r),io(n,a),!1}n=n.return}while(n!==null);return!1}var yc=Error(i(461)),bc=!1;function xc(e,t,n,r){t.child=e===null?Za(t,null,n,r):Xa(t,e.child,n,r)}function Sc(e,t,n,r,i){n=n.render;var a=t.ref;if(`ref`in r){var o={};for(var s in r)s!==`ref`&&(o[s]=r[s])}else o=r;return fa(t),r=Lo(e,t,n,o,a,i),s=Vo(),e!==null&&!bc?(Ho(e,t,i),Kc(e,t,i)):(Ki&&s&&Vi(t),t.flags|=1,xc(e,t,r,i),t.child)}function Cc(e,t,n,r,i){if(e===null){var a=n.type;return typeof a==`function`&&!bi(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,wc(e,t,a,r,i)):(e=Ci(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!qc(e,i)){var o=a.memoizedProps;if(n=n.compare,n=n===null?Pr:n,n(o,r)&&e.ref===t.ref)return Kc(e,t,i)}return t.flags|=1,e=xi(a,r),e.ref=t.ref,e.return=t,t.child=e}function wc(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Pr(a,r)&&e.ref===t.ref)if(bc=!1,t.pendingProps=r=a,qc(e,i))e.flags&131072&&(bc=!0);else return t.lanes=e.lanes,Kc(e,t,i)}return Mc(e,t,n,r,i)}function Tc(e,t,n,r){var i=r.children,a=e===null?null:e.memoizedState;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode===`hidden`){if(t.flags&128){if(a=a===null?n:a.baseLanes|n,e!==null){for(r=t.child=e.child,i=0;r!==null;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~a}else r=0,t.child=null;return Dc(e,t,a,n,r)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ma(t,a===null?null:a.cachePool),a===null?mo():po(t,a),bo(t);else return r=t.lanes=536870912,Dc(e,t,a===null?n:a.baseLanes|n,n,r)}else a===null?(e!==null&&Ma(t,null),mo(),xo(t)):(Ma(t,a.cachePool),po(t,a),xo(t),t.memoizedState=null);return xc(e,t,i,n),t.child}function Ec(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Dc(e,t,n,r,i){var a=ja();return a=a===null?null:{parent:ya._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&Ma(t,null),mo(),bo(t),e!==null&&ua(e,t,r,!0),t.childLanes=i,null}function Oc(e,t){return t=Vc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function kc(e,t,n){return Xa(t,e.child,null,n),e=Oc(t,t.pendingProps),e.flags|=2,So(t),t.memoizedState=null,e}function Ac(e,t,n){var r=t.pendingProps,a=(t.flags&128)!=0;if(t.flags&=-129,e===null){if(Ki){if(r.mode===`hidden`)return e=Oc(t,r),t.lanes=536870912,Ec(null,e);if(yo(t),(e=Gi)?(e=Nf(e,Ji),e=e!==null&&e.data===`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii===null?null:{id:Li,overflow:Ri},retryLane:536870912,hydrationErrors:null},n=Ei(e),n.return=t,t.child=n,Wi=t,Gi=null)):e=null,e===null)throw Xi(t);return t.lanes=536870912,null}return Oc(t,r)}var o=e.memoizedState;if(o!==null){var s=o.dehydrated;if(yo(t),a)if(t.flags&256)t.flags&=-257,t=kc(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(bc||ua(e,t,n,!1),a=(n&e.childLanes)!==0,bc||a){if(r=au,r!==null&&(s=rt(r,n),s!==0&&s!==o.retryLane))throw o.retryLane=s,mi(e,s),Ru(r,e,s),yc;Xu(),t=kc(e,t,n)}else e=o.treeContext,Gi=Lf(s.nextSibling),Wi=t,Ki=!0,qi=null,Ji=!1,e!==null&&Ui(t,e),t=Oc(t,r),t.flags|=4096;return t}return e=xi(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function jc(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!=`function`&&typeof n!=`object`)throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Mc(e,t,n,r,i){return fa(t),n=Lo(e,t,n,r,void 0,i),r=Vo(),e!==null&&!bc?(Ho(e,t,i),Kc(e,t,i)):(Ki&&r&&Vi(t),t.flags|=1,xc(e,t,n,i),t.child)}function Nc(e,t,n,r,i,a){return fa(t),t.updateQueue=null,n=zo(t,r,n,i),Ro(e),r=Vo(),e!==null&&!bc?(Ho(e,t,a),Kc(e,t,a)):(Ki&&r&&Vi(t),t.flags|=1,xc(e,t,n,a),t.child)}function Pc(e,t,n,r,i){if(fa(t),t.stateNode===null){var a=_i,o=n.contextType;typeof o==`object`&&o&&(a=pa(o)),a=new n(r,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=oc,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=r,a.state=t.memoizedState,a.refs={},$a(t),o=n.contextType,a.context=typeof o==`object`&&o?pa(o):_i,a.state=t.memoizedState,o=n.getDerivedStateFromProps,typeof o==`function`&&(ac(t,n,o,r),a.state=t.memoizedState),typeof n.getDerivedStateFromProps==`function`||typeof a.getSnapshotBeforeUpdate==`function`||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(o=a.state,typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount(),o!==a.state&&oc.enqueueReplaceState(a,a.state,null),so(t,r,a,i),oo(),a.state=t.memoizedState),typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,c=lc(n,s);a.props=c;var l=a.context,u=n.contextType;o=_i,typeof u==`object`&&u&&(o=pa(u));var d=n.getDerivedStateFromProps;u=typeof d==`function`||typeof a.getSnapshotBeforeUpdate==`function`,s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(s||l!==o)&&cc(t,a,r,o),Qa=!1;var f=t.memoizedState;a.state=f,so(t,r,a,i),oo(),l=t.memoizedState,s||f!==l||Qa?(typeof d==`function`&&(ac(t,n,d,r),l=t.memoizedState),(c=Qa||sc(t,n,c,r,f,l,o))?(u||typeof a.UNSAFE_componentWillMount!=`function`&&typeof a.componentWillMount!=`function`||(typeof a.componentWillMount==`function`&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount==`function`&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount==`function`&&(t.flags|=4194308)):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=o,r=c):(typeof a.componentDidMount==`function`&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,eo(e,t),o=t.memoizedProps,u=lc(n,o),a.props=u,d=t.pendingProps,f=a.context,l=n.contextType,c=_i,typeof l==`object`&&l&&(c=pa(l)),s=n.getDerivedStateFromProps,(l=typeof s==`function`||typeof a.getSnapshotBeforeUpdate==`function`)||typeof a.UNSAFE_componentWillReceiveProps!=`function`&&typeof a.componentWillReceiveProps!=`function`||(o!==d||f!==c)&&cc(t,a,r,c),Qa=!1,f=t.memoizedState,a.state=f,so(t,r,a,i),oo();var p=t.memoizedState;o!==d||f!==p||Qa||e!==null&&e.dependencies!==null&&da(e.dependencies)?(typeof s==`function`&&(ac(t,n,s,r),p=t.memoizedState),(u=Qa||sc(t,n,u,r,f,p,c)||e!==null&&e.dependencies!==null&&da(e.dependencies))?(l||typeof a.UNSAFE_componentWillUpdate!=`function`&&typeof a.componentWillUpdate!=`function`||(typeof a.componentWillUpdate==`function`&&a.componentWillUpdate(r,p,c),typeof a.UNSAFE_componentWillUpdate==`function`&&a.UNSAFE_componentWillUpdate(r,p,c)),typeof a.componentDidUpdate==`function`&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate==`function`&&(t.flags|=1024)):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=u):(typeof a.componentDidUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!=`function`||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,jc(e,t),r=(t.flags&128)!=0,a||r?(a=t.stateNode,n=r&&typeof n.getDerivedStateFromError!=`function`?null:a.render(),t.flags|=1,e!==null&&r?(t.child=Xa(t,e.child,null,i),t.child=Xa(t,null,n,i)):xc(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Kc(e,t,i),e}function Fc(e,t,n,r){return ea(),t.flags|=256,xc(e,t,n,r),t.child}var Ic={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lc(e){return{baseLanes:e,cachePool:Na()}}function Rc(e,t,n){return e=e===null?0:e.childLanes&~n,t&&(e|=vu),e}function zc(e,t,n){var r=t.pendingProps,a=!1,o=(t.flags&128)!=0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(Co.current&2)!=0),s&&(a=!0,t.flags&=-129),s=(t.flags&32)!=0,t.flags&=-33,e===null){if(Ki){if(a?vo(t):xo(t),(e=Gi)?(e=Nf(e,Ji),e=e!==null&&e.data!==`&`?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ii===null?null:{id:Li,overflow:Ri},retryLane:536870912,hydrationErrors:null},n=Ei(e),n.return=t,t.child=n,Wi=t,Gi=null)):e=null,e===null)throw Xi(t);return Ff(e)?t.lanes=32:t.lanes=536870912,null}var c=r.children;return r=r.fallback,a?(xo(t),a=t.mode,c=Vc({mode:`hidden`,children:c},a),r=wi(r,a,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,r=t.child,r.memoizedState=Lc(n),r.childLanes=Rc(e,s,n),t.memoizedState=Ic,Ec(null,r)):(vo(t),Bc(t,c))}var l=e.memoizedState;if(l!==null&&(c=l.dehydrated,c!==null)){if(o)t.flags&256?(vo(t),t.flags&=-257,t=Hc(e,t,n)):t.memoizedState===null?(xo(t),c=r.fallback,a=t.mode,r=Vc({mode:`visible`,children:r.children},a),c=wi(c,a,n,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,Xa(t,e.child,null,n),r=t.child,r.memoizedState=Lc(n),r.childLanes=Rc(e,s,n),t.memoizedState=Ic,t=Ec(null,r)):(xo(t),t.child=e.child,t.flags|=128,t=null);else if(vo(t),Ff(c)){if(s=c.nextSibling&&c.nextSibling.dataset,s)var u=s.dgst;s=u,r=Error(i(419)),r.stack=``,r.digest=s,na({value:r,source:null,stack:null}),t=Hc(e,t,n)}else if(bc||ua(e,t,n,!1),s=(n&e.childLanes)!==0,bc||s){if(s=au,s!==null&&(r=rt(s,n),r!==0&&r!==l.retryLane))throw l.retryLane=r,mi(e,r),Ru(s,e,r),yc;Pf(c)||Xu(),t=Hc(e,t,n)}else Pf(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Gi=Lf(c.nextSibling),Wi=t,Ki=!0,qi=null,Ji=!1,e!==null&&Ui(t,e),t=Bc(t,r.children),t.flags|=4096);return t}return a?(xo(t),c=r.fallback,a=t.mode,l=e.child,u=l.sibling,r=xi(l,{mode:`hidden`,children:r.children}),r.subtreeFlags=l.subtreeFlags&65011712,u===null?(c=wi(c,a,n,null),c.flags|=2):c=xi(u,c),c.return=t,r.return=t,r.sibling=c,t.child=r,Ec(null,r),r=t.child,c=e.child.memoizedState,c===null?c=Lc(n):(a=c.cachePool,a===null?a=Na():(l=ya._currentValue,a=a.parent===l?a:{parent:l,pool:l}),c={baseLanes:c.baseLanes|n,cachePool:a}),r.memoizedState=c,r.childLanes=Rc(e,s,n),t.memoizedState=Ic,Ec(e.child,r)):(vo(t),n=e.child,e=n.sibling,n=xi(n,{mode:`visible`,children:r.children}),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n)}function Bc(e,t){return t=Vc({mode:`visible`,children:t},e.mode),t.return=e,e.child=t}function Vc(e,t){return e=yi(22,e,null,t),e.lanes=0,e}function Hc(e,t,n){return Xa(t,e.child,null,n),e=Bc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Uc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ca(e.return,t,n)}function Wc(e,t,n,r,i,a){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.treeForkCount=a)}function Gc(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;r=r.children;var o=Co.current,s=(o&2)!=0;if(s?(o=o&1|2,t.flags|=128):o&=1,N(Co,o),xc(e,t,r,n),r=Ki?Ni:0,!s&&e!==null&&e.flags&128)a:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Uc(e,n,t);else if(e.tag===19)Uc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break a;for(;e.sibling===null;){if(e.return===null||e.return===t)break a;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case`forwards`:for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&wo(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wc(t,!1,i,n,a,r);break;case`backwards`:case`unstable_legacy-backwards`:for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&wo(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wc(t,!0,n,null,a,r);break;case`together`:Wc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function Kc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),hu|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(ua(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=xi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function qc(e,t){return(e.lanes&t)===0?(e=e.dependencies,!!(e!==null&&da(e))):!0}function Jc(e,t,n){switch(t.tag){case 3:fe(t,t.stateNode.containerInfo),oa(t,ya,e.memoizedState.cache),ea();break;case 27:case 5:me(t);break;case 4:fe(t,t.stateNode.containerInfo);break;case 10:oa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,yo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated===null?(n&t.child.childLanes)===0?(vo(t),e=Kc(e,t,n),e===null?null:e.sibling):zc(e,t,n):(vo(t),t.flags|=128,null);vo(t);break;case 19:var i=(e.flags&128)!=0;if(r=(n&t.childLanes)!==0,r||=(ua(e,t,n,!1),(n&t.childLanes)!==0),i){if(r)return Gc(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),N(Co,Co.current),r)break;return null;case 22:return t.lanes=0,Tc(e,t,n,t.pendingProps);case 24:oa(t,ya,e.memoizedState.cache)}return Kc(e,t,n)}function Yc(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)bc=!0;else{if(!qc(e,n)&&!(t.flags&128))return bc=!1,Jc(e,t,n);bc=!!(e.flags&131072)}else bc=!1,Ki&&t.flags&1048576&&Bi(t,Ni,t.index);switch(t.lanes=0,t.tag){case 16:a:{var r=t.pendingProps;if(e=Ba(t.elementType),t.type=e,typeof e==`function`)bi(e)?(r=lc(e,r),t.tag=1,t=Pc(null,t,e,r,n)):(t.tag=0,t=Mc(null,t,e,r,n));else{if(e!=null){var a=e.$$typeof;if(a===w){t.tag=11,t=Sc(null,t,e,r,n);break a}else if(a===D){t.tag=14,t=Cc(null,t,e,r,n);break a}}throw t=ie(e)||e,Error(i(306,t,``))}}return t;case 0:return Mc(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,a=lc(r,t.pendingProps),Pc(e,t,r,a,n);case 3:a:{if(fe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));r=t.pendingProps;var o=t.memoizedState;a=o.element,eo(e,t),so(t,r,null,n);var s=t.memoizedState;if(r=s.cache,oa(t,ya,r),r!==o.cache&&la(t,[ya],n,!0),oo(),r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Fc(e,t,r,n);break a}else if(r!==a){a=ki(Error(i(424)),t),na(a),t=Fc(e,t,r,n);break a}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName===`HTML`?e.ownerDocument.body:e}for(Gi=Lf(e.firstChild),Wi=t,Ki=!0,qi=null,Ji=!0,n=Za(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ea(),r===a){t=Kc(e,t,n);break a}xc(e,t,r,n)}t=t.child}return t;case 26:return jc(e,t),e===null?(n=ip(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ki||(n=t.type,e=t.pendingProps,r=gf(ue.current).createElement(n),r[lt]=t,r[ut]=e,uf(r,n,e),St(r),t.stateNode=r):t.memoizedState=ip(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return me(t),e===null&&Ki&&(r=t.stateNode=Vf(t.type,t.pendingProps,ue.current),Wi=t,Ji=!0,a=Gi,Df(t.type)?(Rf=a,Gi=Lf(r.firstChild)):Gi=a),xc(e,t,t.pendingProps.children,n),jc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ki&&((a=r=Gi)&&(r=jf(r,t.type,t.pendingProps,Ji),r===null?a=!1:(t.stateNode=r,Wi=t,Gi=Lf(r.firstChild),Ji=!1,a=!0)),a||Xi(t)),me(t),a=t.type,o=t.pendingProps,s=e===null?null:e.memoizedProps,r=o.children,yf(a,o)?r=null:s!==null&&yf(a,s)&&(t.flags|=32),t.memoizedState!==null&&(a=Lo(e,t,Bo,null,null,n),Dp._currentValue=a),jc(e,t),xc(e,t,r,n),t.child;case 6:return e===null&&Ki&&((e=n=Gi)&&(n=Mf(n,t.pendingProps,Ji),n===null?e=!1:(t.stateNode=n,Wi=t,Gi=null,e=!0)),e||Xi(t)),null;case 13:return zc(e,t,n);case 4:return fe(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xa(t,null,r,n):xc(e,t,r,n),t.child;case 11:return Sc(e,t,t.type,t.pendingProps,n);case 7:return xc(e,t,t.pendingProps,n),t.child;case 8:return xc(e,t,t.pendingProps.children,n),t.child;case 12:return xc(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,oa(t,t.type,r.value),xc(e,t,r.children,n),t.child;case 9:return a=t.type._context,r=t.pendingProps.children,fa(t),a=pa(a),r=r(a),t.flags|=1,xc(e,t,r,n),t.child;case 14:return Cc(e,t,t.type,t.pendingProps,n);case 15:return wc(e,t,t.type,t.pendingProps,n);case 19:return Gc(e,t,n);case 31:return Ac(e,t,n);case 22:return Tc(e,t,n,t.pendingProps);case 24:return fa(t),r=pa(ya),e===null?(a=ja(),a===null&&(a=au,o=ba(),a.pooledCache=o,o.refCount++,o!==null&&(a.pooledCacheLanes|=n),a=o),t.memoizedState={parent:r,cache:a},$a(t),oa(t,ya,a)):((e.lanes&n)!==0&&(eo(e,t),so(t,null,null,n),oo()),a=e.memoizedState,o=t.memoizedState,a.parent===r?(r=o.cache,oa(t,ya,r),r!==a.cache&&la(t,[ya],n,!0)):(a={parent:r,cache:r},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),oa(t,ya,r))),xc(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Xc(e){e.flags|=4}function Zc(e,t,n,r,i){if((t=(e.mode&32)!=0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(qu())e.flags|=8192;else throw Va=La,Fa}else e.flags&=-16777217}function Qc(e,t){if(t.type!==`stylesheet`||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!yp(t))if(qu())e.flags|=8192;else throw Va=La,Fa}function $c(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag===22?536870912:Ze(),e.lanes|=t,yu|=t)}function el(e,t){if(!Ki)switch(e.tailMode){case`hidden`:t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case`collapsed`:n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tl(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&65011712,r|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nl(e,t,n){var r=t.pendingProps;switch(Hi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tl(t),null;case 1:return tl(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),sa(ya),pe(),n.pendingContext&&=(n.context=n.pendingContext,null),(e===null||e.child===null)&&($i(t)?Xc(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ta())),tl(t),null;case 26:var a=t.type,o=t.memoizedState;return e===null?(Xc(t),o===null?(tl(t),Zc(t,a,null,r,n)):(tl(t),Qc(t,o))):o?o===e.memoizedState?(tl(t),t.flags&=-16777217):(Xc(t),tl(t),Qc(t,o)):(e=e.memoizedProps,e!==r&&Xc(t),tl(t),Zc(t,a,e,r,n)),null;case 27:if(he(t),n=ue.current,a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Xc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return tl(t),null}e=P.current,$i(t)?Zi(t,e):(e=Vf(a,r,n),t.stateNode=e,Xc(t))}return tl(t),null;case 5:if(he(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&Xc(t);else{if(!r){if(t.stateNode===null)throw Error(i(166));return tl(t),null}if(o=P.current,$i(t))Zi(t,o);else{var s=gf(ue.current);switch(o){case 1:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case 2:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;default:switch(a){case`svg`:o=s.createElementNS(`http://www.w3.org/2000/svg`,a);break;case`math`:o=s.createElementNS(`http://www.w3.org/1998/Math/MathML`,a);break;case`script`:o=s.createElement(`div`),o.innerHTML=`<script><\/script>`,o=o.removeChild(o.firstChild);break;case`select`:o=typeof r.is==`string`?s.createElement(`select`,{is:r.is}):s.createElement(`select`),r.multiple?o.multiple=!0:r.size&&(o.size=r.size);break;default:o=typeof r.is==`string`?s.createElement(a,{is:r.is}):s.createElement(a)}}o[lt]=t,o[ut]=r;a:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break a;for(;s.sibling===null;){if(s.return===null||s.return===t)break a;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=o;a:switch(uf(o,a,r),a){case`button`:case`input`:case`select`:case`textarea`:r=!!r.autoFocus;break a;case`img`:r=!0;break a;default:r=!1}r&&Xc(t)}}return tl(t),Zc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&Xc(t);else{if(typeof r!=`string`&&t.stateNode===null)throw Error(i(166));if(e=ue.current,$i(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,a=Wi,a!==null)switch(a.tag){case 27:case 5:r=a.memoizedProps}e[lt]=t,e=!!(e.nodeValue===n||r!==null&&!0===r.suppressHydrationWarning||sf(e.nodeValue,n)),e||Xi(t,!0)}else e=gf(e).createTextNode(r),e[lt]=t,t.stateNode=e}return tl(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=$i(t),n!==null){if(e===null){if(!r)throw Error(i(318));if(e=t.memoizedState,e=e===null?null:e.dehydrated,!e)throw Error(i(557));e[lt]=t}else ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tl(t),e=!1}else n=ta(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(So(t),t):(So(t),null);if(t.flags&128)throw Error(i(558))}return tl(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=$i(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(i(318));if(a=t.memoizedState,a=a===null?null:a.dehydrated,!a)throw Error(i(317));a[lt]=t}else ea(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tl(t),a=!1}else a=ta(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(So(t),t):(So(t),null)}return So(t),t.flags&128?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,a=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(a=r.alternate.memoizedState.cachePool.pool),o=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),o!==a&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),$c(t,t.updateQueue),tl(t),null);case 4:return pe(),e===null&&Yd(t.stateNode.containerInfo),tl(t),null;case 10:return sa(t.type),tl(t),null;case 19:if(le(Co),r=t.memoizedState,r===null)return tl(t),null;if(a=(t.flags&128)!=0,o=r.rendering,o===null)if(a)el(r,!1);else{if(mu!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=wo(e),o!==null){for(t.flags|=128,el(r,!1),e=o.updateQueue,t.updateQueue=e,$c(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Si(n,e),n=n.sibling;return N(Co,Co.current&1|2),Ki&&zi(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&Oe()>Tu&&(t.flags|=128,a=!0,el(r,!1),t.lanes=4194304)}else{if(!a)if(e=wo(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,$c(t,e),el(r,!0),r.tail===null&&r.tailMode===`hidden`&&!o.alternate&&!Ki)return tl(t),null}else 2*Oe()-r.renderingStartTime>Tu&&n!==536870912&&(t.flags|=128,a=!0,el(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e===null?t.child=o:e.sibling=o,r.last=o)}return r.tail===null?(tl(t),null):(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Oe(),e.sibling=null,n=Co.current,N(Co,a?n&1|2:n&1),Ki&&zi(t,r.treeForkCount),e);case 22:case 23:return So(t),ho(),r=t.memoizedState!==null,e===null?r&&(t.flags|=8192):e.memoizedState!==null!==r&&(t.flags|=8192),r?n&536870912&&!(t.flags&128)&&(tl(t),t.subtreeFlags&6&&(t.flags|=8192)):tl(t),n=t.updateQueue,n!==null&&$c(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&le(Aa),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),sa(ya),tl(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function rl(e,t){switch(Hi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sa(ya),pe(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return he(t),null;case 31:if(t.memoizedState!==null){if(So(t),t.alternate===null)throw Error(i(340));ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(So(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));ea()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(Co),null;case 4:return pe(),null;case 10:return sa(t.type),null;case 22:case 23:return So(t),ho(),e!==null&&le(Aa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return sa(ya),null;case 25:return null;default:return null}}function il(e,t){switch(Hi(t),t.tag){case 3:sa(ya),pe();break;case 26:case 27:case 5:he(t);break;case 4:pe();break;case 31:t.memoizedState!==null&&So(t);break;case 13:So(t);break;case 19:le(Co);break;case 10:sa(t.type);break;case 22:case 23:So(t),ho(),e!==null&&le(Aa);break;case 24:sa(ya)}}function al(e,t){try{var n=t.updateQueue,r=n===null?null:n.lastEffect;if(r!==null){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(e){md(t,t.return,e)}}function ol(e,t,n){try{var r=t.updateQueue,i=r===null?null:r.lastEffect;if(i!==null){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(s!==void 0){o.destroy=void 0,i=t;var c=n,l=s;try{l()}catch(e){md(i,c,e)}}}r=r.next}while(r!==a)}}catch(e){md(t,t.return,e)}}function sl(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{lo(t,n)}catch(t){md(e,e.return,t)}}}function cl(e,t,n){n.props=lc(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){md(e,t,n)}}function ll(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n==`function`?e.refCleanup=n(r):n.current=r}}catch(n){md(e,t,n)}}function ul(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r==`function`)try{r()}catch(n){md(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n==`function`)try{n(null)}catch(n){md(e,t,n)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{a:switch(t){case`button`:case`input`:case`select`:case`textarea`:n.autoFocus&&r.focus();break a;case`img`:n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){md(e,e.return,t)}}function fl(e,t,n){try{var r=e.stateNode;df(r,e.type,n,t),r[ut]=t}catch(t){md(e,e.return,t)}}function pl(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Df(e.type)||e.tag===4}function ml(e){a:for(;;){for(;e.sibling===null;){if(e.return===null||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Df(e.type)||e.flags&2||e.child===null||e.tag===4)continue a;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName===`HTML`?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=tn));else if(r!==4&&(r===27&&Df(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(hl(e,t,n),e=e.sibling;e!==null;)hl(e,t,n),e=e.sibling}function gl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Df(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(gl(e,t,n),e=e.sibling;e!==null;)gl(e,t,n),e=e.sibling}function _l(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);uf(t,r,n),t[lt]=e,t[ut]=n}catch(t){md(e,e.return,t)}}var vl=!1,yl=!1,bl=!1,xl=typeof WeakSet==`function`?WeakSet:Set,Sl=null;function Cl(e,t){if(e=e.containerInfo,mf=Ip,e=Rr(e),zr(e)){if(`selectionStart`in e)var n={start:e.selectionStart,end:e.selectionEnd};else a:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break a}var s=0,c=-1,l=-1,u=0,d=0,f=e,p=null;b:for(;;){for(var m;f!==n||a!==0&&f.nodeType!==3||(c=s+a),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===e)break b;if(p===n&&++u===a&&(c=s),p===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=c===-1||l===-1?null:{start:c,end:l}}else n=null}n||={start:0,end:0}}else n=null;for(hf={focusedElem:e,selectionRange:n},Ip=!1,Sl=t;Sl!==null;)if(t=Sl,e=t.child,t.subtreeFlags&1028&&e!==null)e.return=t,Sl=e;else for(;Sl!==null;){switch(t=Sl,o=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e===null?null:e.events,e!==null))for(n=0;n<e.length;n++)a=e[n],a.ref.impl=a.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&o!==null){e=void 0,n=t,a=o.memoizedProps,o=o.memoizedState,r=n.stateNode;try{var h=lc(n.type,a);e=r.getSnapshotBeforeUpdate(h,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){md(n,n.return,e)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Af(e);else if(n===1)switch(e.nodeName){case`HEAD`:case`HTML`:case`BODY`:Af(e);break;default:e.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Sl=e;break}Sl=t.return}}function wl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:zl(e,n),r&4&&al(5,n);break;case 1:if(zl(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(e){md(n,n.return,e)}else{var i=lc(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){md(n,n.return,e)}}r&64&&sl(n),r&512&&ll(n,n.return);break;case 3:if(zl(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{lo(e,t)}catch(e){md(n,n.return,e)}}break;case 27:t===null&&r&4&&_l(n);case 26:case 5:zl(e,n),t===null&&r&4&&dl(n),r&512&&ll(n,n.return);break;case 12:zl(e,n);break;case 31:zl(e,n),r&4&&Al(e,n);break;case 13:zl(e,n),r&4&&jl(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=vd.bind(null,n),If(e,n))));break;case 22:if(r=n.memoizedState!==null||vl,!r){t=t!==null&&t.memoizedState!==null||yl,i=vl;var a=yl;vl=r,(yl=t)&&!a?Vl(e,n,(n.subtreeFlags&8772)!=0):zl(e,n),vl=i,yl=a}break;case 30:break;default:zl(e,n)}}function Tl(e){var t=e.alternate;t!==null&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_t(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var El=null,Dl=!1;function Ol(e,t,n){for(n=n.child;n!==null;)kl(e,t,n),n=n.sibling}function kl(e,t,n){if(Re&&typeof Re.onCommitFiberUnmount==`function`)try{Re.onCommitFiberUnmount(Le,n)}catch{}switch(n.tag){case 26:yl||ul(n,t),Ol(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:yl||ul(n,t);var r=El,i=Dl;Df(n.type)&&(El=n.stateNode,Dl=!1),Ol(e,t,n),Hf(n.stateNode),El=r,Dl=i;break;case 5:yl||ul(n,t);case 6:if(r=El,i=Dl,El=null,Ol(e,t,n),El=r,Dl=i,El!==null)if(Dl)try{(El.nodeType===9?El.body:El.nodeName===`HTML`?El.ownerDocument.body:El).removeChild(n.stateNode)}catch(e){md(n,t,e)}else try{El.removeChild(n.stateNode)}catch(e){md(n,t,e)}break;case 18:El!==null&&(Dl?(e=El,Of(e.nodeType===9?e.body:e.nodeName===`HTML`?e.ownerDocument.body:e,n.stateNode),cm(e)):Of(El,n.stateNode));break;case 4:r=El,i=Dl,El=n.stateNode.containerInfo,Dl=!0,Ol(e,t,n),El=r,Dl=i;break;case 0:case 11:case 14:case 15:ol(2,n,t),yl||ol(4,n,t),Ol(e,t,n);break;case 1:yl||(ul(n,t),r=n.stateNode,typeof r.componentWillUnmount==`function`&&cl(n,t,r)),Ol(e,t,n);break;case 21:Ol(e,t,n);break;case 22:yl=(r=yl)||n.memoizedState!==null,Ol(e,t,n),yl=r;break;default:Ol(e,t,n)}}function Al(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{cm(e)}catch(e){md(t,t.return,e)}}}function jl(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{cm(e)}catch(e){md(t,t.return,e)}}function Ml(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new xl),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new xl),t;default:throw Error(i(435,e.tag))}}function Nl(e,t){var n=Ml(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=yd.bind(null,e,t);t.then(r,r)}})}function Pl(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r],o=e,s=t,c=s;a:for(;c!==null;){switch(c.tag){case 27:if(Df(c.type)){El=c.stateNode,Dl=!1;break a}break;case 5:El=c.stateNode,Dl=!1;break a;case 3:case 4:El=c.stateNode.containerInfo,Dl=!0;break a}c=c.return}if(El===null)throw Error(i(160));kl(o,s,a),El=null,Dl=!1,o=a.alternate,o!==null&&(o.return=null),a.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Il(t,e),t=t.sibling}var Fl=null;function Il(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Ll(e),r&4&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Pl(t,e),Ll(e),r&512&&(yl||n===null||ul(n,n.return)),r&64&&vl&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var a=Fl;if(Pl(t,e),Ll(e),r&512&&(yl||n===null||ul(n,n.return)),r&4){var o=n===null?null:n.memoizedState;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){a:{r=e.type,n=e.memoizedProps,a=a.ownerDocument||a;b:switch(r){case`title`:o=a.getElementsByTagName(`title`)[0],(!o||o[gt]||o[lt]||o.namespaceURI===`http://www.w3.org/2000/svg`||o.hasAttribute(`itemprop`))&&(o=a.createElement(r),a.head.insertBefore(o,a.querySelector(`head > title`))),uf(o,r,n),o[lt]=e,St(o),r=o;break a;case`link`:var s=gp(`link`,`href`,a).get(r+(n.href||``));if(s){for(var c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`href`)===(n.href==null||n.href===``?null:n.href)&&o.getAttribute(`rel`)===(n.rel==null?null:n.rel)&&o.getAttribute(`title`)===(n.title==null?null:n.title)&&o.getAttribute(`crossorigin`)===(n.crossOrigin==null?null:n.crossOrigin)){s.splice(c,1);break b}}o=a.createElement(r),uf(o,r,n),a.head.appendChild(o);break;case`meta`:if(s=gp(`meta`,`content`,a).get(r+(n.content||``))){for(c=0;c<s.length;c++)if(o=s[c],o.getAttribute(`content`)===(n.content==null?null:``+n.content)&&o.getAttribute(`name`)===(n.name==null?null:n.name)&&o.getAttribute(`property`)===(n.property==null?null:n.property)&&o.getAttribute(`http-equiv`)===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute(`charset`)===(n.charSet==null?null:n.charSet)){s.splice(c,1);break b}}o=a.createElement(r),uf(o,r,n),a.head.appendChild(o);break;default:throw Error(i(468,r))}o[lt]=e,St(o),r=o}e.stateNode=r}else _p(a,e.type,e.stateNode);else e.stateNode=dp(a,r,e.memoizedProps);else o===r?r===null&&e.stateNode!==null&&fl(e,e.memoizedProps,n.memoizedProps):(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,r===null?_p(a,e.type,e.stateNode):dp(a,r,e.memoizedProps))}break;case 27:Pl(t,e),Ll(e),r&512&&(yl||n===null||ul(n,n.return)),n!==null&&r&4&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Ll(e),r&512&&(yl||n===null||ul(n,n.return)),e.flags&32){a=e.stateNode;try{qt(a,``)}catch(t){md(e,e.return,t)}}r&4&&e.stateNode!=null&&(a=e.memoizedProps,fl(e,a,n===null?a:n.memoizedProps)),r&1024&&(bl=!0);break;case 6:if(Pl(t,e),Ll(e),r&4){if(e.stateNode===null)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){md(e,e.return,t)}}break;case 3:if(hp=null,a=Fl,Fl=Gf(t.containerInfo),Pl(t,e),Fl=a,Ll(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cm(t.containerInfo)}catch(t){md(e,e.return,t)}bl&&(bl=!1,Rl(e));break;case 4:r=Fl,Fl=Gf(e.stateNode.containerInfo),Pl(t,e),Ll(e),Fl=r;break;case 12:Pl(t,e),Ll(e);break;case 31:Pl(t,e),Ll(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Nl(e,r)));break;case 13:Pl(t,e),Ll(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Cu=Oe()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Nl(e,r)));break;case 22:a=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,u=vl,d=yl;if(vl=u||a,yl=d||l,Pl(t,e),yl=d,vl=u,Ll(e),r&8192)a:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(n===null||l||vl||yl||Bl(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(o=l.stateNode,a)s=o.style,typeof s.setProperty==`function`?s.setProperty(`display`,`none`,`important`):s.display=`none`;else{c=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty(`display`)?f.display:null;c.style.display=p==null||typeof p==`boolean`?``:(``+p).trim()}}catch(e){md(l,l.return,e)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=a?``:l.memoizedProps}catch(e){md(l,l.return,e)}}}else if(t.tag===18){if(n===null){l=t;try{var m=l.stateNode;a?kf(m,!0):kf(l.stateNode,!1)}catch(e){md(l,l.return,e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break a;for(;t.sibling===null;){if(t.return===null||t.return===e)break a;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Nl(e,n))));break;case 19:Pl(t,e),Ll(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Nl(e,r)));break;case 30:break;case 21:break;default:Pl(t,e),Ll(e)}}function Ll(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(pl(r)){n=r;break}r=r.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var a=n.stateNode,o=ml(e);gl(e,o,a);break;case 5:var s=n.stateNode;n.flags&32&&(qt(s,``),n.flags&=-33);var c=ml(e);gl(e,c,s);break;case 3:case 4:var l=n.stateNode.containerInfo,u=ml(e);hl(e,u,l);break;default:throw Error(i(161))}}catch(t){md(e,e.return,t)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rl(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Rl(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function zl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wl(e,t.alternate,t),t=t.sibling}function Bl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Bl(t);break;case 1:ul(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount==`function`&&cl(t,t.return,n),Bl(t);break;case 27:Hf(t.stateNode);case 26:case 5:ul(t,t.return),Bl(t);break;case 22:t.memoizedState===null&&Bl(t);break;case 30:Bl(t);break;default:Bl(t)}e=e.sibling}}function Vl(e,t,n){for(n&&=(t.subtreeFlags&8772)!=0,t=t.child;t!==null;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Vl(i,a,n),al(4,a);break;case 1:if(Vl(i,a,n),r=a,i=r.stateNode,typeof i.componentDidMount==`function`)try{i.componentDidMount()}catch(e){md(r,r.return,e)}if(r=a,i=r.updateQueue,i!==null){var s=r.stateNode;try{var c=i.shared.hiddenCallbacks;if(c!==null)for(i.shared.hiddenCallbacks=null,i=0;i<c.length;i++)co(c[i],s)}catch(e){md(r,r.return,e)}}n&&o&64&&sl(a),ll(a,a.return);break;case 27:_l(a);case 26:case 5:Vl(i,a,n),n&&r===null&&o&4&&dl(a),ll(a,a.return);break;case 12:Vl(i,a,n);break;case 31:Vl(i,a,n),n&&o&4&&Al(i,a);break;case 13:Vl(i,a,n),n&&o&4&&jl(i,a);break;case 22:a.memoizedState===null&&Vl(i,a,n),ll(a,a.return);break;case 30:break;default:Vl(i,a,n)}t=t.sibling}}function Hl(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&xa(n))}function Ul(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&xa(e))}function Wl(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Gl(e,t,n,r),t=t.sibling}function Gl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Wl(e,t,n,r),i&2048&&al(9,t);break;case 1:Wl(e,t,n,r);break;case 3:Wl(e,t,n,r),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&xa(e)));break;case 12:if(i&2048){Wl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;typeof s==`function`&&s(o,t.alternate===null?`mount`:`update`,e.passiveEffectDuration,-0)}catch(e){md(t,t.return,e)}}else Wl(e,t,n,r);break;case 31:Wl(e,t,n,r);break;case 13:Wl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,t.memoizedState===null?a._visibility&2?Wl(e,t,n,r):(a._visibility|=2,Kl(e,t,n,r,(t.subtreeFlags&10256)!=0||!1)):a._visibility&2?Wl(e,t,n,r):ql(e,t),i&2048&&Hl(o,t);break;case 24:Wl(e,t,n,r),i&2048&&Ul(t.alternate,t);break;default:Wl(e,t,n,r)}}function Kl(e,t,n,r,i){for(i&&=(t.subtreeFlags&10256)!=0||!1,t=t.child;t!==null;){var a=e,o=t,s=n,c=r,l=o.flags;switch(o.tag){case 0:case 11:case 15:Kl(a,o,s,c,i),al(8,o);break;case 23:break;case 22:var u=o.stateNode;o.memoizedState===null?(u._visibility|=2,Kl(a,o,s,c,i)):u._visibility&2?Kl(a,o,s,c,i):ql(a,o),i&&l&2048&&Hl(o.alternate,o);break;case 24:Kl(a,o,s,c,i),i&&l&2048&&Ul(o.alternate,o);break;default:Kl(a,o,s,c,i)}t=t.sibling}}function ql(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:ql(n,r),i&2048&&Hl(r.alternate,r);break;case 24:ql(n,r),i&2048&&Ul(r.alternate,r);break;default:ql(n,r)}t=t.sibling}}var Jl=8192;function Yl(e,t,n){if(e.subtreeFlags&Jl)for(e=e.child;e!==null;)Xl(e,t,n),e=e.sibling}function Xl(e,t,n){switch(e.tag){case 26:Yl(e,t,n),e.flags&Jl&&e.memoizedState!==null&&bp(n,Fl,e.memoizedState,e.memoizedProps);break;case 5:Yl(e,t,n);break;case 3:case 4:var r=Fl;Fl=Gf(e.stateNode.containerInfo),Yl(e,t,n),Fl=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Jl,Jl=16777216,Yl(e,t,n),Jl=r):Yl(e,t,n));break;default:Yl(e,t,n)}}function Zl(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ql(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,tu(r,e)}Zl(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Ql(e),e.flags&2048&&ol(9,e,e.return);break;case 3:Ql(e);break;case 12:Ql(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,eu(e)):Ql(e);break;default:Ql(e)}}function eu(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,tu(r,e)}Zl(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ol(8,t,t.return),eu(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,eu(t));break;default:eu(t)}e=e.sibling}}function tu(e,t){for(;Sl!==null;){var n=Sl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:xa(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Sl=r;else a:for(n=e;Sl!==null;){r=Sl;var i=r.sibling,a=r.return;if(Tl(r),r===n){Sl=null;break a}if(i!==null){i.return=a,Sl=i;break a}Sl=a}}}var nu={getCacheForType:function(e){var t=pa(ya),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return pa(ya).controller.signal}},ru=typeof WeakMap==`function`?WeakMap:Map,iu=0,au=null,ou=null,su=0,cu=0,lu=null,uu=!1,du=!1,fu=!1,pu=0,mu=0,hu=0,gu=0,_u=0,vu=0,yu=0,bu=null,xu=null,Su=!1,Cu=0,wu=0,Tu=1/0,Eu=null,Du=null,Ou=0,ku=null,B=null,Au=0,ju=0,Mu=null,Nu=null,Pu=0,Fu=null;function Iu(){return iu&2&&su!==0?su&-su:A.T===null?ot():Fd()}function Lu(){if(vu===0)if(!(su&536870912)||Ki){var e=Ge;Ge<<=1,!(Ge&3932160)&&(Ge=262144),vu=e}else vu=536870912;return e=go.current,e!==null&&(e.flags|=32),vu}function Ru(e,t,n){(e===au&&(cu===2||cu===9)||e.cancelPendingCommit!==null)&&(Gu(e,0),Hu(e,su,vu,!1)),$e(e,n),(!(iu&2)||e!==au)&&(e===au&&(!(iu&2)&&(gu|=n),mu===4&&Hu(e,su,vu,!1)),Dd(e))}function zu(e,t,n){if(iu&6)throw Error(i(327));var r=!n&&(t&127)==0&&(t&e.expiredLanes)===0||Ye(e,t),a=r?$u(e,t):Zu(e,t,!0),o=r;do{if(a===0){du&&!r&&Hu(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!Vu(n)){a=Zu(e,t,!1),o=!1;continue}if(a===2){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=e.pendingLanes&-536870913,s=s===0?s&536870912?536870912:0:s;if(s!==0){t=s;a:{var c=e;a=bu;var l=c.current.memoizedState.isDehydrated;if(l&&(Gu(c,s).flags|=256),s=Zu(c,s,!1),s!==2){if(fu&&!l){c.errorRecoveryDisabledLanes|=o,gu|=o,a=4;break a}o=xu,xu=a,o!==null&&(xu===null?xu=o:xu.push.apply(xu,o))}a=s}if(o=!1,a!==2)continue}}if(a===1){Gu(e,0),Hu(e,t,0,!0);break}a:{switch(r=e,o=a,o){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:Hu(r,t,vu,!uu);break a;case 2:xu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(a=Cu+300-Oe(),10<a)){if(Hu(r,t,vu,!uu),Je(r,0,!0)!==0)break a;Au=t,r.timeoutHandle=Sf(Bu.bind(null,r,n,xu,Eu,Su,t,vu,gu,yu,uu,o,`Throttled`,-0,0),a);break a}Bu(r,n,xu,Eu,Su,t,vu,gu,yu,uu,o,null,-0,0)}}break}while(1);Dd(e)}function Bu(e,t,n,r,i,a,o,s,c,l,u,d,f,p){if(e.timeoutHandle=-1,d=t.subtreeFlags,d&8192||(d&16785408)==16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tn},Xl(t,a,d);var m=(a&62914560)===a?Cu-Oe():(a&4194048)===a?wu-Oe():0;if(m=Sp(d,m),m!==null){Au=a,e.cancelPendingCommit=m(od.bind(null,e,t,a,n,r,i,o,s,c,u,d,null,f,p)),Hu(e,a,o,!l);return}}od(e,t,a,n,r,i,o,s,c)}function Vu(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Nr(a(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hu(e,t,n,r){t&=~_u,t&=~gu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-Be(i),o=1<<a;r[a]=-1,i&=~o}n!==0&&tt(e,n,t)}function Uu(){return iu&6?!0:(Od(0,!1),!1)}function Wu(){if(ou!==null){if(cu===0)var e=ou.return;else e=ou,aa=ia=null,Uo(e),Wa=null,Ga=0,e=ou;for(;e!==null;)il(e.alternate,e),e=e.return;ou=null}}function Gu(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Cf(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Au=0,Wu(),au=e,ou=n=xi(e.current,null),su=t,cu=0,lu=null,uu=!1,du=Ye(e,t),fu=!1,yu=vu=_u=gu=hu=mu=0,xu=bu=null,Su=!1,t&8&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var i=31-Be(r),a=1<<i;t|=e[i],r&=~a}return pu=t,di(),n}function Ku(e,t){z=null,A.H=tc,t===Pa||t===Ia?(t=Ha(),cu=3):t===Fa?(t=Ha(),cu=4):cu=t===yc?8:typeof t==`object`&&t&&typeof t.then==`function`?6:1,lu=t,ou===null&&(mu=1,pc(e,ki(t,e.current)))}function qu(){var e=go.current;return e===null?!0:(su&4194048)===su?_o===null:(su&62914560)===su||su&536870912?e===_o:!1}function Ju(){var e=A.H;return A.H=tc,e===null?tc:e}function Yu(){var e=A.A;return A.A=nu,e}function Xu(){mu=4,uu||(su&4194048)!==su&&go.current!==null||(du=!0),!(hu&134217727)&&!(gu&134217727)||au===null||Hu(au,su,vu,!1)}function Zu(e,t,n){var r=iu;iu|=2;var i=Ju(),a=Yu();(au!==e||su!==t)&&(Eu=null,Gu(e,t)),t=!1;var o=mu;a:do try{if(cu!==0&&ou!==null){var s=ou,c=lu;switch(cu){case 8:Wu(),o=6;break a;case 3:case 2:case 9:case 6:go.current===null&&(t=!0);var l=cu;if(cu=0,lu=null,rd(e,s,c,l),n&&du){o=0;break a}break;default:l=cu,cu=0,lu=null,rd(e,s,c,l)}}Qu(),o=mu;break}catch(t){Ku(e,t)}while(1);return t&&e.shellSuspendCounter++,aa=ia=null,iu=r,A.H=i,A.A=a,ou===null&&(au=null,su=0,di()),o}function Qu(){for(;ou!==null;)td(ou)}function $u(e,t){var n=iu;iu|=2;var r=Ju(),a=Yu();au!==e||su!==t?(Eu=null,Tu=Oe()+500,Gu(e,t)):du=Ye(e,t);a:do try{if(cu!==0&&ou!==null){t=ou;var o=lu;b:switch(cu){case 1:cu=0,lu=null,rd(e,t,o,1);break;case 2:case 9:if(Ra(o)){cu=0,lu=null,nd(t);break}t=function(){cu!==2&&cu!==9||au!==e||(cu=7),Dd(e)},o.then(t,t);break a;case 3:cu=7;break a;case 4:cu=5;break a;case 7:Ra(o)?(cu=0,lu=null,nd(t)):(cu=0,lu=null,rd(e,t,o,7));break;case 5:var s=null;switch(ou.tag){case 26:s=ou.memoizedState;case 5:case 27:var c=ou;if(s?yp(s):c.stateNode.complete){cu=0,lu=null;var l=c.sibling;if(l!==null)ou=l;else{var u=c.return;u===null?ou=null:(ou=u,id(u))}break b}}cu=0,lu=null,rd(e,t,o,5);break;case 6:cu=0,lu=null,rd(e,t,o,6);break;case 8:Wu(),mu=6;break a;default:throw Error(i(462))}}ed();break}catch(t){Ku(e,t)}while(1);return aa=ia=null,A.H=r,A.A=a,iu=n,ou===null?(au=null,su=0,di(),mu):0}function ed(){for(;ou!==null&&!Ee();)td(ou)}function td(e){var t=Yc(e.alternate,e,pu);e.memoizedProps=e.pendingProps,t===null?id(e):ou=t}function nd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Nc(n,t,t.pendingProps,t.type,void 0,su);break;case 11:t=Nc(n,t,t.pendingProps,t.type.render,t.ref,su);break;case 5:Uo(t);default:il(n,t),t=ou=Si(t,pu),t=Yc(n,t,pu)}e.memoizedProps=e.pendingProps,t===null?id(e):ou=t}function rd(e,t,n,r){aa=ia=null,Uo(t),Wa=null,Ga=0;var i=t.return;try{if(vc(e,i,t,n,su)){mu=1,pc(e,ki(n,e.current)),ou=null;return}}catch(t){if(i!==null)throw ou=i,t;mu=1,pc(e,ki(n,e.current)),ou=null;return}t.flags&32768?(Ki||r===1?e=!0:du||su&536870912?e=!1:(uu=e=!0,(r===2||r===9||r===3||r===6)&&(r=go.current,r!==null&&r.tag===13&&(r.flags|=16384))),ad(t,e)):id(t)}function id(e){var t=e;do{if(t.flags&32768){ad(t,uu);return}e=t.return;var n=nl(t.alternate,t,pu);if(n!==null){ou=n;return}if(t=t.sibling,t!==null){ou=t;return}ou=t=e}while(t!==null);mu===0&&(mu=5)}function ad(e,t){do{var n=rl(e.alternate,e);if(n!==null){n.flags&=32767,ou=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ou=e;return}ou=e=n}while(e!==null);mu=6,ou=null}function od(e,t,n,r,a,o,s,c,l){e.cancelPendingCommit=null;do dd();while(Ou!==0);if(iu&6)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(o=t.lanes|t.childLanes,o|=ui,et(e,n,o,s,c,l),e===au&&(ou=au=null,su=0),B=t,ku=e,Au=n,ju=o,Mu=a,Nu=r,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,bd(Me,function(){return fd(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!=0,t.subtreeFlags&13878||r){r=A.T,A.T=null,a=j.p,j.p=2,s=iu,iu|=4;try{Cl(e,t,n)}finally{iu=s,j.p=a,A.T=r}}Ou=1,sd(),cd(),ld()}}function sd(){if(Ou===1){Ou=0;var e=ku,t=B,n=(t.flags&13878)!=0;if(t.subtreeFlags&13878||n){n=A.T,A.T=null;var r=j.p;j.p=2;var i=iu;iu|=4;try{Il(t,e);var a=hf,o=Rr(e.containerInfo),s=a.focusedElem,c=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Lr(s.ownerDocument.documentElement,s)){if(c!==null&&zr(s)){var l=c.start,u=c.end;if(u===void 0&&(u=l),`selectionStart`in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),m=s.textContent.length,h=Math.min(c.start,m),g=c.end===void 0?h:Math.min(c.end,m);!p.extend&&h>g&&(o=g,g=h,h=o);var _=Ir(s,h),v=Ir(s,g);if(_&&v&&(p.rangeCount!==1||p.anchorNode!==_.node||p.anchorOffset!==_.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(_.node,_.offset),p.removeAllRanges(),h>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=s;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof s.focus==`function`&&s.focus(),s=0;s<d.length;s++){var b=d[s];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}Ip=!!mf,hf=mf=null}finally{iu=i,j.p=r,A.T=n}}e.current=t,Ou=2}}function cd(){if(Ou===2){Ou=0;var e=ku,t=B,n=(t.flags&8772)!=0;if(t.subtreeFlags&8772||n){n=A.T,A.T=null;var r=j.p;j.p=2;var i=iu;iu|=4;try{wl(e,t.alternate,t)}finally{iu=i,j.p=r,A.T=n}}Ou=3}}function ld(){if(Ou===4||Ou===3){Ou=0,De();var e=ku,t=B,n=Au,r=Nu;t.subtreeFlags&10256||t.flags&10256?Ou=5:(Ou=0,B=ku=null,ud(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Du=null),at(n),t=t.stateNode,Re&&typeof Re.onCommitFiberRoot==`function`)try{Re.onCommitFiberRoot(Le,t,void 0,(t.current.flags&128)==128)}catch{}if(r!==null){t=A.T,i=j.p,j.p=2,A.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{A.T=t,j.p=i}}Au&3&&dd(),Dd(e),i=e.pendingLanes,n&261930&&i&42?e===Fu?Pu++:(Pu=0,Fu=e):Pu=0,Od(0,!1)}}function ud(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,xa(t)))}function dd(){return sd(),cd(),ld(),fd()}function fd(){if(Ou!==5)return!1;var e=ku,t=ju;ju=0;var n=at(Au),r=A.T,a=j.p;try{j.p=32>n?32:n,A.T=null,n=Mu,Mu=null;var o=ku,s=Au;if(Ou=0,B=ku=null,Au=0,iu&6)throw Error(i(331));var c=iu;if(iu|=4,$l(o.current),Gl(o,o.current,s,n),iu=c,Od(0,!1),Re&&typeof Re.onPostCommitFiberRoot==`function`)try{Re.onPostCommitFiberRoot(Le,o)}catch{}return!0}finally{j.p=a,A.T=r,ud(e,t)}}function pd(e,t,n){t=ki(n,t),t=hc(e.stateNode,t,2),e=no(e,t,2),e!==null&&($e(e,2),Dd(e))}function md(e,t,n){if(e.tag===3)pd(e,e,n);else for(;t!==null;){if(t.tag===3){pd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError==`function`||typeof r.componentDidCatch==`function`&&(Du===null||!Du.has(r))){e=ki(n,e),n=gc(2),r=no(t,n,2),r!==null&&(_c(n,r,t,e),$e(r,2),Dd(r));break}}t=t.return}}function hd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ru;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(fu=!0,i.add(n),e=gd.bind(null,e,t,n),t.then(e,e))}function gd(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,au===e&&(su&n)===n&&(mu===4||mu===3&&(su&62914560)===su&&300>Oe()-Cu?!(iu&2)&&Gu(e,0):_u|=n,yu===su&&(yu=0)),Dd(e)}function _d(e,t){t===0&&(t=Ze()),e=mi(e,t),e!==null&&($e(e,t),Dd(e))}function vd(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),_d(e,n)}function yd(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}r!==null&&r.delete(t),_d(e,n)}function bd(e,t){return we(e,t)}var xd=null,Sd=null,Cd=!1,wd=!1,Td=!1,Ed=0;function Dd(e){e!==Sd&&e.next===null&&(Sd===null?xd=Sd=e:Sd=Sd.next=e),wd=!0,Cd||(Cd=!0,Pd())}function Od(e,t){if(!Td&&wd){Td=!0;do for(var n=!1,r=xd;r!==null;){if(!t)if(e!==0){var i=r.pendingLanes;if(i===0)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-Be(42|e)+1)-1,a&=i&~(o&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,Nd(r,a))}else a=su,a=Je(r,r===au?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),!(a&3)||Ye(r,a)||(n=!0,Nd(r,a));r=r.next}while(n);Td=!1}}function kd(){Ad()}function Ad(){wd=Cd=!1;var e=0;Ed!==0&&xf()&&(e=Ed);for(var t=Oe(),n=null,r=xd;r!==null;){var i=r.next,a=jd(r,t);a===0?(r.next=null,n===null?xd=i:n.next=i,i===null&&(Sd=n)):(n=r,(e!==0||a&3)&&(wd=!0)),r=i}Ou!==0&&Ou!==5||Od(e,!1),Ed!==0&&(Ed=0)}function jd(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var o=31-Be(a),s=1<<o,c=i[o];c===-1?((s&n)===0||(s&r)!==0)&&(i[o]=Xe(s,t)):c<=t&&(e.expiredLanes|=s),a&=~s}if(t=au,n=su,n=Je(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(cu===2||cu===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Te(r),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Ye(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Te(r),at(n)){case 2:case 8:n=je;break;case 32:n=Me;break;case 268435456:n=Pe;break;default:n=Me}return r=Md.bind(null,e),n=we(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Te(r),e.callbackPriority=2,e.callbackNode=null,2}function Md(e,t){if(Ou!==0&&Ou!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(dd()&&e.callbackNode!==n)return null;var r=su;return r=Je(e,e===au?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(zu(e,r,t),jd(e,Oe()),e.callbackNode!=null&&e.callbackNode===n?Md.bind(null,e):null)}function Nd(e,t){if(dd())return null;zu(e,t,!0)}function Pd(){Tf(function(){iu&6?we(Ae,kd):Ad()})}function Fd(){if(Ed===0){var e=wa;e===0&&(e=We,We<<=1,!(We&261888)&&(We=256)),Ed=e}return Ed}function Id(e){return e==null||typeof e==`symbol`||typeof e==`boolean`?null:typeof e==`function`?e:en(``+e)}function Ld(e,t){var n=t.ownerDocument.createElement(`input`);return n.name=t.name,n.value=t.value,e.id&&n.setAttribute(`form`,e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Rd(e,t,n,r,i){if(t===`submit`&&n&&n.stateNode===i){var a=Id((i[ut]||null).action),o=r.submitter;o&&(t=(t=o[ut]||null)?Id(t.formAction):o.getAttribute(`formAction`),t!==null&&(a=t,o=null));var s=new Cn(`action`,`action`,null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Ed!==0){var e=o?Ld(i,o):new FormData(i);Vs(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else typeof a==`function`&&(s.preventDefault(),e=o?Ld(i,o):new FormData(i),Vs(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}for(var zd=0;zd<ai.length;zd++){var Bd=ai[zd],Vd=Bd.toLowerCase(),Hd=Bd[0].toUpperCase()+Bd.slice(1);oi(Vd,`on`+Hd)}oi(Zr,`onAnimationEnd`),oi(Qr,`onAnimationIteration`),oi($r,`onAnimationStart`),oi(`dblclick`,`onDoubleClick`),oi(`focusin`,`onFocus`),oi(`focusout`,`onBlur`),oi(ei,`onTransitionRun`),oi(ti,`onTransitionStart`),oi(ni,`onTransitionCancel`),oi(ri,`onTransitionEnd`),Et(`onMouseEnter`,[`mouseout`,`mouseover`]),Et(`onMouseLeave`,[`mouseout`,`mouseover`]),Et(`onPointerEnter`,[`pointerout`,`pointerover`]),Et(`onPointerLeave`,[`pointerout`,`pointerover`]),Tt(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),Tt(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),Tt(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),Tt(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),Tt(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),Tt(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var Ud=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),Wd=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(Ud));function Gd(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;a:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){si(e)}i.currentTarget=null,a=c}else for(o=0;o<r.length;o++){if(s=r[o],c=s.instance,l=s.currentTarget,s=s.listener,c!==a&&i.isPropagationStopped())break a;a=s,i.currentTarget=l;try{a(i)}catch(e){si(e)}i.currentTarget=null,a=c}}}}function Kd(e,t){var n=t[ft];n===void 0&&(n=t[ft]=new Set);var r=e+`__bubble`;n.has(r)||(Xd(t,e,2,!1),n.add(r))}function qd(e,t,n){var r=0;t&&(r|=4),Xd(n,e,r,t)}var Jd=`_reactListening`+Math.random().toString(36).slice(2);function Yd(e){if(!e[Jd]){e[Jd]=!0,Ct.forEach(function(t){t!==`selectionchange`&&(Wd.has(t)||qd(t,!1,e),qd(t,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jd]||(t[Jd]=!0,qd(`selectionchange`,!1,t))}}function Xd(e,t,n,r){switch(Up(t)){case 2:var i=Lp;break;case 8:i=Rp;break;default:i=zp}n=i.bind(null,t,n,e),i=void 0,!fn||t!==`touchstart`&&t!==`touchmove`&&t!==`wheel`||(i=!0),r?i===void 0?e.addEventListener(t,n,!0):e.addEventListener(t,n,{capture:!0,passive:i}):i===void 0?e.addEventListener(t,n,!1):e.addEventListener(t,n,{passive:i})}function Zd(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)a:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var c=r.stateNode.containerInfo;if(c===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&s.stateNode.containerInfo===i)return;s=s.return}for(;c!==null;){if(s=vt(c),s===null)return;if(l=s.tag,l===5||l===6||l===26||l===27){r=a=s;continue a}c=c.parentNode}}r=r.return}ln(function(){var r=a,i=rn(n),s=[];a:{var c=ii.get(e);if(c!==void 0){var l=Cn,u=e;switch(e){case`keypress`:if(vn(n)===0)break a;case`keydown`:case`keyup`:l=qn;break;case`focusin`:u=`focus`,l=Pn;break;case`focusout`:u=`blur`,l=Pn;break;case`beforeblur`:case`afterblur`:l=Pn;break;case`click`:if(n.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:l=An;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:l=Mn;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:l=Zn;break;case Zr:case Qr:case $r:l=In;break;case ri:l=$n;break;case`scroll`:case`scrollend`:l=Tn;break;case`wheel`:l=tr;break;case`copy`:case`cut`:case`paste`:l=Rn;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:l=Yn;break;case`toggle`:case`beforetoggle`:l=rr}var d=(t&4)!=0,f=!d&&(e===`scroll`||e===`scrollend`),p=d?c===null?null:c+`Capture`:c;d=[];for(var m=r,h;m!==null;){var g=m;if(h=g.stateNode,g=g.tag,g!==5&&g!==26&&g!==27||h===null||p===null||(g=un(m,p),g!=null&&d.push(Qd(m,g,h))),f)break;m=m.return}0<d.length&&(c=new l(c,u,null,n,i),s.push({event:c,listeners:d}))}}if(!(t&7)){a:{if(c=e===`mouseover`||e===`pointerover`,l=e===`mouseout`||e===`pointerout`,c&&n!==nn&&(u=n.relatedTarget||n.fromElement)&&(vt(u)||u[dt]))break a;if((l||c)&&(c=i.window===i?i:(c=i.ownerDocument)?c.defaultView||c.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,u=u?vt(u):null,u!==null&&(f=o(u),d=u.tag,u!==f||d!==5&&d!==27&&d!==6)&&(u=null)):(l=null,u=r),l!==u)){if(d=An,g=`onMouseLeave`,p=`onMouseEnter`,m=`mouse`,(e===`pointerout`||e===`pointerover`)&&(d=Yn,g=`onPointerLeave`,p=`onPointerEnter`,m=`pointer`),f=l==null?c:bt(l),h=u==null?c:bt(u),c=new d(g,m+`leave`,l,n,i),c.target=f,c.relatedTarget=h,g=null,vt(i)===r&&(d=new d(p,m+`enter`,u,n,i),d.target=h,d.relatedTarget=f,g=d),f=g,l&&u)b:{for(d=ef,p=l,m=u,h=0,g=p;g;g=d(g))h++;g=0;for(var _=m;_;_=d(_))g++;for(;0<h-g;)p=d(p),h--;for(;0<g-h;)m=d(m),g--;for(;h--;){if(p===m||m!==null&&p===m.alternate){d=p;break b}p=d(p),m=d(m)}d=null}else d=null;l!==null&&tf(s,c,l,d,!1),u!==null&&f!==null&&tf(s,f,u,d,!0)}}a:{if(c=r?bt(r):window,l=c.nodeName&&c.nodeName.toLowerCase(),l===`select`||l===`input`&&c.type===`file`)var v=Sr;else if(_r(c))if(Cr)v=jr;else{v=Ar;var y=kr}else l=c.nodeName,!l||l.toLowerCase()!==`input`||c.type!==`checkbox`&&c.type!==`radio`?r&&Zt(r.elementType)&&(v=Sr):v=R;if(v&&=v(e,r)){vr(s,v,n,i);break a}y&&y(e,c,r),e===`focusout`&&r&&c.type===`number`&&r.memoizedProps.value!=null&&Ut(c,`number`,c.value)}switch(y=r?bt(r):window,e){case`focusin`:(_r(y)||y.contentEditable===`true`)&&(Vr=y,Hr=r,Ur=null);break;case`focusout`:Ur=Hr=Vr=null;break;case`mousedown`:Wr=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:Wr=!1,Gr(s,n,i);break;case`selectionchange`:if(Br)break;case`keydown`:case`keyup`:Gr(s,n,i)}var b;if(ar)b:{switch(e){case`compositionstart`:var x=`onCompositionStart`;break b;case`compositionend`:x=`onCompositionEnd`;break b;case`compositionupdate`:x=`onCompositionUpdate`;break b}x=void 0}else pr?dr(e,n)&&(x=`onCompositionEnd`):e===`keydown`&&n.keyCode===229&&(x=`onCompositionStart`);x&&(cr&&n.locale!==`ko`&&(pr||x!==`onCompositionStart`?x===`onCompositionEnd`&&pr&&(b=_n()):(mn=i,hn=`value`in mn?mn.value:mn.textContent,pr=!0)),y=$d(r,x),0<y.length&&(x=new Bn(x,e,null,n,i),s.push({event:x,listeners:y}),b?x.data=b:(b=fr(n),b!==null&&(x.data=b)))),(b=sr?mr(e,n):hr(e,n))&&(x=$d(r,`onBeforeInput`),0<x.length&&(y=new Bn(`onBeforeInput`,`beforeinput`,null,n,i),s.push({event:y,listeners:x}),y.data=b)),Rd(s,e,r,n,i)}Gd(s,t)})}function Qd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $d(e,t){for(var n=t+`Capture`,r=[];e!==null;){var i=e,a=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||a===null||(i=un(e,n),i!=null&&r.unshift(Qd(e,i,a)),i=un(e,t),i!=null&&r.push(Qd(e,i,a))),e.tag===3)return r;e=e.return}return[]}function ef(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function tf(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,c!==null&&c===r)break;s!==5&&s!==26&&s!==27||l===null||(c=l,i?(l=un(n,a),l!=null&&o.unshift(Qd(n,l,c))):i||(l=un(n,a),l!=null&&o.push(Qd(n,l,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var nf=/\r\n?/g,rf=/\u0000|\uFFFD/g;function af(e){return(typeof e==`string`?e:``+e).replace(nf,`
`).replace(rf,``)}function sf(e,t){return t=af(t),af(e)===t}function cf(e,t,n,r,a,o){switch(n){case`children`:typeof r==`string`?t===`body`||t===`textarea`&&r===``||qt(e,r):(typeof r==`number`||typeof r==`bigint`)&&t!==`body`&&qt(e,``+r);break;case`className`:Mt(e,`class`,r);break;case`tabIndex`:Mt(e,`tabindex`,r);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:Mt(e,n,r);break;case`style`:Xt(e,r,o);break;case`data`:if(t!==`object`){Mt(e,`data`,r);break}case`src`:case`href`:if(r===``&&(t!==`a`||n!==`href`)){e.removeAttribute(n);break}if(r==null||typeof r==`function`||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=en(``+r),e.setAttribute(n,r);break;case`action`:case`formAction`:if(typeof r==`function`){e.setAttribute(n,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof o==`function`&&(n===`formAction`?(t!==`input`&&cf(e,t,`name`,a.name,a,null),cf(e,t,`formEncType`,a.formEncType,a,null),cf(e,t,`formMethod`,a.formMethod,a,null),cf(e,t,`formTarget`,a.formTarget,a,null)):(cf(e,t,`encType`,a.encType,a,null),cf(e,t,`method`,a.method,a,null),cf(e,t,`target`,a.target,a,null)));if(r==null||typeof r==`symbol`||typeof r==`boolean`){e.removeAttribute(n);break}r=en(``+r),e.setAttribute(n,r);break;case`onClick`:r!=null&&(e.onclick=tn);break;case`onScroll`:r!=null&&Kd(`scroll`,e);break;case`onScrollEnd`:r!=null&&Kd(`scrollend`,e);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`multiple`:e.multiple=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`muted`:e.muted=r&&typeof r!=`function`&&typeof r!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(r==null||typeof r==`function`||typeof r==`boolean`||typeof r==`symbol`){e.removeAttribute(`xlink:href`);break}n=en(``+r),e.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,n);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``+r):e.removeAttribute(n);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:r&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,``):e.removeAttribute(n);break;case`capture`:case`download`:!0===r?e.setAttribute(n,``):!1!==r&&r!=null&&typeof r!=`function`&&typeof r!=`symbol`?e.setAttribute(n,r):e.removeAttribute(n);break;case`cols`:case`rows`:case`size`:case`span`:r!=null&&typeof r!=`function`&&typeof r!=`symbol`&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case`rowSpan`:case`start`:r==null||typeof r==`function`||typeof r==`symbol`||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case`popover`:Kd(`beforetoggle`,e),Kd(`toggle`,e),jt(e,`popover`,r);break;case`xlinkActuate`:Nt(e,`http://www.w3.org/1999/xlink`,`xlink:actuate`,r);break;case`xlinkArcrole`:Nt(e,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,r);break;case`xlinkRole`:Nt(e,`http://www.w3.org/1999/xlink`,`xlink:role`,r);break;case`xlinkShow`:Nt(e,`http://www.w3.org/1999/xlink`,`xlink:show`,r);break;case`xlinkTitle`:Nt(e,`http://www.w3.org/1999/xlink`,`xlink:title`,r);break;case`xlinkType`:Nt(e,`http://www.w3.org/1999/xlink`,`xlink:type`,r);break;case`xmlBase`:Nt(e,`http://www.w3.org/XML/1998/namespace`,`xml:base`,r);break;case`xmlLang`:Nt(e,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,r);break;case`xmlSpace`:Nt(e,`http://www.w3.org/XML/1998/namespace`,`xml:space`,r);break;case`is`:jt(e,`is`,r);break;case`innerText`:case`textContent`:break;default:(!(2<n.length)||n[0]!==`o`&&n[0]!==`O`||n[1]!==`n`&&n[1]!==`N`)&&(n=Qt.get(n)||n,jt(e,n,r))}}function lf(e,t,n,r,a,o){switch(n){case`style`:Xt(e,r,o);break;case`dangerouslySetInnerHTML`:if(r!=null){if(typeof r!=`object`||!(`__html`in r))throw Error(i(61));if(n=r.__html,n!=null){if(a.children!=null)throw Error(i(60));e.innerHTML=n}}break;case`children`:typeof r==`string`?qt(e,r):(typeof r==`number`||typeof r==`bigint`)&&qt(e,``+r);break;case`onScroll`:r!=null&&Kd(`scroll`,e);break;case`onScrollEnd`:r!=null&&Kd(`scrollend`,e);break;case`onClick`:r!=null&&(e.onclick=tn);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!wt.hasOwnProperty(n))a:{if(n[0]===`o`&&n[1]===`n`&&(a=n.endsWith(`Capture`),t=n.slice(2,a?n.length-7:void 0),o=e[ut]||null,o=o==null?null:o[n],typeof o==`function`&&e.removeEventListener(t,o,a),typeof r==`function`)){typeof o!=`function`&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,a);break a}n in e?e[n]=r:!0===r?e.setAttribute(n,``):jt(e,n,r)}}}function uf(e,t,n){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:Kd(`error`,e),Kd(`load`,e);var r=!1,a=!1,o;for(o in n)if(n.hasOwnProperty(o)){var s=n[o];if(s!=null)switch(o){case`src`:r=!0;break;case`srcSet`:a=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:cf(e,t,o,s,n,null)}}a&&cf(e,t,`srcSet`,n.srcSet,n,null),r&&cf(e,t,`src`,n.src,n,null);return;case`input`:Kd(`invalid`,e);var c=o=s=a=null,l=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var d=n[r];if(d!=null)switch(r){case`name`:a=d;break;case`type`:s=d;break;case`checked`:l=d;break;case`defaultChecked`:u=d;break;case`value`:o=d;break;case`defaultValue`:c=d;break;case`children`:case`dangerouslySetInnerHTML`:if(d!=null)throw Error(i(137,t));break;default:cf(e,t,r,d,n,null)}}Ht(e,o,c,l,u,s,a,!1);return;case`select`:for(a in Kd(`invalid`,e),r=s=o=null,n)if(n.hasOwnProperty(a)&&(c=n[a],c!=null))switch(a){case`value`:o=c;break;case`defaultValue`:s=c;break;case`multiple`:r=c;default:cf(e,t,a,c,n,null)}t=o,n=s,e.multiple=!!r,t==null?n!=null&&Wt(e,!!r,n,!0):Wt(e,!!r,t,!1);return;case`textarea`:for(s in Kd(`invalid`,e),o=a=r=null,n)if(n.hasOwnProperty(s)&&(c=n[s],c!=null))switch(s){case`value`:r=c;break;case`defaultValue`:a=c;break;case`children`:o=c;break;case`dangerouslySetInnerHTML`:if(c!=null)throw Error(i(91));break;default:cf(e,t,s,c,n,null)}Kt(e,r,a,o);return;case`option`:for(l in n)if(n.hasOwnProperty(l)&&(r=n[l],r!=null))switch(l){case`selected`:e.selected=r&&typeof r!=`function`&&typeof r!=`symbol`;break;default:cf(e,t,l,r,n,null)}return;case`dialog`:Kd(`beforetoggle`,e),Kd(`toggle`,e),Kd(`cancel`,e),Kd(`close`,e);break;case`iframe`:case`object`:Kd(`load`,e);break;case`video`:case`audio`:for(r=0;r<Ud.length;r++)Kd(Ud[r],e);break;case`image`:Kd(`error`,e),Kd(`load`,e);break;case`details`:Kd(`toggle`,e);break;case`embed`:case`source`:case`link`:Kd(`error`,e),Kd(`load`,e);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:throw Error(i(137,t));default:cf(e,t,u,r,n,null)}return;default:if(Zt(t)){for(d in n)n.hasOwnProperty(d)&&(r=n[d],r!==void 0&&lf(e,t,d,r,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(r=n[c],r!=null&&cf(e,t,c,r,n,null))}function df(e,t,n,r){switch(t){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var a=null,o=null,s=null,c=null,l=null,u=null,d=null;for(m in n){var f=n[m];if(n.hasOwnProperty(m)&&f!=null)switch(m){case`checked`:break;case`value`:break;case`defaultValue`:l=f;default:r.hasOwnProperty(m)||cf(e,t,m,null,r,f)}}for(var p in r){var m=r[p];if(f=n[p],r.hasOwnProperty(p)&&(m!=null||f!=null))switch(p){case`type`:o=m;break;case`name`:a=m;break;case`checked`:u=m;break;case`defaultChecked`:d=m;break;case`value`:s=m;break;case`defaultValue`:c=m;break;case`children`:case`dangerouslySetInnerHTML`:if(m!=null)throw Error(i(137,t));break;default:m!==f&&cf(e,t,p,m,r,f)}}Vt(e,s,c,l,u,d,o,a);return;case`select`:for(o in m=s=c=p=null,n)if(l=n[o],n.hasOwnProperty(o)&&l!=null)switch(o){case`value`:break;case`multiple`:m=l;default:r.hasOwnProperty(o)||cf(e,t,o,null,r,l)}for(a in r)if(o=r[a],l=n[a],r.hasOwnProperty(a)&&(o!=null||l!=null))switch(a){case`value`:p=o;break;case`defaultValue`:c=o;break;case`multiple`:s=o;default:o!==l&&cf(e,t,a,o,r,l)}t=c,n=s,r=m,p==null?!!r!=!!n&&(t==null?Wt(e,!!n,n?[]:``,!1):Wt(e,!!n,t,!0)):Wt(e,!!n,p,!1);return;case`textarea`:for(c in m=p=null,n)if(a=n[c],n.hasOwnProperty(c)&&a!=null&&!r.hasOwnProperty(c))switch(c){case`value`:break;case`children`:break;default:cf(e,t,c,null,r,a)}for(s in r)if(a=r[s],o=n[s],r.hasOwnProperty(s)&&(a!=null||o!=null))switch(s){case`value`:p=a;break;case`defaultValue`:m=a;break;case`children`:break;case`dangerouslySetInnerHTML`:if(a!=null)throw Error(i(91));break;default:a!==o&&cf(e,t,s,a,r,o)}Gt(e,p,m);return;case`option`:for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!r.hasOwnProperty(h))switch(h){case`selected`:e.selected=!1;break;default:cf(e,t,h,null,r,p)}for(l in r)if(p=r[l],m=n[l],r.hasOwnProperty(l)&&p!==m&&(p!=null||m!=null))switch(l){case`selected`:e.selected=p&&typeof p!=`function`&&typeof p!=`symbol`;break;default:cf(e,t,l,p,r,m)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var g in n)p=n[g],n.hasOwnProperty(g)&&p!=null&&!r.hasOwnProperty(g)&&cf(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(p!=null||m!=null))switch(u){case`children`:case`dangerouslySetInnerHTML`:if(p!=null)throw Error(i(137,t));break;default:cf(e,t,u,p,r,m)}return;default:if(Zt(t)){for(var _ in n)p=n[_],n.hasOwnProperty(_)&&p!==void 0&&!r.hasOwnProperty(_)&&lf(e,t,_,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||p===void 0&&m===void 0||lf(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&p!=null&&!r.hasOwnProperty(v)&&cf(e,t,v,null,r,p);for(f in r)p=r[f],m=n[f],!r.hasOwnProperty(f)||p===m||p==null&&m==null||cf(e,t,f,p,r,m)}function ff(e){switch(e){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function pf(){if(typeof performance.getEntriesByType==`function`){for(var e=0,t=0,n=performance.getEntriesByType(`resource`),r=0;r<n.length;r++){var i=n[r],a=i.transferSize,o=i.initiatorType,s=i.duration;if(a&&s&&ff(o)){for(o=0,s=i.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&ff(d)&&(c=c.responseEnd,o+=u*(c<s?1:(s-l)/(c-l)))}if(--r,t+=8*(a+o)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e==`number`)?e:5}var mf=null,hf=null;function gf(e){return e.nodeType===9?e:e.ownerDocument}function _f(e){switch(e){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function vf(e,t){if(e===0)switch(t){case`svg`:return 1;case`math`:return 2;default:return 0}return e===1&&t===`foreignObject`?0:e}function yf(e,t){return e===`textarea`||e===`noscript`||typeof t.children==`string`||typeof t.children==`number`||typeof t.children==`bigint`||typeof t.dangerouslySetInnerHTML==`object`&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bf=null;function xf(){var e=window.event;return e&&e.type===`popstate`?e===bf?!1:(bf=e,!0):(bf=null,!1)}var Sf=typeof setTimeout==`function`?setTimeout:void 0,Cf=typeof clearTimeout==`function`?clearTimeout:void 0,wf=typeof Promise==`function`?Promise:void 0,Tf=typeof queueMicrotask==`function`?queueMicrotask:wf===void 0?Sf:function(e){return wf.resolve(null).then(e).catch(Ef)};function Ef(e){setTimeout(function(){throw e})}function Df(e){return e===`head`}function Of(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n===`/$`||n===`/&`){if(r===0){e.removeChild(i),cm(t);return}r--}else if(n===`$`||n===`$?`||n===`$~`||n===`$!`||n===`&`)r++;else if(n===`html`)Hf(e.ownerDocument.documentElement);else if(n===`head`){n=e.ownerDocument.head,Hf(n);for(var a=n.firstChild;a;){var o=a.nextSibling,s=a.nodeName;a[gt]||s===`SCRIPT`||s===`STYLE`||s===`LINK`&&a.rel.toLowerCase()===`stylesheet`||n.removeChild(a),a=o}}else n===`body`&&Hf(e.ownerDocument.body);n=i}while(n);cm(t)}function kf(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display=`none`):(n.style.display=n._stashedDisplay||``,n.getAttribute(`style`)===``&&n.removeAttribute(`style`)):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=``):n.nodeValue=n._stashedText||``),r&&r.nodeType===8)if(n=r.data,n===`/$`){if(e===0)break;e--}else n!==`$`&&n!==`$?`&&n!==`$~`&&n!==`$!`||e++;n=r}while(n)}function Af(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case`HTML`:case`HEAD`:case`BODY`:Af(n),_t(n);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(n.rel.toLowerCase()===`stylesheet`)continue}e.removeChild(n)}}function jf(e,t,n,r){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!==`INPUT`||e.type!==`hidden`))break}else if(r){if(!e[gt])switch(t){case`meta`:if(!e.hasAttribute(`itemprop`))break;return e;case`link`:if(a=e.getAttribute(`rel`),a===`stylesheet`&&e.hasAttribute(`data-precedence`)||a!==i.rel||e.getAttribute(`href`)!==(i.href==null||i.href===``?null:i.href)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute(`title`)!==(i.title==null?null:i.title))break;return e;case`style`:if(e.hasAttribute(`data-precedence`))break;return e;case`script`:if(a=e.getAttribute(`src`),(a!==(i.src==null?null:i.src)||e.getAttribute(`type`)!==(i.type==null?null:i.type)||e.getAttribute(`crossorigin`)!==(i.crossOrigin==null?null:i.crossOrigin))&&a&&e.hasAttribute(`async`)&&!e.hasAttribute(`itemprop`))break;return e;default:return e}}else if(t===`input`&&e.type===`hidden`){var a=i.name==null?null:``+i.name;if(i.type===`hidden`&&e.getAttribute(`name`)===a)return e}else return e;if(e=Lf(e.nextSibling),e===null)break}return null}function Mf(e,t,n){if(t===``)return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!n||(e=Lf(e.nextSibling),e===null))return null;return e}function Nf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!==`INPUT`||e.type!==`hidden`)&&!t||(e=Lf(e.nextSibling),e===null))return null;return e}function Pf(e){return e.data===`$?`||e.data===`$~`}function Ff(e){return e.data===`$!`||e.data===`$?`&&e.ownerDocument.readyState!==`loading`}function If(e,t){var n=e.ownerDocument;if(e.data===`$~`)e._reactRetry=t;else if(e.data!==`$?`||n.readyState!==`loading`)t();else{var r=function(){t(),n.removeEventListener(`DOMContentLoaded`,r)};n.addEventListener(`DOMContentLoaded`,r),e._reactRetry=r}}function Lf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t===`$`||t===`$!`||t===`$?`||t===`$~`||t===`&`||t===`F!`||t===`F`)break;if(t===`/$`||t===`/&`)return null}}return e}var Rf=null;function zf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`/$`||n===`/&`){if(t===0)return Lf(e.nextSibling);t--}else n!==`$`&&n!==`$!`&&n!==`$?`&&n!==`$~`&&n!==`&`||t++}e=e.nextSibling}return null}function Bf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n===`$`||n===`$!`||n===`$?`||n===`$~`||n===`&`){if(t===0)return e;t--}else n!==`/$`&&n!==`/&`||t++}e=e.previousSibling}return null}function Vf(e,t,n){switch(t=gf(n),e){case`html`:if(e=t.documentElement,!e)throw Error(i(452));return e;case`head`:if(e=t.head,!e)throw Error(i(453));return e;case`body`:if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Hf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);_t(e)}var Uf=new Map,Wf=new Set;function Gf(e){return typeof e.getRootNode==`function`?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Kf=j.d;j.d={f:qf,r:Jf,D:Zf,C:Qf,L:$f,m:ep,X:np,S:tp,M:rp};function qf(){var e=Kf.f(),t=Uu();return e||t}function Jf(e){var t=yt(e);t!==null&&t.tag===5&&t.type===`form`?Us(t):Kf.r(e)}var Yf=typeof document>`u`?null:document;function Xf(e,t,n){var r=Yf;if(r&&typeof t==`string`&&t){var i=Bt(t);i=`link[rel="`+e+`"][href="`+i+`"]`,typeof n==`string`&&(i+=`[crossorigin="`+n+`"]`),Wf.has(i)||(Wf.add(i),e={rel:e,crossOrigin:n,href:t},r.querySelector(i)===null&&(t=r.createElement(`link`),uf(t,`link`,e),St(t),r.head.appendChild(t)))}}function Zf(e){Kf.D(e),Xf(`dns-prefetch`,e,null)}function Qf(e,t){Kf.C(e,t),Xf(`preconnect`,e,t)}function $f(e,t,n){Kf.L(e,t,n);var r=Yf;if(r&&e&&t){var i=`link[rel="preload"][as="`+Bt(t)+`"]`;t===`image`&&n&&n.imageSrcSet?(i+=`[imagesrcset="`+Bt(n.imageSrcSet)+`"]`,typeof n.imageSizes==`string`&&(i+=`[imagesizes="`+Bt(n.imageSizes)+`"]`)):i+=`[href="`+Bt(e)+`"]`;var a=i;switch(t){case`style`:a=ap(e);break;case`script`:a=lp(e)}Uf.has(a)||(e=m({rel:`preload`,href:t===`image`&&n&&n.imageSrcSet?void 0:e,as:t},n),Uf.set(a,e),r.querySelector(i)!==null||t===`style`&&r.querySelector(op(a))||t===`script`&&r.querySelector(up(a))||(t=r.createElement(`link`),uf(t,`link`,e),St(t),r.head.appendChild(t)))}}function ep(e,t){Kf.m(e,t);var n=Yf;if(n&&e){var r=t&&typeof t.as==`string`?t.as:`script`,i=`link[rel="modulepreload"][as="`+Bt(r)+`"][href="`+Bt(e)+`"]`,a=i;switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:a=lp(e)}if(!Uf.has(a)&&(e=m({rel:`modulepreload`,href:e},t),Uf.set(a,e),n.querySelector(i)===null)){switch(r){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(n.querySelector(up(a)))return}r=n.createElement(`link`),uf(r,`link`,e),St(r),n.head.appendChild(r)}}}function tp(e,t,n){Kf.S(e,t,n);var r=Yf;if(r&&e){var i=xt(r).hoistableStyles,a=ap(e);t||=`default`;var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(op(a)))s.loading=5;else{e=m({rel:`stylesheet`,href:e,"data-precedence":t},n),(n=Uf.get(a))&&pp(e,n);var c=o=r.createElement(`link`);St(c),uf(c,`link`,e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener(`load`,function(){s.loading|=1}),c.addEventListener(`error`,function(){s.loading|=2}),s.loading|=4,fp(o,t,r)}o={type:`stylesheet`,instance:o,count:1,state:s},i.set(a,o)}}}function np(e,t){Kf.X(e,t);var n=Yf;if(n&&e){var r=xt(n).hoistableScripts,i=lp(e),a=r.get(i);a||(a=n.querySelector(up(i)),a||(e=m({src:e,async:!0},t),(t=Uf.get(i))&&mp(e,t),a=n.createElement(`script`),St(a),uf(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function rp(e,t){Kf.M(e,t);var n=Yf;if(n&&e){var r=xt(n).hoistableScripts,i=lp(e),a=r.get(i);a||(a=n.querySelector(up(i)),a||(e=m({src:e,async:!0,type:`module`},t),(t=Uf.get(i))&&mp(e,t),a=n.createElement(`script`),St(a),uf(a,`link`,e),n.head.appendChild(a)),a={type:`script`,instance:a,count:1,state:null},r.set(i,a))}}function ip(e,t,n,r){var a=(a=ue.current)?Gf(a):null;if(!a)throw Error(i(446));switch(e){case`meta`:case`title`:return null;case`style`:return typeof n.precedence==`string`&&typeof n.href==`string`?(t=ap(n.href),n=xt(a).hoistableStyles,r=n.get(t),r||(r={type:`style`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};case`link`:if(n.rel===`stylesheet`&&typeof n.href==`string`&&typeof n.precedence==`string`){e=ap(n.href);var o=xt(a).hoistableStyles,s=o.get(e);if(s||(a=a.ownerDocument||a,s={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},o.set(e,s),(o=a.querySelector(op(e)))&&!o._p&&(s.instance=o,s.state.loading=5),Uf.has(e)||(n={rel:`preload`,as:`style`,href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Uf.set(e,n),o||cp(a,e,n,s.state))),t&&r===null)throw Error(i(528,``));return s}if(t&&r!==null)throw Error(i(529,``));return null;case`script`:return t=n.async,n=n.src,typeof n==`string`&&t&&typeof t!=`function`&&typeof t!=`symbol`?(t=lp(n),n=xt(a).hoistableScripts,r=n.get(t),r||(r={type:`script`,instance:null,count:0,state:null},n.set(t,r)),r):{type:`void`,instance:null,count:0,state:null};default:throw Error(i(444,e))}}function ap(e){return`href="`+Bt(e)+`"`}function op(e){return`link[rel="stylesheet"][`+e+`]`}function sp(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function cp(e,t,n,r){e.querySelector(`link[rel="preload"][as="style"][`+t+`]`)?r.loading=1:(t=e.createElement(`link`),r.preload=t,t.addEventListener(`load`,function(){return r.loading|=1}),t.addEventListener(`error`,function(){return r.loading|=2}),uf(t,`link`,n),St(t),e.head.appendChild(t))}function lp(e){return`[src="`+Bt(e)+`"]`}function up(e){return`script[async]`+e}function dp(e,t,n){if(t.count++,t.instance===null)switch(t.type){case`style`:var r=e.querySelector(`style[data-href~="`+Bt(n.href)+`"]`);if(r)return t.instance=r,St(r),r;var a=m({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement(`style`),St(r),uf(r,`style`,a),fp(r,n.precedence,e),t.instance=r;case`stylesheet`:a=ap(n.href);var o=e.querySelector(op(a));if(o)return t.state.loading|=4,t.instance=o,St(o),o;r=sp(n),(a=Uf.get(a))&&pp(r,a),o=(e.ownerDocument||e).createElement(`link`),St(o);var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),uf(o,`link`,r),t.state.loading|=4,fp(o,n.precedence,e),t.instance=o;case`script`:return o=lp(n.src),(a=e.querySelector(up(o)))?(t.instance=a,St(a),a):(r=n,(a=Uf.get(o))&&(r=m({},n),mp(r,a)),e=e.ownerDocument||e,a=e.createElement(`script`),St(a),uf(a,`link`,r),e.head.appendChild(a),t.instance=a);case`void`:return null;default:throw Error(i(443,t.type))}else t.type===`stylesheet`&&!(t.state.loading&4)&&(r=t.instance,t.state.loading|=4,fp(r,n.precedence,e));return t.instance}function fp(e,t,n){for(var r=n.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function pp(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.title??=t.title}function mp(e,t){e.crossOrigin??=t.crossOrigin,e.referrerPolicy??=t.referrerPolicy,e.integrity??=t.integrity}var hp=null;function gp(e,t,n){if(hp===null){var r=new Map,i=hp=new Map;i.set(n,r)}else i=hp,r=i.get(n),r||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[gt]||a[lt]||e===`link`&&a.getAttribute(`rel`)===`stylesheet`)&&a.namespaceURI!==`http://www.w3.org/2000/svg`){var o=a.getAttribute(t)||``;o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function _p(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t===`title`?e.querySelector(`head > title`):null)}function vp(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case`meta`:case`title`:return!0;case`style`:if(typeof t.precedence!=`string`||typeof t.href!=`string`||t.href===``)break;return!0;case`link`:if(typeof t.rel!=`string`||typeof t.href!=`string`||t.href===``||t.onLoad||t.onError)break;switch(t.rel){case`stylesheet`:return e=t.disabled,typeof t.precedence==`string`&&e==null;default:return!0}case`script`:if(t.async&&typeof t.async!=`function`&&typeof t.async!=`symbol`&&!t.onLoad&&!t.onError&&t.src&&typeof t.src==`string`)return!0}return!1}function yp(e){return!(e.type===`stylesheet`&&!(e.state.loading&3))}function bp(e,t,n,r){if(n.type===`stylesheet`&&(typeof r.media!=`string`||!1!==matchMedia(r.media).matches)&&!(n.state.loading&4)){if(n.instance===null){var i=ap(r.href),a=t.querySelector(op(i));if(a){t=a._p,typeof t==`object`&&t&&typeof t.then==`function`&&(e.count++,e=Cp.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,St(a);return}a=t.ownerDocument||t,r=sp(r),(i=Uf.get(i))&&pp(r,i),a=a.createElement(`link`),St(a);var o=a;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),uf(a,`link`,r),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=Cp.bind(e),t.addEventListener(`load`,n),t.addEventListener(`error`,n))}}var xp=0;function Sp(e,t){return e.stylesheets&&e.count===0&&Tp(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&Tp(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&xp===0&&(xp=62500*pf());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Tp(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>xp?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}function Cp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Tp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wp=null;function Tp(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wp=new Map,t.forEach(Ep,e),wp=null,Cp.call(e))}function Ep(e,t){if(!(t.state.loading&4)){var n=wp.get(e);if(n)var r=n.get(null);else{n=new Map,wp.set(e,n);for(var i=e.querySelectorAll(`link[data-precedence],style[data-precedence]`),a=0;a<i.length;a++){var o=i[a];(o.nodeName===`LINK`||o.getAttribute(`media`)!==`not all`)&&(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}i=t.instance,o=i.getAttribute(`data-precedence`),a=n.get(o)||r,a===r&&n.set(null,i),n.set(o,i),this.count++,r=Cp.bind(this),i.addEventListener(`load`,r),i.addEventListener(`error`,r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Dp={$$typeof:C,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function Op(e,t,n,r,i,a,o,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qe(0),this.hiddenUpdates=Qe(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function kp(e,t,n,r,i,a,o,s,c,l,u,d){return e=new Op(e,t,n,o,c,l,u,d,s),t=1,!0===a&&(t|=24),a=yi(3,null,null,t),e.current=a,a.stateNode=e,t=ba(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},$a(a),e}function Ap(e){return e?(e=_i,e):_i}function jp(e,t,n,r,i,a){i=Ap(i),r.context===null?r.context=i:r.pendingContext=i,r=to(t),r.payload={element:n},a=a===void 0?null:a,a!==null&&(r.callback=a),n=no(e,r,t),n!==null&&(Ru(n,e,t),ro(n,e,t))}function Mp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Np(e,t){Mp(e,t),(e=e.alternate)&&Mp(e,t)}function Pp(e){if(e.tag===13||e.tag===31){var t=mi(e,67108864);t!==null&&Ru(t,e,67108864),Np(e,67108864)}}function Fp(e){if(e.tag===13||e.tag===31){var t=Iu();t=it(t);var n=mi(e,t);n!==null&&Ru(n,e,t),Np(e,t)}}var Ip=!0;function Lp(e,t,n,r){var i=A.T;A.T=null;var a=j.p;try{j.p=2,zp(e,t,n,r)}finally{j.p=a,A.T=i}}function Rp(e,t,n,r){var i=A.T;A.T=null;var a=j.p;try{j.p=8,zp(e,t,n,r)}finally{j.p=a,A.T=i}}function zp(e,t,n,r){if(Ip){var i=Bp(r);if(i===null)Zd(e,t,r,Vp,n),Qp(e,r);else if(em(i,e,t,n,r))r.stopPropagation();else if(Qp(e,r),t&4&&-1<Zp.indexOf(e)){for(;i!==null;){var a=yt(i);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var o=qe(a.pendingLanes);if(o!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var c=1<<31-Be(o);s.entanglements[1]|=c,o&=~c}Dd(a),!(iu&6)&&(Tu=Oe()+500,Od(0,!1))}}break;case 31:case 13:s=mi(a,2),s!==null&&Ru(s,a,2),Uu(),Np(a,2)}if(a=Bp(r),a===null&&Zd(e,t,r,Vp,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Zd(e,t,r,null,n)}}function Bp(e){return e=rn(e),Hp(e)}var Vp=null;function Hp(e){if(Vp=null,e=vt(e),e!==null){var t=o(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=s(t),e!==null)return e;e=null}else if(n===31){if(e=c(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Vp=e,null}function Up(e){switch(e){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(ke()){case Ae:return 2;case je:return 8;case Me:case Ne:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var Wp=!1,Gp=null,Kp=null,qp=null,Jp=new Map,Yp=new Map,Xp=[],Zp=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function Qp(e,t){switch(e){case`focusin`:case`focusout`:Gp=null;break;case`dragenter`:case`dragleave`:Kp=null;break;case`mouseover`:case`mouseout`:qp=null;break;case`pointerover`:case`pointerout`:Jp.delete(t.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:Yp.delete(t.pointerId)}}function $p(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=yt(t),t!==null&&Pp(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function em(e,t,n,r,i){switch(t){case`focusin`:return Gp=$p(Gp,e,t,n,r,i),!0;case`dragenter`:return Kp=$p(Kp,e,t,n,r,i),!0;case`mouseover`:return qp=$p(qp,e,t,n,r,i),!0;case`pointerover`:var a=i.pointerId;return Jp.set(a,$p(Jp.get(a)||null,e,t,n,r,i)),!0;case`gotpointercapture`:return a=i.pointerId,Yp.set(a,$p(Yp.get(a)||null,e,t,n,r,i)),!0}return!1}function tm(e){var t=vt(e.target);if(t!==null){var n=o(t);if(n!==null){if(t=n.tag,t===13){if(t=s(n),t!==null){e.blockedOn=t,st(e.priority,function(){Fp(n)});return}}else if(t===31){if(t=c(n),t!==null){e.blockedOn=t,st(e.priority,function(){Fp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bp(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);nn=r,n.target.dispatchEvent(r),nn=null}else return t=yt(n),t!==null&&Pp(t),e.blockedOn=n,!1;t.shift()}return!0}function rm(e,t,n){nm(e)&&n.delete(t)}function im(){Wp=!1,Gp!==null&&nm(Gp)&&(Gp=null),Kp!==null&&nm(Kp)&&(Kp=null),qp!==null&&nm(qp)&&(qp=null),Jp.forEach(rm),Yp.forEach(rm)}function am(e,n){e.blockedOn===n&&(e.blockedOn=null,Wp||(Wp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,im)))}var om=null;function sm(e){om!==e&&(om=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){om===e&&(om=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if(typeof r!=`function`){if(Hp(r||n)===null)continue;break}var a=yt(n);a!==null&&(e.splice(t,3),t-=3,Vs(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function cm(e){function t(t){return am(t,e)}Gp!==null&&am(Gp,e),Kp!==null&&am(Kp,e),qp!==null&&am(qp,e),Jp.forEach(t),Yp.forEach(t);for(var n=0;n<Xp.length;n++){var r=Xp[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Xp.length&&(n=Xp[0],n.blockedOn===null);)tm(n),n.blockedOn===null&&Xp.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[ut]||null;if(typeof a==`function`)o||sm(n);else if(o){var s=null;if(a&&a.hasAttribute(`formAction`)){if(i=a,o=a[ut]||null)s=o.formAction;else if(Hp(i)!==null)continue}else s=o.action;typeof s==`function`?n[r+1]=s:(n.splice(r,3),r-=3),sm(n)}}}function lm(){function e(e){e.canIntercept&&e.info===`react-transition`&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:`manual`,scroll:`manual`})}function t(){i!==null&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&e.url!=null&&navigation.navigate(e.url,{state:e.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var r=!1,i=null;return navigation.addEventListener(`navigate`,e),navigation.addEventListener(`navigatesuccess`,t),navigation.addEventListener(`navigateerror`,t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener(`navigate`,e),navigation.removeEventListener(`navigatesuccess`,t),navigation.removeEventListener(`navigateerror`,t),i!==null&&(i(),i=null)}}}function um(e){this._internalRoot=e}dm.prototype.render=um.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current,r=Iu();jp(n,r,e,t,null,null)},dm.prototype.unmount=um.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jp(e.current,2,null,e,null,null),Uu(),t[dt]=null}};function dm(e){this._internalRoot=e}dm.prototype.unstable_scheduleHydration=function(e){if(e){var t=ot();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xp.length&&t!==0&&t<Xp[n].priority;n++);Xp.splice(n,0,e),n===0&&tm(e)}};var fm=n.version;if(fm!==`19.2.0`)throw Error(i(527,fm,`19.2.0`));j.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render==`function`?Error(i(188)):(e=Object.keys(e).join(`,`),Error(i(268,e)));return e=u(t),e=e===null?null:f(e),e=e===null?null:e.stateNode,e};var pm={bundleType:0,version:`19.2.0`,rendererPackageName:`react-dom`,currentDispatcherRef:A,reconcilerVersion:`19.2.0`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var mm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mm.isDisabled&&mm.supportsFiber)try{Le=mm.inject(pm),Re=mm}catch{}}e.createRoot=function(e,t){if(!a(e))throw Error(i(299));var n=!1,r=``,o=uc,s=dc,c=fc;return t!=null&&(!0===t.unstable_strictMode&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(s=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=kp(e,1,!1,null,null,n,r,null,o,s,c,lm),e[dt]=t.current,Yd(e),new um(t)}})),_=l(o(((e,t)=>{function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=g()}))()),v=l(d()),y=l(h());
/**
* @remix-run/router v1.23.2
*
* Copyright (c) Remix Software Inc.
*
* This source code is licensed under the MIT license found in the
* LICENSE.md file in the root directory of this source tree.
*
* @license MIT
*/
function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}var x;(function(e){e.Pop=`POP`,e.Push=`PUSH`,e.Replace=`REPLACE`})(x||={});var S=`popstate`;function C(e){e===void 0&&(e={});function t(e,t){let{pathname:n=`/`,search:r=``,hash:i=``}=te(e.location.hash.substr(1));return!n.startsWith(`/`)&&!n.startsWith(`.`)&&(n=`/`+n),O(``,{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||`default`)}function n(e,t){let n=e.document.querySelector(`base`),r=``;if(n&&n.getAttribute(`href`)){let t=e.location.href,n=t.indexOf(`#`);r=n===-1?t:t.slice(0,n)}return r+`#`+(typeof t==`string`?t:ee(t))}function r(e,t){T(e.pathname.charAt(0)===`/`,`relative pathnames are not supported in hash history.push(`+JSON.stringify(t)+`)`)}return ne(t,n,r,e)}function w(e,t){if(e===!1||e==null)throw Error(t)}function T(e,t){if(!e){typeof console<`u`&&console.warn(t);try{throw Error(t)}catch{}}}function E(){return Math.random().toString(36).substr(2,8)}function D(e,t){return{usr:e.state,key:e.key,idx:t}}function O(e,t,n,r){return n===void 0&&(n=null),b({pathname:typeof e==`string`?e:e.pathname,search:``,hash:``},typeof t==`string`?te(t):t,{state:n,key:t&&t.key||r||E()})}function ee(e){let{pathname:t=`/`,search:n=``,hash:r=``}=e;return n&&n!==`?`&&(t+=n.charAt(0)===`?`?n:`?`+n),r&&r!==`#`&&(t+=r.charAt(0)===`#`?r:`#`+r),t}function te(e){let t={};if(e){let n=e.indexOf(`#`);n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf(`?`);r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ne(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,s=x.Pop,c=null,l=u();l??(l=0,o.replaceState(b({},o.state,{idx:l}),``));function u(){return(o.state||{idx:null}).idx}function d(){s=x.Pop;let e=u(),t=e==null?null:e-l;l=e,c&&c({action:s,location:h.location,delta:t})}function f(e,t){s=x.Push;let r=O(h.location,e,t);n&&n(r,e),l=u()+1;let d=D(r,l),f=h.createHref(r);try{o.pushState(d,``,f)}catch(e){if(e instanceof DOMException&&e.name===`DataCloneError`)throw e;i.location.assign(f)}a&&c&&c({action:s,location:h.location,delta:1})}function p(e,t){s=x.Replace;let r=O(h.location,e,t);n&&n(r,e),l=u();let i=D(r,l),d=h.createHref(r);o.replaceState(i,``,d),a&&c&&c({action:s,location:h.location,delta:0})}function m(e){let t=i.location.origin===`null`?i.location.href:i.location.origin,n=typeof e==`string`?e:ee(e);return n=n.replace(/ $/,`%20`),w(t,`No window.location.(origin|href) available to create URL for href: `+n),new URL(n,t)}let h={get action(){return s},get location(){return e(i,o)},listen(e){if(c)throw Error(`A history only accepts one active listener`);return i.addEventListener(S,d),c=e,()=>{i.removeEventListener(S,d),c=null}},createHref(e){return t(i,e)},createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:f,replace:p,go(e){return o.go(e)}};return h}var k;(function(e){e.data=`data`,e.deferred=`deferred`,e.redirect=`redirect`,e.error=`error`})(k||={});function re(e,t,n){return n===void 0&&(n=`/`),ie(e,t,n,!1)}function ie(e,t,n,r){let i=typeof t==`string`?te(t):t,a=he(i.pathname||`/`,n);if(a==null)return null;let o=ae(e);j(o);let s=null;for(let e=0;s==null&&e<o.length;++e){let t=me(a);s=de(o[e],t,r)}return s}function ae(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=``);let i=(e,i,a)=>{let o={relativePath:a===void 0?e.path||``:a,caseSensitive:e.caseSensitive===!0,childrenIndex:i,route:e};o.relativePath.startsWith(`/`)&&(w(o.relativePath.startsWith(r),`Absolute route path "`+o.relativePath+`" nested under path `+(`"`+r+`" is not valid. An absolute child route path `)+`must start with the combined path of all its parent routes.`),o.relativePath=o.relativePath.slice(r.length));let s=we([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(w(e.index!==!0,`Index routes must not have child routes. Please remove `+(`all child routes from route path "`+s+`".`)),ae(e.children,t,c,s)),!(e.path==null&&!e.index)&&t.push({path:s,score:F(s,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(e.path===``||!((n=e.path)!=null&&n.includes(`?`)))i(e,t);else for(let n of A(e.path))i(e,t,n)}),t}function A(e){let t=e.split(`/`);if(t.length===0)return[];let[n,...r]=t,i=n.endsWith(`?`),a=n.replace(/\?$/,``);if(r.length===0)return i?[a,``]:[a];let o=A(r.join(`/`)),s=[];return s.push(...o.map(e=>e===``?a:[a,e].join(`/`))),i&&s.push(...o),s.map(t=>e.startsWith(`/`)&&t===``?`/`:t)}function j(e){e.sort((e,t)=>e.score===t.score?ue(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)):t.score-e.score)}var oe=/^:[\w-]+$/,se=3,ce=2,M=1,le=10,N=-2,P=e=>e===`*`;function F(e,t){let n=e.split(`/`),r=n.length;return n.some(P)&&(r+=N),t&&(r+=ce),n.filter(e=>!P(e)).reduce((e,t)=>e+(oe.test(t)?se:t===``?M:le),r)}function ue(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}function de(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,i={},a=`/`,o=[];for(let e=0;e<r.length;++e){let s=r[e],c=e===r.length-1,l=a===`/`?t:t.slice(a.length)||`/`,u=fe({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l),d=s.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=fe({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},l)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:we([a,u.pathname]),pathnameBase:Te(we([a,u.pathnameBase])),route:d}),u.pathnameBase!==`/`&&(a=we([a,u.pathnameBase]))}return o}function fe(e,t){typeof e==`string`&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=pe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,`$1`),s=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if(r===`*`){let e=s[n]||``;o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,`$1`)}let c=s[n];return i&&!c?e[r]=void 0:e[r]=(c||``).replace(/%2F/g,`/`),e},{}),pathname:a,pathnameBase:o,pattern:e}}function pe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),T(e===`*`||!e.endsWith(`*`)||e.endsWith(`/*`),`Route path "`+e+`" will be treated as if it were `+(`"`+e.replace(/\*$/,`/*`)+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+(`please change the route path to "`+e.replace(/\*$/,`/*`)+`".`));let r=[],i=`^`+e.replace(/\/*\*?$/,``).replace(/^\/*/,`/`).replace(/[\\.*+^${}|()[\]]/g,`\\$&`).replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:n!=null}),n?`/?([^\\/]+)?`:`/([^\\/]+)`));return e.endsWith(`*`)?(r.push({paramName:`*`}),i+=e===`*`||e===`/*`?`(.*)$`:`(?:\\/(.+)|\\/*)$`):n?i+=`\\/*$`:e!==``&&e!==`/`&&(i+=`(?:(?=\\/|$))`),[new RegExp(i,t?void 0:`i`),r]}function me(e){try{return e.split(`/`).map(e=>decodeURIComponent(e).replace(/\//g,`%2F`)).join(`/`)}catch(t){return T(!1,`The URL path "`+e+`" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent `+(`encoding (`+t+`).`)),e}}function he(e,t){if(t===`/`)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith(`/`)?t.length-1:t.length,r=e.charAt(n);return r&&r!==`/`?null:e.slice(n)||`/`}var ge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_e=e=>ge.test(e);function ve(e,t){t===void 0&&(t=`/`);let{pathname:n,search:r=``,hash:i=``}=typeof e==`string`?te(e):e,a;if(n)if(_e(n))a=n;else{if(n.includes(`//`)){let e=n;n=n.replace(/\/\/+/g,`/`),T(!1,`Pathnames cannot have embedded double slashes - normalizing `+(e+` -> `+n))}a=n.startsWith(`/`)?ye(n.substring(1),`/`):ye(n,t)}else a=t;return{pathname:a,search:Ee(r),hash:De(i)}}function ye(e,t){let n=t.replace(/\/+$/,``).split(`/`);return e.split(`/`).forEach(e=>{e===`..`?n.length>1&&n.pop():e!==`.`&&n.push(e)}),n.length>1?n.join(`/`):`/`}function be(e,t,n,r){return`Cannot include a '`+e+`' character in a manually specified `+("`to."+t+"` field ["+JSON.stringify(r)+`].  Please separate it out to the `)+("`to."+n+"` field. Alternatively you may provide the full path as ")+`a string in <Link to="..."> and the router will parse it for you.`}function xe(e){return e.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Se(e,t){let n=xe(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function Ce(e,t,n,r){r===void 0&&(r=!1);let i;typeof e==`string`?i=te(e):(i=b({},e),w(!i.pathname||!i.pathname.includes(`?`),be(`?`,`pathname`,`search`,i)),w(!i.pathname||!i.pathname.includes(`#`),be(`#`,`pathname`,`hash`,i)),w(!i.search||!i.search.includes(`#`),be(`#`,`search`,`hash`,i)));let a=e===``||i.pathname===``,o=a?`/`:i.pathname,s;if(o==null)s=n;else{let e=t.length-1;if(!r&&o.startsWith(`..`)){let t=o.split(`/`);for(;t[0]===`..`;)t.shift(),--e;i.pathname=t.join(`/`)}s=e>=0?t[e]:`/`}let c=ve(i,s),l=o&&o!==`/`&&o.endsWith(`/`),u=(a||o===`.`)&&n.endsWith(`/`);return!c.pathname.endsWith(`/`)&&(l||u)&&(c.pathname+=`/`),c}var we=e=>e.join(`/`).replace(/\/\/+/g,`/`),Te=e=>e.replace(/\/+$/,``).replace(/^\/*/,`/`),Ee=e=>!e||e===`?`?``:e.startsWith(`?`)?e:`?`+e,De=e=>!e||e===`#`?``:e.startsWith(`#`)?e:`#`+e;function Oe(e){return e!=null&&typeof e.status==`number`&&typeof e.statusText==`string`&&typeof e.internal==`boolean`&&`data`in e}function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}var Ae=v.createContext(null),je=v.createContext(null),Me=v.createContext(null),Ne=v.createContext(null),Pe=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Fe=v.createContext(null);function Ie(e,t){let{relative:n}=t===void 0?{}:t;!Le()&&w(!1);let{basename:r,navigator:i}=v.useContext(Me),{hash:a,pathname:o,search:s}=We(e,{relative:n}),c=o;return r!==`/`&&(c=o===`/`?r:we([r,o])),i.createHref({pathname:c,search:s,hash:a})}function Le(){return v.useContext(Ne)!=null}function Re(){return!Le()&&w(!1),v.useContext(Ne).location}function ze(e){v.useContext(Me).static||v.useLayoutEffect(e)}function Be(){let{isDataRoute:e}=v.useContext(Pe);return e?at():Ve()}function Ve(){!Le()&&w(!1);let e=v.useContext(Ae),{basename:t,future:n,navigator:r}=v.useContext(Me),{matches:i}=v.useContext(Pe),{pathname:a}=Re(),o=JSON.stringify(Se(i,n.v7_relativeSplatPath)),s=v.useRef(!1);return ze(()=>{s.current=!0}),v.useCallback(function(n,i){if(i===void 0&&(i={}),!s.current)return;if(typeof n==`number`){r.go(n);return}let c=Ce(n,JSON.parse(o),a,i.relative===`path`);e==null&&t!==`/`&&(c.pathname=c.pathname===`/`?t:we([t,c.pathname])),(i.replace?r.replace:r.push)(c,i.state,i)},[t,r,o,a,e])}var He=v.createContext(null);function Ue(e){let t=v.useContext(Pe).outlet;return t&&v.createElement(He.Provider,{value:e},t)}function We(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=v.useContext(Me),{matches:i}=v.useContext(Pe),{pathname:a}=Re(),o=JSON.stringify(Se(i,r.v7_relativeSplatPath));return v.useMemo(()=>Ce(e,JSON.parse(o),a,n===`path`),[e,o,a,n])}function Ge(e,t){return Ke(e,t)}function Ke(e,t,n,r){!Le()&&w(!1);let{navigator:i}=v.useContext(Me),{matches:a}=v.useContext(Pe),o=a[a.length-1],s=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:`/`;o&&o.route;let l=Re(),u;if(t){let e=typeof t==`string`?te(t):t;!(c===`/`||e.pathname?.startsWith(c))&&w(!1),u=e}else u=l;let d=u.pathname||`/`,f=d;if(c!==`/`){let e=c.replace(/^\//,``).split(`/`);f=`/`+d.replace(/^\//,``).split(`/`).slice(e.length).join(`/`)}let p=re(e,{pathname:f}),m=Ze(p&&p.map(e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:we([c,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:e.pathnameBase===`/`?c:we([c,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,r);return t&&m?v.createElement(Ne.Provider,{value:{location:ke({pathname:`/`,search:``,hash:``,state:null,key:`default`},u),navigationType:x.Pop}},m):m}function qe(){let e=it(),t=Oe(e)?e.status+` `+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null;return v.createElement(v.Fragment,null,v.createElement(`h2`,null,`Unexpected Application Error!`),v.createElement(`h3`,{style:{fontStyle:`italic`}},t),n?v.createElement(`pre`,{style:{padding:`0.5rem`,backgroundColor:`rgba(200,200,200, 0.5)`}},n):null,null)}var Je=v.createElement(qe,null),Ye=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!==`idle`&&e.revalidation===`idle`?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error===void 0?t.error:e.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error(`React Router caught the following error during render`,e,t)}render(){return this.state.error===void 0?this.props.children:v.createElement(Pe.Provider,{value:this.props.routeContext},v.createElement(Fe.Provider,{value:this.state.error,children:this.props.component}))}};function Xe(e){let{routeContext:t,match:n,children:r}=e,i=v.useContext(Ae);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(Pe.Provider,{value:t},r)}function Ze(e,t,n,r){if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n?.errors;if(o!=null){let e=a.findIndex(e=>e.route.id&&o?.[e.route.id]!==void 0);!(e>=0)&&w(!1),a=a.slice(0,Math.min(a.length,e+1))}let s=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let e=0;e<a.length;e++){let t=a[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:r}=n,i=t.route.loader&&e[t.route.id]===void 0&&(!r||r[t.route.id]===void 0);if(t.route.lazy||i){s=!0,a=c>=0?a.slice(0,c+1):[a[0]];break}}}return a.reduceRight((e,r,i)=>{let l,u=!1,d=null,f=null;n&&(l=o&&r.route.id?o[r.route.id]:void 0,d=r.route.errorElement||Je,s&&(c<0&&i===0?(st(`route-fallback`,!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,f=null):c===i&&(u=!0,f=r.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,i+1)),m=()=>{let t;return t=l?d:u?f:r.route.Component?v.createElement(r.route.Component,null):r.route.element?r.route.element:e,v.createElement(Xe,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:n!=null},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||i===0)?v.createElement(Ye,{location:n.location,revalidation:n.revalidation,component:d,error:l,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var Qe=function(e){return e.UseBlocker=`useBlocker`,e.UseRevalidator=`useRevalidator`,e.UseNavigateStable=`useNavigate`,e}(Qe||{}),$e=function(e){return e.UseBlocker=`useBlocker`,e.UseLoaderData=`useLoaderData`,e.UseActionData=`useActionData`,e.UseRouteError=`useRouteError`,e.UseNavigation=`useNavigation`,e.UseRouteLoaderData=`useRouteLoaderData`,e.UseMatches=`useMatches`,e.UseRevalidator=`useRevalidator`,e.UseNavigateStable=`useNavigate`,e.UseRouteId=`useRouteId`,e}($e||{});function et(e){let t=v.useContext(Ae);return!t&&w(!1),t}function tt(e){let t=v.useContext(je);return!t&&w(!1),t}function nt(e){let t=v.useContext(Pe);return!t&&w(!1),t}function rt(e){let t=nt(e),n=t.matches[t.matches.length-1];return!n.route.id&&w(!1),n.route.id}function it(){let e=v.useContext(Fe),t=tt($e.UseRouteError),n=rt($e.UseRouteError);return e===void 0?t.errors?.[n]:e}function at(){let{router:e}=et(Qe.UseNavigateStable),t=rt($e.UseNavigateStable),n=v.useRef(!1);return ze(()=>{n.current=!0}),v.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r==`number`?e.navigate(r):e.navigate(r,ke({fromRouteId:t},i)))},[e,t])}var ot={};function st(e,t,n){!t&&!ot[e]&&(ot[e]=!0)}var ct=(e,t,n)=>(``+t+("You can use the `"+e+"` future flag to opt-in early. ")+(`For more information, see `+n+`.`),void 0);function lt(e,t){e?.v7_startTransition===void 0&&ct(`v7_startTransition`,"React Router will begin wrapping state updates in `React.startTransition` in v7",`https://reactrouter.com/v6/upgrading/future#v7_starttransition`),e?.v7_relativeSplatPath===void 0&&(!t||t.v7_relativeSplatPath===void 0)&&ct(`v7_relativeSplatPath`,`Relative route resolution within Splat routes is changing in v7`,`https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath`),t&&(t.v7_fetcherPersist===void 0&&ct(`v7_fetcherPersist`,`The persistence behavior of fetchers is changing in v7`,`https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist`),t.v7_normalizeFormMethod===void 0&&ct(`v7_normalizeFormMethod`,"Casing of `formMethod` fields is being normalized to uppercase in v7",`https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod`),t.v7_partialHydration===void 0&&ct(`v7_partialHydration`,"`RouterProvider` hydration behavior is changing in v7",`https://reactrouter.com/v6/upgrading/future#v7_partialhydration`),t.v7_skipActionErrorRevalidation===void 0&&ct(`v7_skipActionErrorRevalidation`,"The revalidation behavior after 4xx/5xx `action` responses is changing in v7",`https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation`))}v.startTransition;function ut(e){return Ue(e.context)}function dt(e){w(!1)}function ft(e){let{basename:t=`/`,children:n=null,location:r,navigationType:i=x.Pop,navigator:a,static:o=!1,future:s}=e;Le()&&w(!1);let c=t.replace(/^\/*/,`/`),l=v.useMemo(()=>({basename:c,navigator:a,static:o,future:ke({v7_relativeSplatPath:!1},s)}),[c,s,a,o]);typeof r==`string`&&(r=te(r));let{pathname:u=`/`,search:d=``,hash:f=``,state:p=null,key:m=`default`}=r,h=v.useMemo(()=>{let e=he(u,c);return e==null?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:i}},[c,u,d,f,p,m,i]);return h==null?null:v.createElement(Me.Provider,{value:l},v.createElement(Ne.Provider,{children:n,value:h}))}function pt(e){let{children:t,location:n}=e;return Ge(mt(t),n)}new Promise(()=>{});function mt(e,t){t===void 0&&(t=[]);let n=[];return v.Children.forEach(e,(e,r)=>{if(!v.isValidElement(e))return;let i=[...t,r];if(e.type===v.Fragment){n.push.apply(n,mt(e.props.children,i));return}e.type!==dt&&w(!1),!(!e.props.index||!e.props.children)&&w(!1);let a={id:e.props.id||i.join(`-`),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:e.props.ErrorBoundary!=null||e.props.errorElement!=null,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=mt(e.props.children,i)),n.push(a)}),n}function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ht.apply(this,arguments)}function gt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function _t(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vt(e,t){return e.button===0&&(!t||t===`_self`)&&!_t(e)}var yt=[`onClick`,`relative`,`reloadDocument`,`replace`,`state`,`target`,`to`,`preventScrollReset`,`viewTransition`],bt=`6`;try{window.__reactRouterVersion=bt}catch{}var xt=v.startTransition;y.flushSync,v.useId;function St(e){let{basename:t,children:n,future:r,window:i}=e,a=v.useRef();a.current??=C({window:i,v5Compat:!0});let o=a.current,[s,c]=v.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=v.useCallback(e=>{l&&xt?xt(()=>c(e)):c(e)},[c,l]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>lt(r),[r]),v.createElement(ft,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:o,future:r})}var Ct=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0,wt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tt=v.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:i,replace:a,state:o,target:s,to:c,preventScrollReset:l,viewTransition:u}=e,d=gt(e,yt),{basename:f}=v.useContext(Me),p,m=!1;if(typeof c==`string`&&wt.test(c)&&(p=c,Ct))try{let e=new URL(window.location.href),t=c.startsWith(`//`)?new URL(e.protocol+c):new URL(c),n=he(t.pathname,f);t.origin===e.origin&&n!=null?c=n+t.search+t.hash:m=!0}catch{}let h=Ie(c,{relative:r}),g=Ot(c,{replace:a,state:o,target:s,preventScrollReset:l,relative:r,viewTransition:u});function _(e){n&&n(e),e.defaultPrevented||g(e)}return v.createElement(`a`,ht({},d,{href:p||h,onClick:m||i?n:_,ref:t,target:s}))}),Et;(function(e){e.UseScrollRestoration=`useScrollRestoration`,e.UseSubmit=`useSubmit`,e.UseSubmitFetcher=`useSubmitFetcher`,e.UseFetcher=`useFetcher`,e.useViewTransitionState=`useViewTransitionState`})(Et||={});var Dt;(function(e){e.UseFetcher=`useFetcher`,e.UseFetchers=`useFetchers`,e.UseScrollRestoration=`useScrollRestoration`})(Dt||={});function Ot(e,t){let{target:n,replace:r,state:i,preventScrollReset:a,relative:o,viewTransition:s}=t===void 0?{}:t,c=Be(),l=Re(),u=We(e,{relative:o});return v.useCallback(t=>{if(vt(t,n)){t.preventDefault();let n=r===void 0?ee(l)===ee(u):r;c(e,{replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:s})}},[l,c,u,r,i,n,e,a,o,s])}function kt(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var At=(()=>typeof Symbol==`function`&&Symbol.observable||`@@observable`)(),jt=()=>Math.random().toString(36).substring(7).split(``).join(`.`),Mt={INIT:`@@redux/INIT${jt()}`,REPLACE:`@@redux/REPLACE${jt()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${jt()}`};function Nt(e){if(typeof e!=`object`||!e)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function I(e,t,n){if(typeof e!=`function`)throw Error(kt(2));if(typeof t==`function`&&typeof n==`function`||typeof n==`function`&&typeof arguments[3]==`function`)throw Error(kt(0));if(typeof t==`function`&&n===void 0&&(n=t,t=void 0),n!==void 0){if(typeof n!=`function`)throw Error(kt(1));return n(I)(e,t)}let r=e,i=t,a=new Map,o=a,s=0,c=!1;function l(){o===a&&(o=new Map,a.forEach((e,t)=>{o.set(t,e)}))}function u(){if(c)throw Error(kt(3));return i}function d(e){if(typeof e!=`function`)throw Error(kt(4));if(c)throw Error(kt(5));let t=!0;l();let n=s++;return o.set(n,e),function(){if(t){if(c)throw Error(kt(6));t=!1,l(),o.delete(n),a=null}}}function f(e){if(!Nt(e))throw Error(kt(7));if(e.type===void 0)throw Error(kt(8));if(typeof e.type!=`string`)throw Error(kt(17));if(c)throw Error(kt(9));try{c=!0,i=r(i,e)}finally{c=!1}return(a=o).forEach(e=>{e()}),e}function p(e){if(typeof e!=`function`)throw Error(kt(10));r=e,f({type:Mt.REPLACE})}function m(){let e=d;return{subscribe(t){if(typeof t!=`object`||!t)throw Error(kt(11));function n(){let e=t;e.next&&e.next(u())}return n(),{unsubscribe:e(n)}},[At](){return this}}}return f({type:Mt.INIT}),{dispatch:f,subscribe:d,getState:u,replaceReducer:p,[At]:m}}function Pt(e,t){return function(...n){return t(e.apply(this,n))}}function Ft(e,t){if(typeof e==`function`)return Pt(e,t);if(typeof e!=`object`||!e)throw Error(kt(16));let n={};for(let r in e){let i=e[r];typeof i==`function`&&(n[r]=Pt(i,t))}return n}function It(...e){return e.length===0?e=>e:e.length===1?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}function Lt(...e){return t=>(n,r)=>{let i=t(n,r),a=()=>{throw Error(kt(15))},o={getState:i.getState,dispatch:(e,...t)=>a(e,...t)},s=e.map(e=>e(o));return a=It(...s)(i.dispatch),{...i,dispatch:a}}}var Rt=o((e=>{var t=d();typeof Object.is==`function`&&Object.is,t.useSyncExternalStore,t.useRef,t.useEffect,t.useMemo,t.useDebugValue}));o(((e,t)=>{t.exports=Rt()}))();var zt=Symbol.for(`react.transitional.element`),Bt=Symbol.for(`react.portal`),Vt=Symbol.for(`react.fragment`),Ht=Symbol.for(`react.strict_mode`),Ut=Symbol.for(`react.profiler`),Wt=Symbol.for(`react.consumer`),Gt=Symbol.for(`react.context`),Kt=Symbol.for(`react.forward_ref`),qt=Symbol.for(`react.suspense`),Jt=Symbol.for(`react.suspense_list`),Yt=Symbol.for(`react.memo`),Xt=Symbol.for(`react.lazy`),Zt=Kt,Qt=Yt;function $t(e){if(typeof e==`object`&&e){let{$$typeof:t}=e;switch(t){case zt:switch(e=e.type,e){case Vt:case Ut:case Ht:case qt:case Jt:return e;default:switch(e&&=e.$$typeof,e){case Gt:case Kt:case Xt:case Yt:return e;case Wt:return e;default:return t}}case Bt:return t}}}function en(e){return $t(e)===Yt}function tn(e,t,n,r,{areStatesEqual:i,areOwnPropsEqual:a,areStatePropsEqual:o}){let s=!1,c,l,u,d,f;function p(i,a){return c=i,l=a,u=e(c,l),d=t(r,l),f=n(u,d,l),s=!0,f}function m(){return u=e(c,l),t.dependsOnOwnProps&&(d=t(r,l)),f=n(u,d,l),f}function h(){return e.dependsOnOwnProps&&(u=e(c,l)),t.dependsOnOwnProps&&(d=t(r,l)),f=n(u,d,l),f}function g(){let t=e(c,l),r=!o(t,u);return u=t,r&&(f=n(u,d,l)),f}function _(e,t){let n=!a(t,l),r=!i(e,c,t,l);return c=e,l=t,n&&r?m():n?h():r?g():f}return function(e,t){return s?_(e,t):p(e,t)}}function nn(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...i}){let a=t(e,i),o=n(e,i),s=r(e,i);return tn(a,o,s,e,i)}function rn(e,t){let n={};for(let r in e){let i=e[r];typeof i==`function`&&(n[r]=(...e)=>t(i(...e)))}return n}function an(e){return function(t){let n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function on(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function sn(e,t){return function(t,{displayName:n}){let r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=on(e);let i=r(t,n);return typeof i==`function`&&(r.mapToProps=i,r.dependsOnOwnProps=on(i),i=r(t,n)),i},r}}function cn(e,t){return(n,r)=>{throw Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function ln(e){return e&&typeof e==`object`?an(t=>rn(e,t)):e?typeof e==`function`?sn(e,`mapDispatchToProps`):cn(e,`mapDispatchToProps`):an(e=>({dispatch:e}))}function un(e){return e?typeof e==`function`?sn(e,`mapStateToProps`):cn(e,`mapStateToProps`):an(()=>({}))}function dn(e,t,n){return{...n,...e,...t}}function fn(e){return function(t,{displayName:n,areMergedPropsEqual:r}){let i=!1,a;return function(t,n,o){let s=e(t,n,o);return i?r(s,a)||(a=s):(i=!0,a=s),a}}}function pn(e){return e?typeof e==`function`?fn(e):cn(e,`mergeProps`):()=>dn}function mn(e){e()}function hn(){let e=null,t=null;return{clear(){e=null,t=null},notify(){mn(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0,i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var gn={notify(){},get:()=>[]};function _n(e,t){let n,r=gn,i=0,a=!1;function o(e){u();let t=r.subscribe(e),n=!1;return()=>{n||(n=!0,t(),d())}}function s(){r.notify()}function c(){m.onStateChange&&m.onStateChange()}function l(){return a}function u(){i++,n||(n=t?t.addNestedSub(c):e.subscribe(c),r=hn())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=gn)}function f(){a||(a=!0,u())}function p(){a&&(a=!1,d())}let m={addNestedSub:o,notifyNestedSubs:s,handleChangeWrapper:c,isSubscribed:l,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>r};return m}var vn=(()=>typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0)(),yn=(()=>typeof navigator<`u`&&navigator.product===`ReactNative`)(),bn=(()=>vn||yn?v.useLayoutEffect:v.useEffect)();function xn(e,t){return e===t?e!==0||t!==0||1/e==1/t:e!==e&&t!==t}function Sn(e,t){if(xn(e,t))return!0;if(typeof e!=`object`||!e||typeof t!=`object`||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!xn(e[n[r]],t[n[r]]))return!1;return!0}var Cn={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},wn={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Tn={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},En={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Dn={[Zt]:Tn,[Qt]:En};function On(e){return en(e)?En:Dn[e.$$typeof]||Cn}var kn=Object.defineProperty,An=Object.getOwnPropertyNames,jn=Object.getOwnPropertySymbols,Mn=Object.getOwnPropertyDescriptor,Nn=Object.getPrototypeOf,Pn=Object.prototype;function Fn(e,t){if(typeof t!=`string`){if(Pn){let n=Nn(t);n&&n!==Pn&&Fn(e,n)}let n=An(t);jn&&(n=n.concat(jn(t)));let r=On(e),i=On(t);for(let a=0;a<n.length;++a){let o=n[a];if(!wn[o]&&!(i&&i[o])&&!(r&&r[o])){let n=Mn(t,o);try{kn(e,o,n)}catch{}}}}return e}var In=Symbol.for(`react-redux-context`),Ln=typeof globalThis<`u`?globalThis:{};function Rn(){if(!v.createContext)return{};let e=Ln[In]??=new Map,t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var zn=Rn(),Bn=[null,null];function Vn(e,t,n){bn(()=>e(...t),n)}function Hn(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function Un(e,t,n,r,i,a,o,s,c,l,u){if(!e)return()=>{};let d=!1,f=null,p=()=>{if(d||!s.current)return;let e=t.getState(),n,p;try{n=r(e,i.current)}catch(e){p=e,f=e}p||(f=null),n===a.current?o.current||l():(a.current=n,c.current=n,o.current=!0,u())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}function Wn(e,t){return e===t}function Gn(e,t,n,{pure:r,areStatesEqual:i=Wn,areOwnPropsEqual:a=Sn,areStatePropsEqual:o=Sn,areMergedPropsEqual:s=Sn,forwardRef:c=!1,context:l=zn}={}){let u=l,d=un(e),f=ln(t),p=pn(n),m=!!e;return e=>{let t=e.displayName||e.name||`Component`,n=`Connect(${t})`,r={shouldHandleStateChanges:m,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:d,initMapDispatchToProps:f,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:a,areMergedPropsEqual:s};function l(t){let[n,i,a]=v.useMemo(()=>{let{reactReduxForwardedRef:e,...n}=t;return[t.context,e,n]},[t]),o=v.useMemo(()=>{let e=u;return n?.Consumer,e},[n,u]),s=v.useContext(o),c=!!t.store&&!!t.store.getState&&!!t.store.dispatch,l=!!s&&!!s.store,d=c?t.store:s.store,f=l?s.getServerState:d.getState,p=v.useMemo(()=>nn(d.dispatch,r),[d]),[h,g]=v.useMemo(()=>{if(!m)return Bn;let e=_n(d,c?void 0:s.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[d,c,s]),_=v.useMemo(()=>c?s:{...s,subscription:h},[c,s,h]),y=v.useRef(void 0),b=v.useRef(a),x=v.useRef(void 0),S=v.useRef(!1),C=v.useRef(!1),w=v.useRef(void 0);bn(()=>(C.current=!0,()=>{C.current=!1}),[]);let T=v.useMemo(()=>()=>x.current&&a===b.current?x.current:p(d.getState(),a),[d,a]),E=v.useMemo(()=>e=>h?Un(m,d,h,p,b,y,S,C,x,g,e):()=>{},[h]);Vn(Hn,[b,y,S,a,x,g]);let D;try{D=v.useSyncExternalStore(E,T,f?()=>p(f(),a):T)}catch(e){throw w.current&&(e.message+=`
The error may be correlated with this previous error:
${w.current.stack}

`),e}bn(()=>{w.current=void 0,x.current=void 0,y.current=D});let O=v.useMemo(()=>v.createElement(e,{...D,ref:i}),[i,e,D]);return v.useMemo(()=>m?v.createElement(o.Provider,{value:_},O):O,[o,O,_])}let h=v.memo(l);if(h.WrappedComponent=e,h.displayName=l.displayName=n,c){let t=v.forwardRef(function(e,t){return v.createElement(h,{...e,reactReduxForwardedRef:t})});return t.displayName=n,t.WrappedComponent=e,Fn(t,e)}return Fn(h,e)}}var Kn=Gn;function qn(e){let{children:t,context:n,serverState:r,store:i}=e,a=v.useMemo(()=>{let e=_n(i);return{store:i,subscription:e,getServerState:r?()=>r:void 0}},[i,r]),o=v.useMemo(()=>i.getState(),[i]);bn(()=>{let{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[a,o]);let s=n||zn;return v.createElement(s.Provider,{value:a},t)}var Jn=qn,Yn=!0,Xn=`Invariant failed`;function Zn(e,t){if(!e){if(Yn)throw Error(Xn);var n=typeof t==`function`?t():t,r=n?`${Xn}: ${n}`:Xn;throw Error(r)}}var Qn=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left,a=n-i,o=r-t;return{top:t,right:n,bottom:r,left:i,width:a,height:o,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},$n=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},er=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},tr=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},nr={top:0,right:0,bottom:0,left:0},rr=function(e){var t=e.borderBox,n=e.margin,r=n===void 0?nr:n,i=e.border,a=i===void 0?nr:i,o=e.padding,s=o===void 0?nr:o,c=Qn($n(t,r)),l=Qn(er(t,a)),u=Qn(er(l,s));return{marginBox:c,borderBox:Qn(t),paddingBox:l,contentBox:u,margin:r,border:a,padding:s}},ir=function(e){var t=e.slice(0,-2);if(e.slice(-2)!==`px`)return 0;var n=Number(t);return isNaN(n)&&Zn(!1),n},ar=function(){return{x:window.pageXOffset,y:window.pageYOffset}},or=function(e,t){var n=e.borderBox,r=e.border,i=e.margin,a=e.padding,o=tr(n,t);return rr({borderBox:o,border:r,margin:i,padding:a})},sr=function(e,t){return t===void 0&&(t=ar()),or(e,t)},cr=function(e,t){var n={top:ir(t.marginTop),right:ir(t.marginRight),bottom:ir(t.marginBottom),left:ir(t.marginLeft)},r={top:ir(t.paddingTop),right:ir(t.paddingRight),bottom:ir(t.paddingBottom),left:ir(t.paddingLeft)},i={top:ir(t.borderTopWidth),right:ir(t.borderRightWidth),bottom:ir(t.borderBottomWidth),left:ir(t.borderLeftWidth)};return rr({borderBox:e,margin:n,padding:r,border:i})},lr=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return cr(t,n)},ur=function(e){var t=[],n=null,r=function(){t=[...arguments],!n&&(n=requestAnimationFrame(function(){n=null,e.apply(void 0,t)}))};return r.cancel=function(){n&&=(cancelAnimationFrame(n),null)},r};function dr(){return dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dr.apply(null,arguments)}var fr=l(h());function pr(e,t){}pr.bind(null,`warn`),pr.bind(null,`error`);function mr(){}function hr(e,t){return{...e,...t}}function gr(e,t,n){let r=t.map(t=>{let r=hr(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}});return function(){r.forEach(e=>{e()})}}var _r=`Invariant failed`,vr=class extends Error{};vr.prototype.toString=function(){return this.message};function L(e,t){throw new vr(_r)}var yr=class extends v.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=mr,this.onWindowError=e=>{let t=this.getCallbacks();t.isDragging()&&t.tryAbort(),e.error instanceof vr&&e.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw Error(`Unable to find AppCallbacks in <ErrorBoundary/>`);return this.callbacks},this.setCallbacks=e=>{this.callbacks=e}}componentDidMount(){this.unbind=gr(window,[{eventName:`error`,fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof vr){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}},br=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,xr=e=>e+1,Sr=e=>`
  You have lifted an item in position ${xr(e.source.index)}
`,Cr=(e,t)=>{let n=e.droppableId===t.droppableId,r=xr(e.index),i=xr(t.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${i}
  `},wr=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,Tr=e=>{let t=e.destination;if(t)return Cr(e.source,t);let n=e.combine;return n?wr(e.draggableId,e.source,n):`You are over an area that cannot be dropped on`},Er=e=>`
  The item has returned to its starting position
  of ${xr(e.index)}
`,Dr={dragHandleUsageInstructions:br,onDragStart:Sr,onDragUpdate:Tr,onDragEnd:e=>{if(e.reason===`CANCEL`)return`
      Movement cancelled.
      ${Er(e.source)}
    `;let t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${Cr(e.source,t)}
    `:n?`
      You have dropped the item.
      ${wr(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${Er(e.source)}
  `}};function Or(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function kr(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Or(e[n],t[n]))return!1;return!0}function Ar(e,t){let n=(0,v.useState)(()=>({inputs:t,result:e()}))[0],r=(0,v.useRef)(!0),i=(0,v.useRef)(n),a=r.current||t&&i.current.inputs&&kr(t,i.current.inputs)?i.current:{inputs:t,result:e()};return(0,v.useEffect)(()=>{r.current=!1,i.current=a},[a]),a.result}function R(e,t){return Ar(()=>e,t)}var jr={x:0,y:0},Mr=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Nr=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Pr=(e,t)=>e.x===t.x&&e.y===t.y,Fr=e=>({x:e.x===0?0:-e.x,y:e.y===0?0:-e.y}),Ir=(e,t,n=0)=>e===`x`?{x:t,y:n}:{x:n,y:t},Lr=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Rr=(e,t)=>Math.min(...t.map(t=>Lr(e,t))),zr=e=>t=>({x:e(t.x),y:e(t.y)}),Br=(e,t)=>{let n=Qn({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n},Vr=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Hr=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Ur={top:0,right:0,bottom:0,left:0},Wr=(e,t)=>t?Vr(e,t.scroll.diff.displacement):e,Gr=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Kr=(e,t)=>t&&t.shouldClipSubject?Br(t.pageMarginBox,e):Qn(e),qr=({page:e,withPlaceholder:t,axis:n,frame:r})=>{let i=Wr(e.marginBox,r),a=Gr(i,n,t),o=Kr(a,r);return{page:e,withPlaceholder:t,active:o}},Jr=(e,t)=>{!e.frame&&L();let n=e.frame,r=Nr(t,n.scroll.initial),i=Fr(r),a={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}},o=qr({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:o}};function Yr(e,t=kr){let n=null;function r(...r){if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;let i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return r.clear=function(){n=null},r}var Xr=Yr(e=>e.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),Zr=Yr(e=>e.reduce((e,t)=>(e[t.descriptor.id]=t,e),{})),Qr=Yr(e=>Object.values(e)),$r=Yr(e=>Object.values(e)),ei=Yr((e,t)=>$r(t).filter(t=>e===t.descriptor.droppableId).sort((e,t)=>e.descriptor.index-t.descriptor.index));function ti(e){return e.at&&e.at.type===`REORDER`?e.at.destination:null}function ni(e){return e.at&&e.at.type===`COMBINE`?e.at.combine:null}var ri=Yr((e,t)=>t.filter(t=>t.descriptor.id!==e.descriptor.id)),ii=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!ti(i))return null;function a(e){let t={type:`COMBINE`,combine:{draggableId:e,droppableId:n.descriptor.id}};return{...i,at:t}}let o=i.displaced.all,s=o.length?o[0]:null;if(e)return s?a(s):null;let c=ri(t,r);if(!s){if(!c.length)return null;let e=c[c.length-1];return a(e.descriptor.id)}let l=c.findIndex(e=>e.descriptor.id===s);l===-1&&L();let u=l-1;if(u<0)return null;let d=c[u];return a(d.descriptor.id)},ai=(e,t)=>e.descriptor.droppableId===t.descriptor.id,oi={point:jr,value:0},si={invisible:{},visible:{},all:[]},ci={displaced:si,displacedBy:oi,at:null},li=(e,t)=>n=>e<=n&&n<=t,ui=e=>{let t=li(e.top,e.bottom),n=li(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;let i=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right);if(i&&a)return!0;let o=r.top<e.top&&r.bottom>e.bottom,s=r.left<e.left&&r.right>e.right;return o&&s?!0:o&&a||s&&i}},di=e=>{let t=li(e.top,e.bottom),n=li(e.left,e.right);return e=>t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)},fi={direction:`vertical`,line:`y`,crossAxisLine:`x`,start:`top`,end:`bottom`,size:`height`,crossAxisStart:`left`,crossAxisEnd:`right`,crossAxisSize:`width`},pi={direction:`horizontal`,line:`x`,crossAxisLine:`y`,start:`left`,end:`right`,size:`width`,crossAxisStart:`top`,crossAxisEnd:`bottom`,crossAxisSize:`height`},mi=e=>t=>{let n=li(t.top,t.bottom),r=li(t.left,t.right);return t=>e===fi?n(t.top)&&n(t.bottom):r(t.left)&&r(t.right)},hi=(e,t)=>{let n=t.frame?t.frame.scroll.diff.displacement:jr;return Vr(e,n)},gi=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,_i=(e,t,n)=>n(t)(e),vi=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{let a=r?hi(e,t):e;return gi(a,t,i)&&_i(a,n,i)},yi=e=>vi({...e,isVisibleThroughFrameFn:ui}),bi=e=>vi({...e,isVisibleThroughFrameFn:di}),xi=e=>vi({...e,isVisibleThroughFrameFn:mi(e.destination.axis)}),Si=(e,t,n)=>{if(typeof n==`boolean`)return n;if(!t)return!0;let{invisible:r,visible:i}=t;if(r[e])return!1;let a=i[e];return a?a.shouldAnimate:!0};function Ci(e,t){let n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Qn($n(n,r))}function wi({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:i,last:a}){return e.reduce(function(e,o){let s=Ci(o,n),c=o.descriptor.id;if(e.all.push(c),!yi({target:s,destination:t,viewport:r,withDroppableDisplacement:!0}))return e.invisible[o.descriptor.id]=!0,e;let l=Si(c,a,i),u={draggableId:c,shouldAnimate:l};return e.visible[c]=u,e},{all:[],visible:{},invisible:{}})}function Ti(e,t){if(!e.length)return 0;let n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function Ei({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){let i=Ti(e,{inHomeList:t});return{displaced:si,displacedBy:n,at:{type:`REORDER`,destination:{droppableId:r.descriptor.id,index:i}}}}function Di({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:i,last:a,index:o,forceShouldAnimate:s}){let c=ai(e,n);if(o==null)return Ei({insideDestination:t,inHomeList:c,displacedBy:i,destination:n});let l=t.find(e=>e.descriptor.index===o);if(!l)return Ei({insideDestination:t,inHomeList:c,displacedBy:i,destination:n});let u=ri(e,t),d=t.indexOf(l),f=u.slice(d);return{displaced:wi({afterDragging:f,destination:n,displacedBy:i,last:a,viewport:r.frame,forceShouldAnimate:s}),displacedBy:i,at:{type:`REORDER`,destination:{droppableId:n.descriptor.id,index:o}}}}function Oi(e,t){return!!t.effected[e]}var ki=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:i})=>{if(!t.isCombineEnabled)return null;let a=r.draggableId,o=n[a].descriptor.index;return Oi(a,i)?e?o:o-1:e?o+1:o},Ai=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;let i=r.index,a=e?i+1:i-1,o=n[0].descriptor.index,s=n[n.length-1].descriptor.index,c=t?s:s+1;return a<o||a>c?null:a},ji=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:i,insideDestination:a,previousImpact:o,viewport:s,afterCritical:c})=>{let l=o.at;if(!l&&L(),l.type===`REORDER`){let r=Ai({isMovingForward:e,isInHomeList:t,location:l.destination,insideDestination:a});return r==null?null:Di({draggable:n,insideDestination:a,destination:i,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:r})}let u=ki({isMovingForward:e,destination:i,displaced:o.displaced,draggables:r,combine:l.combine,afterCritical:c});return u==null?null:Di({draggable:n,insideDestination:a,destination:i,viewport:s,last:o.displaced,displacedBy:o.displacedBy,index:u})},Mi=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{let i=!!(e.visible[n]||e.invisible[n]);return Oi(n,t)?i?jr:Fr(r.point):i?r.point:jr},Ni=({afterCritical:e,impact:t,draggables:n})=>{let r=ni(t);!r&&L();let i=r.draggableId,a=n[i].page.borderBox.center,o=Mi({displaced:t.displaced,afterCritical:e,combineWith:i,displacedBy:t.displacedBy});return Mr(a,o)},Pi=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Fi=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Ii=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,Li=({axis:e,moveRelativeTo:t,isMoving:n})=>Ir(e.line,t.marginBox[e.end]+Pi(e,n),Ii(e,t.marginBox,n)),Ri=({axis:e,moveRelativeTo:t,isMoving:n})=>Ir(e.line,t.marginBox[e.start]-Fi(e,n),Ii(e,t.marginBox,n)),zi=({axis:e,moveInto:t,isMoving:n})=>Ir(e.line,t.contentBox[e.start]+Pi(e,n),Ii(e,t.contentBox,n)),Bi=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i})=>{let a=ei(r.descriptor.id,n),o=t.page,s=r.axis;if(!a.length)return zi({axis:s,moveInto:r.page,isMoving:o});let{displaced:c,displacedBy:l}=e,u=c.all[0];if(u){let e=n[u];if(Oi(u,i))return Ri({axis:s,moveRelativeTo:e.page,isMoving:o});let t=or(e.page,l.point);return Ri({axis:s,moveRelativeTo:t,isMoving:o})}let d=a[a.length-1];if(d.descriptor.id===t.descriptor.id)return o.borderBox.center;if(Oi(d.descriptor.id,i)){let e=or(d.page,Fr(i.displacedBy.point));return Li({axis:s,moveRelativeTo:e,isMoving:o})}return Li({axis:s,moveRelativeTo:d.page,isMoving:o})},Vi=(e,t)=>{let n=e.frame;return n?Mr(t,n.scroll.diff.displacement):t},Hi=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:i})=>{let a=t.page.borderBox.center,o=e.at;return!n||!o?a:o.type===`REORDER`?Bi({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:i}):Ni({impact:e,draggables:r,afterCritical:i})},Ui=e=>{let t=Hi(e),n=e.droppable;return n?Vi(n,t):t},Wi=(e,t)=>{let n=Nr(t,e.scroll.initial),r=Fr(n);return{frame:Qn({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Gi(e,t){return e.map(e=>t[e])}function Ki(e,t){for(let n=0;n<t.length;n++){let r=t[n].visible[e];if(r)return r}return null}var qi=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:i})=>{let a=Wi(t,Mr(t.scroll.current,i)),o=n.frame?Jr(n,Mr(n.frame.scroll.current,i)):n,s=e.displaced,c=wi({afterDragging:Gi(s.all,r),destination:n,displacedBy:e.displacedBy,viewport:a.frame,last:s,forceShouldAnimate:!1}),l=wi({afterDragging:Gi(s.all,r),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:s,forceShouldAnimate:!1}),u={},d={},f=[s,c,l];return s.all.forEach(e=>{let t=Ki(e,f);if(t){d[e]=t;return}u[e]=!0}),{...e,displaced:{all:s.all,invisible:u,visible:d}}},Ji=(e,t)=>Mr(e.scroll.diff.displacement,t),Yi=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{let r=Ji(n,e),i=Nr(r,t.page.borderBox.center);return Mr(t.client.borderBox.center,i)},Xi=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:a=!1})=>{let o=Nr(n,e.page.borderBox.center),s={target:Vr(e.page.borderBox,o),destination:t,withDroppableDisplacement:i,viewport:r};return a?xi(s):bi(s)},Zi=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:i,viewport:a,previousPageBorderBoxCenter:o,previousClientSelection:s,afterCritical:c})=>{if(!n.isEnabled)return null;let l=ei(n.descriptor.id,r),u=ai(t,n),d=ii({isMovingForward:e,draggable:t,destination:n,insideDestination:l,previousImpact:i})||ji({isMovingForward:e,isInHomeList:u,draggable:t,draggables:r,destination:n,insideDestination:l,previousImpact:i,viewport:a,afterCritical:c});if(!d)return null;let f=Ui({impact:d,draggable:t,droppable:n,draggables:r,afterCritical:c});if(Xi({draggable:t,destination:n,newPageBorderBoxCenter:f,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Yi({pageBorderBoxCenter:f,draggable:t,viewport:a}),impact:d,scrollJumpRequest:null};let p=Nr(f,o),m=qi({impact:d,viewport:a,destination:n,draggables:r,maxScrollChange:p});return{clientSelection:s,impact:m,scrollJumpRequest:p}},Qi=e=>{let t=e.subject.active;return!t&&L(),t},$i=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:i})=>{let a=n.subject.active;if(!a)return null;let o=n.axis,s=li(a[o.start],a[o.end]),c=Qr(r).filter(e=>e!==n).filter(e=>e.isEnabled).filter(e=>!!e.subject.active).filter(e=>ui(i.frame)(Qi(e))).filter(t=>{let n=Qi(t);return e?a[o.crossAxisEnd]<n[o.crossAxisEnd]:n[o.crossAxisStart]<a[o.crossAxisStart]}).filter(e=>{let t=Qi(e),n=li(t[o.start],t[o.end]);return s(t[o.start])||s(t[o.end])||n(a[o.start])||n(a[o.end])}).sort((t,n)=>{let r=Qi(t)[o.crossAxisStart],i=Qi(n)[o.crossAxisStart];return e?r-i:i-r}).filter((e,t,n)=>Qi(e)[o.crossAxisStart]===Qi(n[0])[o.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];let l=c.filter(e=>li(Qi(e)[o.start],Qi(e)[o.end])(t[o.line]));return l.length===1?l[0]:l.length>1?l.sort((e,t)=>Qi(e)[o.start]-Qi(t)[o.start])[0]:c.sort((e,n)=>{let r=Rr(t,Hr(Qi(e))),i=Rr(t,Hr(Qi(n)));return r===i?Qi(e)[o.start]-Qi(n)[o.start]:r-i})[0]},ea=(e,t)=>{let n=e.page.borderBox.center;return Oi(e.descriptor.id,t)?Nr(n,t.displacedBy.point):n},ta=(e,t)=>{let n=e.page.borderBox;return Oi(e.descriptor.id,t)?Vr(n,Fr(t.displacedBy.point)):n},na=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:i})=>r.filter(e=>bi({target:ta(e,i),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((t,r)=>{let a=Lr(e,Vi(n,ea(t,i))),o=Lr(e,Vi(n,ea(r,i)));return a<o?-1:o<a?1:t.descriptor.index-r.descriptor.index})[0]||null,ra=Yr(function(e,t){let n=t[e.line];return{value:n,point:Ir(e.line,n)}}),ia=(e,t,n)=>{let r=e.axis;if(e.descriptor.mode===`virtual`)return Ir(r.line,t[r.line]);let i=e.subject.page.contentBox[r.size],a=ei(e.descriptor.id,n).reduce((e,t)=>e+t.client.marginBox[r.size],0)+t[r.line]-i;return a<=0?null:Ir(r.line,a)},aa=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),oa=(e,t,n)=>{let r=e.frame;ai(t,e)&&L(),e.subject.withPlaceholder&&L();let i=ra(e.axis,t.displaceBy).point,a=ia(e,i,n),o={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){let t=qr({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:t}}let s=a?Mr(r.scroll.max,a):r.scroll.max,c=aa(r,s),l=qr({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:c});return{...e,subject:l,frame:c}},sa=e=>{let t=e.subject.withPlaceholder;!t&&L();let n=e.frame;if(!n){let t=qr({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:t}}let r=t.oldFrameMaxScroll;!r&&L();let i=aa(n,r),a=qr({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null});return{...e,subject:a,frame:i}},ca=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:i,destination:a,viewport:o,afterCritical:s})=>{if(!t){if(n.length)return null;let e={displaced:si,displacedBy:oi,at:{type:`REORDER`,destination:{droppableId:a.descriptor.id,index:0}}},t=Ui({impact:e,draggable:r,droppable:a,draggables:i,afterCritical:s}),c=ai(r,a)?a:oa(a,r,i);return Xi({draggable:r,destination:c,newPageBorderBoxCenter:t,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?e:null}let c=e[a.axis.line]<=t.page.borderBox.center[a.axis.line],l=(()=>{let e=t.descriptor.index;return t.descriptor.id===r.descriptor.id||c?e:e+1})(),u=ra(a.axis,r.displaceBy);return Di({draggable:r,insideDestination:n,destination:a,viewport:o,displacedBy:u,last:si,index:l})},la=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:i,droppables:a,viewport:o,afterCritical:s})=>{let c=$i({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:a,viewport:o});if(!c)return null;let l=ei(c.descriptor.id,i),u=na({pageBorderBoxCenter:t,viewport:o,destination:c,insideDestination:l,afterCritical:s}),d=ca({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:l,viewport:o,afterCritical:s});if(!d)return null;let f=Ui({impact:d,draggable:n,droppable:c,draggables:i,afterCritical:s});return{clientSelection:Yi({pageBorderBoxCenter:f,draggable:n,viewport:o}),impact:d,scrollJumpRequest:null}},ua=e=>{let t=e.at;return t?t.type===`REORDER`?t.destination.droppableId:t.combine.droppableId:null},da=(e,t)=>{let n=ua(e);return n?t[n]:null},fa=({state:e,type:t})=>{let n=da(e.impact,e.dimensions.droppables),r=!!n,i=e.dimensions.droppables[e.critical.droppable.id],a=n||i,o=a.axis.direction,s=o===`vertical`&&(t===`MOVE_UP`||t===`MOVE_DOWN`)||o===`horizontal`&&(t===`MOVE_LEFT`||t===`MOVE_RIGHT`);if(s&&!r)return null;let c=t===`MOVE_DOWN`||t===`MOVE_RIGHT`,l=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:d,droppables:f}=e.dimensions;return s?Zi({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:l,destination:a,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):la({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:l,isOver:a,draggables:d,droppables:f,viewport:e.viewport,afterCritical:e.afterCritical})};function pa(e){return e.phase===`DRAGGING`||e.phase===`COLLECTING`}function ma(e){let t=li(e.top,e.bottom),n=li(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function ha(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function ga({pageBorderBox:e,draggable:t,candidates:n}){let r=t.page.borderBox.center,i=n.map(t=>{let n=t.axis,i=Ir(t.axis.line,e.center[n.line],t.page.borderBox.center[n.crossAxisLine]);return{id:t.descriptor.id,distance:Lr(r,i)}}).sort((e,t)=>t.distance-e.distance);return i[0]?i[0].id:null}function _a({pageBorderBox:e,draggable:t,droppables:n}){let r=Qr(n).filter(t=>{if(!t.isEnabled)return!1;let n=t.subject.active;if(!n||!ha(e,n))return!1;if(ma(n)(e.center))return!0;let r=t.axis,i=n.center[r.crossAxisLine],a=e[r.crossAxisStart],o=e[r.crossAxisEnd],s=li(n[r.crossAxisStart],n[r.crossAxisEnd]),c=s(a),l=s(o);return!c&&!l?!0:c?a<i:o>i});return r.length?r.length===1?r[0].descriptor.id:ga({pageBorderBox:e,draggable:t,candidates:r}):null}var va=(e,t)=>Qn(Vr(e,t)),ya=(e,t)=>{let n=e.frame;return n?va(t,n.scroll.diff.value):t};function ba({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function xa({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Sa=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:i,viewport:a,afterCritical:o})=>{let s=n.axis,c=ra(n.axis,t.displaceBy),l=c.value,u=e[s.start],d=e[s.end],f=ri(t,r).find(e=>{let t=e.descriptor.id,n=e.page.borderBox.center[s.line],r=Oi(t,o),a=ba({displaced:i,id:t});return r?a?d<=n:u<n-l:a?d<=n+l:u<n})||null,p=xa({draggable:t,closest:f,inHomeList:ai(t,n)});return Di({draggable:t,insideDestination:r,destination:n,viewport:a,last:i,displacedBy:c,index:p})},Ca=4,wa=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:i,afterCritical:a})=>{if(!r.isCombineEnabled)return null;let o=r.axis,s=ra(r.axis,e.displaceBy),c=s.value,l=t[o.start],u=t[o.end],d=ri(e,i).find(e=>{let t=e.descriptor.id,r=e.page.borderBox,i=r[o.size]/Ca,s=Oi(t,a),d=ba({displaced:n.displaced,id:t});return s?d?u>r[o.start]+i&&u<r[o.end]-i:l>r[o.start]-c+i&&l<r[o.end]-c-i:d?u>r[o.start]+c+i&&u<r[o.end]+c-i:l>r[o.start]+i&&l<r[o.end]-i});return d?{displacedBy:s,displaced:n.displaced,at:{type:`COMBINE`,combine:{draggableId:d.descriptor.id,droppableId:r.descriptor.id}}}:null},Ta=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:i,viewport:a,afterCritical:o})=>{let s=va(t.page.borderBox,e),c=_a({pageBorderBox:s,draggable:t,droppables:r});if(!c)return ci;let l=r[c],u=ei(l.descriptor.id,n),d=ya(l,s);return wa({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:i,destination:l,insideDestination:u,afterCritical:o})||Sa({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:l,insideDestination:u,last:i.displaced,viewport:a,afterCritical:o})},Ea=(e,t)=>({...e,[t.descriptor.id]:t}),Da=({previousImpact:e,impact:t,droppables:n})=>{let r=ua(e),i=ua(t);if(!r||r===i)return n;let a=n[r];if(!a.subject.withPlaceholder)return n;let o=sa(a);return Ea(n,o)},Oa=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:i})=>{let a=Da({previousImpact:r,impact:i,droppables:n}),o=ua(i);if(!o)return a;let s=n[o];if(ai(e,s)||s.subject.withPlaceholder)return a;let c=oa(s,e,t);return Ea(a,c)},ka=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:i,scrollJumpRequest:a})=>{let o=r||e.viewport,s=n||e.dimensions,c=t||e.current.client.selection,l=Nr(c,e.initial.client.selection),u={offset:l,selection:c,borderBoxCenter:Mr(e.initial.client.borderBoxCenter,l)},d={selection:Mr(u.selection,o.scroll.current),borderBoxCenter:Mr(u.borderBoxCenter,o.scroll.current),offset:Mr(u.offset,o.scroll.diff.value)},f={client:u,page:d};if(e.phase===`COLLECTING`)return{...e,dimensions:s,viewport:o,current:f};let p=s.draggables[e.critical.draggable.id],m=i||Ta({pageOffset:d.offset,draggable:p,draggables:s.draggables,droppables:s.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),h=Oa({draggable:p,impact:m,previousImpact:e.impact,draggables:s.draggables,droppables:s.droppables});return{...e,current:f,dimensions:{draggables:s.draggables,droppables:h},impact:m,viewport:o,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function Aa(e,t){return e.map(e=>t[e])}var ja=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:i})=>{let a=e.displaced,o=Aa(a.all,n),s=wi({afterDragging:o,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:i,last:a});return{...e,displaced:s}},Ma=({impact:e,draggable:t,droppable:n,draggables:r,viewport:i,afterCritical:a})=>{let o=Ui({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a});return Yi({pageBorderBoxCenter:o,draggable:t,viewport:i})},Na=({state:e,dimensions:t,viewport:n})=>{e.movementMode!==`SNAP`&&L();let r=e.impact,i=n||e.viewport,a=t||e.dimensions,{draggables:o,droppables:s}=a,c=o[e.critical.draggable.id],l=ua(r);!l&&L();let u=s[l],d=ja({impact:r,viewport:i,destination:u,draggables:o}),f=Ma({impact:d,draggable:c,droppable:u,draggables:o,viewport:i,afterCritical:e.afterCritical});return ka({impact:d,clientSelection:f,state:e,dimensions:a,viewport:i})},Pa=e=>({index:e.index,droppableId:e.droppableId}),Fa=({draggable:e,home:t,draggables:n,viewport:r})=>{let i=ra(t.axis,e.displaceBy),a=ei(t.descriptor.id,n),o=a.indexOf(e);o===-1&&L();let s=a.slice(o+1),c=s.reduce((e,t)=>(e[t.descriptor.id]=!0,e),{}),l={inVirtualList:t.descriptor.mode===`virtual`,displacedBy:i,effected:c};return{impact:{displaced:wi({afterDragging:s,destination:t,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:`REORDER`,destination:Pa(e.descriptor)}},afterCritical:l}},Ia=(e,t)=>({draggables:e.draggables,droppables:Ea(e.droppables,t)}),La=({draggable:e,offset:t,initialWindowScroll:n})=>{let r=or(e.client,t),i=sr(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:i}},Ra=e=>{let t=e.frame;return!t&&L(),t},za=({additions:e,updatedDroppables:t,viewport:n})=>{let r=n.scroll.diff.value;return e.map(e=>{let i=e.descriptor.droppableId,a=t[i],o=Ra(a).scroll.diff.value,s=Mr(r,o);return La({draggable:e,offset:s,initialWindowScroll:n.scroll.initial})})},Ba=({state:e,published:t})=>{let n=t.modified.map(t=>{let n=e.dimensions.droppables[t.droppableId];return Jr(n,t.scroll)}),r={...e.dimensions.droppables,...Xr(n)},i=Zr(za({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),a={...e.dimensions.draggables,...i};t.removals.forEach(e=>{delete a[e]});let o={droppables:r,draggables:a},s=ua(e.impact),c=s?o.droppables[s]:null,l=o.draggables[e.critical.draggable.id],u=o.droppables[e.critical.droppable.id],{impact:d,afterCritical:f}=Fa({draggable:l,home:u,draggables:a,viewport:e.viewport}),p=c&&c.isCombineEnabled?e.impact:d,m=Ta({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:p,viewport:e.viewport,afterCritical:f}),h={...e,phase:`DRAGGING`,impact:m,onLiftImpact:d,dimensions:o,afterCritical:f,forceShouldAnimate:!1};return e.phase===`COLLECTING`?h:{...h,phase:`DROP_PENDING`,reason:e.reason,isWaiting:!1}},Va=e=>e.movementMode===`SNAP`,Ha=(e,t,n)=>{let r=Ia(e.dimensions,t);return!Va(e)||n?ka({state:e,dimensions:r}):Na({state:e,dimensions:r})};function Ua(e){return e.isDragging&&e.movementMode===`SNAP`?{...e,scrollJumpRequest:null}:e}var Wa={phase:`IDLE`,completed:null,shouldFlush:!1},Ga=(e=Wa,t)=>{if(t.type===`FLUSH`)return{...Wa,shouldFlush:!0};if(t.type===`INITIAL_PUBLISH`){e.phase!==`IDLE`&&L();let{critical:n,clientSelection:r,viewport:i,dimensions:a,movementMode:o}=t.payload,s=a.draggables[n.draggable.id],c=a.droppables[n.droppable.id],l={selection:r,borderBoxCenter:s.client.borderBox.center,offset:jr},u={client:l,page:{selection:Mr(l.selection,i.scroll.initial),borderBoxCenter:Mr(l.selection,i.scroll.initial),offset:Mr(l.selection,i.scroll.diff.value)}},d=Qr(a.droppables).every(e=>!e.isFixedOnPage),{impact:f,afterCritical:p}=Fa({draggable:s,home:c,draggables:a.draggables,viewport:i});return{phase:`DRAGGING`,isDragging:!0,critical:n,movementMode:o,dimensions:a,initial:u,current:u,isWindowScrollAllowed:d,impact:f,afterCritical:p,onLiftImpact:f,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type===`COLLECTION_STARTING`)return e.phase===`COLLECTING`||e.phase===`DROP_PENDING`?e:(e.phase!==`DRAGGING`&&L(),{...e,phase:`COLLECTING`});if(t.type===`PUBLISH_WHILE_DRAGGING`)return!(e.phase===`COLLECTING`||e.phase===`DROP_PENDING`)&&L(),Ba({state:e,published:t.payload});if(t.type===`MOVE`){if(e.phase===`DROP_PENDING`)return e;!pa(e)&&L();let{client:n}=t.payload;return Pr(n,e.current.client.selection)?e:ka({state:e,clientSelection:n,impact:Va(e)?e.impact:null})}if(t.type===`UPDATE_DROPPABLE_SCROLL`){if(e.phase===`DROP_PENDING`||e.phase===`COLLECTING`)return Ua(e);!pa(e)&&L();let{id:n,newScroll:r}=t.payload,i=e.dimensions.droppables[n];if(!i)return e;let a=Jr(i,r);return Ha(e,a,!1)}if(t.type===`UPDATE_DROPPABLE_IS_ENABLED`){if(e.phase===`DROP_PENDING`)return e;!pa(e)&&L();let{id:n,isEnabled:r}=t.payload,i=e.dimensions.droppables[n];!i&&L(),i.isEnabled===r&&L();let a={...i,isEnabled:r};return Ha(e,a,!0)}if(t.type===`UPDATE_DROPPABLE_IS_COMBINE_ENABLED`){if(e.phase===`DROP_PENDING`)return e;!pa(e)&&L();let{id:n,isCombineEnabled:r}=t.payload,i=e.dimensions.droppables[n];!i&&L(),i.isCombineEnabled===r&&L();let a={...i,isCombineEnabled:r};return Ha(e,a,!0)}if(t.type===`MOVE_BY_WINDOW_SCROLL`){if(e.phase===`DROP_PENDING`||e.phase===`DROP_ANIMATING`)return e;!pa(e)&&L(),!e.isWindowScrollAllowed&&L();let n=t.payload.newScroll;if(Pr(e.viewport.scroll.current,n))return Ua(e);let r=Wi(e.viewport,n);return Va(e)?Na({state:e,viewport:r}):ka({state:e,viewport:r})}if(t.type===`UPDATE_VIEWPORT_MAX_SCROLL`){if(!pa(e))return e;let n=t.payload.maxScroll;if(Pr(n,e.viewport.scroll.max))return e;let r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type===`MOVE_UP`||t.type===`MOVE_DOWN`||t.type===`MOVE_LEFT`||t.type===`MOVE_RIGHT`){if(e.phase===`COLLECTING`||e.phase===`DROP_PENDING`)return e;e.phase!==`DRAGGING`&&L();let n=fa({state:e,type:t.type});return n?ka({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type===`DROP_PENDING`){let n=t.payload.reason;return e.phase!==`COLLECTING`&&L(),{...e,phase:`DROP_PENDING`,isWaiting:!0,reason:n}}if(t.type===`DROP_ANIMATE`){let{completed:n,dropDuration:r,newHomeClientOffset:i}=t.payload;return!(e.phase===`DRAGGING`||e.phase===`DROP_PENDING`)&&L(),{phase:`DROP_ANIMATING`,completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:e.dimensions}}if(t.type===`DROP_COMPLETE`){let{completed:e}=t.payload;return{phase:`IDLE`,completed:e,shouldFlush:!1}}return e};function Ka(e,t){return e instanceof Object&&`type`in e&&e.type===t}var qa=e=>({type:`BEFORE_INITIAL_CAPTURE`,payload:e}),Ja=e=>({type:`LIFT`,payload:e}),Ya=e=>({type:`INITIAL_PUBLISH`,payload:e}),Xa=e=>({type:`PUBLISH_WHILE_DRAGGING`,payload:e}),Za=()=>({type:`COLLECTION_STARTING`,payload:null}),Qa=e=>({type:`UPDATE_DROPPABLE_SCROLL`,payload:e}),$a=e=>({type:`UPDATE_DROPPABLE_IS_ENABLED`,payload:e}),eo=e=>({type:`UPDATE_DROPPABLE_IS_COMBINE_ENABLED`,payload:e}),to=e=>({type:`MOVE`,payload:e}),no=e=>({type:`MOVE_BY_WINDOW_SCROLL`,payload:e}),ro=e=>({type:`UPDATE_VIEWPORT_MAX_SCROLL`,payload:e}),io=()=>({type:`MOVE_UP`,payload:null}),ao=()=>({type:`MOVE_DOWN`,payload:null}),oo=()=>({type:`MOVE_RIGHT`,payload:null}),so=()=>({type:`MOVE_LEFT`,payload:null}),co=()=>({type:`FLUSH`,payload:null}),lo=e=>({type:`DROP_ANIMATE`,payload:e}),uo=e=>({type:`DROP_COMPLETE`,payload:e}),fo=e=>({type:`DROP`,payload:e}),po=e=>({type:`DROP_PENDING`,payload:e}),mo=()=>({type:`DROP_ANIMATION_FINISHED`,payload:null}),ho=e=>({getState:t,dispatch:n})=>r=>i=>{if(!Ka(i,`LIFT`)){r(i);return}let{id:a,clientSelection:o,movementMode:s}=i.payload,c=t();c.phase===`DROP_ANIMATING`&&n(uo({completed:c.completed})),t().phase!==`IDLE`&&L(),n(co()),n(qa({draggableId:a,movementMode:s}));let l={draggableId:a,scrollOptions:{shouldPublishImmediately:s===`SNAP`}},{critical:u,dimensions:d,viewport:f}=e.startPublishing(l);n(Ya({critical:u,dimensions:d,clientSelection:o,movementMode:s,viewport:f}))},go=e=>()=>t=>n=>{Ka(n,`INITIAL_PUBLISH`)&&e.dragging(),Ka(n,`DROP_ANIMATE`)&&e.dropping(n.payload.completed.result.reason),(Ka(n,`FLUSH`)||Ka(n,`DROP_COMPLETE`))&&e.resting(),t(n)},_o={outOfTheWay:`cubic-bezier(0.2, 0, 0, 1)`,drop:`cubic-bezier(.2,1,.1,1)`},vo={opacity:{drop:0,combining:.7},scale:{drop:.75}},yo={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},bo=`${yo.outOfTheWay}s ${_o.outOfTheWay}`,xo={fluid:`opacity ${bo}`,snap:`transform ${bo}, opacity ${bo}`,drop:e=>{let t=`${e}s ${_o.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${bo}`,placeholder:`height ${bo}, width ${bo}, margin ${bo}`},So=e=>Pr(e,jr)?void 0:`translate(${e.x}px, ${e.y}px)`,Co={moveTo:So,drop:(e,t)=>{let n=So(e);if(n)return t?`${n} scale(${vo.scale.drop})`:n}},{minDropTime:wo,maxDropTime:To}=yo,z=To-wo,Eo=1500,Do=.6,Oo=({current:e,destination:t,reason:n})=>{let r=Lr(e,t);if(r<=0)return wo;if(r>=Eo)return To;let i=r/Eo,a=wo+z*i,o=n===`CANCEL`?a*Do:a;return Number(o.toFixed(2))},ko=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:i})=>{let{draggables:a,droppables:o}=n,s=ua(e),c=s?o[s]:null,l=o[t.descriptor.droppableId],u=Ma({impact:e,draggable:t,draggables:a,afterCritical:i,droppable:c||l,viewport:r});return Nr(u,t.client.borderBox.center)},Ao=({draggables:e,reason:t,lastImpact:n,home:r,viewport:i,onLiftImpact:a})=>!n.at||t!==`DROP`?{impact:ja({draggables:e,impact:a,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type===`REORDER`?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:si},didDropInsideDroppable:!0},jo=({getState:e,dispatch:t})=>n=>r=>{if(!Ka(r,`DROP`)){n(r);return}let i=e(),a=r.payload.reason;if(i.phase===`COLLECTING`){t(po({reason:a}));return}if(i.phase===`IDLE`)return;i.phase===`DROP_PENDING`&&i.isWaiting&&L(),!(i.phase===`DRAGGING`||i.phase===`DROP_PENDING`)&&L();let o=i.critical,s=i.dimensions,c=s.draggables[i.critical.draggable.id],{impact:l,didDropInsideDroppable:u}=Ao({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),d=u?ti(l):null,f=u?ni(l):null,p={index:o.draggable.index,droppableId:o.droppable.id},m={draggableId:c.descriptor.id,type:c.descriptor.type,source:p,reason:a,mode:i.movementMode,destination:d,combine:f},h=ko({impact:l,draggable:c,dimensions:s,viewport:i.viewport,afterCritical:i.afterCritical}),g={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:l};if(!(!Pr(i.current.client.offset,h)||m.combine)){t(uo({completed:g}));return}let _=Oo({current:i.current.client.offset,destination:h,reason:a});t(lo({newHomeClientOffset:h,dropDuration:_,completed:g}))},Mo=()=>({x:window.pageXOffset,y:window.pageYOffset});function No(e){return{eventName:`scroll`,options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Po({onWindowScroll:e}){function t(){e(Mo())}let n=ur(t),r=No(n),i=mr;function a(){return i!==mr}function o(){a()&&L(),i=gr(window,[r])}function s(){!a()&&L(),n.cancel(),i(),i=mr}return{start:o,stop:s,isActive:a}}var Fo=e=>Ka(e,`DROP_COMPLETE`)||Ka(e,`DROP_ANIMATE`)||Ka(e,`FLUSH`),Io=e=>{let t=Po({onWindowScroll:t=>{e.dispatch(no({newScroll:t}))}});return e=>n=>{!t.isActive()&&Ka(n,`INITIAL_PUBLISH`)&&t.start(),t.isActive()&&Fo(n)&&t.stop(),e(n)}},Lo=e=>{let t=!1,n=!1,r=setTimeout(()=>{n=!0}),i=i=>{t||n||(t=!0,e(i),clearTimeout(r))};return i.wasCalled=()=>t,i},Ro=()=>{let e=[],t=t=>{let n=e.findIndex(e=>e.timerId===t);n===-1&&L();let[r]=e.splice(n,1);r.callback()};return{add:n=>{let r=setTimeout(()=>t(r)),i={timerId:r,callback:n};e.push(i)},flush:()=>{if(!e.length)return;let t=[...e];e.length=0,t.forEach(e=>{clearTimeout(e.timerId),e.callback()})}}},zo=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Bo=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,Vo=(e,t)=>{if(e===t)return!0;let n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},Ho=(e,t)=>{t()},Uo=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Wo(e,t,n,r){if(!e){n(r(t));return}let i=Lo(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}var Go=(e,t)=>{let n=Ro(),r=null,i=(t,n)=>{r&&L(),Ho(`onBeforeCapture`,()=>{let r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})})},a=(t,n)=>{r&&L(),Ho(`onBeforeDragStart`,()=>{let r=e().onBeforeDragStart;r&&r(Uo(t,n))})},o=(i,a)=>{r&&L();let o=Uo(i,a);r={mode:a,lastCritical:i,lastLocation:o.source,lastCombine:null},n.add(()=>{Ho(`onDragStart`,()=>Wo(e().onDragStart,o,t,Dr.onDragStart))})},s=(i,a)=>{let o=ti(a),s=ni(a);!r&&L();let c=!Vo(i,r.lastCritical);c&&(r.lastCritical=i);let l=!zo(r.lastLocation,o);l&&(r.lastLocation=o);let u=!Bo(r.lastCombine,s);if(u&&(r.lastCombine=s),!c&&!l&&!u)return;let d={...Uo(i,r.mode),combine:s,destination:o};n.add(()=>{Ho(`onDragUpdate`,()=>Wo(e().onDragUpdate,d,t,Dr.onDragUpdate))})},c=()=>{!r&&L(),n.flush()},l=n=>{!r&&L(),r=null,Ho(`onDragEnd`,()=>Wo(e().onDragEnd,n,t,Dr.onDragEnd))};return{beforeCapture:i,beforeStart:a,start:o,update:s,flush:c,drop:l,abort:()=>{if(!r)return;let e={...Uo(r.lastCritical,r.mode),combine:null,destination:null,reason:`CANCEL`};l(e)}}},Ko=(e,t)=>{let n=Go(e,t);return e=>t=>r=>{if(Ka(r,`BEFORE_INITIAL_CAPTURE`)){n.beforeCapture(r.payload.draggableId,r.payload.movementMode);return}if(Ka(r,`INITIAL_PUBLISH`)){let e=r.payload.critical;n.beforeStart(e,r.payload.movementMode),t(r),n.start(e,r.payload.movementMode);return}if(Ka(r,`DROP_COMPLETE`)){let e=r.payload.completed.result;n.flush(),t(r),n.drop(e);return}if(t(r),Ka(r,`FLUSH`)){n.abort();return}let i=e.getState();i.phase===`DRAGGING`&&n.update(i.critical,i.impact)}},qo=e=>t=>n=>{if(!Ka(n,`DROP_ANIMATION_FINISHED`)){t(n);return}let r=e.getState();r.phase!==`DROP_ANIMATING`&&L(),e.dispatch(uo({completed:r.completed}))},Jo=e=>{let t=null,n=null;function r(){n&&=(cancelAnimationFrame(n),null),t&&=(t(),null)}return i=>a=>{if((Ka(a,`FLUSH`)||Ka(a,`DROP_COMPLETE`)||Ka(a,`DROP_ANIMATION_FINISHED`))&&r(),i(a),!Ka(a,`DROP_ANIMATE`))return;let o={eventName:`scroll`,options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase===`DROP_ANIMATING`&&e.dispatch(mo())}};n=requestAnimationFrame(()=>{n=null,t=gr(window,[o])})}},Yo=e=>()=>t=>n=>{(Ka(n,`DROP_COMPLETE`)||Ka(n,`FLUSH`)||Ka(n,`DROP_ANIMATE`))&&e.stopPublishing(),t(n)},Xo=e=>{let t=!1;return()=>n=>r=>{if(Ka(r,`INITIAL_PUBLISH`)){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),t){if(Ka(r,`FLUSH`)){t=!1,e.tryRestoreFocusRecorded();return}if(Ka(r,`DROP_COMPLETE`)){t=!1;let n=r.payload.completed.result;n.combine&&e.tryShiftRecord(n.draggableId,n.combine.draggableId),e.tryRestoreFocusRecorded()}}}},Zo=e=>Ka(e,`DROP_COMPLETE`)||Ka(e,`DROP_ANIMATE`)||Ka(e,`FLUSH`),Qo=e=>t=>n=>r=>{if(Zo(r)){e.stop(),n(r);return}if(Ka(r,`INITIAL_PUBLISH`)){n(r);let i=t.getState();i.phase!==`DRAGGING`&&L(),e.start(i);return}n(r),e.scroll(t.getState())},$o=e=>t=>n=>{if(t(n),!Ka(n,`PUBLISH_WHILE_DRAGGING`))return;let r=e.getState();r.phase===`DROP_PENDING`&&(r.isWaiting||e.dispatch(fo({reason:r.reason})))},es=It,ts=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:i,autoScroller:a})=>I(Ga,es(Lt(go(n),Yo(e),ho(e),jo,qo,Jo,$o,Qo(a),Io,Xo(t),Ko(r,i)))),ns=()=>({additions:{},removals:{},modified:{}});function rs({registry:e,callbacks:t}){let n=ns(),r=null,i=()=>{r||=(t.collectionStarting(),requestAnimationFrame(()=>{r=null;let{additions:i,removals:a,modified:o}=n,s=Object.keys(i).map(t=>e.draggable.getById(t).getDimension(jr)).sort((e,t)=>e.descriptor.index-t.descriptor.index),c=Object.keys(o).map(t=>{let n=e.droppable.getById(t).callbacks.getScrollWhileDragging();return{droppableId:t,scroll:n}}),l={additions:s,removals:Object.keys(a),modified:c};n=ns(),t.publish(l)}))};return{add:e=>{let t=e.descriptor.id;n.additions[t]=e,n.modified[e.descriptor.droppableId]=!0,n.removals[t]&&delete n.removals[t],i()},remove:e=>{let t=e.descriptor;n.removals[t.id]=!0,n.modified[t.droppableId]=!0,n.additions[t.id]&&delete n.additions[t.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=ns())}}}var os=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{let i=Nr({x:t,y:e},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},ss=()=>{let e=document.documentElement;return!e&&L(),e},cs=()=>{let e=ss();return os({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},ls=()=>{let e=Mo(),t=cs(),n=e.y,r=e.x,i=ss(),a=i.clientWidth,o=i.clientHeight,s=r+a,c=n+o;return{frame:Qn({top:n,left:r,right:s,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:jr,displacement:jr}}}},us=({critical:e,scrollOptions:t,registry:n})=>{let r=ls(),i=r.scroll.current,a=e.droppable,o=n.droppable.getAllByType(a.type).map(e=>e.callbacks.getDimensionAndWatchScroll(i,t)),s=n.draggable.getAllByType(e.draggable.type).map(e=>e.getDimension(i));return{dimensions:{draggables:Zr(s),droppables:Xr(o)},critical:e,viewport:r}};function ds(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!==`virtual`)}var fs=(e,t)=>{let n=null,r=rs({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=(r,i)=>{!e.droppable.exists(r)&&L(),n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},a=(r,i)=>{n&&(!e.droppable.exists(r)&&L(),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},o=(r,i)=>{n&&(!e.droppable.exists(r)&&L(),t.updateDroppableScroll({id:r,newScroll:i}))},s=(t,r)=>{n&&e.droppable.getById(t).callbacks.scroll(r)},c=()=>{if(!n)return;r.stop();let t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach(e=>e.callbacks.dragStopped()),n.unsubscribe(),n=null},l=t=>{!n&&L();let i=n.critical.draggable;t.type===`ADDITION`&&ds(e,i,t.value)&&r.add(t.value),t.type===`REMOVAL`&&ds(e,i,t.value)&&r.remove(t.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:a,scrollDroppable:s,updateDroppableScroll:o,startPublishing:t=>{n&&L();let r=e.draggable.getById(t.draggableId),i=e.droppable.getById(r.descriptor.droppableId),a={draggable:r.descriptor,droppable:i.descriptor},o=e.subscribe(l);return n={critical:a,unsubscribe:o},us({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:c}},ps=(e,t)=>e.phase===`IDLE`?!0:e.phase!==`DROP_ANIMATING`||e.completed.result.draggableId===t?!1:e.completed.result.reason===`DROP`,ms=e=>{window.scrollBy(e.x,e.y)},hs=Yr(e=>Qr(e).filter(e=>!(!e.isEnabled||!e.frame))),gs=(e,t)=>hs(t).find(t=>(!t.frame&&L(),ma(t.frame.pageMarginBox)(e)))||null,_s=({center:e,destination:t,droppables:n})=>{if(t){let e=n[t];return e.frame?e:null}return gs(e,n)},vs={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1},ys=(e,t,n=()=>vs)=>{let r=n(),i=e[t.size]*r.startFromPercentage,a=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:a}},bs=({startOfRange:e,endOfRange:t,current:n})=>{let r=t-e;return r===0?0:(n-e)/r},xs=1,Ss=(e,t,n=()=>vs)=>{let r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return xs;let i=1-bs({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),a=r.maxPixelScroll*r.ease(i);return Math.ceil(a)},Cs=(e,t,n)=>{let r=n(),i=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,o=t,s=a,c=Date.now()-o;if(c>=a)return e;if(c<i)return xs;let l=bs({startOfRange:i,endOfRange:s,current:c}),u=e*r.ease(l);return Math.ceil(u)},ws=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{let a=Ss(e,t,i);return a===0?0:r?Math.max(Cs(a,n,i),xs):a},Ts=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{let o=ys(e,r,a);return t[r.end]<t[r.start]?ws({distanceToEdge:t[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a}):-1*ws({distanceToEdge:t[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a})},Es=({container:e,subject:t,proposedScroll:n})=>{let r=t.height>e.height,i=t.width>e.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}},Ds=zr(e=>e===0?0:e),Os=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{let o={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},s=Ts({container:t,distanceToEdges:o,dragStartTime:e,axis:fi,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),c=Ts({container:t,distanceToEdges:o,dragStartTime:e,axis:pi,shouldUseTimeDampening:i,getAutoScrollerOptions:a}),l=Ds({x:c,y:s});if(Pr(l,jr))return null;let u=Es({container:t,subject:n,proposedScroll:l});return u?Pr(u,jr)?null:u:null},ks=zr(e=>e===0?0:e>0?1:-1),As=(()=>{let e=(e,t)=>e<0?e:e>t?e-t:0;return({current:t,max:n,change:r})=>{let i=Mr(t,r),a={x:e(i.x,n.x),y:e(i.y,n.y)};return Pr(a,jr)?null:a}})(),js=({max:e,current:t,change:n})=>{let r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},i=ks(n),a=As({max:r,current:t,change:i});return!a||i.x!==0&&a.x===0||i.y!==0&&a.y===0},Ms=(e,t)=>js({current:e.scroll.current,max:e.scroll.max,change:t}),Ns=(e,t)=>{if(!Ms(e,t))return null;let n=e.scroll.max,r=e.scroll.current;return As({current:r,max:n,change:t})},Ps=(e,t)=>{let n=e.frame;return n?js({current:n.scroll.current,max:n.scroll.max,change:t}):!1},Fs=(e,t)=>{let n=e.frame;return!n||!Ps(e,t)?null:As({current:n.scroll.current,max:n.scroll.max,change:t})},Is=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{let o=Os({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return o&&Ms(e,o)?o:null},Ls=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:a})=>{let o=e.frame;if(!o)return null;let s=Os({dragStartTime:r,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:a});return s&&Ps(e,s)?s:null},Rs=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:a})=>{let o=e.current.page.borderBoxCenter,s=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){let i=e.viewport,c=Is({dragStartTime:t,viewport:i,subject:s,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(c){r(c);return}}let c=_s({center:o,destination:ua(e.impact),droppables:e.dimensions.droppables});if(!c)return;let l=Ls({dragStartTime:t,droppable:c,subject:s,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:a});l&&i(c.descriptor.id,l)},zs=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>vs})=>{let r=ur(e),i=ur(t),a=null,o=e=>{!a&&L();let{shouldUseTimeDampening:t,dragStartTime:o}=a;Rs({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:o,shouldUseTimeDampening:t,getAutoScrollerOptions:n})};return{start:e=>{a&&L();let t=Date.now(),r=!1,i=()=>{r=!0};Rs({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:i,scrollDroppable:i,getAutoScrollerOptions:n}),a={dragStartTime:t,shouldUseTimeDampening:r},r&&o(e)},stop:()=>{a&&=(r.cancel(),i.cancel(),null)},scroll:o}},Bs=({move:e,scrollDroppable:t,scrollWindow:n})=>{let r=(t,n)=>{let r=Mr(t.current.client.selection,n);e({client:r})},i=(e,n)=>{if(!Ps(e,n))return n;let r=Fs(e,n);if(!r)return t(e.descriptor.id,n),null;let i=Nr(n,r);return t(e.descriptor.id,i),Nr(n,i)},a=(e,t,r)=>{if(!e||!Ms(t,r))return r;let i=Ns(t,r);if(!i)return n(r),null;let a=Nr(r,i);return n(a),Nr(r,a)};return e=>{let t=e.scrollJumpRequest;if(!t)return;let n=ua(e.impact);!n&&L();let o=i(e.dimensions.droppables[n],t);if(!o)return;let s=e.viewport,c=a(e.isWindowScrollAllowed,s,o);c&&r(e,c)}},Vs=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{let i=zs({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),a=Bs({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:e=>{if(!(r().disabled||e.phase!==`DRAGGING`)){if(e.movementMode===`FLUID`){i.scroll(e);return}e.scrollJumpRequest&&a(e)}},start:i.start,stop:i.stop}},Hs=`data-rfd`,Us=(()=>{let e=`${Hs}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Ws=(()=>{let e=`${Hs}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Gs=(()=>{let e=`${Hs}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Ks={contextId:`${Hs}-scroll-container-context-id`},qs=e=>t=>`[${t}="${e}"]`,Js=(e,t)=>e.map(e=>{let n=e.styles[t];return n?`${e.selector} { ${n} }`:``}).join(` `),Ys=`pointer-events: none;`,Xs=e=>{let t=qs(e),n=(()=>{let e=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Us.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:e,dragging:Ys,dropAnimating:e}}})(),r=(()=>{let e=`
      transition: ${xo.outOfTheWay};
    `;return{selector:t(Ws.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}})(),i={selector:t(Gs.contextId),styles:{always:`overflow-anchor: none;`}},a=[r,n,i,{selector:`body`,styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Js(a,`always`),resting:Js(a,`resting`),dragging:Js(a,`dragging`),dropAnimating:Js(a,`dropAnimating`),userCancel:Js(a,`userCancel`)}},Zs=typeof window<`u`&&window.document!==void 0&&window.document.createElement!==void 0?v.useLayoutEffect:v.useEffect,Qs=()=>{let e=document.querySelector(`head`);return!e&&L(),e},$s=e=>{let t=document.createElement(`style`);return e&&t.setAttribute(`nonce`,e),t.type=`text/css`,t};function ec(e,t){let n=Ar(()=>Xs(e),[e]),r=(0,v.useRef)(null),i=(0,v.useRef)(null),a=R(Yr(e=>{let t=i.current;!t&&L(),t.textContent=e}),[]),o=R(e=>{let t=r.current;!t&&L(),t.textContent=e},[]);Zs(()=>{!(!r.current&&!i.current)&&L();let s=$s(t),c=$s(t);return r.current=s,i.current=c,s.setAttribute(`${Hs}-always`,e),c.setAttribute(`${Hs}-dynamic`,e),Qs().appendChild(s),Qs().appendChild(c),o(n.always),a(n.resting),()=>{let e=e=>{let t=e.current;!t&&L(),Qs().removeChild(t),e.current=null};e(r),e(i)}},[t,o,a,n.always,n.resting,e]);let s=R(()=>a(n.dragging),[a,n.dragging]),c=R(e=>{if(e===`DROP`){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),l=R(()=>{i.current&&a(n.resting)},[a,n.resting]);return Ar(()=>({dragging:s,dropping:c,resting:l}),[s,c,l])}function tc(e,t){return Array.from(e.querySelectorAll(t))}var nc=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function rc(e){return e instanceof nc(e).HTMLElement}function ic(e,t){let n=`[${Us.contextId}="${e}"]`,r=tc(document,n);if(!r.length)return null;let i=r.find(e=>e.getAttribute(Us.draggableId)===t);return!i||!rc(i)?null:i}function ac(e){let t=(0,v.useRef)({}),n=(0,v.useRef)(null),r=(0,v.useRef)(null),i=(0,v.useRef)(!1),a=R(function(e,n){let r={id:e,focus:n};return t.current[e]=r,function(){let n=t.current;n[e]!==r&&delete n[e]}},[]),o=R(function(t){let n=ic(e,t);n&&n!==document.activeElement&&n.focus()},[e]),s=R(function(e,t){n.current===e&&(n.current=t)},[]),c=R(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;let e=n.current;e&&o(e)}))},[o]),l=R(function(e){n.current=null;let t=document.activeElement;t&&t.getAttribute(Us.draggableId)===e&&(n.current=e)},[]);return Zs(()=>(i.current=!0,function(){i.current=!1;let e=r.current;e&&cancelAnimationFrame(e)}),[]),Ar(()=>({register:a,tryRecordFocus:l,tryRestoreFocusRecorded:c,tryShiftRecord:s}),[a,l,c,s])}function oc(){let e={draggables:{},droppables:{}},t=[];function n(e){return t.push(e),function(){let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}function r(e){t.length&&t.forEach(t=>t(e))}function i(t){return e.draggables[t]||null}function a(e){let t=i(e);return!t&&L(),t}let o={register:t=>{e.draggables[t.descriptor.id]=t,r({type:`ADDITION`,value:t})},update:(t,n)=>{let r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:t=>{let n=t.descriptor.id,a=i(n);a&&t.uniqueId===a.uniqueId&&(delete e.draggables[n],e.droppables[t.descriptor.droppableId]&&r({type:`REMOVAL`,value:t}))},getById:a,findById:i,exists:e=>!!i(e),getAllByType:t=>Object.values(e.draggables).filter(e=>e.descriptor.type===t)};function s(t){return e.droppables[t]||null}function c(e){let t=s(e);return!t&&L(),t}let l={register:t=>{e.droppables[t.descriptor.id]=t},unregister:t=>{let n=s(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:c,findById:s,exists:e=>!!s(e),getAllByType:t=>Object.values(e.droppables).filter(e=>e.descriptor.type===t)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:l,subscribe:n,clean:u}}function sc(){let e=Ar(oc,[]);return(0,v.useEffect)(()=>function(){e.clean()},[e]),e}var cc=v.createContext(null),lc=()=>{let e=document.body;return!e&&L(),e},uc={position:`absolute`,width:`1px`,height:`1px`,margin:`-1px`,border:`0`,padding:`0`,overflow:`hidden`,clip:`rect(0 0 0 0)`,"clip-path":`inset(100%)`},dc=e=>`rfd-announcement-${e}`;function fc(e){let t=Ar(()=>dc(e),[e]),n=(0,v.useRef)(null);return(0,v.useEffect)(function(){let e=document.createElement(`div`);return n.current=e,e.id=t,e.setAttribute(`aria-live`,`assertive`),e.setAttribute(`aria-atomic`,`true`),dr(e.style,uc),lc().appendChild(e),function(){setTimeout(function(){let t=lc();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)})}},[t]),R(e=>{let t=n.current;if(t){t.textContent=e;return}},[])}var pc={separator:`::`};function mc(e,t=pc){let n=v.useId();return Ar(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function hc({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function gc({contextId:e,text:t}){let n=mc(`hidden-text`,{separator:`-`}),r=Ar(()=>hc({contextId:e,uniqueId:n}),[n,e]);return(0,v.useEffect)(function(){let e=document.createElement(`div`);return e.id=r,e.textContent=t,e.style.display=`none`,lc().appendChild(e),function(){let t=lc();t.contains(e)&&t.removeChild(e)}},[r,t]),r}var _c=v.createContext(null);function vc(e){let t=(0,v.useRef)(e);return(0,v.useEffect)(()=>{t.current=e}),t}function yc(){let e=null;function t(){return!!e}function n(t){return t===e}function r(t){e&&L();let n={abandon:t};return e=n,n}function i(){!e&&L(),e=null}function a(){e&&(e.abandon(),i())}return{isClaimed:t,isActive:n,claim:r,release:i,tryAbandon:a}}function bc(e){return e.phase===`IDLE`||e.phase===`DROP_ANIMATING`?!1:e.isDragging}var xc=9,Sc=13,Cc=27,wc=32,Tc=33,Ec=34,Dc=35,Oc=36,kc=37,Ac=38,jc=39,Mc=40,Nc={[Sc]:!0,[xc]:!0},Pc=e=>{Nc[e.keyCode]&&e.preventDefault()},Fc=(()=>{let e=`visibilitychange`;return typeof document>`u`?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(e=>`on${e}`in document)||e})(),Ic=0,Lc=5;function Rc(e,t){return Math.abs(t.x-e.x)>=Lc||Math.abs(t.y-e.y)>=Lc}var zc={type:`IDLE`};function Bc({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:`mousemove`,fn:e=>{let{button:t,clientX:i,clientY:a}=e;if(t!==Ic)return;let o={x:i,y:a},s=n();if(s.type===`DRAGGING`){e.preventDefault(),s.actions.move(o);return}s.type!==`PENDING`&&L();let c=s.point;if(!Rc(c,o))return;e.preventDefault();let l=s.actions.fluidLift(o);r({type:`DRAGGING`,actions:l})}},{eventName:`mouseup`,fn:r=>{let i=n();if(i.type!==`DRAGGING`){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:`mousedown`,fn:t=>{n().type===`DRAGGING`&&t.preventDefault(),e()}},{eventName:`keydown`,fn:t=>{if(n().type===`PENDING`){e();return}if(t.keyCode===Cc){t.preventDefault(),e();return}Pc(t)}},{eventName:`resize`,fn:e},{eventName:`scroll`,options:{passive:!0,capture:!1},fn:()=>{n().type===`PENDING`&&e()}},{eventName:`webkitmouseforcedown`,fn:t=>{let r=n();if(r.type===`IDLE`&&L(),r.actions.shouldRespectForcePress()){e();return}t.preventDefault()}},{eventName:Fc,fn:e}]}function Vc(e){let t=(0,v.useRef)(zc),n=(0,v.useRef)(mr),r=Ar(()=>({eventName:`mousedown`,fn:function(t){if(t.defaultPrevented||t.button!==Ic||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)return;let r=e.findClosestDraggableId(t);if(!r)return;let i=e.tryGetLock(r,o,{sourceEvent:t});if(!i)return;t.preventDefault();let a={x:t.clientX,y:t.clientY};n.current(),l(i,a)}}),[e]),i=Ar(()=>({eventName:`webkitmouseforcewillbegin`,fn:t=>{if(t.defaultPrevented)return;let n=e.findClosestDraggableId(t);if(!n)return;let r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}),[e]),a=R(function(){n.current=gr(window,[i,r],{passive:!1,capture:!0})},[i,r]),o=R(()=>{t.current.type!==`IDLE`&&(t.current=zc,n.current(),a())},[a]),s=R(()=>{let e=t.current;o(),e.type===`DRAGGING`&&e.actions.cancel({shouldBlockNextClick:!0}),e.type===`PENDING`&&e.actions.abort()},[o]),c=R(function(){let e={capture:!0,passive:!1},r=Bc({cancel:s,completed:o,getPhase:()=>t.current,setPhase:e=>{t.current=e}});n.current=gr(window,r,e)},[s,o]),l=R(function(e,n){t.current.type!==`IDLE`&&L(),t.current={type:`PENDING`,point:n,actions:e},c()},[c]);Zs(function(){return a(),function(){n.current()}},[a])}function Hc(){}var Uc={[Ec]:!0,[Tc]:!0,[Oc]:!0,[Dc]:!0};function Wc(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:`keydown`,fn:t=>{if(t.keyCode===Cc){t.preventDefault(),n();return}if(t.keyCode===wc){t.preventDefault(),r();return}if(t.keyCode===Mc){t.preventDefault(),e.moveDown();return}if(t.keyCode===Ac){t.preventDefault(),e.moveUp();return}if(t.keyCode===jc){t.preventDefault(),e.moveRight();return}if(t.keyCode===kc){t.preventDefault(),e.moveLeft();return}if(Uc[t.keyCode]){t.preventDefault();return}Pc(t)}},{eventName:`mousedown`,fn:n},{eventName:`mouseup`,fn:n},{eventName:`click`,fn:n},{eventName:`touchstart`,fn:n},{eventName:`resize`,fn:n},{eventName:`wheel`,fn:n,options:{passive:!0}},{eventName:Fc,fn:n}]}function Gc(e){let t=(0,v.useRef)(Hc),n=Ar(()=>({eventName:`keydown`,fn:function(n){if(n.defaultPrevented||n.keyCode!==wc)return;let i=e.findClosestDraggableId(n);if(!i)return;let a=e.tryGetLock(i,c,{sourceEvent:n});if(!a)return;n.preventDefault();let o=!0,s=a.snapLift();t.current();function c(){!o&&L(),o=!1,t.current(),r()}t.current=gr(window,Wc(s,c),{capture:!0,passive:!1})}}),[e]),r=R(function(){t.current=gr(window,[n],{passive:!1,capture:!0})},[n]);Zs(function(){return r(),function(){t.current()}},[r])}var Kc={type:`IDLE`},qc=120,Jc=.15;function Yc({cancel:e,getPhase:t}){return[{eventName:`orientationchange`,fn:e},{eventName:`resize`,fn:e},{eventName:`contextmenu`,fn:e=>{e.preventDefault()}},{eventName:`keydown`,fn:n=>{if(t().type!==`DRAGGING`){e();return}n.keyCode===Cc&&n.preventDefault(),e()}},{eventName:Fc,fn:e}]}function Xc({cancel:e,completed:t,getPhase:n}){return[{eventName:`touchmove`,options:{capture:!1},fn:t=>{let r=n();if(r.type!==`DRAGGING`){e();return}r.hasMoved=!0;let{clientX:i,clientY:a}=t.touches[0],o={x:i,y:a};t.preventDefault(),r.actions.move(o)}},{eventName:`touchend`,fn:r=>{let i=n();if(i.type!==`DRAGGING`){e();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:`touchcancel`,fn:t=>{if(n().type!==`DRAGGING`){e();return}t.preventDefault(),e()}},{eventName:`touchforcechange`,fn:t=>{let r=n();r.type===`IDLE`&&L();let i=t.touches[0];if(!i||!(i.force>=Jc))return;let a=r.actions.shouldRespectForcePress();if(r.type===`PENDING`){a&&e();return}if(a){if(r.hasMoved){t.preventDefault();return}e();return}t.preventDefault()}},{eventName:Fc,fn:e}]}function Zc(e){let t=(0,v.useRef)(Kc),n=(0,v.useRef)(mr),r=R(function(){return t.current},[]),i=R(function(e){t.current=e},[]),a=Ar(()=>({eventName:`touchstart`,fn:function(t){if(t.defaultPrevented)return;let r=e.findClosestDraggableId(t);if(!r)return;let i=e.tryGetLock(r,s,{sourceEvent:t});if(!i)return;let{clientX:a,clientY:o}=t.touches[0],c={x:a,y:o};n.current(),d(i,c)}}),[e]),o=R(function(){n.current=gr(window,[a],{capture:!0,passive:!1})},[a]),s=R(()=>{let e=t.current;e.type!==`IDLE`&&(e.type===`PENDING`&&clearTimeout(e.longPressTimerId),i(Kc),n.current(),o())},[o,i]),c=R(()=>{let e=t.current;s(),e.type===`DRAGGING`&&e.actions.cancel({shouldBlockNextClick:!0}),e.type===`PENDING`&&e.actions.abort()},[s]),l=R(function(){let e={capture:!0,passive:!1},t={cancel:c,completed:s,getPhase:r},i=gr(window,Xc(t),e),a=gr(window,Yc(t),e);n.current=function(){i(),a()}},[c,r,s]),u=R(function(){let e=r();e.type!==`PENDING`&&L();let t=e.actions.fluidLift(e.point);i({type:`DRAGGING`,actions:t,hasMoved:!1})},[r,i]),d=R(function(e,t){r().type!==`IDLE`&&L();let n=setTimeout(u,qc);i({type:`PENDING`,point:t,actions:e,longPressTimerId:n}),l()},[l,r,i,u]);Zs(function(){return o(),function(){n.current();let e=r();e.type===`PENDING`&&(clearTimeout(e.longPressTimerId),i(Kc))}},[r,o,i]),Zs(function(){return gr(window,[{eventName:`touchmove`,fn:()=>{},options:{capture:!1,passive:!1}}])},[])}var Qc=[`input`,`button`,`textarea`,`select`,`option`,`optgroup`,`video`,`audio`];function $c(e,t){if(t==null)return!1;if(Qc.includes(t.tagName.toLowerCase()))return!0;let n=t.getAttribute(`contenteditable`);return n===`true`||n===``?!0:t===e?!1:$c(e,t.parentElement)}function el(e,t){let n=t.target;return rc(n)?$c(e,n):!1}var tl=e=>Qn(e.getBoundingClientRect()).center;function nl(e){return e instanceof nc(e).Element}var rl=(()=>{let e=`matches`;return typeof document>`u`?e:[e,`msMatchesSelector`,`webkitMatchesSelector`].find(e=>e in Element.prototype)||e})();function il(e,t){return e==null?null:e[rl](t)?e:il(e.parentElement,t)}function al(e,t){return e.closest?e.closest(t):il(e,t)}function ol(e){return`[${Us.contextId}="${e}"]`}function sl(e,t){let n=t.target;if(!nl(n))return null;let r=ol(e),i=al(n,r);return!i||!rc(i)?null:i}function cl(e,t){let n=sl(e,t);return n?n.getAttribute(Us.draggableId):null}function ll(e,t){let n=`[${Ws.contextId}="${e}"]`,r=tc(document,n).find(e=>e.getAttribute(Ws.id)===t);return!r||!rc(r)?null:r}function ul(e){e.preventDefault()}function dl({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function fl({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;let i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!ps(t.getState(),r))}function pl({lockAPI:e,contextId:t,store:n,registry:r,draggableId:i,forceSensorStop:a,sourceEvent:o}){if(!fl({lockAPI:e,store:n,registry:r,draggableId:i}))return null;let s=r.draggable.getById(i),c=ll(t,s.descriptor.id);if(!c||o&&!s.options.canDragInteractiveElements&&el(c,o))return null;let l=e.claim(a||mr),u=`PRE_DRAG`;function d(){return s.options.shouldRespectForcePress}function f(){return e.isActive(l)}function p(e,t){dl({expected:e,phase:u,isLockActive:f,shouldWarn:!0})&&n.dispatch(t())}let m=p.bind(null,`DRAGGING`);function h(t){function r(){e.release(),u=`COMPLETED`}u!==`PRE_DRAG`&&(r(),L()),n.dispatch(Ja(t.liftActionArgs)),u=`DRAGGING`;function i(e,i={shouldBlockNextClick:!1}){if(t.cleanup(),i.shouldBlockNextClick){let e=gr(window,[{eventName:`click`,fn:ul,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(e)}r(),n.dispatch(fo({reason:e}))}return{isActive:()=>dl({expected:`DRAGGING`,phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:d,drop:e=>i(`DROP`,e),cancel:e=>i(`CANCEL`,e),...t.actions}}function g(e){let t=ur(e=>{m(()=>to({client:e}))});return{...h({liftActionArgs:{id:i,clientSelection:e,movementMode:`FLUID`},cleanup:()=>t.cancel(),actions:{move:t}}),move:t}}function _(){return h({liftActionArgs:{id:i,clientSelection:tl(c),movementMode:`SNAP`},cleanup:mr,actions:{moveUp:()=>m(io),moveRight:()=>m(oo),moveDown:()=>m(ao),moveLeft:()=>m(so)}})}function v(){dl({expected:`PRE_DRAG`,phase:u,isLockActive:f,shouldWarn:!0})&&e.release()}return{isActive:()=>dl({expected:`PRE_DRAG`,phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:d,fluidLift:g,snapLift:_,abort:v}}var ml=[Vc,Gc,Zc];function hl({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:i}){let a=[...i?ml:[],...r||[]],o=(0,v.useState)(()=>yc())[0],s=R(function(e,t){bc(e)&&!bc(t)&&o.tryAbandon()},[o]);Zs(function(){let e=t.getState();return t.subscribe(()=>{let n=t.getState();s(e,n),e=n})},[o,t,s]),Zs(()=>o.tryAbandon,[o.tryAbandon]);let c=R(e=>fl({lockAPI:o,registry:n,store:t,draggableId:e}),[o,n,t]),l=R((r,i,a)=>pl({lockAPI:o,registry:n,contextId:e,store:t,draggableId:r,forceSensorStop:i||null,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null}),[e,o,n,t]),u=R(t=>cl(e,t),[e]),d=R(e=>{let t=n.draggable.findById(e);return t?t.options:null},[n.draggable]),f=R(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!==`IDLE`&&t.dispatch(co()))},[o,t]),p=R(()=>o.isClaimed(),[o]),m=Ar(()=>({canGetLock:c,tryGetLock:l,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:f,isLockClaimed:p}),[c,l,u,d,f,p]);for(let e=0;e<a.length;e++)a[e](m)}var gl=e=>({onBeforeCapture:t=>{(0,fr.flushSync)(()=>{e.onBeforeCapture&&e.onBeforeCapture(t)})},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),_l=e=>({...vs,...e.autoScrollerOptions,durationDampening:{...vs.durationDampening,...e.autoScrollerOptions}});function vl(e){return!e.current&&L(),e.current}function yl(e){let{contextId:t,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:a}=e,o=(0,v.useRef)(null),s=vc(e),c=R(()=>gl(s.current),[s]),l=R(()=>_l(s.current),[s]),u=fc(t),d=gc({contextId:t,text:a}),f=ec(t,i),p=R(e=>{vl(o).dispatch(e)},[]),m=Ar(()=>Ft({publishWhileDragging:Xa,updateDroppableScroll:Qa,updateDroppableIsEnabled:$a,updateDroppableIsCombineEnabled:eo,collectionStarting:Za},p),[p]),h=sc(),g=Ar(()=>fs(h,m),[h,m]),_=Ar(()=>Vs({scrollWindow:ms,scrollDroppable:g.scrollDroppable,getAutoScrollerOptions:l,...Ft({move:to},p)}),[g.scrollDroppable,p,l]),y=ac(t),b=Ar(()=>ts({announce:u,autoScroller:_,dimensionMarshal:g,focusMarshal:y,getResponders:c,styleMarshal:f}),[u,_,g,y,c,f]);o.current=b;let x=R(()=>{let e=vl(o);e.getState().phase!==`IDLE`&&e.dispatch(co())},[]),S=R(()=>{let e=vl(o).getState();return e.phase===`DROP_ANIMATING`?!0:e.phase===`IDLE`?!1:e.isDragging},[]),C=Ar(()=>({isDragging:S,tryAbort:x}),[S,x]);n(C);let w=R(e=>ps(vl(o).getState(),e),[]),T=R(()=>pa(vl(o).getState()),[]),E=Ar(()=>({marshal:g,focus:y,contextId:t,canLift:w,isMovementAllowed:T,dragHandleUsageInstructionsId:d,registry:h}),[t,g,d,y,w,T,h]);return hl({contextId:t,store:b,registry:h,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),(0,v.useEffect)(()=>x,[x]),v.createElement(_c.Provider,{value:E},v.createElement(Jn,{context:cc,store:b},e.children))}function bl(){return v.useId()}function xl(e){let t=bl(),n=e.dragHandleUsageInstructions||Dr.dragHandleUsageInstructions;return v.createElement(yr,null,r=>v.createElement(yl,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}var Sl={dragging:5e3,dropAnimating:4500},Cl=(e,t)=>t?xo.drop(t.duration):e?xo.snap:xo.fluid,wl=(e,t)=>{if(e)return t?vo.opacity.drop:vo.opacity.combining},Tl=e=>e.forceShouldAnimate==null?e.mode===`SNAP`:e.forceShouldAnimate;function El(e){let t=e.dimension.client,{offset:n,combineWith:r,dropping:i}=e,a=!!r,o=Tl(e),s=!!i,c=s?Co.drop(n,a):Co.moveTo(n);return{position:`fixed`,top:t.marginBox.top,left:t.marginBox.left,boxSizing:`border-box`,width:t.borderBox.width,height:t.borderBox.height,transition:Cl(o,i),transform:c,opacity:wl(a,s),zIndex:s?Sl.dropAnimating:Sl.dragging,pointerEvents:`none`}}function Dl(e){return{transform:Co.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:`none`}}function Ol(e){return e.type===`DRAGGING`?El(e):Dl(e)}function kl(e,t,n=jr){let r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=cr(i,r),o=sr(a,n),s={client:a,tagName:t.tagName.toLowerCase(),display:r.display},c={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:s,displaceBy:c,client:a,page:o}}function Al(e){let t=mc(`draggable`),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:s}=e,c=Ar(()=>({canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:s}),[a,s,o]),l=R(e=>{let t=i();return!t&&L(),kl(n,t,e)},[n,i]),u=Ar(()=>({uniqueId:t,descriptor:n,options:c,getDimension:l}),[n,l,c,t]),d=(0,v.useRef)(u),f=(0,v.useRef)(!0);Zs(()=>(r.draggable.register(d.current),()=>r.draggable.unregister(d.current)),[r.draggable]),Zs(()=>{if(f.current){f.current=!1;return}let e=d.current;d.current=u,r.draggable.update(u,e)},[u,r.draggable])}var jl=v.createContext(null);function Ml(e){let t=(0,v.useContext)(e);return!t&&L(),t}function Nl(e){e.preventDefault()}var Pl=e=>{let t=(0,v.useRef)(null),n=R((e=null)=>{t.current=e},[]),r=R(()=>t.current,[]),{contextId:i,dragHandleUsageInstructionsId:a,registry:o}=Ml(_c),{type:s,droppableId:c}=Ml(jl),l=Ar(()=>({id:e.draggableId,index:e.index,type:s,droppableId:c}),[e.draggableId,e.index,s,c]),{children:u,draggableId:d,isEnabled:f,shouldRespectForcePress:p,canDragInteractiveElements:m,isClone:h,mapped:g,dropAnimationFinished:_}=e;if(!h){let e=Ar(()=>({descriptor:l,registry:o,getDraggableRef:r,canDragInteractiveElements:m,shouldRespectForcePress:p,isEnabled:f}),[l,o,r,m,p,f]);Al(e)}let y=Ar(()=>f?{tabIndex:0,role:`button`,"aria-describedby":a,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:Nl}:null,[i,a,d,f]),b=R(e=>{g.type===`DRAGGING`&&g.dropping&&e.propertyName===`transform`&&(0,fr.flushSync)(_)},[_,g]),x=Ar(()=>{let e=Ol(g),t=g.type===`DRAGGING`&&g.dropping?b:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":d,style:e,onTransitionEnd:t},dragHandleProps:y}},[i,y,d,g,b,n]),S=Ar(()=>({draggableId:l.id,type:l.type,source:{index:l.index,droppableId:l.droppableId}}),[l.droppableId,l.id,l.index,l.type]);return v.createElement(v.Fragment,null,u(x,g.snapshot,S))},Fl=(e,t)=>e===t,Il=e=>{let{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null},Ll=e=>e.combine?e.combine.draggableId:null,Rl=e=>e.at&&e.at.type===`COMBINE`?e.at.combine.draggableId:null;function zl(){let e=Yr((e,t)=>({x:e,y:t})),t=Yr((e,t,n=null,r=null,i=null)=>({isDragging:!0,isClone:t,isDropAnimating:!!i,dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null})),n=Yr((e,n,r,i,a=null,o=null,s=null)=>({mapped:{type:`DRAGGING`,dropping:null,draggingOver:a,combineWith:o,mode:n,offset:e,dimension:r,forceShouldAnimate:s,snapshot:t(n,i,a,o,null)}}));return(r,i)=>{if(bc(r)){if(r.critical.draggable.id!==i.draggableId)return null;let t=r.current.client.offset,a=r.dimensions.draggables[i.draggableId],o=ua(r.impact),s=Rl(r.impact),c=r.forceShouldAnimate;return n(e(t.x,t.y),r.movementMode,a,i.isClone,o,s,c)}if(r.phase===`DROP_ANIMATING`){let e=r.completed;if(e.result.draggableId!==i.draggableId)return null;let n=i.isClone,a=r.dimensions.draggables[i.draggableId],o=e.result,s=o.mode,c=Il(o),l=Ll(o),u={duration:r.dropDuration,curve:_o.drop,moveTo:r.newHomeClientOffset,opacity:l?vo.opacity.drop:null,scale:l?vo.scale.drop:null};return{mapped:{type:`DRAGGING`,offset:r.newHomeClientOffset,dimension:a,dropping:u,draggingOver:c,combineWith:l,mode:s,forceShouldAnimate:null,snapshot:t(s,n,c,l,u)}}}return null}}function Bl(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var Vl={mapped:{type:`SECONDARY`,offset:jr,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:Bl(null)}};function Hl(){let e=Yr((e,t)=>({x:e,y:t})),t=Yr(Bl),n=Yr((e,n=null,r)=>({mapped:{type:`SECONDARY`,offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}})),r=e=>e?n(jr,e,!0):null,i=(t,i,a,o)=>{let s=a.displaced.visible[t],c=!!(o.inVirtualList&&o.effected[t]),l=ni(a),u=l&&l.draggableId===t?i:null;if(!s){if(!c)return r(u);if(a.displaced.invisible[t])return null;let i=Fr(o.displacedBy.point),s=e(i.x,i.y);return n(s,u,!0)}if(c)return r(u);let d=a.displacedBy.point,f=e(d.x,d.y);return n(f,u,s.shouldAnimate)};return(e,t)=>{if(bc(e))return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if(e.phase===`DROP_ANIMATING`){let n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}var Ul=Kn(()=>{let e=zl(),t=Hl();return(n,r)=>e(n,r)||t(n,r)||Vl},{dropAnimationFinished:mo},null,{context:cc,areStatePropsEqual:Fl})(Pl);function Wl(e){return Ml(jl).isUsingCloneFor===e.draggableId&&!e.isClone?null:v.createElement(Ul,e)}function Gl(e){let t=typeof e.isDragDisabled==`boolean`?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return v.createElement(Wl,dr({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}var Kl=e=>t=>e===t,ql=Kl(`scroll`),Jl=Kl(`auto`),Yl=(e,t)=>t(e.overflowX)||t(e.overflowY),Xl=e=>{let t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Yl(n,ql)||Yl(n,Jl)},Zl=()=>!1,Ql=e=>e==null?null:e===document.body?Zl()?e:null:e===document.documentElement?null:Xl(e)?e:Ql(e.parentElement),$l=e=>({x:e.scrollLeft,y:e.scrollTop}),eu=e=>e?window.getComputedStyle(e).position===`fixed`?!0:eu(e.parentElement):!1,tu=e=>{let t=Ql(e),n=eu(e);return{closestScrollable:t,isFixedOnPage:n}},nu=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:a,page:o,closest:s})=>{let c=(()=>{if(!s)return null;let{scrollSize:e,client:t}=s,n=os({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:n,diff:{value:jr,displacement:jr}}}})(),l=i===`vertical`?fi:pi,u=qr({page:o,withPlaceholder:null,axis:l,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:l,isEnabled:t,client:a,page:o,frame:c,subject:u}},ru=(e,t)=>{let n=lr(e);if(!t||e!==t)return n;let r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,o=i+t.scrollWidth,s=$n({top:r,right:o,bottom:a,left:i},n.border);return rr({borderBox:s,margin:n.margin,border:n.border,padding:n.padding})},iu=({ref:e,descriptor:t,env:n,windowScroll:r,direction:i,isDropDisabled:a,isCombineEnabled:o,shouldClipSubject:s})=>{let c=n.closestScrollable,l=ru(e,c),u=sr(l,r),d=(()=>{if(!c)return null;let e=lr(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:sr(e,r),scroll:$l(c),scrollSize:t,shouldClipSubject:s}})();return nu({descriptor:t,isEnabled:!a,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:l,page:u,closest:d})},au={passive:!1},ou={passive:!0},su=e=>e.shouldPublishImmediately?au:ou,cu=e=>e&&e.env.closestScrollable||null;function lu(e){let t=(0,v.useRef)(null),n=Ml(_c),r=mc(`droppable`),{registry:i,marshal:a}=n,o=vc(e),s=Ar(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=(0,v.useRef)(s),l=Ar(()=>Yr((e,n)=>{!t.current&&L();let r={x:e,y:n};a.updateDroppableScroll(s.id,r)}),[s.id,a]),u=R(()=>{let e=t.current;return!e||!e.env.closestScrollable?jr:$l(e.env.closestScrollable)},[]),d=R(()=>{let e=u();l(e.x,e.y)},[u,l]),f=Ar(()=>ur(d),[d]),p=R(()=>{let e=t.current,n=cu(e);if(!(e&&n)&&L(),e.scrollOptions.shouldPublishImmediately){d();return}f()},[f,d]),m=R((e,r)=>{t.current&&L();let i=o.current,a=i.getDroppableRef();!a&&L();let c=tu(a),l={ref:a,descriptor:s,env:c,scrollOptions:r};t.current=l;let u=iu({ref:a,descriptor:s,env:c,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),d=c.closestScrollable;return d&&(d.setAttribute(Ks.contextId,n.contextId),d.addEventListener(`scroll`,p,su(l.scrollOptions))),u},[n.contextId,s,p,o]),h=R(()=>{let e=t.current,n=cu(e);return!(e&&n)&&L(),$l(n)},[]),g=R(()=>{let e=t.current;!e&&L();let n=cu(e);t.current=null,n&&(f.cancel(),n.removeAttribute(Ks.contextId),n.removeEventListener(`scroll`,p,su(e.scrollOptions)))},[p,f]),_=R(e=>{let n=t.current;!n&&L();let r=cu(n);!r&&L(),r.scrollTop+=e.y,r.scrollLeft+=e.x},[]),y=Ar(()=>({getDimensionAndWatchScroll:m,getScrollWhileDragging:h,dragStopped:g,scroll:_}),[g,m,h,_]),b=Ar(()=>({uniqueId:r,descriptor:s,callbacks:y}),[y,s,r]);Zs(()=>(c.current=b.descriptor,i.droppable.register(b),()=>{t.current&&g(),i.droppable.unregister(b)}),[y,s,g,b,a,i.droppable]),Zs(()=>{t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Zs(()=>{t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function uu(){}var du={width:0,height:0,margin:Ur},fu=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n===`close`?du:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},pu=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{let r=fu({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:`border-box`,width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:`0`,flexGrow:`0`,pointerEvents:`none`,transition:n===`none`?null:xo.placeholder}},mu=v.memo(e=>{let t=(0,v.useRef)(null),n=R(()=>{t.current&&=(clearTimeout(t.current),null)},[]),{animate:r,onTransitionEnd:i,onClose:a,contextId:o}=e,[s,c]=(0,v.useState)(e.animate===`open`);(0,v.useEffect)(()=>s?r===`open`?t.current?uu:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):(n(),c(!1),uu):uu,[r,s,n]);let l=R(e=>{e.propertyName===`height`&&(i(),r===`close`&&a())},[r,a,i]),u=pu({isAnimatingOpenOnMount:s,animate:e.animate,placeholder:e.placeholder});return v.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":o,onTransitionEnd:l,ref:e.innerRef})}),hu=class extends v.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?`open`:`none`},this.onClose=()=>{this.state.animate===`close`&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:`open`}:t.isVisible?{isVisible:!0,data:t.data,animate:`close`}:{isVisible:!1,animate:`close`,data:null}:{isVisible:!!e.on,data:e.on,animate:`none`}}render(){if(!this.state.isVisible)return null;let e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}},gu=e=>{let t=(0,v.useContext)(_c);!t&&L();let{contextId:n,isMovementAllowed:r}=t,i=(0,v.useRef)(null),a=(0,v.useRef)(null),{children:o,droppableId:s,type:c,mode:l,direction:u,ignoreContainerClipping:d,isDropDisabled:f,isCombineEnabled:p,snapshot:m,useClone:h,updateViewportMaxScroll:g,getContainerForClone:_}=e,y=R(()=>i.current,[]),b=R((e=null)=>{i.current=e},[]);R(()=>a.current,[]);let x=R((e=null)=>{a.current=e},[]),S=R(()=>{r()&&g({maxScroll:cs()})},[r,g]);lu({droppableId:s,type:c,mode:l,direction:u,isDropDisabled:f,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:y});let C=Ar(()=>v.createElement(hu,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:e,data:t,animate:r})=>v.createElement(mu,{placeholder:t,onClose:e,innerRef:x,animate:r,contextId:n,onTransitionEnd:S})),[n,S,e.placeholder,e.shouldAnimatePlaceholder,x]),w=Ar(()=>({innerRef:b,placeholder:C,droppableProps:{"data-rfd-droppable-id":s,"data-rfd-droppable-context-id":n}}),[n,s,C,b]),T=h?h.dragging.draggableId:null,E=Ar(()=>({droppableId:s,type:c,isUsingCloneFor:T}),[s,T,c]);function D(){if(!h)return null;let{dragging:e,render:t}=h,n=v.createElement(Wl,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(n,r)=>t(n,r,e));return fr.createPortal(n,_())}return v.createElement(jl.Provider,{value:E},o(w,m),D())};function _u(){return!document.body&&L(),document.body}var vu={mode:`standard`,type:`DEFAULT`,direction:`vertical`,isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:_u},yu=e=>{let t={...e},n;for(n in vu)e[n]===void 0&&(t={...t,[n]:vu[n]});return t},bu=(e,t)=>e===t.droppable.type,xu=(e,t)=>t.draggables[e.draggable.id],Su=Kn(()=>{let e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=Yr(e=>({draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}})),r=Yr((r,i,a,o,s,c)=>{let l=s.descriptor.id;if(s.descriptor.droppableId===r){let e=c?{render:c,dragging:n(s.descriptor)}:null,t={isDraggingOver:a,draggingOverWith:a?l:null,draggingFromThisWith:l,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:t,useClone:e}}if(!i)return t;if(!o)return e;let u={isDraggingOver:a,draggingOverWith:l,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:u,useClone:null}});return(n,i)=>{let a=yu(i),o=a.droppableId,s=a.type,c=!a.isDropDisabled,l=a.renderClone;if(bc(n)){let e=n.critical;if(!bu(s,e))return t;let i=xu(e,n.dimensions),a=ua(n.impact)===o;return r(o,c,a,a,i,l)}if(n.phase===`DROP_ANIMATING`){let e=n.completed;if(!bu(s,e.critical))return t;let i=xu(e.critical,n.dimensions);return r(o,c,Il(e.result)===o,ua(e.impact)===o,i,l)}if(n.phase===`IDLE`&&n.completed&&!n.shouldFlush){let r=n.completed;if(!bu(s,r.critical))return t;let i=ua(r.impact)===o,a=!!(r.impact.at&&r.impact.at.type===`COMBINE`),c=r.critical.droppable.id===o;return i?a?e:t:c?e:t}return t}},{updateViewportMaxScroll:ro},(e,t,n)=>({...yu(n),...e,...t}),{context:cc,areStatePropsEqual:Fl})(gu),Cu=e=>e.replace(/([a-z0-9])([A-Z])/g,`$1-$2`).toLowerCase(),wu=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Tu=e=>{let t=wu(e);return t.charAt(0).toUpperCase()+t.slice(1)},Eu=(...e)=>e.filter((e,t,n)=>!!e&&e.trim()!==``&&n.indexOf(e)===t).join(` `).trim(),Du=e=>{for(let t in e)if(t.startsWith(`aria-`)||t===`role`||t===`title`)return!0},Ou={xmlns:`http://www.w3.org/2000/svg`,width:24,height:24,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:2,strokeLinecap:`round`,strokeLinejoin:`round`},ku=(0,v.forwardRef)(({color:e=`currentColor`,size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i=``,children:a,iconNode:o,...s},c)=>(0,v.createElement)(`svg`,{ref:c,...Ou,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Eu(`lucide`,i),...!a&&!Du(s)&&{"aria-hidden":`true`},...s},[...o.map(([e,t])=>(0,v.createElement)(e,t)),...Array.isArray(a)?a:[a]])),B=(e,t)=>{let n=(0,v.forwardRef)(({className:n,...r},i)=>(0,v.createElement)(ku,{ref:i,iconNode:t,className:Eu(`lucide-${Cu(Tu(e))}`,`lucide-${e}`,n),...r}));return n.displayName=Tu(e),n},Au=B(`bug`,[[`path`,{d:`M12 20v-9`,key:`1qisl0`}],[`path`,{d:`M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z`,key:`uouzyp`}],[`path`,{d:`M14.12 3.88 16 2`,key:`qol33r`}],[`path`,{d:`M21 21a4 4 0 0 0-3.81-4`,key:`1b0z45`}],[`path`,{d:`M21 5a4 4 0 0 1-3.55 3.97`,key:`5cxbf6`}],[`path`,{d:`M22 13h-4`,key:`1jl80f`}],[`path`,{d:`M3 21a4 4 0 0 1 3.81-4`,key:`1fjd4g`}],[`path`,{d:`M3 5a4 4 0 0 0 3.55 3.97`,key:`1d7oge`}],[`path`,{d:`M6 13H2`,key:`82j7cp`}],[`path`,{d:`m8 2 1.88 1.88`,key:`fmnt4t`}],[`path`,{d:`M9 7.13V6a3 3 0 1 1 6 0v1.13`,key:`1vgav8`}]]),ju=B(`calendar-days`,[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}],[`path`,{d:`M8 14h.01`,key:`6423bh`}],[`path`,{d:`M12 14h.01`,key:`1etili`}],[`path`,{d:`M16 14h.01`,key:`1gbofw`}],[`path`,{d:`M8 18h.01`,key:`lrp35t`}],[`path`,{d:`M12 18h.01`,key:`mhygvu`}],[`path`,{d:`M16 18h.01`,key:`kzsmim`}]]),Mu=B(`calendar`,[[`path`,{d:`M8 2v4`,key:`1cmpym`}],[`path`,{d:`M16 2v4`,key:`4m81vk`}],[`rect`,{width:`18`,height:`18`,x:`3`,y:`4`,rx:`2`,key:`1hopcy`}],[`path`,{d:`M3 10h18`,key:`8toen8`}]]),Nu=B(`check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),Pu=B(`chevron-down`,[[`path`,{d:`m6 9 6 6 6-6`,key:`qrunsl`}]]),Fu=B(`chevron-left`,[[`path`,{d:`m15 18-6-6 6-6`,key:`1wnfg3`}]]),Iu=B(`chevron-right`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),Lu=B(`circle-alert`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`line`,{x1:`12`,x2:`12`,y1:`8`,y2:`12`,key:`1pkeuh`}],[`line`,{x1:`12`,x2:`12.01`,y1:`16`,y2:`16`,key:`4dfq90`}]]),Ru=B(`circle-arrow-left`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m12 8-4 4 4 4`,key:`15vm53`}],[`path`,{d:`M16 12H8`,key:`1fr5h0`}]]),zu=B(`circle-arrow-right`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m12 16 4-4-4-4`,key:`1i9zcv`}],[`path`,{d:`M8 12h8`,key:`1wcyev`}]]),Bu=B(`circle-check`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]]),Vu=B(`circle-plus`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`M8 12h8`,key:`1wcyev`}],[`path`,{d:`M12 8v8`,key:`napkw2`}]]),Hu=B(`circle-x`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`path`,{d:`m15 9-6 6`,key:`1uzhvr`}],[`path`,{d:`m9 9 6 6`,key:`z0biqf`}]]),Uu=B(`clipboard-list`,[[`rect`,{width:`8`,height:`4`,x:`8`,y:`2`,rx:`1`,ry:`1`,key:`tgr4d6`}],[`path`,{d:`M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2`,key:`116196`}],[`path`,{d:`M12 11h4`,key:`1jrz19`}],[`path`,{d:`M12 16h4`,key:`n85exb`}],[`path`,{d:`M8 11h.01`,key:`1dfujw`}],[`path`,{d:`M8 16h.01`,key:`18s6g9`}]]),Wu=B(`clock`,[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]]),Gu=B(`columns-2`,[[`rect`,{width:`18`,height:`18`,x:`3`,y:`3`,rx:`2`,key:`afitv7`}],[`path`,{d:`M12 3v18`,key:`108xh3`}]]),Ku=B(`copy`,[[`rect`,{width:`14`,height:`14`,x:`8`,y:`8`,rx:`2`,ry:`2`,key:`17jyea`}],[`path`,{d:`M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2`,key:`zix9uf`}]]),qu=B(`download`,[[`path`,{d:`M12 15V3`,key:`m9g1x1`}],[`path`,{d:`M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4`,key:`ih7n3h`}],[`path`,{d:`m7 10 5 5 5-5`,key:`brsn70`}]]),Ju=B(`external-link`,[[`path`,{d:`M15 3h6v6`,key:`1q9fwt`}],[`path`,{d:`M10 14 21 3`,key:`gplh6r`}],[`path`,{d:`M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6`,key:`a6xqqp`}]]),Yu=B(`file-down`,[[`path`,{d:`M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z`,key:`1rqfz7`}],[`path`,{d:`M14 2v4a2 2 0 0 0 2 2h4`,key:`tnqrlb`}],[`path`,{d:`M12 18v-6`,key:`17g6i2`}],[`path`,{d:`m9 15 3 3 3-3`,key:`1npd3o`}]]),Xu=B(`grip-vertical`,[[`circle`,{cx:`9`,cy:`12`,r:`1`,key:`1vctgf`}],[`circle`,{cx:`9`,cy:`5`,r:`1`,key:`hp0tcf`}],[`circle`,{cx:`9`,cy:`19`,r:`1`,key:`fkjjf6`}],[`circle`,{cx:`15`,cy:`12`,r:`1`,key:`1tmaij`}],[`circle`,{cx:`15`,cy:`5`,r:`1`,key:`19l28e`}],[`circle`,{cx:`15`,cy:`19`,r:`1`,key:`f4zoj3`}]]),Zu=B(`layers`,[[`path`,{d:`M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z`,key:`zw3jo`}],[`path`,{d:`M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12`,key:`1wduqc`}],[`path`,{d:`M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17`,key:`kqbvx6`}]]),Qu=B(`list`,[[`path`,{d:`M3 5h.01`,key:`18ugdj`}],[`path`,{d:`M3 12h.01`,key:`nlz23k`}],[`path`,{d:`M3 19h.01`,key:`noohij`}],[`path`,{d:`M8 5h13`,key:`1pao27`}],[`path`,{d:`M8 12h13`,key:`1za7za`}],[`path`,{d:`M8 19h13`,key:`m83p4d`}]]),$u=B(`loader-circle`,[[`path`,{d:`M21 12a9 9 0 1 1-6.219-8.56`,key:`13zald`}]]),ed=B(`log-in`,[[`path`,{d:`m10 17 5-5-5-5`,key:`1bsop3`}],[`path`,{d:`M15 12H3`,key:`6jk70r`}],[`path`,{d:`M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4`,key:`u53s6r`}]]),td=B(`log-out`,[[`path`,{d:`m16 17 5-5-5-5`,key:`1bji2h`}],[`path`,{d:`M21 12H9`,key:`dn1m92`}],[`path`,{d:`M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4`,key:`1uf3rs`}]]),nd=B(`menu`,[[`path`,{d:`M4 5h16`,key:`1tepv9`}],[`path`,{d:`M4 12h16`,key:`1lakjw`}],[`path`,{d:`M4 19h16`,key:`1djgab`}]]),rd=B(`merge`,[[`path`,{d:`m8 6 4-4 4 4`,key:`ybng9g`}],[`path`,{d:`M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22`,key:`1hyw0i`}],[`path`,{d:`m20 22-5-5`,key:`1m27yz`}]]),id=B(`mic-off`,[[`path`,{d:`M12 19v3`,key:`npa21l`}],[`path`,{d:`M15 9.34V5a3 3 0 0 0-5.68-1.33`,key:`1gzdoj`}],[`path`,{d:`M16.95 16.95A7 7 0 0 1 5 12v-2`,key:`cqa7eg`}],[`path`,{d:`M18.89 13.23A7 7 0 0 0 19 12v-2`,key:`16hl24`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}],[`path`,{d:`M9 9v3a3 3 0 0 0 5.12 2.12`,key:`r2i35w`}]]),ad=B(`mic`,[[`path`,{d:`M12 19v3`,key:`npa21l`}],[`path`,{d:`M19 10v2a7 7 0 0 1-14 0v-2`,key:`1vc78b`}],[`rect`,{x:`9`,y:`2`,width:`6`,height:`13`,rx:`3`,key:`s6n7sd`}]]),od=B(`moon`,[[`path`,{d:`M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401`,key:`kfwtm`}]]),sd=B(`paperclip`,[[`path`,{d:`m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551`,key:`1miecu`}]]),cd=B(`pen-line`,[[`path`,{d:`M13 21h8`,key:`1jsn5i`}],[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}]]),ld=B(`pencil`,[[`path`,{d:`M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z`,key:`1a8usu`}],[`path`,{d:`m15 5 4 4`,key:`1mk7zo`}]]),ud=B(`search`,[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]]),dd=B(`settings`,[[`path`,{d:`M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915`,key:`1i5ecw`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),fd=B(`sun`,[[`circle`,{cx:`12`,cy:`12`,r:`4`,key:`4exip2`}],[`path`,{d:`M12 2v2`,key:`tus03m`}],[`path`,{d:`M12 20v2`,key:`1lh1kg`}],[`path`,{d:`m4.93 4.93 1.41 1.41`,key:`149t6j`}],[`path`,{d:`m17.66 17.66 1.41 1.41`,key:`ptbguv`}],[`path`,{d:`M2 12h2`,key:`1t8f8n`}],[`path`,{d:`M20 12h2`,key:`1q8mjw`}],[`path`,{d:`m6.34 17.66-1.41 1.41`,key:`1m8zz5`}],[`path`,{d:`m19.07 4.93-1.41 1.41`,key:`1shlcs`}]]),pd=B(`tag`,[[`path`,{d:`M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z`,key:`vktsd0`}],[`circle`,{cx:`7.5`,cy:`7.5`,r:`.5`,fill:`currentColor`,key:`kqv944`}]]),md=B(`terminal`,[[`path`,{d:`M12 19h8`,key:`baeox8`}],[`path`,{d:`m4 17 6-6-6-6`,key:`1yngyt`}]]),hd=B(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),gd=B(`triangle-alert`,[[`path`,{d:`m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3`,key:`wmoenq`}],[`path`,{d:`M12 9v4`,key:`juzpu7`}],[`path`,{d:`M12 17h.01`,key:`p32p05`}]]),_d=B(`user-plus`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}],[`line`,{x1:`19`,x2:`19`,y1:`8`,y2:`14`,key:`1bvyxn`}],[`line`,{x1:`22`,x2:`16`,y1:`11`,y2:`11`,key:`1shjgl`}]]),vd=B(`users`,[[`path`,{d:`M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2`,key:`1yyitq`}],[`path`,{d:`M16 3.128a4 4 0 0 1 0 7.744`,key:`16gr8j`}],[`path`,{d:`M22 21v-2a4 4 0 0 0-3-3.87`,key:`kshegd`}],[`circle`,{cx:`9`,cy:`7`,r:`4`,key:`nufk8`}]]),yd=B(`x`,[[`path`,{d:`M18 6 6 18`,key:`1bl5f8`}],[`path`,{d:`m6 6 12 12`,key:`d8bk6v`}]]),bd=typeof global==`object`&&global&&global.Object===Object&&global,xd=typeof self==`object`&&self&&self.Object===Object&&self,Sd=bd||xd||Function(`return this`)(),Cd=Sd.Symbol,wd=Object.prototype,Td=wd.hasOwnProperty,Ed=wd.toString,Dd=Cd?Cd.toStringTag:void 0;function Od(e){var t=Td.call(e,Dd),n=e[Dd];try{e[Dd]=void 0;var r=!0}catch{}var i=Ed.call(e);return r&&(t?e[Dd]=n:delete e[Dd]),i}var kd=Od,Ad=Object.prototype.toString;function jd(e){return Ad.call(e)}var Md=jd,Nd=`[object Null]`,Pd=`[object Undefined]`,Fd=Cd?Cd.toStringTag:void 0;function Id(e){return e==null?e===void 0?Pd:Nd:Fd&&Fd in Object(e)?kd(e):Md(e)}var Ld=Id;function Rd(e){return typeof e==`object`&&!!e}var zd=Rd,Bd=Array.isArray;function Vd(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}var Hd=Vd;function Ud(e){return e}var Wd=Ud,Gd=`[object AsyncFunction]`,Kd=`[object Function]`,qd=`[object GeneratorFunction]`,Jd=`[object Proxy]`;function Yd(e){if(!Hd(e))return!1;var t=Ld(e);return t==Kd||t==qd||t==Gd||t==Jd}var Xd=Yd,Zd=Sd[`__core-js_shared__`],Qd=function(){var e=/[^.]+$/.exec(Zd&&Zd.keys&&Zd.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function $d(e){return!!Qd&&Qd in e}var ef=$d,tf=Function.prototype.toString;function nf(e){if(e!=null){try{return tf.call(e)}catch{}try{return e+``}catch{}}return``}var rf=nf,af=/[\\^$.*+?()[\]{}|]/g,sf=/^\[object .+?Constructor\]$/,cf=Function.prototype,lf=Object.prototype,uf=cf.toString,df=lf.hasOwnProperty,ff=RegExp(`^`+uf.call(df).replace(af,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function pf(e){return!Hd(e)||ef(e)?!1:(Xd(e)?ff:sf).test(rf(e))}var mf=pf;function hf(e,t){return e?.[t]}var gf=hf;function _f(e,t){var n=gf(e,t);return mf(n)?n:void 0}var vf=_f,yf=vf(Sd,`WeakMap`),bf=Object.create,xf=function(){function e(){}return function(t){if(!Hd(t))return{};if(bf)return bf(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Sf(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Cf=Sf;function wf(e,t){var n=-1,r=e.length;for(t||=Array(r);++n<r;)t[n]=e[n];return t}var Tf=wf,Ef=800,Df=16,Of=Date.now;function kf(e){var t=0,n=0;return function(){var r=Of(),i=Df-(r-n);if(n=r,i>0){if(++t>=Ef)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Af=kf;function jf(e){return function(){return e}}var Mf=jf,Nf=function(){try{var e=vf(Object,`defineProperty`);return e({},``,{}),e}catch{}}(),Pf=Af(Nf?function(e,t){return Nf(e,`toString`,{configurable:!0,enumerable:!1,value:Mf(t),writable:!0})}:Wd);function Ff(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var If=Ff,Lf=9007199254740991,Rf=/^(?:0|[1-9]\d*)$/;function zf(e,t){var n=typeof e;return t??=Lf,!!t&&(n==`number`||n!=`symbol`&&Rf.test(e))&&e>-1&&e%1==0&&e<t}var Bf=zf;function Vf(e,t,n){t==`__proto__`&&Nf?Nf(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Hf=Vf;function Uf(e,t){return e===t||e!==e&&t!==t}var Wf=Uf,Gf=Object.prototype.hasOwnProperty;function Kf(e,t,n){var r=e[t];(!(Gf.call(e,t)&&Wf(r,n))||n===void 0&&!(t in e))&&Hf(e,t,n)}var qf=Kf;function Jf(e,t,n,r){var i=!n;n||={};for(var a=-1,o=t.length;++a<o;){var s=t[a],c=r?r(n[s],e[s],s,n,e):void 0;c===void 0&&(c=e[s]),i?Hf(n,s,c):qf(n,s,c)}return n}var Yf=Jf,Xf=Math.max;function Zf(e,t,n){return t=Xf(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Xf(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),Cf(e,this,s)}}var Qf=Zf;function $f(e,t){return Pf(Qf(e,t,Wd),e+``)}var ep=$f,tp=9007199254740991;function np(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=tp}var rp=np;function ip(e){return e!=null&&rp(e.length)&&!Xd(e)}var ap=ip;function op(e,t,n){if(!Hd(n))return!1;var r=typeof t;return(r==`number`?ap(n)&&Bf(t,n.length):r==`string`&&t in n)?Wf(n[t],e):!1}var sp=op;function cp(e){return ep(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=e.length>3&&typeof a==`function`?(i--,a):void 0,o&&sp(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}var lp=cp,up=Object.prototype;function dp(e){var t=e&&e.constructor,n=typeof t==`function`&&t.prototype||up;return e===n}var fp=dp;function pp(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var mp=pp,hp=`[object Arguments]`;function gp(e){return zd(e)&&Ld(e)==hp}var _p=gp,vp=Object.prototype,yp=vp.hasOwnProperty,bp=vp.propertyIsEnumerable,xp=_p(function(){return arguments}())?_p:function(e){return zd(e)&&yp.call(e,`callee`)&&!bp.call(e,`callee`)};function Sp(){return!1}var Cp=Sp,wp=typeof exports==`object`&&exports&&!exports.nodeType&&exports,Tp=wp&&typeof module==`object`&&module&&!module.nodeType&&module,Ep=Tp&&Tp.exports===wp?Sd.Buffer:void 0,Dp=(Ep?Ep.isBuffer:void 0)||Cp,Op=`[object Arguments]`,kp=`[object Array]`,Ap=`[object Boolean]`,jp=`[object Date]`,Mp=`[object Error]`,Np=`[object Function]`,Pp=`[object Map]`,Fp=`[object Number]`,Ip=`[object Object]`,Lp=`[object RegExp]`,Rp=`[object Set]`,zp=`[object String]`,Bp=`[object WeakMap]`,Vp=`[object ArrayBuffer]`,Hp=`[object DataView]`,Up=`[object Float32Array]`,Wp=`[object Float64Array]`,Gp=`[object Int8Array]`,Kp=`[object Int16Array]`,qp=`[object Int32Array]`,Jp=`[object Uint8Array]`,Yp=`[object Uint8ClampedArray]`,Xp=`[object Uint16Array]`,Zp=`[object Uint32Array]`,Qp={};Qp[Up]=Qp[Wp]=Qp[Gp]=Qp[Kp]=Qp[qp]=Qp[Jp]=Qp[Yp]=Qp[Xp]=Qp[Zp]=!0,Qp[Op]=Qp[kp]=Qp[Vp]=Qp[Ap]=Qp[Hp]=Qp[jp]=Qp[Mp]=Qp[Np]=Qp[Pp]=Qp[Fp]=Qp[Ip]=Qp[Lp]=Qp[Rp]=Qp[zp]=Qp[Bp]=!1;function $p(e){return zd(e)&&rp(e.length)&&!!Qp[Ld(e)]}var em=$p;function tm(e){return function(t){return e(t)}}var nm=tm,rm=typeof exports==`object`&&exports&&!exports.nodeType&&exports,im=rm&&typeof module==`object`&&module&&!module.nodeType&&module,am=im&&im.exports===rm&&bd.process,om=function(){try{return im&&im.require&&im.require(`util`).types||am&&am.binding&&am.binding(`util`)}catch{}}(),sm=om&&om.isTypedArray,cm=sm?nm(sm):em,lm=Object.prototype.hasOwnProperty;function um(e,t){var n=Bd(e),r=!n&&xp(e),i=!n&&!r&&Dp(e),a=!n&&!r&&!i&&cm(e),o=n||r||i||a,s=o?mp(e.length,String):[],c=s.length;for(var l in e)(t||lm.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||Bf(l,c)))&&s.push(l);return s}var dm=um;function fm(e,t){return function(n){return e(t(n))}}var pm=fm,mm=pm(Object.keys,Object),hm=Object.prototype.hasOwnProperty;function gm(e){if(!fp(e))return mm(e);var t=[];for(var n in Object(e))hm.call(e,n)&&n!=`constructor`&&t.push(n);return t}var _m=gm;function vm(e){return ap(e)?dm(e):_m(e)}var ym=vm;function bm(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var xm=bm,Sm=Object.prototype.hasOwnProperty;function Cm(e){if(!Hd(e))return xm(e);var t=fp(e),n=[];for(var r in e)r==`constructor`&&(t||!Sm.call(e,r))||n.push(r);return n}var wm=Cm;function Tm(e){return ap(e)?dm(e,!0):wm(e)}var Em=Tm,Dm=vf(Object,`create`);function Om(){this.__data__=Dm?Dm(null):{},this.size=0}var km=Om;function Am(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var jm=Am,Mm=`__lodash_hash_undefined__`,Nm=Object.prototype.hasOwnProperty;function Pm(e){var t=this.__data__;if(Dm){var n=t[e];return n===Mm?void 0:n}return Nm.call(t,e)?t[e]:void 0}var Fm=Pm,Im=Object.prototype.hasOwnProperty;function Lm(e){var t=this.__data__;return Dm?t[e]!==void 0:Im.call(t,e)}var Rm=Lm,zm=`__lodash_hash_undefined__`;function Bm(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Dm&&t===void 0?zm:t,this}var Vm=Bm;function Hm(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hm.prototype.clear=km,Hm.prototype.delete=jm,Hm.prototype.get=Fm,Hm.prototype.has=Rm,Hm.prototype.set=Vm;var Um=Hm;function Wm(){this.__data__=[],this.size=0}var Gm=Wm;function Km(e,t){for(var n=e.length;n--;)if(Wf(e[n][0],t))return n;return-1}var qm=Km,Jm=Array.prototype.splice;function Ym(e){var t=this.__data__,n=qm(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Jm.call(t,n,1),--this.size,!0}var Xm=Ym;function Zm(e){var t=this.__data__,n=qm(t,e);return n<0?void 0:t[n][1]}var Qm=Zm;function $m(e){return qm(this.__data__,e)>-1}var eh=$m;function th(e,t){var n=this.__data__,r=qm(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var nh=th;function rh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rh.prototype.clear=Gm,rh.prototype.delete=Xm,rh.prototype.get=Qm,rh.prototype.has=eh,rh.prototype.set=nh;var ih=rh,ah=vf(Sd,`Map`);function oh(){this.size=0,this.__data__={hash:new Um,map:new(ah||ih),string:new Um}}var sh=oh;function ch(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}var lh=ch;function uh(e,t){var n=e.__data__;return lh(t)?n[typeof t==`string`?`string`:`hash`]:n.map}var dh=uh;function fh(e){var t=dh(this,e).delete(e);return this.size-=t?1:0,t}var ph=fh;function mh(e){return dh(this,e).get(e)}var hh=mh;function gh(e){return dh(this,e).has(e)}var _h=gh;function vh(e,t){var n=dh(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var yh=vh;function bh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bh.prototype.clear=sh,bh.prototype.delete=ph,bh.prototype.get=hh,bh.prototype.has=_h,bh.prototype.set=yh;var xh=bh;function Sh(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Ch=Sh,wh=pm(Object.getPrototypeOf,Object),Th=`[object Object]`,Eh=Function.prototype,Dh=Object.prototype,Oh=Eh.toString,kh=Dh.hasOwnProperty,Ah=Oh.call(Object);function jh(e){if(!zd(e)||Ld(e)!=Th)return!1;var t=wh(e);if(t===null)return!0;var n=kh.call(t,`constructor`)&&t.constructor;return typeof n==`function`&&n instanceof n&&Oh.call(n)==Ah}var Mh=jh;function Nh(){this.__data__=new ih,this.size=0}var Ph=Nh;function Fh(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Ih=Fh;function Lh(e){return this.__data__.get(e)}var Rh=Lh;function zh(e){return this.__data__.has(e)}var Bh=zh,Vh=200;function Hh(e,t){var n=this.__data__;if(n instanceof ih){var r=n.__data__;if(!ah||r.length<Vh-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new xh(r)}return n.set(e,t),this.size=n.size,this}var Uh=Hh;function Wh(e){this.size=(this.__data__=new ih(e)).size}Wh.prototype.clear=Ph,Wh.prototype.delete=Ih,Wh.prototype.get=Rh,Wh.prototype.has=Bh,Wh.prototype.set=Uh;var Gh=Wh;function Kh(e,t){return e&&Yf(t,ym(t),e)}var qh=Kh;function Jh(e,t){return e&&Yf(t,Em(t),e)}var Yh=Jh,Xh=typeof exports==`object`&&exports&&!exports.nodeType&&exports,Zh=Xh&&typeof module==`object`&&module&&!module.nodeType&&module,Qh=Zh&&Zh.exports===Xh?Sd.Buffer:void 0,$h=Qh?Qh.allocUnsafe:void 0;function eg(e,t){if(t)return e.slice();var n=e.length,r=$h?$h(n):new e.constructor(n);return e.copy(r),r}var tg=eg;function ng(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var rg=ng;function ig(){return[]}var ag=ig,og=Object.prototype.propertyIsEnumerable,sg=Object.getOwnPropertySymbols,cg=sg?function(e){return e==null?[]:(e=Object(e),rg(sg(e),function(t){return og.call(e,t)}))}:ag;function lg(e,t){return Yf(e,cg(e),t)}var ug=lg,dg=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ch(t,cg(e)),e=wh(e);return t}:ag;function fg(e,t){return Yf(e,dg(e),t)}var pg=fg;function mg(e,t,n){var r=t(e);return Bd(e)?r:Ch(r,n(e))}var hg=mg;function gg(e){return hg(e,ym,cg)}var _g=gg;function vg(e){return hg(e,Em,dg)}var yg=vg,bg=vf(Sd,`DataView`),xg=vf(Sd,`Promise`),Sg=vf(Sd,`Set`),Cg=`[object Map]`,wg=`[object Object]`,Tg=`[object Promise]`,Eg=`[object Set]`,Dg=`[object WeakMap]`,Og=`[object DataView]`,kg=rf(bg),Ag=rf(ah),jg=rf(xg),Mg=rf(Sg),Ng=rf(yf),Pg=Ld;(bg&&Pg(new bg(new ArrayBuffer(1)))!=Og||ah&&Pg(new ah)!=Cg||xg&&Pg(xg.resolve())!=Tg||Sg&&Pg(new Sg)!=Eg||yf&&Pg(new yf)!=Dg)&&(Pg=function(e){var t=Ld(e),n=t==wg?e.constructor:void 0,r=n?rf(n):``;if(r)switch(r){case kg:return Og;case Ag:return Cg;case jg:return Tg;case Mg:return Eg;case Ng:return Dg}return t});var Fg=Pg,Ig=Object.prototype.hasOwnProperty;function Lg(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]==`string`&&Ig.call(e,`index`)&&(n.index=e.index,n.input=e.input),n}var Rg=Lg,zg=Sd.Uint8Array;function Bg(e){var t=new e.constructor(e.byteLength);return new zg(t).set(new zg(e)),t}var Vg=Bg;function Hg(e,t){var n=t?Vg(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Ug=Hg,Wg=/\w*$/;function Gg(e){var t=new e.constructor(e.source,Wg.exec(e));return t.lastIndex=e.lastIndex,t}var Kg=Gg,qg=Cd?Cd.prototype:void 0,Jg=qg?qg.valueOf:void 0;function Yg(e){return Jg?Object(Jg.call(e)):{}}var Xg=Yg;function Zg(e,t){var n=t?Vg(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Qg=Zg,$g=`[object Boolean]`,e_=`[object Date]`,t_=`[object Map]`,n_=`[object Number]`,r_=`[object RegExp]`,i_=`[object Set]`,a_=`[object String]`,o_=`[object Symbol]`,s_=`[object ArrayBuffer]`,c_=`[object DataView]`,l_=`[object Float32Array]`,u_=`[object Float64Array]`,d_=`[object Int8Array]`,f_=`[object Int16Array]`,p_=`[object Int32Array]`,m_=`[object Uint8Array]`,h_=`[object Uint8ClampedArray]`,g_=`[object Uint16Array]`,__=`[object Uint32Array]`;function v_(e,t,n){var r=e.constructor;switch(t){case s_:return Vg(e);case $g:case e_:return new r(+e);case c_:return Ug(e,n);case l_:case u_:case d_:case f_:case p_:case m_:case h_:case g_:case __:return Qg(e,n);case t_:return new r;case n_:case a_:return new r(e);case r_:return Kg(e);case i_:return new r;case o_:return Xg(e)}}var y_=v_;function b_(e){return typeof e.constructor==`function`&&!fp(e)?xf(wh(e)):{}}var x_=b_,S_=`[object Map]`;function C_(e){return zd(e)&&Fg(e)==S_}var w_=C_,T_=om&&om.isMap,E_=T_?nm(T_):w_,D_=`[object Set]`;function O_(e){return zd(e)&&Fg(e)==D_}var k_=O_,A_=om&&om.isSet,j_=A_?nm(A_):k_,M_=1,N_=2,P_=4,F_=`[object Arguments]`,I_=`[object Array]`,L_=`[object Boolean]`,R_=`[object Date]`,z_=`[object Error]`,B_=`[object Function]`,V_=`[object GeneratorFunction]`,H_=`[object Map]`,U_=`[object Number]`,W_=`[object Object]`,G_=`[object RegExp]`,K_=`[object Set]`,q_=`[object String]`,J_=`[object Symbol]`,Y_=`[object WeakMap]`,X_=`[object ArrayBuffer]`,Z_=`[object DataView]`,Q_=`[object Float32Array]`,$_=`[object Float64Array]`,ev=`[object Int8Array]`,tv=`[object Int16Array]`,nv=`[object Int32Array]`,rv=`[object Uint8Array]`,iv=`[object Uint8ClampedArray]`,av=`[object Uint16Array]`,ov=`[object Uint32Array]`,sv={};sv[F_]=sv[I_]=sv[X_]=sv[Z_]=sv[L_]=sv[R_]=sv[Q_]=sv[$_]=sv[ev]=sv[tv]=sv[nv]=sv[H_]=sv[U_]=sv[W_]=sv[G_]=sv[K_]=sv[q_]=sv[J_]=sv[rv]=sv[iv]=sv[av]=sv[ov]=!0,sv[z_]=sv[B_]=sv[Y_]=!1;function cv(e,t,n,r,i,a){var o,s=t&M_,c=t&N_,l=t&P_;if(n&&(o=i?n(e,r,i,a):n(e)),o!==void 0)return o;if(!Hd(e))return e;var u=Bd(e);if(u){if(o=Rg(e),!s)return Tf(e,o)}else{var d=Fg(e),f=d==B_||d==V_;if(Dp(e))return tg(e,s);if(d==W_||d==F_||f&&!i){if(o=c||f?{}:x_(e),!s)return c?pg(e,Yh(o,e)):ug(e,qh(o,e))}else{if(!sv[d])return i?e:{};o=y_(e,d,s)}}a||=new Gh;var p=a.get(e);if(p)return p;a.set(e,o),j_(e)?e.forEach(function(r){o.add(cv(r,t,n,r,e,a))}):E_(e)&&e.forEach(function(r,i){o.set(i,cv(r,t,n,i,e,a))});var m=u?void 0:(l?c?yg:_g:c?Em:ym)(e);return If(m||e,function(r,i){m&&(i=r,r=e[i]),qf(o,i,cv(r,t,n,i,e,a))}),o}var lv=cv,uv=1,dv=4;function fv(e){return lv(e,uv|dv)}var pv=fv,mv=`__lodash_hash_undefined__`;function hv(e){return this.__data__.set(e,mv),this}var gv=hv;function _v(e){return this.__data__.has(e)}var vv=_v;function yv(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new xh;++t<n;)this.add(e[t])}yv.prototype.add=yv.prototype.push=gv,yv.prototype.has=vv;var bv=yv;function xv(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Sv=xv;function Cv(e,t){return e.has(t)}var wv=Cv,Tv=1,Ev=2;function Dv(e,t,n,r,i,a){var o=n&Tv,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var l=a.get(e),u=a.get(t);if(l&&u)return l==t&&u==e;var d=-1,f=!0,p=n&Ev?new bv:void 0;for(a.set(e,t),a.set(t,e);++d<s;){var m=e[d],h=t[d];if(r)var g=o?r(h,m,d,t,e,a):r(m,h,d,e,t,a);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!Sv(t,function(e,t){if(!wv(p,t)&&(m===e||i(m,e,n,r,a)))return p.push(t)})){f=!1;break}}else if(!(m===h||i(m,h,n,r,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var Ov=Dv;function kv(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}var Av=kv;function jv(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var Mv=jv,Nv=1,Pv=2,Fv=`[object Boolean]`,Iv=`[object Date]`,Lv=`[object Error]`,Rv=`[object Map]`,zv=`[object Number]`,Bv=`[object RegExp]`,Vv=`[object Set]`,Hv=`[object String]`,Uv=`[object Symbol]`,Wv=`[object ArrayBuffer]`,Gv=`[object DataView]`,Kv=Cd?Cd.prototype:void 0,qv=Kv?Kv.valueOf:void 0;function Jv(e,t,n,r,i,a,o){switch(n){case Gv:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Wv:return!(e.byteLength!=t.byteLength||!a(new zg(e),new zg(t)));case Fv:case Iv:case zv:return Wf(+e,+t);case Lv:return e.name==t.name&&e.message==t.message;case Bv:case Hv:return e==t+``;case Rv:var s=Av;case Vv:var c=r&Nv;if(s||=Mv,e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=Pv,o.set(e,t);var u=Ov(s(e),s(t),r,i,a,o);return o.delete(e),u;case Uv:if(qv)return qv.call(e)==qv.call(t)}return!1}var Yv=Jv,Xv=1,Zv=Object.prototype.hasOwnProperty;function Qv(e,t,n,r,i,a){var o=n&Xv,s=_g(e),c=s.length,l=_g(t).length;if(c!=l&&!o)return!1;for(var u=c;u--;){var d=s[u];if(!(o?d in t:Zv.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var h=o;++u<c;){d=s[u];var g=e[d],_=t[d];if(r)var v=o?r(_,g,d,t,e,a):r(g,_,d,e,t,a);if(!(v===void 0?g===_||i(g,_,n,r,a):v)){m=!1;break}h||=d==`constructor`}if(m&&!h){var y=e.constructor,b=t.constructor;y!=b&&`constructor`in e&&`constructor`in t&&!(typeof y==`function`&&y instanceof y&&typeof b==`function`&&b instanceof b)&&(m=!1)}return a.delete(e),a.delete(t),m}var $v=Qv,ey=1,ty=`[object Arguments]`,ny=`[object Array]`,ry=`[object Object]`,iy=Object.prototype.hasOwnProperty;function ay(e,t,n,r,i,a){var o=Bd(e),s=Bd(t),c=o?ny:Fg(e),l=s?ny:Fg(t);c=c==ty?ry:c,l=l==ty?ry:l;var u=c==ry,d=l==ry,f=c==l;if(f&&Dp(e)){if(!Dp(t))return!1;o=!0,u=!1}if(f&&!u)return a||=new Gh,o||cm(e)?Ov(e,t,n,r,i,a):Yv(e,t,c,n,r,i,a);if(!(n&ey)){var p=u&&iy.call(e,`__wrapped__`),m=d&&iy.call(t,`__wrapped__`);if(p||m){var h=p?e.value():e,g=m?t.value():t;return a||=new Gh,i(h,g,n,r,a)}}return f?(a||=new Gh,$v(e,t,n,r,i,a)):!1}var oy=ay;function sy(e,t,n,r,i){return e===t?!0:e==null||t==null||!zd(e)&&!zd(t)?e!==e&&t!==t:oy(e,t,n,r,sy,i)}var cy=sy;function ly(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(n(a[c],c,a)===!1)break}return t}}var uy=ly();function dy(e,t,n){(n!==void 0&&!Wf(e[t],n)||n===void 0&&!(t in e))&&Hf(e,t,n)}var fy=dy;function py(e){return zd(e)&&ap(e)}var my=py;function hy(e,t){if(!(t===`constructor`&&typeof e[t]==`function`)&&t!=`__proto__`)return e[t]}var gy=hy;function _y(e){return Yf(e,Em(e))}var vy=_y;function yy(e,t,n,r,i,a,o){var s=gy(e,n),c=gy(t,n),l=o.get(c);if(l){fy(e,n,l);return}var u=a?a(s,c,n+``,e,t,o):void 0,d=u===void 0;if(d){var f=Bd(c),p=!f&&Dp(c),m=!f&&!p&&cm(c);u=c,f||p||m?Bd(s)?u=s:my(s)?u=Tf(s):p?(d=!1,u=tg(c,!0)):m?(d=!1,u=Qg(c,!0)):u=[]:Mh(c)||xp(c)?(u=s,xp(s)?u=vy(s):(!Hd(s)||Xd(s))&&(u=x_(c))):d=!1}d&&(o.set(c,u),i(u,c,r,a,o),o.delete(c)),fy(e,n,u)}var by=yy;function xy(e,t,n,r,i){e!==t&&uy(t,function(a,o){if(i||=new Gh,Hd(a))by(e,t,o,n,xy,r,i);else{var s=r?r(gy(e,o),a,o+``,e,t,i):void 0;s===void 0&&(s=a),fy(e,o,s)}},Em)}var Sy=xy;function Cy(e,t){return cy(e,t)}var wy=Cy,Ty=lp(function(e,t,n){Sy(e,t,n)}),Ey=s({Attributor:()=>Dy,AttributorStore:()=>Fy,BlockBlot:()=>Jy,ClassAttributor:()=>My,ContainerBlot:()=>Xy,EmbedBlot:()=>Zy,InlineBlot:()=>Ky,LeafBlot:()=>zy,ParentBlot:()=>Uy,Registry:()=>Ay,Scope:()=>V,ScrollBlot:()=>tb,StyleAttributor:()=>Py,TextBlot:()=>rb}),V=(e=>(e[e.TYPE=3]=`TYPE`,e[e.LEVEL=12]=`LEVEL`,e[e.ATTRIBUTE=13]=`ATTRIBUTE`,e[e.BLOT=14]=`BLOT`,e[e.INLINE=7]=`INLINE`,e[e.BLOCK=11]=`BLOCK`,e[e.BLOCK_BLOT=10]=`BLOCK_BLOT`,e[e.INLINE_BLOT=6]=`INLINE_BLOT`,e[e.BLOCK_ATTRIBUTE=9]=`BLOCK_ATTRIBUTE`,e[e.INLINE_ATTRIBUTE=5]=`INLINE_ATTRIBUTE`,e[e.ANY=15]=`ANY`,e))(V||{}),Dy=class{constructor(e,t,n={}){this.attrName=e,this.keyName=t;let r=V.TYPE&V.ATTRIBUTE;this.scope=n.scope==null?V.ATTRIBUTE:n.scope&V.LEVEL|r,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(e){return Array.from(e.attributes).map(e=>e.name)}add(e,t){return this.canAdd(e,t)?(e.setAttribute(this.keyName,t),!0):!1}canAdd(e,t){return this.whitelist==null?!0:typeof t==`string`?this.whitelist.indexOf(t.replace(/["']/g,``))>-1:this.whitelist.indexOf(t)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){let t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:``}},Oy=class extends Error{constructor(e){e=`[Parchment] `+e,super(e),this.message=e,this.name=this.constructor.name}},ky=class e{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,t=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){let n=null;try{n=e.parentNode}catch{return null}return this.find(n,t)}return null}create(t,n,r){let i=this.query(n);if(i==null)throw new Oy(`Unable to create ${n} blot`);let a=i,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:a.create(r),s=new a(t,o,r);return e.blots.set(s.domNode,s),s}find(t,n=!1){return e.find(t,n)}query(e,t=V.ANY){let n;return typeof e==`string`?n=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?n=this.types.text:typeof e==`number`?e&V.LEVEL&V.BLOCK?n=this.types.block:e&V.LEVEL&V.INLINE&&(n=this.types.inline):e instanceof Element&&((e.getAttribute(`class`)||``).split(/\s+/).some(e=>(n=this.classes[e],!!n)),n||=this.tags[e.tagName]),n==null?null:`scope`in n&&t&V.LEVEL&n.scope&&t&V.TYPE&n.scope?n:null}register(...e){return e.map(e=>{let t=`blotName`in e,n=`attrName`in e;if(!t&&!n)throw new Oy(`Invalid definition`);if(t&&e.blotName===`abstract`)throw new Oy(`Cannot register abstract class`);let r=t?e.blotName:n?e.attrName:void 0;return this.types[r]=e,n?typeof e.keyName==`string`&&(this.attributes[e.keyName]=e):t&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(e=>e.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(t=>{(this.tags[t]==null||e.className==null)&&(this.tags[t]=e)}))),e})}};ky.blots=new WeakMap;var Ay=ky;function jy(e,t){return(e.getAttribute(`class`)||``).split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}var My=class extends Dy{static keys(e){return(e.getAttribute(`class`)||``).split(/\s+/).map(e=>e.split(`-`).slice(0,-1).join(`-`))}add(e,t){return this.canAdd(e,t)?(this.remove(e),e.classList.add(`${this.keyName}-${t}`),!0):!1}remove(e){jy(e,this.keyName).forEach(t=>{e.classList.remove(t)}),e.classList.length===0&&e.removeAttribute(`class`)}value(e){let t=(jy(e,this.keyName)[0]||``).slice(this.keyName.length+1);return this.canAdd(e,t)?t:``}};function Ny(e){let t=e.split(`-`),n=t.slice(1).map(e=>e[0].toUpperCase()+e.slice(1)).join(``);return t[0]+n}var Py=class extends Dy{static keys(e){return(e.getAttribute(`style`)||``).split(`;`).map(e=>e.split(`:`)[0].trim())}add(e,t){return this.canAdd(e,t)?(e.style[Ny(this.keyName)]=t,!0):!1}remove(e){e.style[Ny(this.keyName)]=``,e.getAttribute(`style`)||e.removeAttribute(`style`)}value(e){let t=e.style[Ny(this.keyName)];return this.canAdd(e,t)?t:``}},Fy=class{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,t){t?e.add(this.domNode,t)&&(e.value(this.domNode)==null?delete this.attributes[e.attrName]:this.attributes[e.attrName]=e):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};let e=Ay.find(this.domNode);if(e==null)return;let t=Dy.keys(this.domNode),n=My.keys(this.domNode),r=Py.keys(this.domNode);t.concat(n).concat(r).forEach(t=>{let n=e.scroll.query(t,V.ATTRIBUTE);n instanceof Dy&&(this.attributes[n.attrName]=n)})}copy(e){Object.keys(this.attributes).forEach(t=>{let n=this.attributes[t].value(this.domNode);e.format(t,n)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,t)=>(e[t]=this.attributes[t].value(this.domNode),e),{})}},Iy=class{constructor(e,t){this.scroll=e,this.domNode=t,Ay.blots.set(t,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Oy(`Blot definition missing tagName`);let t,n;return Array.isArray(this.tagName)?(typeof e==`string`?(n=e.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):typeof e==`number`&&(n=e),t=typeof n==`number`?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t}get statics(){return this.constructor}attach(){}clone(){let e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Ay.blots.delete(this.domNode)}deleteAt(e,t){this.isolate(e,t).remove()}formatAt(e,t,n,r){let i=this.isolate(e,t);if(this.scroll.query(n,V.BLOT)!=null&&r)i.wrap(n,r);else if(this.scroll.query(n,V.ATTRIBUTE)!=null){let e=this.scroll.create(this.statics.scope);i.wrap(e),e.format(n,r)}}insertAt(e,t,n){let r=n==null?this.scroll.create(`text`,t):this.scroll.create(t,n),i=this.split(e);this.parent.insertBefore(r,i||void 0)}isolate(e,t){let n=this.split(e);if(n==null)throw Error(`Attempt to isolate at end`);return n.split(t),n}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,t){let n=typeof e==`string`?this.scroll.create(e,t):e;return this.parent!=null&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(e,t){return e===0?this:this.next}update(e,t){}wrap(e,t){let n=typeof e==`string`?this.scroll.create(e,t):e;if(this.parent!=null&&this.parent.insertBefore(n,this.next||void 0),typeof n.appendChild!=`function`)throw new Oy(`Cannot wrap ${e}`);return n.appendChild(this),n}};Iy.blotName=`abstract`;var Ly=Iy,Ry=class extends Ly{static value(e){return!0}index(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1}position(e,t){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Ry.scope=V.INLINE_BLOT;var zy=Ry,By=class{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){let t=e.slice(1);this.append(...t)}}at(e){let t=this.iterator(),n=t();for(;n&&e>0;)--e,n=t();return n}contains(e){let t=this.iterator(),n=t();for(;n;){if(n===e)return!0;n=t()}return!1}indexOf(e){let t=this.iterator(),n=t(),r=0;for(;n;){if(n===e)return r;r+=1,n=t()}return-1}insertBefore(e,t){e!=null&&(this.remove(e),e.next=t,t==null?this.tail==null?(e.prev=null,this.head=this.tail=e):(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=t.prev,t.prev!=null&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)),this.length+=1)}offset(e){let t=0,n=this.head;for(;n!=null;){if(n===e)return t;t+=n.length(),n=n.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),--this.length)}iterator(e=this.head){return()=>{let t=e;return e!=null&&(e=e.next),t}}find(e,t=!1){let n=this.iterator(),r=n();for(;r;){let i=r.length();if(e<i||t&&e===i&&(r.next==null||r.next.length()!==0))return[r,e];e-=i,r=n()}return[null,0]}forEach(e){let t=this.iterator(),n=t();for(;n;)e(n),n=t()}forEachAt(e,t,n){if(t<=0)return;let[r,i]=this.find(e),a=e-i,o=this.iterator(r),s=o();for(;s&&a<e+t;){let r=s.length();e>a?n(s,e-a,Math.min(t,a+r-e)):n(s,0,Math.min(r,e+t-a)),a+=r,s=o()}}map(e){return this.reduce((t,n)=>(t.push(e(n)),t),[])}reduce(e,t){let n=this.iterator(),r=n();for(;r;)t=e(t,r),r=n();return t}};function Vy(e,t){let n=t.find(e);if(n)return n;try{return t.create(e)}catch{let n=t.create(V.INLINE);return Array.from(e.childNodes).forEach(e=>{n.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(n.domNode,e),n.attach(),n}}var Hy=class e extends Ly{constructor(e,t){super(e,t),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,e.uiClass&&this.uiNode.classList.add(e.uiClass),this.uiNode.setAttribute(`contenteditable`,`false`),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new By,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{let t=Vy(e,this.scroll);this.insertBefore(t,this.children.head||void 0)}catch(e){if(e instanceof Oy)return;throw e}})}deleteAt(e,t){if(e===0&&t===this.length())return this.remove();this.children.forEachAt(e,t,(e,t,n)=>{e.deleteAt(t,n)})}descendant(t,n=0){let[r,i]=this.children.find(n);return t.blotName==null&&t(r)||t.blotName!=null&&r instanceof t?[r,i]:r instanceof e?r.descendant(t,i):[null,-1]}descendants(t,n=0,r=Number.MAX_VALUE){let i=[],a=r;return this.children.forEachAt(n,r,(n,r,o)=>{(t.blotName==null&&t(n)||t.blotName!=null&&n instanceof t)&&i.push(n),n instanceof e&&(i=i.concat(n.descendants(t,r,a))),a-=o}),i}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(n=>{t||this.statics.allowedChildren.some(e=>n instanceof e)||(n.statics.scope===V.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),t=!0):n instanceof e?n.unwrap():n.remove())})}formatAt(e,t,n,r){this.children.forEachAt(e,t,(e,t,i)=>{e.formatAt(t,i,n,r)})}insertAt(e,t,n){let[r,i]=this.children.find(e);if(r)r.insertAt(i,t,n);else{let e=n==null?this.scroll.create(`text`,t):this.scroll.create(t,n);this.appendChild(e)}}insertBefore(e,t){e.parent!=null&&e.parent.children.remove(e);let n=null;this.children.insertBefore(e,t||null),e.parent=this,t!=null&&(n=t.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(e.domNode,n),e.attach()}length(){return this.children.reduce((e,t)=>e+t.length(),0)}moveChildren(e,t){this.children.forEach(n=>{e.insertBefore(n,t)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){let e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,n=!1){let[r,i]=this.children.find(t,n),a=[[this,t]];return r instanceof e?a.concat(r.path(i,n)):(r!=null&&a.push([r,i]),a)}removeChild(e){this.children.remove(e)}replaceWith(t,n){let r=typeof t==`string`?this.scroll.create(t,n):t;return r instanceof e&&this.moveChildren(r),super.replaceWith(r)}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(e,this.length(),(e,r,i)=>{let a=e.split(r,t);a!=null&&n.appendChild(a)}),n}splitAfter(e){let t=this.clone();for(;e.next!=null;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,t){let n=[],r=[];e.forEach(e=>{e.target===this.domNode&&e.type===`childList`&&(n.push(...e.addedNodes),r.push(...e.removedNodes))}),r.forEach(e=>{if(e.parentNode!=null&&e.tagName!==`IFRAME`&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;let t=this.scroll.find(e);t!=null&&(t.domNode.parentNode==null||t.domNode.parentNode===this.domNode)&&t.detach()}),n.filter(e=>e.parentNode===this.domNode&&e!==this.uiNode).sort((e,t)=>e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(e=>{let t=null;e.nextSibling!=null&&(t=this.scroll.find(e.nextSibling));let n=Vy(e,this.scroll);(n.next!==t||n.next==null)&&(n.parent!=null&&n.parent.removeChild(this),this.insertBefore(n,t||void 0))}),this.enforceAllowedChildren()}};Hy.uiClass=``;var Uy=Hy;function Wy(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}var Gy=class e extends Uy{static create(e){return super.create(e)}static formats(t,n){let r=n.query(e.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName==`string`)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Fy(this.domNode)}format(t,n){if(t===this.statics.blotName&&!n)this.children.forEach(t=>{t instanceof e||(t=t.wrap(e.blotName,!0)),this.attributes.copy(t)}),this.unwrap();else{let e=this.scroll.query(t,V.INLINE);if(e==null)return;e instanceof Dy?this.attributes.attribute(e,n):n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n)}}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,n,r){this.formats()[n]!=null||this.scroll.query(n,V.ATTRIBUTE)?this.isolate(e,t).format(n,r):super.formatAt(e,t,n,r)}optimize(t){super.optimize(t);let n=this.formats();if(Object.keys(n).length===0)return this.unwrap();let r=this.next;r instanceof e&&r.prev===this&&Wy(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,t){let n=super.replaceWith(e,t);return this.attributes.copy(n),n}update(e,t){super.update(e,t),e.some(e=>e.target===this.domNode&&e.type===`attributes`)&&this.attributes.build()}wrap(t,n){let r=super.wrap(t,n);return r instanceof e&&this.attributes.move(r),r}};Gy.allowedChildren=[Gy,zy],Gy.blotName=`inline`,Gy.scope=V.INLINE_BLOT,Gy.tagName=`SPAN`;var Ky=Gy,qy=class e extends Uy{static create(e){return super.create(e)}static formats(t,n){let r=n.query(e.blotName);if(!(r!=null&&t.tagName===r.tagName)){if(typeof this.tagName==`string`)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(e,t){super(e,t),this.attributes=new Fy(this.domNode)}format(t,n){let r=this.scroll.query(t,V.BLOCK);r!=null&&(r instanceof Dy?this.attributes.attribute(r,n):t===this.statics.blotName&&!n?this.replaceWith(e.blotName):n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n))}formats(){let e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return t!=null&&(e[this.statics.blotName]=t),e}formatAt(e,t,n,r){this.scroll.query(n,V.BLOCK)==null?super.formatAt(e,t,n,r):this.format(n,r)}insertAt(e,t,n){if(n==null||this.scroll.query(t,V.INLINE)!=null)super.insertAt(e,t,n);else{let r=this.split(e);if(r!=null){let e=this.scroll.create(t,n);r.parent.insertBefore(e,r)}else throw Error(`Attempt to insertAt after block boundaries`)}}replaceWith(e,t){let n=super.replaceWith(e,t);return this.attributes.copy(n),n}update(e,t){super.update(e,t),e.some(e=>e.target===this.domNode&&e.type===`attributes`)&&this.attributes.build()}};qy.blotName=`block`,qy.scope=V.BLOCK_BLOT,qy.tagName=`P`,qy.allowedChildren=[Ky,qy,zy];var Jy=qy,Yy=class extends Uy{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,t){super.deleteAt(e,t),this.enforceAllowedChildren()}formatAt(e,t,n,r){super.formatAt(e,t,n,r),this.enforceAllowedChildren()}insertAt(e,t,n){super.insertAt(e,t,n),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Yy.blotName=`container`,Yy.scope=V.BLOCK_BLOT;var Xy=Yy,Zy=class extends zy{static formats(e,t){}format(e,t){super.formatAt(0,this.length(),e,t)}formatAt(e,t,n,r){e===0&&t===this.length()?this.format(n,r):super.formatAt(e,t,n,r)}formats(){return this.statics.formats(this.domNode,this.scroll)}},Qy={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},$y=100,eb=class extends Uy{constructor(e,t){super(null,t),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(e=>{this.update(e)}),this.observer.observe(this.domNode,Qy),this.attach()}create(e,t){return this.registry.create(this,e,t)}find(e,t=!1){let n=this.registry.find(e,t);return n?n.scroll===this?n:t?this.find(n.scroll.domNode.parentNode,!0):null:null}query(e,t=V.ANY){return this.registry.query(e,t)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,t){this.update(),e===0&&t===this.length()?this.children.forEach(e=>{e.remove()}):super.deleteAt(e,t)}formatAt(e,t,n,r){this.update(),super.formatAt(e,t,n,r)}insertAt(e,t,n){this.update(),super.insertAt(e,t,n)}optimize(e=[],t={}){super.optimize(t);let n=t.mutationsMap||new WeakMap,r=Array.from(this.observer.takeRecords());for(;r.length>0;)e.push(r.pop());let i=(e,t=!0)=>{e==null||e===this||e.domNode.parentNode!=null&&(n.has(e.domNode)||n.set(e.domNode,[]),t&&i(e.parent))},a=e=>{n.has(e.domNode)&&(e instanceof Uy&&e.children.forEach(a),n.delete(e.domNode),e.optimize(t))},o=e;for(let t=0;o.length>0;t+=1){if(t>=$y)throw Error(`[Parchment] Maximum optimize iterations reached`);for(o.forEach(e=>{let t=this.find(e.target,!0);t!=null&&(t.domNode===e.target&&(e.type===`childList`?(i(this.find(e.previousSibling,!1)),Array.from(e.addedNodes).forEach(e=>{let t=this.find(e,!1);i(t,!1),t instanceof Uy&&t.children.forEach(e=>{i(e,!1)})})):e.type===`attributes`&&i(t.prev)),i(t))}),this.children.forEach(a),o=Array.from(this.observer.takeRecords()),r=o.slice();r.length>0;)e.push(r.pop())}}update(e,t={}){e||=this.observer.takeRecords();let n=new WeakMap;e.map(e=>{let t=this.find(e.target,!0);return t==null?null:n.has(t.domNode)?(n.get(t.domNode).push(e),null):(n.set(t.domNode,[e]),t)}).forEach(e=>{e!=null&&e!==this&&n.has(e.domNode)&&e.update(n.get(e.domNode)||[],t)}),t.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),t),this.optimize(e,t)}};eb.blotName=`scroll`,eb.defaultChild=Jy,eb.allowedChildren=[Jy,Xy],eb.scope=V.BLOCK_BLOT,eb.tagName=`DIV`;var tb=eb,nb=class e extends zy{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,t){super(e,t),this.text=this.statics.value(this.domNode)}deleteAt(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)}index(e,t){return this.domNode===e?t:-1}insertAt(e,t,n){n==null?(this.text=this.text.slice(0,e)+t+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,t,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,t=!1){return[this.domNode,e]}split(e,t=!1){if(!t){if(e===0)return this;if(e===this.length())return this.next}let n=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(e,t){e.some(e=>e.type===`characterData`&&e.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};nb.blotName=`text`,nb.scope=V.INLINE_BLOT;var rb=nb,ib=o(((e,t)=>{var n=-1,r=1,i=0;function a(e,t,n,r,a){if(e===t)return e?[[i,e]]:[];if(n!=null){var s=D(e,t,n);if(s)return s}var c=l(e,t),u=e.substring(0,c);e=e.substring(c),t=t.substring(c),c=d(e,t);var f=e.substring(e.length-c);e=e.substring(0,e.length-c),t=t.substring(0,t.length-c);var m=o(e,t);return u&&m.unshift([i,u]),f&&m.push([i,f]),b(m,a),r&&p(m),m}function o(e,t){var o;if(!e)return[[r,t]];if(!t)return[[n,e]];var c=e.length>t.length?e:t,l=e.length>t.length?t:e,u=c.indexOf(l);if(u!==-1)return o=[[r,c.substring(0,u)],[i,l],[r,c.substring(u+l.length)]],e.length>t.length&&(o[0][0]=o[2][0]=n),o;if(l.length===1)return[[n,e],[r,t]];var d=f(e,t);if(d){var p=d[0],m=d[1],h=d[2],g=d[3],_=d[4],v=a(p,h),y=a(m,g);return v.concat([[i,_]],y)}return s(e,t)}function s(e,t){for(var i=e.length,a=t.length,o=Math.ceil((i+a)/2),s=o,l=2*o,u=Array(l),d=Array(l),f=0;f<l;f++)u[f]=-1,d[f]=-1;u[s+1]=0,d[s+1]=0;for(var p=i-a,m=p%2!=0,h=0,g=0,_=0,v=0,y=0;y<o;y++){for(var b=-y+h;b<=y-g;b+=2){for(var x=s+b,S=b===-y||b!==y&&u[x-1]<u[x+1]?u[x+1]:u[x-1]+1,C=S-b;S<i&&C<a&&e.charAt(S)===t.charAt(C);)S++,C++;if(u[x]=S,S>i)g+=2;else if(C>a)h+=2;else if(m){var w=s+p-b;if(w>=0&&w<l&&d[w]!==-1){var T=i-d[w];if(S>=T)return c(e,t,S,C)}}}for(var E=-y+_;E<=y-v;E+=2){for(var w=s+E,T=E===-y||E!==y&&d[w-1]<d[w+1]?d[w+1]:d[w-1]+1,D=T-E;T<i&&D<a&&e.charAt(i-T-1)===t.charAt(a-D-1);)T++,D++;if(d[w]=T,T>i)v+=2;else if(D>a)_+=2;else if(!m){var x=s+p-E;if(x>=0&&x<l&&u[x]!==-1){var S=u[x],C=s+S-x;if(T=i-T,S>=T)return c(e,t,S,C)}}}}return[[n,e],[r,t]]}function c(e,t,n,r){var i=e.substring(0,n),o=t.substring(0,r),s=e.substring(n),c=t.substring(r),l=a(i,o),u=a(s,c);return l.concat(u)}function l(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,a=0;n<i;)e.substring(a,i)==t.substring(a,i)?(n=i,a=n):r=i,i=Math.floor((r-n)/2+n);return x(e.charCodeAt(i-1))&&i--,i}function u(e,t){var n=e.length,r=t.length;if(n==0||r==0)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var i=Math.min(n,r);if(e==t)return i;for(var a=0,o=1;;){var s=e.substring(i-o),c=t.indexOf(s);if(c==-1)return a;o+=c,(c==0||e.substring(i-o)==t.substring(0,o))&&(a=o,o++)}}function d(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,a=0;n<i;)e.substring(e.length-i,e.length-a)==t.substring(t.length-i,t.length-a)?(n=i,a=n):r=i,i=Math.floor((r-n)/2+n);return S(e.charCodeAt(e.length-i))&&i--,i}function f(e,t){var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||r.length*2<n.length)return null;function i(e,t,n){for(var r=e.substring(n,n+Math.floor(e.length/4)),i=-1,a=``,o,s,c,u;(i=t.indexOf(r,i+1))!==-1;){var f=l(e.substring(n),t.substring(i)),p=d(e.substring(0,n),t.substring(0,i));a.length<p+f&&(a=t.substring(i-p,i)+t.substring(i,i+f),o=e.substring(0,n-p),s=e.substring(n+f),c=t.substring(0,i-p),u=t.substring(i+f))}return a.length*2>=e.length?[o,s,c,u,a]:null}var a=i(n,r,Math.ceil(n.length/4)),o=i(n,r,Math.ceil(n.length/2)),s;if(!a&&!o)return null;s=o?a&&a[4].length>o[4].length?a:o:a;var c,u,f,p;e.length>t.length?(c=s[0],u=s[1],f=s[2],p=s[3]):(f=s[0],p=s[1],c=s[2],u=s[3]);var m=s[4];return[c,u,f,p,m]}function p(e){for(var t=!1,a=[],o=0,s=null,c=0,l=0,d=0,f=0,p=0;c<e.length;)e[c][0]==i?(a[o++]=c,l=f,d=p,f=0,p=0,s=e[c][1]):(e[c][0]==r?f+=e[c][1].length:p+=e[c][1].length,s&&s.length<=Math.max(l,d)&&s.length<=Math.max(f,p)&&(e.splice(a[o-1],0,[n,s]),e[a[o-1]+1][0]=r,o--,o--,c=o>0?a[o-1]:-1,l=0,d=0,f=0,p=0,s=null,t=!0)),c++;for(t&&b(e),y(e),c=1;c<e.length;){if(e[c-1][0]==n&&e[c][0]==r){var m=e[c-1][1],h=e[c][1],g=u(m,h),_=u(h,m);g>=_?(g>=m.length/2||g>=h.length/2)&&(e.splice(c,0,[i,h.substring(0,g)]),e[c-1][1]=m.substring(0,m.length-g),e[c+1][1]=h.substring(g),c++):(_>=m.length/2||_>=h.length/2)&&(e.splice(c,0,[i,m.substring(0,_)]),e[c-1][0]=r,e[c-1][1]=h.substring(0,h.length-_),e[c+1][0]=n,e[c+1][1]=m.substring(_),c++),c++}c++}}var m=/[^a-zA-Z0-9]/,h=/\s/,g=/[\r\n]/,_=/\n\r?\n$/,v=/^\r?\n\r?\n/;function y(e){function t(e,t){if(!e||!t)return 6;var n=e.charAt(e.length-1),r=t.charAt(0),i=n.match(m),a=r.match(m),o=i&&n.match(h),s=a&&r.match(h),c=o&&n.match(g),l=s&&r.match(g),u=c&&e.match(_),d=l&&t.match(v);return u||d?5:c||l?4:i&&!o&&s?3:o||s?2:i||a?1:0}for(var n=1;n<e.length-1;){if(e[n-1][0]==i&&e[n+1][0]==i){var r=e[n-1][1],a=e[n][1],o=e[n+1][1],s=d(r,a);if(s){var c=a.substring(a.length-s);r=r.substring(0,r.length-s),a=c+a.substring(0,a.length-s),o=c+o}for(var l=r,u=a,f=o,p=t(r,a)+t(a,o);a.charAt(0)===o.charAt(0);){r+=a.charAt(0),a=a.substring(1)+o.charAt(0),o=o.substring(1);var y=t(r,a)+t(a,o);y>=p&&(p=y,l=r,u=a,f=o)}e[n-1][1]!=l&&(l?e[n-1][1]=l:(e.splice(n-1,1),n--),e[n][1]=u,f?e[n+1][1]=f:(e.splice(n+1,1),n--))}n++}}function b(e,t){e.push([i,``]);for(var a=0,o=0,s=0,c=``,u=``,f;a<e.length;){if(a<e.length-1&&!e[a][1]){e.splice(a,1);continue}switch(e[a][0]){case r:s++,u+=e[a][1],a++;break;case n:o++,c+=e[a][1],a++;break;case i:var p=a-s-o-1;if(t){if(p>=0&&w(e[p][1])){var m=e[p][1].slice(-1);if(e[p][1]=e[p][1].slice(0,-1),c=m+c,u=m+u,!e[p][1]){e.splice(p,1),a--;var h=p-1;e[h]&&e[h][0]===r&&(s++,u=e[h][1]+u,h--),e[h]&&e[h][0]===n&&(o++,c=e[h][1]+c,h--),p=h}}if(C(e[a][1])){var m=e[a][1].charAt(0);e[a][1]=e[a][1].slice(1),c+=m,u+=m}}if(a<e.length-1&&!e[a][1]){e.splice(a,1);break}if(c.length>0||u.length>0){c.length>0&&u.length>0&&(f=l(u,c),f!==0&&(p>=0?e[p][1]+=u.substring(0,f):(e.splice(0,0,[i,u.substring(0,f)]),a++),u=u.substring(f),c=c.substring(f)),f=d(u,c),f!==0&&(e[a][1]=u.substring(u.length-f)+e[a][1],u=u.substring(0,u.length-f),c=c.substring(0,c.length-f)));var g=s+o;c.length===0&&u.length===0?(e.splice(a-g,g),a-=g):c.length===0?(e.splice(a-g,g,[r,u]),a=a-g+1):u.length===0?(e.splice(a-g,g,[n,c]),a=a-g+1):(e.splice(a-g,g,[n,c],[r,u]),a=a-g+2)}a!==0&&e[a-1][0]===i?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,s=0,o=0,c=``,u=``;break}}e[e.length-1][1]===``&&e.pop();var _=!1;for(a=1;a<e.length-1;)e[a-1][0]===i&&e[a+1][0]===i&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)===e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),_=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),_=!0)),a++;_&&b(e,t)}function x(e){return e>=55296&&e<=56319}function S(e){return e>=56320&&e<=57343}function C(e){return S(e.charCodeAt(0))}function w(e){return x(e.charCodeAt(e.length-1))}function T(e){for(var t=[],n=0;n<e.length;n++)e[n][1].length>0&&t.push(e[n]);return t}function E(e,t,a,o){return w(e)||C(o)?null:T([[i,e],[n,t],[r,a],[i,o]])}function D(e,t,n){var r=typeof n==`number`?{index:n,length:0}:n.oldRange,i=typeof n==`number`?null:n.newRange,a=e.length,o=t.length;if(r.length===0&&(i===null||i.length===0)){var s=r.index,c=e.slice(0,s),l=e.slice(s),u=i?i.index:null;editBefore:{var d=s+o-a;if(u!==null&&u!==d||d<0||d>o)break editBefore;var f=t.slice(0,d),p=t.slice(d);if(p!==l)break editBefore;var m=Math.min(s,d),h=c.slice(0,m),g=f.slice(0,m);if(h!==g)break editBefore;var _=c.slice(m),v=f.slice(m);return E(h,_,v,l)}editAfter:{if(u!==null&&u!==s)break editAfter;var y=s,f=t.slice(0,y),p=t.slice(y);if(f!==c)break editAfter;var b=Math.min(a-y,o-y),x=l.slice(l.length-b),S=p.slice(p.length-b);if(x!==S)break editAfter;var _=l.slice(0,l.length-b),v=p.slice(0,p.length-b);return E(c,_,v,x)}}if(r.length>0&&i&&i.length===0)replaceRange:{var h=e.slice(0,r.index),x=e.slice(r.index+r.length),m=h.length,b=x.length;if(o<m+b)break replaceRange;var g=t.slice(0,m),S=t.slice(o-b);if(h!==g||x!==S)break replaceRange;var _=e.slice(m,a-b),v=t.slice(m,o-b);return E(h,_,v,x)}return null}function O(e,t,n,r){return a(e,t,n,r,!0)}O.INSERT=r,O.DELETE=n,O.EQUAL=i,t.exports=O})),ab=o(((e,t)=>{var n=200,r=`__lodash_hash_undefined__`,i=9007199254740991,a=`[object Arguments]`,o=`[object Array]`,s=`[object Boolean]`,c=`[object Date]`,l=`[object Error]`,u=`[object Function]`,d=`[object GeneratorFunction]`,f=`[object Map]`,p=`[object Number]`,m=`[object Object]`,h=`[object Promise]`,g=`[object RegExp]`,_=`[object Set]`,v=`[object String]`,y=`[object Symbol]`,b=`[object WeakMap]`,x=`[object ArrayBuffer]`,S=`[object DataView]`,C=`[object Float32Array]`,w=`[object Float64Array]`,T=`[object Int8Array]`,E=`[object Int16Array]`,D=`[object Int32Array]`,O=`[object Uint8Array]`,ee=`[object Uint8ClampedArray]`,te=`[object Uint16Array]`,ne=`[object Uint32Array]`,k=/[\\^$.*+?()[\]{}|]/g,re=/\w*$/,ie=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,A={};A[a]=A[o]=A[x]=A[S]=A[s]=A[c]=A[C]=A[w]=A[T]=A[E]=A[D]=A[f]=A[p]=A[m]=A[g]=A[_]=A[v]=A[y]=A[O]=A[ee]=A[te]=A[ne]=!0,A[l]=A[u]=A[b]=!1;var j=typeof global==`object`&&global&&global.Object===Object&&global,oe=typeof self==`object`&&self&&self.Object===Object&&self,se=j||oe||Function(`return this`)(),ce=typeof e==`object`&&e&&!e.nodeType&&e,M=ce&&typeof t==`object`&&t&&!t.nodeType&&t,le=M&&M.exports===ce;function N(e,t){return e.set(t[0],t[1]),e}function P(e,t){return e.add(t),e}function F(e,t){for(var n=-1,r=e?e.length:0;++n<r&&t(e[n],n,e)!==!1;);return e}function ue(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function de(e,t,n,r){var i=-1,a=e?e.length:0;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function fe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function pe(e,t){return e?.[t]}function me(e){var t=!1;if(e!=null&&typeof e.toString!=`function`)try{t=!!(e+``)}catch{}return t}function he(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function ge(e,t){return function(n){return e(t(n))}}function _e(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var ve=Array.prototype,ye=Function.prototype,be=Object.prototype,xe=se[`__core-js_shared__`],Se=function(){var e=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}(),Ce=ye.toString,we=be.hasOwnProperty,Te=be.toString,Ee=RegExp(`^`+Ce.call(we).replace(k,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`),De=le?se.Buffer:void 0,Oe=se.Symbol,ke=se.Uint8Array,Ae=ge(Object.getPrototypeOf,Object),je=Object.create,Me=be.propertyIsEnumerable,Ne=ve.splice,Pe=Object.getOwnPropertySymbols,Fe=De?De.isBuffer:void 0,Ie=ge(Object.keys,Object),Le=Ht(se,`DataView`),Re=Ht(se,`Map`),ze=Ht(se,`Promise`),Be=Ht(se,`Set`),Ve=Ht(se,`WeakMap`),He=Ht(Object,`create`),Ue=Qt(Le),We=Qt(Re),Ge=Qt(ze),Ke=Qt(Be),qe=Qt(Ve),Je=Oe?Oe.prototype:void 0,Ye=Je?Je.valueOf:void 0;function Xe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ze(){this.__data__=He?He(null):{}}function Qe(e){return this.has(e)&&delete this.__data__[e]}function $e(e){var t=this.__data__;if(He){var n=t[e];return n===r?void 0:n}return we.call(t,e)?t[e]:void 0}function et(e){var t=this.__data__;return He?t[e]!==void 0:we.call(t,e)}function tt(e,t){var n=this.__data__;return n[e]=He&&t===void 0?r:t,this}Xe.prototype.clear=Ze,Xe.prototype.delete=Qe,Xe.prototype.get=$e,Xe.prototype.has=et,Xe.prototype.set=tt;function nt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function rt(){this.__data__=[]}function it(e){var t=this.__data__,n=St(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Ne.call(t,n,1),!0}function at(e){var t=this.__data__,n=St(t,e);return n<0?void 0:t[n][1]}function ot(e){return St(this.__data__,e)>-1}function st(e,t){var n=this.__data__,r=St(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}nt.prototype.clear=rt,nt.prototype.delete=it,nt.prototype.get=at,nt.prototype.has=ot,nt.prototype.set=st;function ct(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function lt(){this.__data__={hash:new Xe,map:new(Re||nt),string:new Xe}}function ut(e){return Vt(this,e).delete(e)}function dt(e){return Vt(this,e).get(e)}function ft(e){return Vt(this,e).has(e)}function pt(e,t){return Vt(this,e).set(e,t),this}ct.prototype.clear=lt,ct.prototype.delete=ut,ct.prototype.get=dt,ct.prototype.has=ft,ct.prototype.set=pt;function mt(e){this.__data__=new nt(e)}function ht(){this.__data__=new nt}function gt(e){return this.__data__.delete(e)}function _t(e){return this.__data__.get(e)}function vt(e){return this.__data__.has(e)}function yt(e,t){var r=this.__data__;if(r instanceof nt){var i=r.__data__;if(!Re||i.length<n-1)return i.push([e,t]),this;r=this.__data__=new ct(i)}return r.set(e,t),this}mt.prototype.clear=ht,mt.prototype.delete=gt,mt.prototype.get=_t,mt.prototype.has=vt,mt.prototype.set=yt;function bt(e,t){var n=nn(e)||tn(e)?fe(e.length,String):[],r=n.length,i=!!r;for(var a in e)(t||we.call(e,a))&&!(i&&(a==`length`||Jt(a,r)))&&n.push(a);return n}function xt(e,t,n){var r=e[t];(!(we.call(e,t)&&en(r,n))||n===void 0&&!(t in e))&&(e[t]=n)}function St(e,t){for(var n=e.length;n--;)if(en(e[n][0],t))return n;return-1}function Ct(e,t){return e&&Rt(t,dn(t),e)}function wt(e,t,n,r,i,o,s){var c;if(r&&(c=o?r(e,i,o,s):r(e)),c!==void 0)return c;if(!ln(e))return e;var l=nn(e);if(l){if(c=Gt(e),!t)return Lt(e,c)}else{var f=Wt(e),p=f==u||f==d;if(on(e))return At(e,t);if(f==m||f==a||p&&!o){if(me(e))return o?e:{};if(c=Kt(p?{}:e),!t)return zt(e,Ct(c,e))}else{if(!A[f])return o?e:{};c=qt(e,f,wt,t)}}s||=new mt;var h=s.get(e);if(h)return h;if(s.set(e,c),!l)var g=n?Bt(e):dn(e);return F(g||e,function(i,a){g&&(a=i,i=e[a]),xt(c,a,wt(i,t,n,r,a,e,s))}),c}function Tt(e){return ln(e)?je(e):{}}function Et(e,t,n){var r=t(e);return nn(e)?r:ue(r,n(e))}function Dt(e){return Te.call(e)}function Ot(e){return!ln(e)||Xt(e)?!1:(sn(e)||me(e)?Ee:ie).test(Qt(e))}function kt(e){if(!Zt(e))return Ie(e);var t=[];for(var n in Object(e))we.call(e,n)&&n!=`constructor`&&t.push(n);return t}function At(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function jt(e){var t=new e.constructor(e.byteLength);return new ke(t).set(new ke(e)),t}function Mt(e,t){var n=t?jt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Nt(e,t,n){var r=t?n(he(e),!0):he(e);return de(r,N,new e.constructor)}function I(e){var t=new e.constructor(e.source,re.exec(e));return t.lastIndex=e.lastIndex,t}function Pt(e,t,n){var r=t?n(_e(e),!0):_e(e);return de(r,P,new e.constructor)}function Ft(e){return Ye?Object(Ye.call(e)):{}}function It(e,t){var n=t?jt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Lt(e,t){var n=-1,r=e.length;for(t||=Array(r);++n<r;)t[n]=e[n];return t}function Rt(e,t,n,r){n||={};for(var i=-1,a=t.length;++i<a;){var o=t[i],s=r?r(n[o],e[o],o,n,e):void 0;xt(n,o,s===void 0?e[o]:s)}return n}function zt(e,t){return Rt(e,Ut(e),t)}function Bt(e){return Et(e,dn,Ut)}function Vt(e,t){var n=e.__data__;return Yt(t)?n[typeof t==`string`?`string`:`hash`]:n.map}function Ht(e,t){var n=pe(e,t);return Ot(n)?n:void 0}var Ut=Pe?ge(Pe,Object):fn,Wt=Dt;(Le&&Wt(new Le(new ArrayBuffer(1)))!=S||Re&&Wt(new Re)!=f||ze&&Wt(ze.resolve())!=h||Be&&Wt(new Be)!=_||Ve&&Wt(new Ve)!=b)&&(Wt=function(e){var t=Te.call(e),n=t==m?e.constructor:void 0,r=n?Qt(n):void 0;if(r)switch(r){case Ue:return S;case We:return f;case Ge:return h;case Ke:return _;case qe:return b}return t});function Gt(e){var t=e.length,n=e.constructor(t);return t&&typeof e[0]==`string`&&we.call(e,`index`)&&(n.index=e.index,n.input=e.input),n}function Kt(e){return typeof e.constructor==`function`&&!Zt(e)?Tt(Ae(e)):{}}function qt(e,t,n,r){var i=e.constructor;switch(t){case x:return jt(e);case s:case c:return new i(+e);case S:return Mt(e,r);case C:case w:case T:case E:case D:case O:case ee:case te:case ne:return It(e,r);case f:return Nt(e,r,n);case p:case v:return new i(e);case g:return I(e);case _:return Pt(e,r,n);case y:return Ft(e)}}function Jt(e,t){return t??=i,!!t&&(typeof e==`number`||ae.test(e))&&e>-1&&e%1==0&&e<t}function Yt(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}function Xt(e){return!!Se&&Se in e}function Zt(e){var t=e&&e.constructor,n=typeof t==`function`&&t.prototype||be;return e===n}function Qt(e){if(e!=null){try{return Ce.call(e)}catch{}try{return e+``}catch{}}return``}function $t(e){return wt(e,!0,!0)}function en(e,t){return e===t||e!==e&&t!==t}function tn(e){return an(e)&&we.call(e,`callee`)&&(!Me.call(e,`callee`)||Te.call(e)==a)}var nn=Array.isArray;function rn(e){return e!=null&&cn(e.length)&&!sn(e)}function an(e){return un(e)&&rn(e)}var on=Fe||pn;function sn(e){var t=ln(e)?Te.call(e):``;return t==u||t==d}function cn(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=i}function ln(e){var t=typeof e;return!!e&&(t==`object`||t==`function`)}function un(e){return!!e&&typeof e==`object`}function dn(e){return rn(e)?bt(e):kt(e)}function fn(){return[]}function pn(){return!1}t.exports=$t})),ob=o(((e,t)=>{var n=200,r=`__lodash_hash_undefined__`,i=1,a=2,o=9007199254740991,s=`[object Arguments]`,c=`[object Array]`,l=`[object AsyncFunction]`,u=`[object Boolean]`,d=`[object Date]`,f=`[object Error]`,p=`[object Function]`,m=`[object GeneratorFunction]`,h=`[object Map]`,g=`[object Number]`,_=`[object Null]`,v=`[object Object]`,y=`[object Promise]`,b=`[object Proxy]`,x=`[object RegExp]`,S=`[object Set]`,C=`[object String]`,w=`[object Symbol]`,T=`[object Undefined]`,E=`[object WeakMap]`,D=`[object ArrayBuffer]`,O=`[object DataView]`,ee=`[object Float32Array]`,te=`[object Float64Array]`,ne=`[object Int8Array]`,k=`[object Int16Array]`,re=`[object Int32Array]`,ie=`[object Uint8Array]`,ae=`[object Uint8ClampedArray]`,A=`[object Uint16Array]`,j=`[object Uint32Array]`,oe=/[\\^$.*+?()[\]{}|]/g,se=/^\[object .+?Constructor\]$/,ce=/^(?:0|[1-9]\d*)$/,M={};M[ee]=M[te]=M[ne]=M[k]=M[re]=M[ie]=M[ae]=M[A]=M[j]=!0,M[s]=M[c]=M[D]=M[u]=M[O]=M[d]=M[f]=M[p]=M[h]=M[g]=M[v]=M[x]=M[S]=M[C]=M[E]=!1;var le=typeof global==`object`&&global&&global.Object===Object&&global,N=typeof self==`object`&&self&&self.Object===Object&&self,P=le||N||Function(`return this`)(),F=typeof e==`object`&&e&&!e.nodeType&&e,ue=F&&typeof t==`object`&&t&&!t.nodeType&&t,de=ue&&ue.exports===F,fe=de&&le.process,pe=function(){try{return fe&&fe.binding&&fe.binding(`util`)}catch{}}(),me=pe&&pe.isTypedArray;function he(e,t){for(var n=-1,r=e==null?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function ge(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function _e(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ve(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function ye(e){return function(t){return e(t)}}function be(e,t){return e.has(t)}function xe(e,t){return e?.[t]}function Se(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function Ce(e,t){return function(n){return e(t(n))}}function we(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var Te=Array.prototype,Ee=Function.prototype,De=Object.prototype,Oe=P[`__core-js_shared__`],ke=Ee.toString,Ae=De.hasOwnProperty,je=function(){var e=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}(),Me=De.toString,Ne=RegExp(`^`+ke.call(Ae).replace(oe,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`),Pe=de?P.Buffer:void 0,Fe=P.Symbol,Ie=P.Uint8Array,Le=De.propertyIsEnumerable,Re=Te.splice,ze=Fe?Fe.toStringTag:void 0,Be=Object.getOwnPropertySymbols,Ve=Pe?Pe.isBuffer:void 0,He=Ce(Object.keys,Object),Ue=Ut(P,`DataView`),We=Ut(P,`Map`),Ge=Ut(P,`Promise`),Ke=Ut(P,`Set`),qe=Ut(P,`WeakMap`),Je=Ut(Object,`create`),Ye=Qt(Ue),Xe=Qt(We),Ze=Qt(Ge),Qe=Qt(Ke),$e=Qt(qe),et=Fe?Fe.prototype:void 0,tt=et?et.valueOf:void 0;function nt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function rt(){this.__data__=Je?Je(null):{},this.size=0}function it(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function at(e){var t=this.__data__;if(Je){var n=t[e];return n===r?void 0:n}return Ae.call(t,e)?t[e]:void 0}function ot(e){var t=this.__data__;return Je?t[e]!==void 0:Ae.call(t,e)}function st(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Je&&t===void 0?r:t,this}nt.prototype.clear=rt,nt.prototype.delete=it,nt.prototype.get=at,nt.prototype.has=ot,nt.prototype.set=st;function ct(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function lt(){this.__data__=[],this.size=0}function ut(e){var t=this.__data__,n=At(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Re.call(t,n,1),--this.size,!0}function dt(e){var t=this.__data__,n=At(t,e);return n<0?void 0:t[n][1]}function ft(e){return At(this.__data__,e)>-1}function pt(e,t){var n=this.__data__,r=At(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}ct.prototype.clear=lt,ct.prototype.delete=ut,ct.prototype.get=dt,ct.prototype.has=ft,ct.prototype.set=pt;function mt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ht(){this.size=0,this.__data__={hash:new nt,map:new(We||ct),string:new nt}}function gt(e){var t=Ht(this,e).delete(e);return this.size-=t?1:0,t}function _t(e){return Ht(this,e).get(e)}function vt(e){return Ht(this,e).has(e)}function yt(e,t){var n=Ht(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}mt.prototype.clear=ht,mt.prototype.delete=gt,mt.prototype.get=_t,mt.prototype.has=vt,mt.prototype.set=yt;function bt(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new mt;++t<n;)this.add(e[t])}function xt(e){return this.__data__.set(e,r),this}function St(e){return this.__data__.has(e)}bt.prototype.add=bt.prototype.push=xt,bt.prototype.has=St;function Ct(e){this.size=(this.__data__=new ct(e)).size}function wt(){this.__data__=new ct,this.size=0}function Tt(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Et(e){return this.__data__.get(e)}function Dt(e){return this.__data__.has(e)}function Ot(e,t){var r=this.__data__;if(r instanceof ct){var i=r.__data__;if(!We||i.length<n-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new mt(i)}return r.set(e,t),this.size=r.size,this}Ct.prototype.clear=wt,Ct.prototype.delete=Tt,Ct.prototype.get=Et,Ct.prototype.has=Dt,Ct.prototype.set=Ot;function kt(e,t){var n=tn(e),r=!n&&en(e),i=!n&&!r&&rn(e),a=!n&&!r&&!i&&un(e),o=n||r||i||a,s=o?ve(e.length,String):[],c=s.length;for(var l in e)(t||Ae.call(e,l))&&!(o&&(l==`length`||i&&(l==`offset`||l==`parent`)||a&&(l==`buffer`||l==`byteLength`||l==`byteOffset`)||qt(l,c)))&&s.push(l);return s}function At(e,t){for(var n=e.length;n--;)if($t(e[n][0],t))return n;return-1}function jt(e,t,n){var r=t(e);return tn(e)?r:ge(r,n(e))}function Mt(e){return e==null?e===void 0?T:_:ze&&ze in Object(e)?Wt(e):Zt(e)}function Nt(e){return ln(e)&&Mt(e)==s}function I(e,t,n,r,i){return e===t?!0:e==null||t==null||!ln(e)&&!ln(t)?e!==e&&t!==t:Pt(e,t,n,r,I,i)}function Pt(e,t,n,r,a,o){var l=tn(e),u=tn(t),d=l?c:Kt(e),f=u?c:Kt(t);d=d==s?v:d,f=f==s?v:f;var p=d==v,m=f==v,h=d==f;if(h&&rn(e)){if(!rn(t))return!1;l=!0,p=!1}if(h&&!p)return o||=new Ct,l||un(e)?Rt(e,t,n,r,a,o):zt(e,t,d,n,r,a,o);if(!(n&i)){var g=p&&Ae.call(e,`__wrapped__`),_=m&&Ae.call(t,`__wrapped__`);if(g||_){var y=g?e.value():e,b=_?t.value():t;return o||=new Ct,a(y,b,n,r,o)}}return h?(o||=new Ct,Bt(e,t,n,r,a,o)):!1}function Ft(e){return!cn(e)||Yt(e)?!1:(on(e)?Ne:se).test(Qt(e))}function It(e){return ln(e)&&sn(e.length)&&!!M[Mt(e)]}function Lt(e){if(!Xt(e))return He(e);var t=[];for(var n in Object(e))Ae.call(e,n)&&n!=`constructor`&&t.push(n);return t}function Rt(e,t,n,r,o,s){var c=n&i,l=e.length,u=t.length;if(l!=u&&!(c&&u>l))return!1;var d=s.get(e);if(d&&s.get(t))return d==t;var f=-1,p=!0,m=n&a?new bt:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var h=e[f],g=t[f];if(r)var _=c?r(g,h,f,t,e,s):r(h,g,f,e,t,s);if(_!==void 0){if(_)continue;p=!1;break}if(m){if(!_e(t,function(e,t){if(!be(m,t)&&(h===e||o(h,e,n,r,s)))return m.push(t)})){p=!1;break}}else if(!(h===g||o(h,g,n,r,s))){p=!1;break}}return s.delete(e),s.delete(t),p}function zt(e,t,n,r,o,s,c){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!s(new Ie(e),new Ie(t)));case u:case d:case g:return $t(+e,+t);case f:return e.name==t.name&&e.message==t.message;case x:case C:return e==t+``;case h:var l=Se;case S:var p=r&i;if(l||=we,e.size!=t.size&&!p)return!1;var m=c.get(e);if(m)return m==t;r|=a,c.set(e,t);var _=Rt(l(e),l(t),r,o,s,c);return c.delete(e),_;case w:if(tt)return tt.call(e)==tt.call(t)}return!1}function Bt(e,t,n,r,a,o){var s=n&i,c=Vt(e),l=c.length,u=Vt(t).length;if(l!=u&&!s)return!1;for(var d=l;d--;){var f=c[d];if(!(s?f in t:Ae.call(t,f)))return!1}var p=o.get(e);if(p&&o.get(t))return p==t;var m=!0;o.set(e,t),o.set(t,e);for(var h=s;++d<l;){f=c[d];var g=e[f],_=t[f];if(r)var v=s?r(_,g,f,t,e,o):r(g,_,f,e,t,o);if(!(v===void 0?g===_||a(g,_,n,r,o):v)){m=!1;break}h||=f==`constructor`}if(m&&!h){var y=e.constructor,b=t.constructor;y!=b&&`constructor`in e&&`constructor`in t&&!(typeof y==`function`&&y instanceof y&&typeof b==`function`&&b instanceof b)&&(m=!1)}return o.delete(e),o.delete(t),m}function Vt(e){return jt(e,dn,Gt)}function Ht(e,t){var n=e.__data__;return Jt(t)?n[typeof t==`string`?`string`:`hash`]:n.map}function Ut(e,t){var n=xe(e,t);return Ft(n)?n:void 0}function Wt(e){var t=Ae.call(e,ze),n=e[ze];try{e[ze]=void 0;var r=!0}catch{}var i=Me.call(e);return r&&(t?e[ze]=n:delete e[ze]),i}var Gt=Be?function(e){return e==null?[]:(e=Object(e),he(Be(e),function(t){return Le.call(e,t)}))}:fn,Kt=Mt;(Ue&&Kt(new Ue(new ArrayBuffer(1)))!=O||We&&Kt(new We)!=h||Ge&&Kt(Ge.resolve())!=y||Ke&&Kt(new Ke)!=S||qe&&Kt(new qe)!=E)&&(Kt=function(e){var t=Mt(e),n=t==v?e.constructor:void 0,r=n?Qt(n):``;if(r)switch(r){case Ye:return O;case Xe:return h;case Ze:return y;case Qe:return S;case $e:return E}return t});function qt(e,t){return t??=o,!!t&&(typeof e==`number`||ce.test(e))&&e>-1&&e%1==0&&e<t}function Jt(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}function Yt(e){return!!je&&je in e}function Xt(e){var t=e&&e.constructor,n=typeof t==`function`&&t.prototype||De;return e===n}function Zt(e){return Me.call(e)}function Qt(e){if(e!=null){try{return ke.call(e)}catch{}try{return e+``}catch{}}return``}function $t(e,t){return e===t||e!==e&&t!==t}var en=Nt(function(){return arguments}())?Nt:function(e){return ln(e)&&Ae.call(e,`callee`)&&!Le.call(e,`callee`)},tn=Array.isArray;function nn(e){return e!=null&&sn(e.length)&&!on(e)}var rn=Ve||pn;function an(e,t){return I(e,t)}function on(e){if(!cn(e))return!1;var t=Mt(e);return t==p||t==m||t==l||t==b}function sn(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=o}function cn(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}function ln(e){return typeof e==`object`&&!!e}var un=me?ye(me):It;function dn(e){return nn(e)?kt(e):Lt(e)}function fn(){return[]}function pn(){return!1}t.exports=an})),sb=o((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=ab(),n=ob(),r;(function(e){function r(e={},n={},r=!1){typeof e!=`object`&&(e={}),typeof n!=`object`&&(n={});let i=t(n);for(let t in r||(i=Object.keys(i).reduce((e,t)=>(i[t]!=null&&(e[t]=i[t]),e),{})),e)e[t]!==void 0&&n[t]===void 0&&(i[t]=e[t]);return Object.keys(i).length>0?i:void 0}e.compose=r;function i(e={},t={}){typeof e!=`object`&&(e={}),typeof t!=`object`&&(t={});let r=Object.keys(e).concat(Object.keys(t)).reduce((r,i)=>(n(e[i],t[i])||(r[i]=t[i]===void 0?null:t[i]),r),{});return Object.keys(r).length>0?r:void 0}e.diff=i;function a(e={},t={}){e||={};let n=Object.keys(t).reduce((n,r)=>(t[r]!==e[r]&&e[r]!==void 0&&(n[r]=t[r]),n),{});return Object.keys(e).reduce((n,r)=>(e[r]!==t[r]&&t[r]===void 0&&(n[r]=null),n),n)}e.invert=a;function o(e,t,n=!1){if(typeof e!=`object`)return t;if(typeof t!=`object`)return;if(!n)return t;let r=Object.keys(t).reduce((n,r)=>(e[r]===void 0&&(n[r]=t[r]),n),{});return Object.keys(r).length>0?r:void 0}e.transform=o})(r||={}),e.default=r})),cb=o((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t;(function(e){function t(e){return typeof e.delete==`number`?e.delete:typeof e.retain==`number`?e.retain:typeof e.retain==`object`&&e.retain!==null?1:typeof e.insert==`string`?e.insert.length:1}e.length=t})(t||={}),e.default=t})),lb=o((e=>{Object.defineProperty(e,`__esModule`,{value:!0});var t=cb();e.default=class{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||=1/0;let n=this.ops[this.index];if(n){let r=this.offset,i=t.default.length(n);if(e>=i-r?(e=i-r,this.index+=1,this.offset=0):this.offset+=e,typeof n.delete==`number`)return{delete:e};{let t={};return n.attributes&&(t.attributes=n.attributes),typeof n.retain==`number`?t.retain=e:typeof n.retain==`object`&&n.retain!==null?t.retain=n.retain:typeof n.insert==`string`?t.insert=n.insert.substr(r,e):t.insert=n.insert,t}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){let e=this.ops[this.index];return e?typeof e.delete==`number`?`delete`:typeof e.retain==`number`||typeof e.retain==`object`&&e.retain!==null?`retain`:`insert`:`retain`}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{let e=this.offset,t=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(r)}}else return[]}}})),ub=o(((e,t)=>{Object.defineProperty(e,`__esModule`,{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;var n=ib(),r=ab(),i=ob(),a=sb();e.AttributeMap=a.default;var o=cb();e.Op=o.default;var s=lb();e.OpIterator=s.default;var c=`\0`,l=(e,t)=>{if(typeof e!=`object`||!e)throw Error(`cannot retain a ${typeof e}`);if(typeof t!=`object`||!t)throw Error(`cannot retain a ${typeof t}`);let n=Object.keys(e)[0];if(!n||n!==Object.keys(t)[0])throw Error(`embed types not matched: ${n} != ${Object.keys(t)[0]}`);return[n,e[n],t[n]]},u=class e{constructor(e){Array.isArray(e)?this.ops=e:e!=null&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}static registerEmbed(e,t){this.handlers[e]=t}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){let t=this.handlers[e];if(!t)throw Error(`no handlers for embed type "${e}"`);return t}insert(e,t){let n={};return typeof e==`string`&&e.length===0?this:(n.insert=e,typeof t==`object`&&t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,t){if(typeof e==`number`&&e<=0)return this;let n={retain:e};return typeof t==`object`&&t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)}push(e){let t=this.ops.length,n=this.ops[t-1];if(e=r(e),typeof n==`object`){if(typeof e.delete==`number`&&typeof n.delete==`number`)return this.ops[t-1]={delete:n.delete+e.delete},this;if(typeof n.delete==`number`&&e.insert!=null&&(--t,n=this.ops[t-1],typeof n!=`object`))return this.ops.unshift(e),this;if(i(e.attributes,n.attributes)){if(typeof e.insert==`string`&&typeof n.insert==`string`)return this.ops[t-1]={insert:n.insert+e.insert},typeof e.attributes==`object`&&(this.ops[t-1].attributes=e.attributes),this;if(typeof e.retain==`number`&&typeof n.retain==`number`)return this.ops[t-1]={retain:n.retain+e.retain},typeof e.attributes==`object`&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this}chop(){let e=this.ops[this.ops.length-1];return e&&typeof e.retain==`number`&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){let t=[],n=[];return this.forEach(r=>{(e(r)?t:n).push(r)}),[t,n]}reduce(e,t){return this.ops.reduce(e,t)}changeLength(){return this.reduce((e,t)=>t.insert?e+o.default.length(t):t.delete?e-t.delete:e,0)}length(){return this.reduce((e,t)=>e+o.default.length(t),0)}slice(t=0,n=1/0){let r=[],i=new s.default(this.ops),a=0;for(;a<n&&i.hasNext();){let e;a<t?e=i.next(t-a):(e=i.next(n-a),r.push(e)),a+=o.default.length(e)}return new e(r)}compose(t){let n=new s.default(this.ops),r=new s.default(t.ops),o=[],c=r.peek();if(c!=null&&typeof c.retain==`number`&&c.attributes==null){let e=c.retain;for(;n.peekType()===`insert`&&n.peekLength()<=e;)e-=n.peekLength(),o.push(n.next());c.retain-e>0&&r.next(c.retain-e)}let u=new e(o);for(;n.hasNext()||r.hasNext();)if(r.peekType()===`insert`)u.push(r.next());else if(n.peekType()===`delete`)u.push(n.next());else{let t=Math.min(n.peekLength(),r.peekLength()),o=n.next(t),s=r.next(t);if(s.retain){let c={};if(typeof o.retain==`number`)c.retain=typeof s.retain==`number`?t:s.retain;else if(typeof s.retain==`number`)o.retain==null?c.insert=o.insert:c.retain=o.retain;else{let t=o.retain==null?`insert`:`retain`,[n,r,i]=l(o[t],s.retain),a=e.getHandler(n);c[t]={[n]:a.compose(r,i,t===`retain`)}}let d=a.default.compose(o.attributes,s.attributes,typeof o.retain==`number`);if(d&&(c.attributes=d),u.push(c),!r.hasNext()&&i(u.ops[u.ops.length-1],c)){let t=new e(n.rest());return u.concat(t).chop()}}else typeof s.delete==`number`&&(typeof o.retain==`number`||typeof o.retain==`object`&&o.retain!==null)&&u.push(s)}return u.chop()}concat(t){let n=new e(this.ops.slice());return t.ops.length>0&&(n.push(t.ops[0]),n.ops=n.ops.concat(t.ops.slice(1))),n}diff(t,r){if(this.ops===t.ops)return new e;let o=[this,t].map(e=>e.map(n=>{if(n.insert!=null)return typeof n.insert==`string`?n.insert:c;let r=e===t?`on`:`with`;throw Error(`diff() called `+r+` non-document`)}).join(``)),l=new e,u=n(o[0],o[1],r,!0),d=new s.default(this.ops),f=new s.default(t.ops);return u.forEach(e=>{let t=e[1].length;for(;t>0;){let r=0;switch(e[0]){case n.INSERT:r=Math.min(f.peekLength(),t),l.push(f.next(r));break;case n.DELETE:r=Math.min(t,d.peekLength()),d.next(r),l.delete(r);break;case n.EQUAL:r=Math.min(d.peekLength(),f.peekLength(),t);let e=d.next(r),o=f.next(r);i(e.insert,o.insert)?l.retain(r,a.default.diff(e.attributes,o.attributes)):l.push(o).delete(r);break}t-=r}}),l.chop()}eachLine(t,n=`
`){let r=new s.default(this.ops),i=new e,a=0;for(;r.hasNext();){if(r.peekType()!==`insert`)return;let s=r.peek(),c=o.default.length(s)-r.peekLength(),l=typeof s.insert==`string`?s.insert.indexOf(n,c)-c:-1;if(l<0)i.push(r.next());else if(l>0)i.push(r.next(l));else{if(t(i,r.next(1).attributes||{},a)===!1)return;a+=1,i=new e}}i.length()>0&&t(i,{},a)}invert(t){let n=new e;return this.reduce((r,i)=>{if(i.insert)n.delete(o.default.length(i));else if(typeof i.retain==`number`&&i.attributes==null)return n.retain(i.retain),r+i.retain;else if(i.delete||typeof i.retain==`number`){let e=i.delete||i.retain;return t.slice(r,r+e).forEach(e=>{i.delete?n.push(e):i.retain&&i.attributes&&n.retain(o.default.length(e),a.default.invert(i.attributes,e.attributes))}),r+e}else if(typeof i.retain==`object`&&i.retain!==null){let o=t.slice(r,r+1),c=new s.default(o.ops).next(),[u,d,f]=l(i.retain,c.insert),p=e.getHandler(u);return n.retain({[u]:p.invert(d,f)},a.default.invert(i.attributes,c.attributes)),r+1}return r},0),n.chop()}transform(t,n=!1){if(n=!!n,typeof t==`number`)return this.transformPosition(t,n);let r=t,i=new s.default(this.ops),c=new s.default(r.ops),l=new e;for(;i.hasNext()||c.hasNext();)if(i.peekType()===`insert`&&(n||c.peekType()!==`insert`))l.retain(o.default.length(i.next()));else if(c.peekType()===`insert`)l.push(c.next());else{let t=Math.min(i.peekLength(),c.peekLength()),r=i.next(t),o=c.next(t);if(r.delete)continue;if(o.delete)l.push(o);else{let i=r.retain,s=o.retain,c=typeof s==`object`&&s?s:t;if(typeof i==`object`&&i&&typeof s==`object`&&s){let t=Object.keys(i)[0];if(t===Object.keys(s)[0]){let r=e.getHandler(t);r&&(c={[t]:r.transform(i[t],s[t],n)})}}l.retain(c,a.default.transform(r.attributes,o.attributes,n))}}return l.chop()}transformPosition(e,t=!1){t=!!t;let n=new s.default(this.ops),r=0;for(;n.hasNext()&&r<=e;){let i=n.peekLength(),a=n.peekType();if(n.next(),a===`delete`){e-=Math.min(i,e-r);continue}else a===`insert`&&(r<e||!t)&&(e+=i);r+=i}return e}};u.Op=o.default,u.OpIterator=s.default,u.AttributeMap=a.default,u.handlers={},e.default=u,typeof t==`object`&&(t.exports=u,t.exports.default=u)})),db=l(ub()),fb=class extends Zy{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return``}};fb.blotName=`break`,fb.tagName=`BR`;var pb=fb,mb=class extends rb{},hb={"&":`&amp;`,"<":`&lt;`,">":`&gt;`,'"':`&quot;`,"'":`&#39;`};function gb(e){return e.replace(/[&<>"']/g,e=>hb[e])}var _b=class e extends Ky{static allowedChildren=[e,pb,Zy,mb];static order=[`cursor`,`inline`,`link`,`underline`,`strike`,`italic`,`bold`,`script`,`code`];static compare(t,n){let r=e.order.indexOf(t),i=e.order.indexOf(n);return r>=0||i>=0?r-i:t===n?0:t<n?-1:1}formatAt(t,n,r,i){if(e.compare(this.statics.blotName,r)<0&&this.scroll.query(r,V.BLOT)){let e=this.isolate(t,n);i&&e.wrap(r,i)}else super.formatAt(t,n,r,i)}optimize(t){if(super.optimize(t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){let e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}},vb=1,yb=class extends Jy{cache={};delta(){return this.cache.delta??(this.cache.delta=xb(this)),this.cache.delta}deleteAt(e,t){super.deleteAt(e,t),this.cache={}}formatAt(e,t,n,r){t<=0||(this.scroll.query(n,V.BLOCK)?e+t===this.length()&&this.format(n,r):super.formatAt(e,Math.min(t,this.length()-e-1),n,r),this.cache={})}insertAt(e,t,n){if(n!=null){super.insertAt(e,t,n),this.cache={};return}if(t.length===0)return;let r=t.split(`
`),i=r.shift();i.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),i):this.children.tail.insertAt(this.children.tail.length(),i),this.cache={});let a=this;r.reduce((e,t)=>(a=a.split(e,!0),a.insertAt(0,t),t.length),e+i.length)}insertBefore(e,t){let{head:n}=this.children;super.insertBefore(e,t),n instanceof pb&&n.remove(),this.cache={}}length(){return this.cache.length??(this.cache.length=super.length()+vb),this.cache.length}moveChildren(e,t){super.moveChildren(e,t),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t&&(e===0||e>=this.length()-vb)){let t=this.clone();return e===0?(this.parent.insertBefore(t,this),this):(this.parent.insertBefore(t,this.next),t)}let n=super.split(e,t);return this.cache={},n}};yb.blotName=`block`,yb.tagName=`P`,yb.defaultChild=pb,yb.allowedChildren=[pb,_b,Zy,mb];var bb=class extends Zy{attach(){super.attach(),this.attributes=new Fy(this.domNode)}delta(){return new db.default().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,t){let n=this.scroll.query(e,V.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,t)}formatAt(e,t,n,r){this.format(n,r)}insertAt(e,t,n){if(n!=null){super.insertAt(e,t,n);return}let r=t.split(`
`),i=r.pop(),a=r.map(e=>{let t=this.scroll.create(yb.blotName);return t.insertAt(0,e),t}),o=this.split(e);a.forEach(e=>{this.parent.insertBefore(e,o)}),i&&this.parent.insertBefore(this.scroll.create(`text`,i),o)}};bb.scope=V.BLOCK_BLOT;function xb(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return e.descendants(zy).reduce((e,n)=>n.length()===0?e:e.insert(n.value(),Sb(n,{},t)),new db.default).insert(`
`,Sb(e))}function Sb(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e==null||(`formats`in e&&typeof e.formats==`function`&&(t={...t,...e.formats()},n&&delete t[`code-token`]),e.parent==null||e.parent.statics.blotName===`scroll`||e.parent.statics.scope!==e.statics.scope)?t:Sb(e.parent,t,n)}var Cb=class e extends Zy{static blotName=`cursor`;static className=`ql-cursor`;static tagName=`span`;static CONTENTS=``;static value(){}constructor(t,n,r){super(t,n),this.selection=r,this.textNode=document.createTextNode(e.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,n){if(this.savedLength!==0){super.format(t,n);return}let r=this,i=0;for(;r!=null&&r.statics.scope!==V.BLOCK_BLOT;)i+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=e.CONTENTS.length,r.optimize(),r.formatAt(i,e.CONTENTS.length,t,n),this.savedLength=0)}index(e,t){return e===this.textNode?0:super.index(e,t)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;let t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);let n=this.prev instanceof mb?this.prev:null,r=n?n.length():0,i=this.next instanceof mb?this.next:null,a=i?i.text:``,{textNode:o}=this,s=o.data.split(e.CONTENTS).join(``);o.data=e.CONTENTS;let c;if(n)c=n,(s||i)&&(n.insertAt(n.length(),s+a),i&&i.remove());else if(i)c=i,i.insertAt(0,s);else{let e=document.createTextNode(s);c=this.scroll.create(e),this.parent.insertBefore(c,this)}if(this.remove(),t){let e=(e,t)=>n&&e===n.domNode?t:e===o?r+t-1:i&&e===i.domNode?r+s.length+t:null,a=e(t.start.node,t.start.offset),l=e(t.end.node,t.end.offset);if(a!==null&&l!==null)return{startNode:c.domNode,startOffset:a,endNode:c.domNode,endOffset:l}}return null}update(e,t){if(e.some(e=>e.type===`characterData`&&e.target===this.textNode)){let e=this.restore();e&&(t.range=e)}}optimize(t){super.optimize(t);let{parent:n}=this;for(;n;){if(n.domNode.tagName===`A`){this.savedLength=e.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return``}},wb=l(o(((e,t)=>{var n=Object.prototype.hasOwnProperty,r=`~`;function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if(typeof n!=`function`)throw TypeError(`The listener must be a function`);var s=new a(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function s(e,t){--e._eventsCount===0?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)n.call(t,i)&&e.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,o=Array(a);i<a;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var c=this._events[s],l=arguments.length,u,d;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,o),!0}for(d=1,u=Array(l-1);d<l;d++)u[d-1]=arguments[d];c.fn.apply(c.context,u)}else{var f=c.length,p;for(d=0;d<f;d++)switch(c[d].once&&this.removeListener(e,c[d].fn,void 0,!0),l){case 1:c[d].fn.call(c[d].context);break;case 2:c[d].fn.call(c[d].context,t);break;case 3:c[d].fn.call(c[d].context,t,n);break;case 4:c[d].fn.call(c[d].context,t,n,i);break;default:if(!u)for(p=1,u=Array(l-1);p<l;p++)u[p-1]=arguments[p];c[d].fn.apply(c[d].context,u)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn===t&&(!i||o.once)&&(!n||o.context===n)&&s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);l.length?this._events[a]=l.length===1?l[0]:l:s(this,a)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t!==void 0&&(t.exports=c)}))(),1),Tb=new WeakMap,Eb=[`error`,`warn`,`log`,`info`],Db=`warn`;function Ob(e){if(Db&&Eb.indexOf(e)<=Eb.indexOf(Db)){var t=[...arguments].slice(1);console[e](...t)}}function kb(e){return Eb.reduce((t,n)=>(t[n]=Ob.bind(console,n,e),t),{})}kb.level=e=>{Db=e},Ob.level=kb.level;var Ab=kb,jb=Ab(`quill:events`);[`selectionchange`,`mousedown`,`mouseup`,`click`].forEach(e=>{document.addEventListener(e,function(){var e=[...arguments];Array.from(document.querySelectorAll(`.ql-container`)).forEach(t=>{let n=Tb.get(t);n&&n.emitter&&n.emitter.handleDOM(...e)})})});var H=class extends wb.default{static events={EDITOR_CHANGE:`editor-change`,SCROLL_BEFORE_UPDATE:`scroll-before-update`,SCROLL_BLOT_MOUNT:`scroll-blot-mount`,SCROLL_BLOT_UNMOUNT:`scroll-blot-unmount`,SCROLL_OPTIMIZE:`scroll-optimize`,SCROLL_UPDATE:`scroll-update`,SCROLL_EMBED_UPDATE:`scroll-embed-update`,SELECTION_CHANGE:`selection-change`,TEXT_CHANGE:`text-change`,COMPOSITION_BEFORE_START:`composition-before-start`,COMPOSITION_START:`composition-start`,COMPOSITION_BEFORE_END:`composition-before-end`,COMPOSITION_END:`composition-end`};static sources={API:`api`,SILENT:`silent`,USER:`user`};constructor(){super(),this.domListeners={},this.on(`error`,jb.error)}emit(){var e=[...arguments];return jb.log.call(jb,...e),super.emit(...e)}handleDOM(e){var t=[...arguments].slice(1);(this.domListeners[e.type]||[]).forEach(n=>{let{node:r,handler:i}=n;(e.target===r||r.contains(e.target))&&i(e,...t)})}listenDOM(e,t,n){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:t,handler:n})}},Mb=Ab(`quill:selection`),Nb=class{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=t}},Pb=class{constructor(e,t){this.emitter=t,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create(`cursor`,this),this.savedRange=new Nb(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM(`selectionchange`,document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,H.sources.USER),1)}),this.emitter.on(H.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;let e=this.getNativeRange();e!=null&&e.start.node!==this.cursor.textNode&&this.emitter.once(H.events.SCROLL_UPDATE,(t,n)=>{try{this.root.contains(e.start.node)&&this.root.contains(e.end.node)&&this.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset);let r=n.some(e=>e.type===`characterData`||e.type===`childList`||e.type===`attributes`&&e.target===this.root);this.update(r?H.sources.SILENT:t)}catch{}})}),this.emitter.on(H.events.SCROLL_OPTIMIZE,(e,t)=>{if(t.range){let{startNode:e,startOffset:n,endNode:r,endOffset:i}=t.range;this.setNativeRange(e,n,r,i),this.update(H.sources.SILENT)}}),this.update(H.sources.SILENT)}handleComposition(){this.emitter.on(H.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(H.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){let e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM(`mousedown`,document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM(`mouseup`,document.body,()=>{this.mouseDown=!1,this.update(H.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,t){this.scroll.update();let n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(e,V.BLOCK))){if(n.start.node!==this.cursor.textNode){let e=this.scroll.find(n.start.node,!1);if(e==null)return;if(e instanceof zy){let t=e.split(n.start.offset);e.parent.insertBefore(this.cursor,t)}else e.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;let r,[i,a]=this.scroll.leaf(e);if(i==null)return null;if(t>0&&a===i.length()){let[t]=this.scroll.leaf(e+1);if(t){let[n]=this.scroll.line(e),[r]=this.scroll.line(e+1);n===r&&(i=t,a=0)}}[r,a]=i.position(a,!0);let o=document.createRange();if(t>0)return o.setStart(r,a),[i,a]=this.scroll.leaf(e+t),i==null?null:([r,a]=i.position(a,!0),o.setEnd(r,a),o.getBoundingClientRect());let s=`left`,c;if(r instanceof Text){if(!r.data.length)return null;a<r.data.length?(o.setStart(r,a),o.setEnd(r,a+1)):(o.setStart(r,a-1),o.setEnd(r,a),s=`right`),c=o.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;c=i.domNode.getBoundingClientRect(),a>0&&(s=`right`)}return{bottom:c.top+c.height,height:c.height,left:c[s],right:c[s],top:c.top,width:0}}getNativeRange(){let e=document.getSelection();if(e==null||e.rangeCount<=0)return null;let t=e.getRangeAt(0);if(t==null)return null;let n=this.normalizeNative(t);return Mb.info(`getNativeRange`,n),n}getRange(){let e=this.scroll.domNode;if(`isConnected`in e&&!e.isConnected)return[null,null];let t=this.getNativeRange();return t==null?[null,null]:[this.normalizedToRange(t),t]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Fb(this.root,document.activeElement)}normalizedToRange(e){let t=[[e.start.node,e.start.offset]];e.native.collapsed||t.push([e.end.node,e.end.offset]);let n=t.map(e=>{let[t,n]=e,r=this.scroll.find(t,!0),i=r.offset(this.scroll);return n===0?i:r instanceof zy?i+r.index(t,n):i+r.length()}),r=Math.min(Math.max(...n),this.scroll.length()-1),i=Math.min(r,...n);return new Nb(i,r-i)}normalizeNative(e){if(!Fb(this.root,e.startContainer)||!e.collapsed&&!Fb(this.root,e.endContainer))return null;let t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(e=>{let{node:t,offset:n}=e;for(;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>n)t=t.childNodes[n],n=0;else if(t.childNodes.length===n)t=t.lastChild,n=t instanceof Text?t.data.length:t.childNodes.length>0?t.childNodes.length:t.childNodes.length+1;else break;e.node=t,e.offset=n}),t}rangeToNative(e){let t=this.scroll.length(),n=(e,n)=>{e=Math.min(t-1,e);let[r,i]=this.scroll.leaf(e);return r?r.position(i,n):[null,-1]};return[...n(e.index,!1),...n(e.index+e.length,!0)]}setNativeRange(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Mb.info(`setNativeRange`,e,t,n,r),e!=null&&(this.root.parentNode==null||e.parentNode==null||n.parentNode==null))return;let a=document.getSelection();if(a!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});let{native:o}=this.getNativeRange()||{};if(o==null||i||e!==o.startContainer||t!==o.startOffset||n!==o.endContainer||r!==o.endOffset){e instanceof Element&&e.tagName===`BR`&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),n instanceof Element&&n.tagName===`BR`&&(r=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);let i=document.createRange();i.setStart(e,t),i.setEnd(n,r),a.removeAllRanges(),a.addRange(i)}}else a.removeAllRanges(),this.root.blur()}setRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H.sources.API;if(typeof t==`string`&&(n=t,t=!1),Mb.info(`setRange`,e),e!=null){let n=this.rangeToNative(e);this.setNativeRange(...n,t)}else this.setNativeRange(null);this.update(n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H.sources.USER,t=this.lastRange,[n,r]=this.getRange();if(this.lastRange=n,this.lastNative=r,this.lastRange!=null&&(this.savedRange=this.lastRange),!wy(t,this.lastRange)){if(!this.composing&&r!=null&&r.native.collapsed&&r.start.node!==this.cursor.textNode){let e=this.cursor.restore();e&&this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}let n=[H.events.SELECTION_CHANGE,pv(this.lastRange),pv(t),e];this.emitter.emit(H.events.EDITOR_CHANGE,...n),e!==H.sources.SILENT&&this.emitter.emit(...n)}}};function Fb(e,t){try{t.parentNode}catch{return!1}return e.contains(t)}var Ib=Pb,Lb=l(ub()),Rb=/^[ -~]*$/,zb=class{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let t=this.scroll.length();this.scroll.batchStart();let n=Wb(e),r=new Lb.default;return Kb(n.ops.slice()).reduce((e,n)=>{let i=Lb.Op.length(n),a=n.attributes||{},o=!1,s=!1;if(n.insert!=null){if(r.retain(i),typeof n.insert==`string`){let r=n.insert;s=!r.endsWith(`
`)&&(t<=e||!!this.scroll.descendant(bb,e)[0]),this.scroll.insertAt(e,r);let[i,o]=this.scroll.line(e),c=Ty({},Sb(i));if(i instanceof yb){let[e]=i.descendant(zy,o);e&&(c=Ty(c,Sb(e)))}a=Lb.AttributeMap.diff(c,a)||{}}else if(typeof n.insert==`object`){let r=Object.keys(n.insert)[0];if(r==null)return e;let i=this.scroll.query(r,V.INLINE)!=null;if(i)(t<=e||this.scroll.descendant(bb,e)[0])&&(s=!0);else if(e>0){let[t,n]=this.scroll.descendant(zy,e-1);t instanceof mb?t.value()[n]!==`
`&&(o=!0):t instanceof Zy&&t.statics.scope===V.INLINE_BLOT&&(o=!0)}if(this.scroll.insertAt(e,r,n.insert[r]),i){let[t]=this.scroll.descendant(zy,e);if(t){let e=Ty({},Sb(t));a=Lb.AttributeMap.diff(e,a)||{}}}}t+=i}else if(r.push(n),n.retain!==null&&typeof n.retain==`object`){let t=Object.keys(n.retain)[0];if(t==null)return e;this.scroll.updateEmbedAt(e,t,n.retain[t])}Object.keys(a).forEach(t=>{this.scroll.formatAt(e,i,t,a[t])});let c=o?1:0,l=s?1:0;return t+=c+l,r.retain(c),r.delete(l),e+i+c+l},0),r.reduce((e,t)=>typeof t.delete==`number`?(this.scroll.deleteAt(e,t.delete),e):e+Lb.Op.length(t),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(e,t){return this.scroll.deleteAt(e,t),this.update(new Lb.default().retain(e).delete(t))}formatLine(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(r=>{this.scroll.lines(e,Math.max(t,1)).forEach(e=>{e.format(r,n[r])})}),this.scroll.optimize();let r=new Lb.default().retain(e).retain(t,pv(n));return this.update(r)}formatText(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(r=>{this.scroll.formatAt(e,t,r,n[r])});let r=new Lb.default().retain(e).retain(t,pv(n));return this.update(r)}getContents(e,t){return this.delta.slice(e,e+t)}getDelta(){return this.scroll.lines().reduce((e,t)=>e.concat(t.delta()),new Lb.default)}getFormat(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],r=[];t===0?this.scroll.path(e).forEach(e=>{let[t]=e;t instanceof yb?n.push(t):t instanceof zy&&r.push(t)}):(n=this.scroll.lines(e,t),r=this.scroll.descendants(zy,e,t));let[i,a]=[n,r].map(e=>{let t=e.shift();if(t==null)return{};let n=Sb(t);for(;Object.keys(n).length>0;){let t=e.shift();if(t==null)return n;n=Hb(Sb(t),n)}return n});return{...i,...a}}getHTML(e,t){let[n,r]=this.scroll.line(e);if(n){let i=n.length();return n.length()>=r+t&&!(r===0&&t===i)?Vb(n,r,t,!0):Vb(this.scroll,e,t,!0)}return``}getText(e,t){return this.getContents(e,t).filter(e=>typeof e.insert==`string`).map(e=>e.insert).join(``)}insertContents(e,t){let n=Wb(t),r=new Lb.default().retain(e).concat(n);return this.scroll.insertContents(e,n),this.update(r)}insertEmbed(e,t,n){return this.scroll.insertAt(e,t,n),this.update(new Lb.default().retain(e).insert({[t]:n}))}insertText(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t=t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,t),Object.keys(n).forEach(r=>{this.scroll.formatAt(e,t.length,r,n[r])}),this.update(new Lb.default().retain(e).insert(t,pv(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;let e=this.scroll.children.head;if(e?.statics.blotName!==yb.blotName)return!1;let t=e;return t.children.length>1?!1:t.children.head instanceof pb}removeFormat(e,t){let n=this.getText(e,t),[r,i]=this.scroll.line(e+t),a=0,o=new Lb.default;r!=null&&(a=r.length()-i,o=r.delta().slice(i,i+a-1).insert(`
`));let s=this.getContents(e,t+a).diff(new Lb.default().insert(n).concat(o)),c=new Lb.default().retain(e).concat(s);return this.applyDelta(c)}update(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=this.delta;if(t.length===1&&t[0].type===`characterData`&&t[0].target.data.match(Rb)&&this.scroll.find(t[0].target)){let i=this.scroll.find(t[0].target),a=Sb(i),o=i.offset(this.scroll),s=t[0].oldValue.replace(Cb.CONTENTS,``),c=new Lb.default().insert(s),l=new Lb.default().insert(i.value()),u=n&&{oldRange:Gb(n.oldRange,-o),newRange:Gb(n.newRange,-o)};e=new Lb.default().retain(o).concat(c.diff(l,u)).reduce((e,t)=>t.insert?e.insert(t.insert,a):e.push(t),new Lb.default),this.delta=r.compose(e)}else this.delta=this.getDelta(),(!e||!wy(r.compose(e),this.delta))&&(e=r.diff(this.delta,n));return e}};function Bb(e,t,n){if(e.length===0){let[e]=Ub(n.pop());return t<=0?`</li></${e}>`:`</li></${e}>${Bb([],t-1,n)}`}let[{child:r,offset:i,length:a,indent:o,type:s},...c]=e,[l,u]=Ub(s);if(o>t)return n.push(s),o===t+1?`<${l}><li${u}>${Vb(r,i,a)}${Bb(c,o,n)}`:`<${l}><li>${Bb(e,t+1,n)}`;let d=n[n.length-1];if(o===t&&s===d)return`</li><li${u}>${Vb(r,i,a)}${Bb(c,o,n)}`;let[f]=Ub(n.pop());return`</li></${f}>${Bb(e,t-1,n)}`}function Vb(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(`html`in e&&typeof e.html==`function`)return e.html(t,n);if(e instanceof mb)return gb(e.value().slice(t,t+n)).replaceAll(` `,`&nbsp;`);if(e instanceof Uy){if(e.statics.blotName===`list-container`){let r=[];return e.children.forEachAt(t,n,(e,t,n)=>{let i=`formats`in e&&typeof e.formats==`function`?e.formats():{};r.push({child:e,offset:t,length:n,indent:i.indent||0,type:i.list})}),Bb(r,-1,[])}let i=[];if(e.children.forEachAt(t,n,(e,t,n)=>{i.push(Vb(e,t,n))}),r||e.statics.blotName===`list`)return i.join(``);let{outerHTML:a,innerHTML:o}=e.domNode,[s,c]=a.split(`>${o}<`);return s===`<table`?`<table style="border: 1px solid #000;">${i.join(``)}<${c}`:`${s}>${i.join(``)}<${c}`}return e.domNode instanceof Element?e.domNode.outerHTML:``}function Hb(e,t){return Object.keys(t).reduce((n,r)=>{if(e[r]==null)return n;let i=t[r];return i===e[r]?n[r]=i:Array.isArray(i)?i.indexOf(e[r])<0?n[r]=i.concat([e[r]]):n[r]=i:n[r]=[i,e[r]],n},{})}function Ub(e){let t=e===`ordered`?`ol`:`ul`;switch(e){case`checked`:return[t,` data-list="checked"`];case`unchecked`:return[t,` data-list="unchecked"`];default:return[t,``]}}function Wb(e){return e.reduce((e,t)=>{if(typeof t.insert==`string`){let n=t.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(n,t.attributes)}return e.push(t)},new Lb.default)}function Gb(e,t){let{index:n,length:r}=e;return new Nb(n+t,r)}function Kb(e){let t=[];return e.forEach(e=>{typeof e.insert==`string`?e.insert.split(`
`).forEach((n,r)=>{r&&t.push({insert:`
`,attributes:e.attributes}),n&&t.push({insert:n,attributes:e.attributes})}):t.push(e)}),t}var qb=zb,Jb=class{static DEFAULTS={};constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=t}},Yb=``,Xb=class extends Zy{constructor(e,t){super(e,t),this.contentNode=document.createElement(`span`),this.contentNode.setAttribute(`contenteditable`,`false`),Array.from(this.domNode.childNodes).forEach(e=>{this.contentNode.appendChild(e)}),this.leftGuard=document.createTextNode(Yb),this.rightGuard=document.createTextNode(Yb),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,t)}restore(e){let t=null,n,r=e.data.split(Yb).join(``);if(e===this.leftGuard)if(this.prev instanceof mb){let e=this.prev.length();this.prev.insertAt(e,r),t={startNode:this.prev.domNode,startOffset:e+r.length}}else n=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(n),this),t={startNode:n,startOffset:r.length};else e===this.rightGuard&&(this.next instanceof mb?(this.next.insertAt(0,r),t={startNode:this.next.domNode,startOffset:r.length}):(n=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(n),this.next),t={startNode:n,startOffset:r.length}));return e.data=Yb,t}update(e,t){e.forEach(e=>{if(e.type===`characterData`&&(e.target===this.leftGuard||e.target===this.rightGuard)){let n=this.restore(e.target);n&&(t.range=n)}})}},Zb=class{isComposing=!1;constructor(e,t){this.scroll=e,this.emitter=t,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener(`compositionstart`,e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener(`compositionend`,e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){let t=e.target instanceof Node?this.scroll.find(e.target,!0):null;t&&!(t instanceof Xb)&&(this.emitter.emit(H.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(H.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(H.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(H.events.COMPOSITION_END,e),this.isComposing=!1}},Qb=class e{static DEFAULTS={modules:{}};static themes={default:e};modules={};constructor(e,t){this.quill=e,this.options=t}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]??this.addModule(e)})}addModule(e){let t=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}},$b=e=>e.parentElement||e.getRootNode().host||null,ex=e=>{let t=e.getBoundingClientRect(),n=`offsetWidth`in e&&Math.abs(t.width)/e.offsetWidth||1,r=`offsetHeight`in e&&Math.abs(t.height)/e.offsetHeight||1;return{top:t.top,right:t.left+e.clientWidth*n,bottom:t.top+e.clientHeight*r,left:t.left}},tx=e=>{let t=parseInt(e,10);return Number.isNaN(t)?0:t},nx=(e,t,n,r,i,a)=>e<n&&t>r?0:e<n?-(n-e+i):t>r?t-e>r-n?e+i-n:t-r+a:0,rx=(e,t)=>{let n=e.ownerDocument,r=t,i=e;for(;i;){let e=i===n.body,t=e?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:ex(i),a=getComputedStyle(i),o=nx(r.left,r.right,t.left,t.right,tx(a.scrollPaddingLeft),tx(a.scrollPaddingRight)),s=nx(r.top,r.bottom,t.top,t.bottom,tx(a.scrollPaddingTop),tx(a.scrollPaddingBottom));if(o||s)if(e)n.defaultView?.scrollBy(o,s);else{let{scrollLeft:e,scrollTop:t}=i;s&&(i.scrollTop+=s),o&&(i.scrollLeft+=o);let n=i.scrollLeft-e,a=i.scrollTop-t;r={left:r.left-n,top:r.top-a,right:r.right-n,bottom:r.bottom-a}}i=e||a.position===`fixed`?null:$b(i)}},ix=100,ax=[`block`,`break`,`cursor`,`inline`,`scroll`,`text`],ox=(e,t,n)=>{let r=new Ay;return ax.forEach(e=>{let n=t.query(e);n&&r.register(n)}),e.forEach(e=>{let i=t.query(e);i||n.error(`Cannot register "${e}" specified in "formats" config. Are you sure it was registered?`);let a=0;for(;i;)if(r.register(i),i=`blotName`in i?i.requiredContainer??null:null,a+=1,a>ix){n.error(`Cycle detected in registering blot requiredContainer: "${e}"`);break}}),r},sx=l(ub()),cx=Ab(`quill`),lx=new Ay;Uy.uiClass=`ql-ui`;var U=class e{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:``,readOnly:!1,registry:lx,theme:`default`};static events=H.events;static sources=H.sources;static version=`2.0.3`;static imports={delta:sx.default,parchment:Ey,"core/module":Jb,"core/theme":Qb};static debug(e){e===!0&&(e=`log`),Ab.level(e)}static find(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Tb.get(e)||lx.find(e,t)}static import(e){return this.imports[e]??cx.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!=`string`){let e=arguments.length<=0?void 0:arguments[0],t=!!(!(arguments.length<=1)&&arguments[1]),n=`attrName`in e?e.attrName:e.blotName;typeof n==`string`?this.register(`formats/${n}`,e,t):Object.keys(e).forEach(n=>{this.register(n,e[n],t)})}else{let e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!n&&cx.warn(`Overwriting ${e} with`,t),this.imports[e]=t,(e.startsWith(`blots/`)||e.startsWith(`formats/`))&&t&&typeof t!=`boolean`&&t.blotName!==`abstract`&&lx.register(t),typeof t.register==`function`&&t.register(lx)}}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=px(t,n),this.container=this.options.container,this.container==null){cx.error(`Invalid Quill container`,t);return}this.options.debug&&e.debug(this.options.debug);let r=this.container.innerHTML.trim();this.container.classList.add(`ql-container`),this.container.innerHTML=``,Tb.set(this.container,this),this.root=this.addContainer(`ql-editor`),this.root.classList.add(`ql-blank`),this.emitter=new H;let i=tb.blotName,a=this.options.registry.query(i);if(!a||!(`blotName`in a))throw Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new a(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new qb(this.scroll),this.selection=new Ib(this.scroll,this.emitter),this.composition=new Zb(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule(`keyboard`),this.clipboard=this.theme.addModule(`clipboard`),this.history=this.theme.addModule(`history`),this.uploader=this.theme.addModule(`uploader`),this.theme.addModule(`input`),this.theme.addModule(`uiNode`),this.theme.init(),this.emitter.on(H.events.EDITOR_CHANGE,e=>{e===H.events.TEXT_CHANGE&&this.root.classList.toggle(`ql-blank`,this.editor.isBlank())}),this.emitter.on(H.events.SCROLL_UPDATE,(e,t)=>{let n=this.selection.lastRange,[r]=this.selection.getRange(),i=n&&r?{oldRange:n,newRange:r}:void 0;mx.call(this,()=>this.editor.update(null,t,i),e)}),this.emitter.on(H.events.SCROLL_EMBED_UPDATE,(t,n)=>{let r=this.selection.lastRange,[i]=this.selection.getRange(),a=r&&i?{oldRange:r,newRange:i}:void 0;mx.call(this,()=>{let e=new sx.default().retain(t.offset(this)).retain({[t.statics.blotName]:n});return this.editor.update(e,[],a)},e.sources.USER)}),r){let e=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(e)}this.history.clear(),this.options.placeholder&&this.root.setAttribute(`data-placeholder`,this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e==`string`){let t=e;e=document.createElement(`div`),e.classList.add(t)}return this.container.insertBefore(e,t),e}blur(){this.selection.setRange(null)}deleteText(e,t,n){return[e,t,,n]=hx(e,t,n),mx.call(this,()=>this.editor.deleteText(e,t),n,e,-1*t)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;let t=e();return this.allowReadOnlyEdits=!1,t}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle(`ql-disabled`,!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H.sources.API;return mx.call(this,()=>{let n=this.getSelection(!0),r=new sx.default;if(n==null)return r;if(this.scroll.query(e,V.BLOCK))r=this.editor.formatLine(n.index,n.length,{[e]:t});else if(n.length===0)return this.selection.format(e,t),r;else r=this.editor.formatText(n.index,n.length,{[e]:t});return this.setSelection(n,H.sources.SILENT),r},n)}formatLine(e,t,n,r,i){let a;return[e,t,a,i]=hx(e,t,n,r,i),mx.call(this,()=>this.editor.formatLine(e,t,a),i,e,0)}formatText(e,t,n,r,i){let a;return[e,t,a,i]=hx(e,t,n,r,i),mx.call(this,()=>this.editor.formatText(e,t,a),i,e,0)}getBounds(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(n=typeof e==`number`?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length),!n)return null;let r=this.container.getBoundingClientRect();return{bottom:n.bottom-r.top,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,width:n.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,t]=hx(e,t),this.editor.getContents(e,t)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e==`number`?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e==`number`?this.scroll.lines(e,t):this.scroll.lines(e.index,e.length)}getModule(e){return this.theme.modules[e]}getSelection(){return arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e==`number`&&(t??=this.getLength()-e),[e,t]=hx(e,t),this.editor.getHTML(e,t)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return typeof e==`number`&&(t??=this.getLength()-e),[e,t]=hx(e,t),this.editor.getText(e,t)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e.sources.API;return mx.call(this,()=>this.editor.insertEmbed(t,n,r),i,t)}insertText(e,t,n,r,i){let a;return[e,,a,i]=hx(e,0,n,r,i),mx.call(this,()=>this.editor.insertText(e,t,a),i,e,t.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,t,n){return[e,t,,n]=hx(e,t,n),mx.call(this,()=>this.editor.removeFormat(e,t),n,e)}scrollRectIntoView(e){rx(this.root,e)}scrollIntoView(){console.warn(`Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead.`),this.scrollSelectionIntoView()}scrollSelectionIntoView(){let e=this.selection.lastRange,t=e&&this.selection.getBounds(e.index,e.length);t&&this.scrollRectIntoView(t)}setContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.sources.API;return mx.call(this,()=>{e=new sx.default(e);let t=this.getLength(),n=this.editor.deleteText(0,t),r=this.editor.insertContents(0,e),i=this.editor.deleteText(this.getLength()-1,1);return n.compose(r).compose(i)},t)}setSelection(t,n,r){t==null?this.selection.setRange(null,n||e.sources.API):([t,n,,r]=hx(t,n,r),this.selection.setRange(new Nb(Math.max(0,t),n),r),r!==H.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.sources.API,n=new sx.default().insert(e);return this.setContents(n,t)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}updateContents(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.sources.API;return mx.call(this,()=>(e=new sx.default(e),this.editor.applyDelta(e)),t,!0)}};function ux(e){return typeof e==`string`?document.querySelector(e):e}function dx(e){return Object.entries(e??{}).reduce((e,t)=>{let[n,r]=t;return{...e,[n]:r===!0?{}:r}},{})}function fx(e){return Object.fromEntries(Object.entries(e).filter(e=>e[1]!==void 0))}function px(e,t){let n=ux(e);if(!n)throw Error(`Invalid Quill container`);let r=!t.theme||t.theme===U.DEFAULTS.theme?Qb:U.import(`themes/${t.theme}`);if(!r)throw Error(`Invalid theme ${t.theme}. Did you register it?`);let{modules:i,...a}=U.DEFAULTS,{modules:o,...s}=r.DEFAULTS,c=dx(t.modules);c!=null&&c.toolbar&&c.toolbar.constructor!==Object&&(c={...c,toolbar:{container:c.toolbar}});let l=Ty({},dx(i),dx(o),c),u={...a,...fx(s),...fx(t)},d=t.registry;return d?t.formats&&cx.warn(`Ignoring "formats" option because "registry" is specified`):d=t.formats?ox(t.formats,u.registry,cx):u.registry,{...u,registry:d,container:n,theme:r,modules:Object.entries(l).reduce((e,t)=>{let[n,r]=t;if(!r)return e;let i=U.import(`modules/${n}`);return i==null?(cx.error(`Cannot load ${n} module. Are you sure you registered it?`),e):{...e,[n]:Ty({},i.DEFAULTS||{},r)}},{}),bounds:ux(u.bounds)}}function mx(e,t,n,r){if(!this.isEnabled()&&t===H.sources.USER&&!this.allowReadOnlyEdits)return new sx.default;let i=n==null?null:this.getSelection(),a=this.editor.delta,o=e();if(i!=null&&(n===!0&&(n=i.index),r==null?i=gx(i,o,t):r!==0&&(i=gx(i,n,r,t)),this.setSelection(i,H.sources.SILENT)),o.length()>0){let e=[H.events.TEXT_CHANGE,o,a,t];this.emitter.emit(H.events.EDITOR_CHANGE,...e),t!==H.sources.SILENT&&this.emitter.emit(...e)}return o}function hx(e,t,n,r,i){let a={};return typeof e.index==`number`&&typeof e.length==`number`?typeof t==`number`?(t=e.length,e=e.index):(i=r,r=n,n=t,t=e.length,e=e.index):typeof t!=`number`&&(i=r,r=n,n=t,t=0),typeof n==`object`?(a=n,i=r):typeof n==`string`&&(r==null?i=n:a[n]=r),i||=H.sources.API,[e,t,a,i]}function gx(e,t,n,r){let i=typeof n==`number`?n:0;if(e==null)return null;let a,o;return t&&typeof t.transformPosition==`function`?[a,o]=[e.index,e.index+e.length].map(e=>t.transformPosition(e,r!==H.sources.USER)):[a,o]=[e.index,e.index+e.length].map(e=>e<t||e===t&&r===H.sources.USER?e:i>=0?e+i:Math.max(t,e+i)),new Nb(a,o-a)}var _x=class extends Xy{},vx=l(ub());function yx(e){return e instanceof yb||e instanceof bb}function bx(e){return typeof e.updateContent==`function`}var xx=class extends tb{static blotName=`scroll`;static className=`ql-editor`;static tagName=`DIV`;static defaultChild=yb;static allowedChildren=[yb,bb,_x];constructor(e,t,n){let{emitter:r}=n;super(e,t),this.emitter=r,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener(`dragstart`,e=>this.handleDragStart(e))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;let e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(H.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(H.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,t){this.emitter.emit(H.events.SCROLL_EMBED_UPDATE,e,t)}deleteAt(e,t){let[n,r]=this.line(e),[i]=this.line(e+t);if(super.deleteAt(e,t),i!=null&&n!==i&&r>0){if(n instanceof bb||i instanceof bb){this.optimize();return}let e=i.children.head instanceof pb?null:i.children.head;n.moveChildren(i,e),n.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute(`contenteditable`,e?`true`:`false`)}formatAt(e,t,n,r){super.formatAt(e,t,n,r),this.optimize()}insertAt(e,t,n){if(e>=this.length())if(n==null||this.scroll.query(t,V.BLOCK)==null){let e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e),n==null&&t.endsWith(`
`)?e.insertAt(0,t.slice(0,-1),n):e.insertAt(0,t,n)}else{let e=this.scroll.create(t,n);this.appendChild(e)}else super.insertAt(e,t,n);this.optimize()}insertBefore(e,t){if(e.statics.scope===V.INLINE_BLOT){let n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(e),super.insertBefore(n,t)}else super.insertBefore(e,t)}insertContents(e,t){let n=this.deltaToRenderBlocks(t.concat(new vx.default().insert(`
`))),r=n.pop();if(r==null)return;this.batchStart();let i=n.shift();if(i){let t=i.type===`block`&&(i.delta.length()===0||!this.descendant(bb,e)[0]&&e<this.length()),n=i.type===`block`?i.delta:new vx.default().insert({[i.key]:i.value});Sx(this,e,n);let r=i.type===`block`?1:0,a=e+n.length()+r;t&&this.insertAt(a-1,`
`);let o=Sb(this.line(e)[0]),s=vx.AttributeMap.diff(o,i.attributes)||{};Object.keys(s).forEach(e=>{this.formatAt(a-1,1,e,s[e])}),e=a}let[a,o]=this.children.find(e);if(n.length&&(a&&(a=a.split(o),o=0),n.forEach(e=>{if(e.type===`block`){let t=this.createBlock(e.attributes,a||void 0);Sx(t,0,e.delta)}else{let t=this.create(e.key,e.value);this.insertBefore(t,a||void 0),Object.keys(e.attributes).forEach(n=>{t.format(n,e.attributes[n])})}})),r.type===`block`&&r.delta.length()){let e=a?a.offset(a.scroll)+o:this.length();Sx(this,e,r.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute(`contenteditable`)===`true`}leaf(e){let t=this.path(e).pop();if(!t)return[null,-1];let[n,r]=t;return n instanceof zy?[n,r]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(yx,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,n=(e,t,r)=>{let i=[],a=r;return e.children.forEachAt(t,r,(e,t,r)=>{yx(e)?i.push(e):e instanceof Xy&&(i=i.concat(n(e,t,a))),a-=r}),i};return n(this,e,t)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,t),e.length>0&&this.emitter.emit(H.events.SCROLL_OPTIMIZE,e,t))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let t=H.sources.USER;typeof e==`string`&&(t=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(e=>{let{target:t}=e,n=this.find(t,!0);return n&&!bx(n)}),e.length>0&&this.emitter.emit(H.events.SCROLL_BEFORE_UPDATE,t,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(H.events.SCROLL_UPDATE,t,e)}updateEmbedAt(e,t,n){let[r]=this.descendant(e=>e instanceof bb,e);r&&r.statics.blotName===t&&bx(r)&&r.updateContent(n)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){let t=[],n=new vx.default;return e.forEach(e=>{let r=e?.insert;if(r)if(typeof r==`string`){let i=r.split(`
`);i.slice(0,-1).forEach(r=>{n.insert(r,e.attributes),t.push({type:`block`,delta:n,attributes:e.attributes??{}}),n=new vx.default});let a=i[i.length-1];a&&n.insert(a,e.attributes)}else{let i=Object.keys(r)[0];if(!i)return;this.query(i,V.INLINE)?n.push(e):(n.length()&&t.push({type:`block`,delta:n,attributes:{}}),n=new vx.default,t.push({type:`blockEmbed`,key:i,value:r[i],attributes:e.attributes??{}}))}}),n.length()&&t.push({type:`block`,delta:n,attributes:{}}),t}createBlock(e,t){let n,r={};Object.entries(e).forEach(e=>{let[t,i]=e;this.query(t,V.BLOCK&V.BLOT)==null?r[t]=i:n=t});let i=this.create(n||this.statics.defaultChild.blotName,n?e[n]:void 0);this.insertBefore(i,t||void 0);let a=i.length();return Object.entries(r).forEach(e=>{let[t,n]=e;i.formatAt(0,a,t,n)}),i}};function Sx(e,t,n){n.reduce((t,n)=>{let r=vx.Op.length(n),i=n.attributes||{};if(n.insert!=null){if(typeof n.insert==`string`){let r=n.insert;e.insertAt(t,r);let[a]=e.descendant(zy,t),o=Sb(a);i=vx.AttributeMap.diff(o,i)||{}}else if(typeof n.insert==`object`){let r=Object.keys(n.insert)[0];if(r==null)return t;if(e.insertAt(t,r,n.insert[r]),e.scroll.query(r,V.INLINE)!=null){let[n]=e.descendant(zy,t),r=Sb(n);i=vx.AttributeMap.diff(r,i)||{}}}}return Object.keys(i).forEach(n=>{e.formatAt(t,r,n,i[n])}),t+r},t)}var Cx=xx,wx={scope:V.BLOCK,whitelist:[`right`,`center`,`justify`]},Tx=new Dy(`align`,`align`,wx),Ex=new My(`align`,`ql-align`,wx),Dx=new Py(`align`,`text-align`,wx),Ox=class extends Py{value(e){let t=super.value(e);return t.startsWith(`rgb(`)?(t=t.replace(/^[^\d]+/,``).replace(/[^\d]+$/,``),`#${t.split(`,`).map(e=>`00${parseInt(e,10).toString(16)}`.slice(-2)).join(``)}`):t}},kx=new My(`color`,`ql-color`,{scope:V.INLINE}),Ax=new Ox(`color`,`color`,{scope:V.INLINE}),jx=new My(`background`,`ql-bg`,{scope:V.INLINE}),Mx=new Ox(`background`,`background-color`,{scope:V.INLINE}),Nx=class extends _x{static create(e){let t=super.create(e);return t.setAttribute(`spellcheck`,`false`),t}code(e,t){return this.children.map(e=>e.length()<=1?``:e.domNode.innerText).join(`
`).slice(e,e+t)}html(e,t){return`<pre>\n${gb(this.code(e,t))}\n</pre>`}},Px=class extends yb{static TAB=`  `;static register(){U.register(Nx)}},Fx=class extends _b{};Fx.blotName=`code`,Fx.tagName=`CODE`,Px.blotName=`code-block`,Px.className=`ql-code-block`,Px.tagName=`DIV`,Nx.blotName=`code-block-container`,Nx.className=`ql-code-block-container`,Nx.tagName=`DIV`,Nx.allowedChildren=[Px],Px.allowedChildren=[mb,pb,Cb],Px.requiredContainer=Nx;var Ix={scope:V.BLOCK,whitelist:[`rtl`]},Lx=new Dy(`direction`,`dir`,Ix),Rx=new My(`direction`,`ql-direction`,Ix),zx=new Py(`direction`,`direction`,Ix),Bx={scope:V.INLINE,whitelist:[`serif`,`monospace`]},Vx=new My(`font`,`ql-font`,Bx),Hx=new class extends Py{value(e){return super.value(e).replace(/["']/g,``)}}(`font`,`font-family`,Bx),Ux=new My(`size`,`ql-size`,{scope:V.INLINE,whitelist:[`small`,`large`,`huge`]}),Wx=new Py(`size`,`font-size`,{scope:V.INLINE,whitelist:[`10px`,`18px`,`32px`]}),Gx=l(ub()),Kx=Ab(`quill:keyboard`),qx=/Mac/i.test(navigator.platform)?`metaKey`:`ctrlKey`,Jx=class e extends Jb{static match(e,t){return[`altKey`,`ctrlKey`,`metaKey`,`shiftKey`].some(n=>!!t[n]!==e[n]&&t[n]!==null)?!1:t.key===e.key||t.key===e.which}constructor(e,t){super(e,t),this.bindings={},Object.keys(this.options.bindings).forEach(e=>{this.options.bindings[e]&&this.addBinding(this.options.bindings[e])}),this.addBinding({key:`Enter`,shiftKey:null},this.handleEnter),this.addBinding({key:`Enter`,metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:`Backspace`},{collapsed:!0},this.handleBackspace),this.addBinding({key:`Delete`},{collapsed:!0},this.handleDelete)):(this.addBinding({key:`Backspace`},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:`Delete`},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:`Backspace`},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:`Delete`},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:`Backspace`,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=$x(e);if(r==null){Kx.warn(`Attempted to add invalid keyboard binding`,r);return}typeof t==`function`&&(t={handler:t}),typeof n==`function`&&(n={handler:n}),(Array.isArray(r.key)?r.key:[r.key]).forEach(e=>{let i={...r,key:e,...t,...n};this.bindings[i.key]=this.bindings[i.key]||[],this.bindings[i.key].push(i)})}listen(){this.quill.root.addEventListener(`keydown`,t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key===`Enter`||t.key===`Backspace`))return;let n=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(n=>e.match(t,n));if(n.length===0)return;let r=U.find(t.target,!0);if(r&&r.scroll!==this.quill.scroll)return;let i=this.quill.getSelection();if(i==null||!this.quill.hasFocus())return;let[a,o]=this.quill.getLine(i.index),[s,c]=this.quill.getLeaf(i.index),[l,u]=i.length===0?[s,c]:this.quill.getLeaf(i.index+i.length),d=s instanceof rb?s.value().slice(0,c):``,f=l instanceof rb?l.value().slice(u):``,p={collapsed:i.length===0,empty:i.length===0&&a.length()<=1,format:this.quill.getFormat(i),line:a,offset:o,prefix:d,suffix:f,event:t};n.some(e=>{if(e.collapsed!=null&&e.collapsed!==p.collapsed||e.empty!=null&&e.empty!==p.empty||e.offset!=null&&e.offset!==p.offset)return!1;if(Array.isArray(e.format)){if(e.format.every(e=>p.format[e]==null))return!1}else if(typeof e.format==`object`&&!Object.keys(e.format).every(t=>e.format[t]===!0?p.format[t]!=null:e.format[t]===!1?p.format[t]==null:wy(e.format[t],p.format[t])))return!1;return e.prefix!=null&&!e.prefix.test(p.prefix)||e.suffix!=null&&!e.suffix.test(p.suffix)?!1:e.handler.call(this,i,p,e)!==!0})&&t.preventDefault()})}handleBackspace(e,t){let n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let r={},[i]=this.quill.getLine(e.index),a=new Gx.default().retain(e.index-n).delete(n);if(t.offset===0){let[t]=this.quill.getLine(e.index-1);if(t&&!(t.statics.blotName===`block`&&t.length()<=1)){let t=i.formats(),n=this.quill.getFormat(e.index-1,1);if(r=Gx.AttributeMap.diff(t,n)||{},Object.keys(r).length>0){let t=new Gx.default().retain(e.index+i.length()-2).retain(1,r);a=a.compose(t)}}}this.quill.updateContents(a,U.sources.USER),this.quill.focus()}handleDelete(e,t){let n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(e.index>=this.quill.getLength()-n)return;let r={},[i]=this.quill.getLine(e.index),a=new Gx.default().retain(e.index).delete(n);if(t.offset>=i.length()-1){let[t]=this.quill.getLine(e.index+1);if(t){let n=i.formats(),o=this.quill.getFormat(e.index,1);r=Gx.AttributeMap.diff(n,o)||{},Object.keys(r).length>0&&(a=a.retain(t.length()-1).retain(1,r))}}this.quill.updateContents(a,U.sources.USER),this.quill.focus()}handleDeleteRange(e){eS({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,t){let n=Object.keys(t.format).reduce((e,n)=>(this.quill.scroll.query(n,V.BLOCK)&&!Array.isArray(t.format[n])&&(e[n]=t.format[n]),e),{}),r=new Gx.default().retain(e.index).delete(e.length).insert(`
`,n);this.quill.updateContents(r,U.sources.USER),this.quill.setSelection(e.index+1,U.sources.SILENT),this.quill.focus()}};Jx.DEFAULTS={bindings:{bold:Zx(`bold`),italic:Zx(`italic`),underline:Zx(`underline`),indent:{key:`Tab`,format:[`blockquote`,`indent`,`list`],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format(`indent`,`+1`,U.sources.USER),!1)}},outdent:{key:`Tab`,shiftKey:!0,format:[`blockquote`,`indent`,`list`],handler(e,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format(`indent`,`-1`,U.sources.USER),!1)}},"outdent backspace":{key:`Backspace`,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:[`indent`,`list`],offset:0,handler(e,t){t.format.indent==null?t.format.list!=null&&this.quill.format(`list`,!1,U.sources.USER):this.quill.format(`indent`,`-1`,U.sources.USER)}},"indent code-block":Yx(!0),"outdent code-block":Yx(!1),"remove tab":{key:`Tab`,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(e){this.quill.deleteText(e.index-1,1,U.sources.USER)}},tab:{key:`Tab`,handler(e,t){if(t.format.table)return!0;this.quill.history.cutoff();let n=new Gx.default().retain(e.index).delete(e.length).insert(`	`);return this.quill.updateContents(n,U.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,U.sources.SILENT),!1}},"blockquote empty enter":{key:`Enter`,collapsed:!0,format:[`blockquote`],empty:!0,handler(){this.quill.format(`blockquote`,!1,U.sources.USER)}},"list empty enter":{key:`Enter`,collapsed:!0,format:[`list`],empty:!0,handler(e,t){let n={list:!1};t.format.indent&&(n.indent=!1),this.quill.formatLine(e.index,e.length,n,U.sources.USER)}},"checklist enter":{key:`Enter`,collapsed:!0,format:{list:`checked`},handler(e){let[t,n]=this.quill.getLine(e.index),r={...t.formats(),list:`checked`},i=new Gx.default().retain(e.index).insert(`
`,r).retain(t.length()-n-1).retain(1,{list:`unchecked`});this.quill.updateContents(i,U.sources.USER),this.quill.setSelection(e.index+1,U.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:`Enter`,collapsed:!0,format:[`header`],suffix:/^$/,handler(e,t){let[n,r]=this.quill.getLine(e.index),i=new Gx.default().retain(e.index).insert(`
`,t.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(i,U.sources.USER),this.quill.setSelection(e.index+1,U.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:`Backspace`,format:[`table`],collapsed:!0,offset:0,handler(){}},"table delete":{key:`Delete`,format:[`table`],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:`Enter`,shiftKey:null,format:[`table`],handler(e){let t=this.quill.getModule(`table`);if(t){let[n,r,i,a]=t.getTable(e),o=tS(n,r,i,a);if(o==null)return;let s=n.offset();if(o<0){let t=new Gx.default().retain(s).insert(`
`);this.quill.updateContents(t,U.sources.USER),this.quill.setSelection(e.index+1,e.length,U.sources.SILENT)}else if(o>0){s+=n.length();let e=new Gx.default().retain(s).insert(`
`);this.quill.updateContents(e,U.sources.USER),this.quill.setSelection(s,U.sources.USER)}}}},"table tab":{key:`Tab`,shiftKey:null,format:[`table`],handler(e,t){let{event:n,line:r}=t,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,U.sources.USER):this.quill.setSelection(i+r.length(),U.sources.USER)}},"list autofill":{key:` `,shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(e,t){if(this.quill.scroll.query(`list`)==null)return!0;let{length:n}=t.prefix,[r,i]=this.quill.getLine(e.index);if(i>n)return!0;let a;switch(t.prefix.trim()){case`[]`:case`[ ]`:a=`unchecked`;break;case`[x]`:a=`checked`;break;case`-`:case`*`:a=`bullet`;break;default:a=`ordered`}this.quill.insertText(e.index,` `,U.sources.USER),this.quill.history.cutoff();let o=new Gx.default().retain(e.index-i).delete(n+1).retain(r.length()-2-i).retain(1,{list:a});return this.quill.updateContents(o,U.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-n,U.sources.SILENT),!1}},"code exit":{key:`Enter`,collapsed:!0,format:[`code-block`],prefix:/^$/,suffix:/^\s*$/,handler(e){let[t,n]=this.quill.getLine(e.index),r=2,i=t;for(;i!=null&&i.length()<=1&&i.formats()[`code-block`];)if(i=i.prev,--r,r<=0){let r=new Gx.default().retain(e.index+t.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(r,U.sources.USER),this.quill.setSelection(e.index-1,U.sources.SILENT),!1}return!0}},"embed left":Xx(`ArrowLeft`,!1),"embed left shift":Xx(`ArrowLeft`,!0),"embed right":Xx(`ArrowRight`,!1),"embed right shift":Xx(`ArrowRight`,!0),"table down":Qx(!1),"table up":Qx(!0)}};function Yx(e){return{key:`Tab`,shiftKey:!e,format:{"code-block":!0},handler(t,n){let{event:r}=n,{TAB:i}=this.quill.scroll.query(`code-block`);if(t.length===0&&!r.shiftKey){this.quill.insertText(t.index,i,U.sources.USER),this.quill.setSelection(t.index+i.length,U.sources.SILENT);return}let a=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t),{index:o,length:s}=t;a.forEach((t,n)=>{e?(t.insertAt(0,i),n===0?o+=i.length:s+=i.length):t.domNode.textContent.startsWith(i)&&(t.deleteAt(0,i.length),n===0?o-=i.length:s-=i.length)}),this.quill.update(U.sources.USER),this.quill.setSelection(o,s,U.sources.SILENT)}}}function Xx(e,t){return{key:e,shiftKey:t,altKey:null,[e===`ArrowLeft`?`prefix`:`suffix`]:/^$/,handler(n){let{index:r}=n;e===`ArrowRight`&&(r+=n.length+1);let[i]=this.quill.getLeaf(r);return i instanceof Zy?(e===`ArrowLeft`?t?this.quill.setSelection(n.index-1,n.length+1,U.sources.USER):this.quill.setSelection(n.index-1,U.sources.USER):t?this.quill.setSelection(n.index,n.length+1,U.sources.USER):this.quill.setSelection(n.index+n.length+1,U.sources.USER),!1):!0}}}function Zx(e){return{key:e[0],shortKey:!0,handler(t,n){this.quill.format(e,!n.format[e],U.sources.USER)}}}function Qx(e){return{key:e?`ArrowUp`:`ArrowDown`,collapsed:!0,format:[`table`],handler(t,n){let r=e?`prev`:`next`,i=n.line,a=i.parent[r];if(a!=null){if(a.statics.blotName===`table-row`){let e=a.children.head,t=i;for(;t.prev!=null;)t=t.prev,e=e.next;let r=e.offset(this.quill.scroll)+Math.min(n.offset,e.length()-1);this.quill.setSelection(r,0,U.sources.USER)}}else{let t=i.table()[r];t!=null&&(e?this.quill.setSelection(t.offset(this.quill.scroll)+t.length()-1,0,U.sources.USER):this.quill.setSelection(t.offset(this.quill.scroll),0,U.sources.USER))}return!1}}}function $x(e){if(typeof e==`string`||typeof e==`number`)e={key:e};else if(typeof e==`object`)e=pv(e);else return null;return e.shortKey&&(e[qx]=e.shortKey,delete e.shortKey),e}function eS(e){let{quill:t,range:n}=e,r=t.getLines(n),i={};if(r.length>1){let e=r[0].formats(),t=r[r.length-1].formats();i=Gx.AttributeMap.diff(t,e)||{}}t.deleteText(n,U.sources.USER),Object.keys(i).length>0&&t.formatLine(n.index,1,i,U.sources.USER),t.setSelection(n.index,U.sources.SILENT)}function tS(e,t,n,r){return t.prev==null&&t.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}var nS=/font-weight:\s*normal/,rS=[`P`,`OL`,`UL`],iS=e=>e&&rS.includes(e.tagName),aS=e=>{Array.from(e.querySelectorAll(`br`)).filter(e=>iS(e.previousElementSibling)&&iS(e.nextElementSibling)).forEach(e=>{e.parentNode?.removeChild(e)})},oS=e=>{Array.from(e.querySelectorAll(`b[style*="font-weight"]`)).filter(e=>e.getAttribute(`style`)?.match(nS)).forEach(t=>{let n=e.createDocumentFragment();n.append(...t.childNodes),t.parentNode?.replaceChild(n,t)})};function sS(e){e.querySelector(`[id^="docs-internal-guid-"]`)&&(oS(e),aS(e))}var cS=/\bmso-list:[^;]*ignore/i,lS=/\bmso-list:[^;]*\bl(\d+)/i,uS=/\bmso-list:[^;]*\blevel(\d+)/i,dS=(e,t)=>{let n=e.getAttribute(`style`),r=n?.match(lS);if(!r)return null;let i=Number(r[1]),a=n?.match(uS),o=a?Number(a[1]):1,s=RegExp(`@list l${i}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,`i`),c=t.match(s),l=c&&c[1]===`bullet`?`bullet`:`ordered`;return{id:i,indent:o,type:l,element:e}},fS=e=>{let t=Array.from(e.querySelectorAll(`[style*=mso-list]`)),n=[],r=[];t.forEach(e=>{(e.getAttribute(`style`)||``).match(cS)?n.push(e):r.push(e)}),n.forEach(e=>e.parentNode?.removeChild(e));let i=e.documentElement.innerHTML,a=r.map(e=>dS(e,i)).filter(e=>e);for(;a.length;){let e=[],t=a.shift();for(;t;)e.push(t),t=a.length&&a[0]?.element===t.element.nextElementSibling&&a[0].id===t.id?a.shift():null;let n=document.createElement(`ul`);e.forEach(e=>{let t=document.createElement(`li`);t.setAttribute(`data-list`,e.type),e.indent>1&&t.setAttribute(`class`,`ql-indent-${e.indent-1}`),t.innerHTML=e.element.innerHTML,n.appendChild(t)});let r=e[0]?.element,{parentNode:i}=r??{};r&&i?.replaceChild(n,r),e.slice(1).forEach(e=>{let{element:t}=e;i?.removeChild(t)})}};function pS(e){e.documentElement.getAttribute(`xmlns:w`)===`urn:schemas-microsoft-com:office:word`&&fS(e)}var mS=[pS,sS],hS=e=>{e.documentElement&&mS.forEach(t=>{t(e)})},gS=l(ub()),_S=Ab(`quill:clipboard`),vS=[[Node.TEXT_NODE,BS],[Node.TEXT_NODE,LS],[`br`,MS],[Node.ELEMENT_NODE,LS],[Node.ELEMENT_NODE,jS],[Node.ELEMENT_NODE,AS],[Node.ELEMENT_NODE,RS],[`li`,FS],[`ol, ul`,IS],[`pre`,NS],[`tr`,zS],[`b`,kS(`bold`)],[`i`,kS(`italic`)],[`strike`,kS(`strike`)],[`style`,PS]],yS=[Tx,Lx].reduce((e,t)=>(e[t.keyName]=t,e),{}),bS=[Dx,Mx,Ax,zx,Hx,Wx].reduce((e,t)=>(e[t.keyName]=t,e),{}),xS=class extends Jb{static DEFAULTS={matchers:[]};constructor(e,t){super(e,t),this.quill.root.addEventListener(`copy`,e=>this.onCaptureCopy(e,!1)),this.quill.root.addEventListener(`cut`,e=>this.onCaptureCopy(e,!0)),this.quill.root.addEventListener(`paste`,this.onCapturePaste.bind(this)),this.matchers=[],vS.concat(this.options.matchers??[]).forEach(e=>{let[t,n]=e;this.addMatcher(t,n)})}addMatcher(e,t){this.matchers.push([e,t])}convert(e){let{html:t,text:n}=e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r[Px.blotName])return new gS.default().insert(n||``,{[Px.blotName]:r[Px.blotName]});if(!t)return new gS.default().insert(n||``,r);let i=this.convertHTML(t);return CS(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||r.table)?i.compose(new gS.default().retain(i.length()-1).delete(1)):i}normalizeHTML(e){hS(e)}convertHTML(e){let t=new DOMParser().parseFromString(e,`text/html`);this.normalizeHTML(t);let n=t.body,r=new WeakMap,[i,a]=this.prepareMatching(n,r);return OS(this.quill.scroll,n,i,a,r)}dangerouslyPasteHTML(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U.sources.API;if(typeof e==`string`){let n=this.convert({html:e,text:``});this.quill.setContents(n,t),this.quill.setSelection(0,U.sources.SILENT)}else{let r=this.convert({html:t,text:``});this.quill.updateContents(new gS.default().retain(e).concat(r),n),this.quill.setSelection(e+r.length(),U.sources.SILENT)}}onCaptureCopy(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();let[n]=this.quill.selection.getRange();if(n==null)return;let{html:r,text:i}=this.onCopy(n,t);e.clipboardData?.setData(`text/plain`,i),e.clipboardData?.setData(`text/html`,r),t&&eS({range:n,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(e=>e[0]!==`#`).join(`
`)}onCapturePaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();let t=this.quill.getSelection(!0);if(t==null)return;let n=e.clipboardData?.getData(`text/html`),r=e.clipboardData?.getData(`text/plain`);if(!n&&!r){let t=e.clipboardData?.getData(`text/uri-list`);t&&(r=this.normalizeURIList(t))}let i=Array.from(e.clipboardData?.files||[]);if(!n&&i.length>0){this.quill.uploader.upload(t,i);return}if(n&&i.length>0){let e=new DOMParser().parseFromString(n,`text/html`);if(e.body.childElementCount===1&&e.body.firstElementChild?.tagName===`IMG`){this.quill.uploader.upload(t,i);return}}this.onPaste(t,{html:n,text:r})}onCopy(e){let t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}onPaste(e,t){let{text:n,html:r}=t,i=this.quill.getFormat(e.index),a=this.convert({text:n,html:r},i);_S.log(`onPaste`,a,{text:n,html:r});let o=new gS.default().retain(e.index).delete(e.length).concat(a);this.quill.updateContents(o,U.sources.USER),this.quill.setSelection(o.length()-e.length,U.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,t){let n=[],r=[];return this.matchers.forEach(i=>{let[a,o]=i;switch(a){case Node.TEXT_NODE:r.push(o);break;case Node.ELEMENT_NODE:n.push(o);break;default:Array.from(e.querySelectorAll(a)).forEach(e=>{t.has(e)?t.get(e)?.push(o):t.set(e,[o])});break}}),[n,r]}};function SS(e,t,n,r){return r.query(t)?e.reduce((e,r)=>{if(!r.insert)return e;if(r.attributes&&r.attributes[t])return e.push(r);let i=n?{[t]:n}:{};return e.insert(r.insert,{...i,...r.attributes})},new gS.default):e}function CS(e,t){let n=``;for(let r=e.ops.length-1;r>=0&&n.length<t.length;--r){let t=e.ops[r];if(typeof t.insert!=`string`)break;n=t.insert+n}return n.slice(-1*t.length)===t}function wS(e,t){if(!(e instanceof Element))return!1;let n=t.query(e);return n&&n.prototype instanceof Zy?!1:`address.article.blockquote.canvas.dd.div.dl.dt.fieldset.figcaption.figure.footer.form.h1.h2.h3.h4.h5.h6.header.iframe.li.main.nav.ol.output.p.pre.section.table.td.tr.ul.video`.split(`.`).includes(e.tagName.toLowerCase())}function TS(e,t){return e.previousElementSibling&&e.nextElementSibling&&!wS(e.previousElementSibling,t)&&!wS(e.nextElementSibling,t)}var ES=new WeakMap;function DS(e){return e==null?!1:(ES.has(e)||(e.tagName===`PRE`?ES.set(e,!0):ES.set(e,DS(e.parentNode))),ES.get(e))}function OS(e,t,n,r,i){return t.nodeType===t.TEXT_NODE?r.reduce((n,r)=>r(t,n,e),new gS.default):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((a,o)=>{let s=OS(e,o,n,r,i);return o.nodeType===t.ELEMENT_NODE&&(s=n.reduce((t,n)=>n(o,t,e),s),s=(i.get(o)||[]).reduce((t,n)=>n(o,t,e),s)),a.concat(s)},new gS.default):new gS.default}function kS(e){return(t,n,r)=>SS(n,e,!0,r)}function AS(e,t,n){let r=Dy.keys(e),i=My.keys(e),a=Py.keys(e),o={};return r.concat(i).concat(a).forEach(t=>{let r=n.query(t,V.ATTRIBUTE);r!=null&&(o[r.attrName]=r.value(e),o[r.attrName])||(r=yS[t],r!=null&&(r.attrName===t||r.keyName===t)&&(o[r.attrName]=r.value(e)||void 0),r=bS[t],r!=null&&(r.attrName===t||r.keyName===t)&&(r=bS[t],o[r.attrName]=r.value(e)||void 0))}),Object.entries(o).reduce((e,t)=>{let[r,i]=t;return SS(e,r,i,n)},t)}function jS(e,t,n){let r=n.query(e);if(r==null)return t;if(r.prototype instanceof Zy){let t={},i=r.value(e);if(i!=null)return t[r.blotName]=i,new gS.default().insert(t,r.formats(e,n))}else if(r.prototype instanceof Jy&&!CS(t,`
`)&&t.insert(`
`),`blotName`in r&&`formats`in r&&typeof r.formats==`function`)return SS(t,r.blotName,r.formats(e,n),n);return t}function MS(e,t){return CS(t,`
`)||t.insert(`
`),t}function NS(e,t,n){let r=n.query(`code-block`),i=r&&`formats`in r&&typeof r.formats==`function`?r.formats(e,n):!0;return SS(t,`code-block`,i,n)}function PS(){return new gS.default}function FS(e,t,n){let r=n.query(e);if(r==null||r.blotName!==`list`||!CS(t,`
`))return t;let i=-1,a=e.parentNode;for(;a!=null;)[`OL`,`UL`].includes(a.tagName)&&(i+=1),a=a.parentNode;return i<=0?t:t.reduce((e,t)=>t.insert?t.attributes&&typeof t.attributes.indent==`number`?e.push(t):e.insert(t.insert,{indent:i,...t.attributes||{}}):e,new gS.default)}function IS(e,t,n){let r=e,i=r.tagName===`OL`?`ordered`:`bullet`,a=r.getAttribute(`data-checked`);return a&&(i=a===`true`?`checked`:`unchecked`),SS(t,`list`,i,n)}function LS(e,t,n){if(!CS(t,`
`)){if(wS(e,n)&&(e.childNodes.length>0||e instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&e.nextSibling){let r=e.nextSibling;for(;r!=null;){if(wS(r,n))return t.insert(`
`);let e=n.query(r);if(e&&e.prototype instanceof bb)return t.insert(`
`);r=r.firstChild}}}return t}function RS(e,t,n){let r={},i=e.style||{};return i.fontStyle===`italic`&&(r.italic=!0),i.textDecoration===`underline`&&(r.underline=!0),i.textDecoration===`line-through`&&(r.strike=!0),(i.fontWeight?.startsWith(`bold`)||parseInt(i.fontWeight,10)>=700)&&(r.bold=!0),t=Object.entries(r).reduce((e,t)=>{let[r,i]=t;return SS(e,r,i,n)},t),parseFloat(i.textIndent||0)>0?new gS.default().insert(`	`).concat(t):t}function zS(e,t,n){let r=e.parentElement?.tagName===`TABLE`?e.parentElement:e.parentElement?.parentElement;if(r!=null){let i=Array.from(r.querySelectorAll(`tr`)).indexOf(e)+1;return SS(t,`table`,i,n)}return t}function BS(e,t,n){let r=e.data;if(e.parentElement?.tagName===`O:P`)return t.insert(r.trim());if(!DS(e)){if(r.trim().length===0&&r.includes(`
`)&&!TS(e,n))return t;r=r.replace(/[^\S\u00a0]/g,` `),r=r.replace(/ {2,}/g,` `),(e.previousSibling==null&&e.parentElement!=null&&wS(e.parentElement,n)||e.previousSibling instanceof Element&&wS(e.previousSibling,n))&&(r=r.replace(/^ /,``)),(e.nextSibling==null&&e.parentElement!=null&&wS(e.parentElement,n)||e.nextSibling instanceof Element&&wS(e.nextSibling,n))&&(r=r.replace(/ $/,``)),r=r.replaceAll(`\xA0`,` `)}return t.insert(r)}var VS=class extends Jb{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(e,t){super(e,t),this.quill.on(U.events.EDITOR_CHANGE,(e,t,n,r)=>{e===U.events.SELECTION_CHANGE?t&&r!==U.sources.SILENT&&(this.currentRange=t):e===U.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||r===U.sources.USER?this.record(t,n):this.transform(t)),this.currentRange=GS(this.currentRange,t))}),this.quill.keyboard.addBinding({key:`z`,shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:[`z`,`Z`],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:`y`,shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener(`beforeinput`,e=>{e.inputType===`historyUndo`?(this.undo(),e.preventDefault()):e.inputType===`historyRedo`&&(this.redo(),e.preventDefault())})}change(e,t){if(this.stack[e].length===0)return;let n=this.stack[e].pop();if(!n)return;let r=this.quill.getContents(),i=n.delta.invert(r);this.stack[t].push({delta:i,range:GS(n.range,i)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,U.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,t){if(e.ops.length===0)return;this.stack.redo=[];let n=e.invert(t),r=this.currentRange,i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){let e=this.stack.undo.pop();e&&(n=n.compose(e.delta),r=e.range)}else this.lastRecorded=i;n.length()!==0&&(this.stack.undo.push({delta:n,range:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change(`redo`,`undo`)}transform(e){HS(this.stack.undo,e),HS(this.stack.redo,e)}undo(){this.change(`undo`,`redo`)}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,U.sources.USER);else{let t=WS(this.quill.scroll,e.delta);this.quill.setSelection(t,U.sources.USER)}}};function HS(e,t){let n=t;for(let t=e.length-1;t>=0;--t){let r=e[t];e[t]={delta:n.transform(r.delta,!0),range:r.range&&GS(r.range,n)},n=r.delta.transform(n),e[t].delta.length()===0&&e.splice(t,1)}}function US(e,t){let n=t.ops[t.ops.length-1];return n==null?!1:n.insert==null?n.attributes==null?!1:Object.keys(n.attributes).some(t=>e.query(t,V.BLOCK)!=null):typeof n.insert==`string`&&n.insert.endsWith(`
`)}function WS(e,t){let n=t.reduce((e,t)=>e+(t.delete||0),0),r=t.length()-n;return US(e,t)&&--r,r}function GS(e,t){if(!e)return e;let n=t.transformPosition(e.index),r=t.transformPosition(e.index+e.length);return{index:n,length:r-n}}var KS=l(ub()),qS=class extends Jb{constructor(e,t){super(e,t),e.root.addEventListener(`drop`,t=>{t.preventDefault();let n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(t.clientX,t.clientY);else if(document.caretPositionFromPoint){let e=document.caretPositionFromPoint(t.clientX,t.clientY);n=document.createRange(),n.setStart(e.offsetNode,e.offset),n.setEnd(e.offsetNode,e.offset)}let r=n&&e.selection.normalizeNative(n);if(r){let n=e.selection.normalizedToRange(r);t.dataTransfer?.files&&this.upload(n,t.dataTransfer.files)}})}upload(e,t){let n=[];Array.from(t).forEach(e=>{e&&this.options.mimetypes?.includes(e.type)&&n.push(e)}),n.length>0&&this.options.handler.call(this,e,n)}};qS.DEFAULTS={mimetypes:[`image/png`,`image/jpeg`],handler(e,t){if(!this.quill.scroll.query(`image`))return;let n=t.map(e=>new Promise(t=>{let n=new FileReader;n.onload=()=>{t(n.result)},n.readAsDataURL(e)}));Promise.all(n).then(t=>{let n=t.reduce((e,t)=>e.insert({image:t}),new KS.default().retain(e.index).delete(e.length));this.quill.updateContents(n,H.sources.USER),this.quill.setSelection(e.index+t.length,H.sources.SILENT)})}};var JS=qS,YS=l(ub()),XS=[`insertText`,`insertReplacementText`],ZS=class extends Jb{constructor(e,t){super(e,t),e.root.addEventListener(`beforeinput`,e=>{this.handleBeforeInput(e)}),/Android/i.test(navigator.userAgent)||e.on(U.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){eS({range:e,quill:this.quill})}replaceText(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:``;if(e.length===0)return!1;if(t){let n=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new YS.default().retain(e.index).insert(t,n),U.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,U.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!XS.includes(e.inputType))return;let t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!t||t.collapsed===!0)return;let n=QS(e);if(n==null)return;let r=this.quill.selection.normalizeNative(t),i=r?this.quill.selection.normalizedToRange(r):null;i&&this.replaceText(i,n)&&e.preventDefault()}handleCompositionStart(){let e=this.quill.getSelection();e&&this.replaceText(e)}};function QS(e){return typeof e.data==`string`?e.data:e.dataTransfer?.types.includes(`text/plain`)?e.dataTransfer.getData(`text/plain`):null}var $S=ZS,eC=/Mac/i.test(navigator.platform),tC=e=>!!(e.key===`ArrowLeft`||e.key===`ArrowRight`||e.key===`ArrowUp`||e.key===`ArrowDown`||e.key===`Home`||eC&&e.key===`a`&&e.ctrlKey===!0),nC=class extends Jb{isListening=!1;selectionChangeDeadline=0;constructor(e,t){super(e,t),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:[`ArrowLeft`,`ArrowRight`],offset:0,shiftKey:null,handler(e,t){let{line:n,event:r}=t;if(!(n instanceof Uy)||!n.uiNode)return!0;let i=getComputedStyle(n.domNode).direction===`rtl`;return i&&r.key!==`ArrowRight`||!i&&r.key!==`ArrowLeft`?!0:(this.quill.setSelection(e.index-1,e.length+(r.shiftKey?1:0),U.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener(`keydown`,e=>{!e.defaultPrevented&&tC(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,!this.isListening&&(this.isListening=!0,document.addEventListener(`selectionchange`,()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()},{once:!0}))}handleSelectionChange(){let e=document.getSelection();if(!e)return;let t=e.getRangeAt(0);if(t.collapsed!==!0||t.startOffset!==0)return;let n=this.quill.scroll.find(t.startContainer);if(!(n instanceof Uy)||!n.uiNode)return;let r=document.createRange();r.setStartAfter(n.uiNode),r.setEndAfter(n.uiNode),e.removeAllRanges(),e.addRange(r)}};ub(),U.register({"blots/block":yb,"blots/block/embed":bb,"blots/break":pb,"blots/container":_x,"blots/cursor":Cb,"blots/embed":Xb,"blots/inline":_b,"blots/scroll":Cx,"blots/text":mb,"modules/clipboard":xS,"modules/history":VS,"modules/keyboard":Jx,"modules/uploader":JS,"modules/input":$S,"modules/uiNode":nC});var rC=U,iC=new class extends My{add(e,t){let n=0;if(t===`+1`||t===`-1`){let r=this.value(e)||0;n=t===`+1`?r+1:r-1}else typeof t==`number`&&(n=t);return n===0?(this.remove(e),!0):super.add(e,n.toString())}canAdd(e,t){return super.canAdd(e,t)||super.canAdd(e,parseInt(t,10))}value(e){return parseInt(super.value(e),10)||void 0}}(`indent`,`ql-indent`,{scope:V.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),aC=class extends yb{static blotName=`blockquote`;static tagName=`blockquote`},oC=class extends yb{static blotName=`header`;static tagName=[`H1`,`H2`,`H3`,`H4`,`H5`,`H6`];static formats(e){return this.tagName.indexOf(e.tagName)+1}},sC=class extends _x{};sC.blotName=`list-container`,sC.tagName=`OL`;var cC=class extends yb{static create(e){let t=super.create();return t.setAttribute(`data-list`,e),t}static formats(e){return e.getAttribute(`data-list`)||void 0}static register(){U.register(sC)}constructor(e,t){super(e,t);let n=t.ownerDocument.createElement(`span`),r=n=>{if(!e.isEnabled())return;let r=this.statics.formats(t,e);r===`checked`?(this.format(`list`,`unchecked`),n.preventDefault()):r===`unchecked`&&(this.format(`list`,`checked`),n.preventDefault())};n.addEventListener(`mousedown`,r),n.addEventListener(`touchstart`,r),this.attachUI(n)}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute(`data-list`,t):super.format(e,t)}};cC.blotName=`list`,cC.tagName=`LI`,sC.allowedChildren=[cC],cC.requiredContainer=sC;var lC=class extends _b{static blotName=`bold`;static tagName=[`STRONG`,`B`];static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}},uC=class extends lC{static blotName=`italic`;static tagName=[`EM`,`I`]},dC=class extends _b{static blotName=`link`;static tagName=`A`;static SANITIZED_URL=`about:blank`;static PROTOCOL_WHITELIST=[`http`,`https`,`mailto`,`tel`,`sms`];static create(e){let t=super.create(e);return t.setAttribute(`href`,this.sanitize(e)),t.setAttribute(`rel`,`noopener noreferrer`),t.setAttribute(`target`,`_blank`),t}static formats(e){return e.getAttribute(`href`)}static sanitize(e){return fC(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,t){e!==this.statics.blotName||!t?super.format(e,t):this.domNode.setAttribute(`href`,this.constructor.sanitize(t))}};function fC(e,t){let n=document.createElement(`a`);n.href=e;let r=n.href.slice(0,n.href.indexOf(`:`));return t.indexOf(r)>-1}var pC=class extends _b{static blotName=`script`;static tagName=[`SUB`,`SUP`];static create(e){return e===`super`?document.createElement(`sup`):e===`sub`?document.createElement(`sub`):super.create(e)}static formats(e){if(e.tagName===`SUB`)return`sub`;if(e.tagName===`SUP`)return`super`}},mC=class extends lC{static blotName=`strike`;static tagName=[`S`,`STRIKE`]},hC=class extends _b{static blotName=`underline`;static tagName=`U`},gC=class extends Xb{static blotName=`formula`;static className=`ql-formula`;static tagName=`SPAN`;static create(e){if(window.katex==null)throw Error(`Formula module requires KaTeX.`);let t=super.create(e);return typeof e==`string`&&(window.katex.render(e,t,{throwOnError:!1,errorColor:`#f00`}),t.setAttribute(`data-value`,e)),t}static value(e){return e.getAttribute(`data-value`)}html(){let{formula:e}=this.value();return`<span>${e}</span>`}},_C=[`alt`,`height`,`width`],vC=class extends Zy{static blotName=`image`;static tagName=`IMG`;static create(e){let t=super.create(e);return typeof e==`string`&&t.setAttribute(`src`,this.sanitize(e)),t}static formats(e){return _C.reduce((t,n)=>(e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return fC(e,[`http`,`https`,`data`])?e:`//:0`}static value(e){return e.getAttribute(`src`)}format(e,t){_C.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}},yC=[`height`,`width`],bC=class extends bb{static blotName=`video`;static className=`ql-video`;static tagName=`IFRAME`;static create(e){let t=super.create(e);return t.setAttribute(`frameborder`,`0`),t.setAttribute(`allowfullscreen`,`true`),t.setAttribute(`src`,this.sanitize(e)),t}static formats(e){return yC.reduce((t,n)=>(e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t),{})}static sanitize(e){return dC.sanitize(e)}static value(e){return e.getAttribute(`src`)}format(e,t){yC.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):super.format(e,t)}html(){let{video:e}=this.value();return`<a href="${e}">${e}</a>`}},xC=l(ub()),SC=new My(`code-token`,`hljs`,{scope:V.INLINE}),CC=class e extends _b{static formats(e,t){for(;e!=null&&e!==t.domNode;){if(e.classList&&e.classList.contains(Px.className))return super.formats(e,t);e=e.parentNode}}constructor(e,t,n){super(e,t,n),SC.add(this.domNode,n)}format(t,n){t===e.blotName?n?SC.add(this.domNode,n):(SC.remove(this.domNode),this.domNode.classList.remove(this.statics.className)):super.format(t,n)}optimize(){super.optimize(...arguments),SC.value(this.domNode)||this.unwrap()}};CC.blotName=`code-token`,CC.className=`ql-token`;var wC=class extends Px{static create(e){let t=super.create(e);return typeof e==`string`&&t.setAttribute(`data-language`,e),t}static formats(e){return e.getAttribute(`data-language`)||`plain`}static register(){}format(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute(`data-language`,t):super.format(e,t)}replaceWith(e,t){return this.formatAt(0,this.length(),CC.blotName,!1),super.replaceWith(e,t)}},TC=class extends Nx{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,t){e===wC.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(e,t)}))}formatAt(e,t,n,r){n===wC.blotName&&(this.forceNext=!0),super.formatAt(e,t,n,r)}highlight(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;let n=`${Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).map(e=>e.textContent).join(`
`)}\n`,r=wC.formats(this.children.head.domNode);if(t||this.forceNext||this.cachedText!==n){if(n.trim().length>0||this.cachedText==null){let t=this.children.reduce((e,t)=>e.concat(xb(t,!1)),new xC.default),i=e(n,r);t.diff(i).reduce((e,t)=>{let{retain:n,attributes:r}=t;return n?(r&&Object.keys(r).forEach(t=>{[wC.blotName,CC.blotName].includes(t)&&this.formatAt(e,n,t,r[t])}),e+n):e},0)}this.cachedText=n,this.forceNext=!1}}html(e,t){let[n]=this.children.find(e);return`<pre data-language="${n?wC.formats(n.domNode):`plain`}">\n${gb(this.code(e,t))}\n</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){let e=wC.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}};TC.allowedChildren=[wC],wC.requiredContainer=TC,wC.allowedChildren=[CC,Cb,mb,pb];var EC=(e,t,n)=>{if(typeof e.versionString==`string`){let r=e.versionString.split(`.`)[0];if(parseInt(r,10)>=11)return e.highlight(n,{language:t}).value}return e.highlight(t,n).value},DC=class extends Jb{static register(){U.register(CC,!0),U.register(wC,!0),U.register(TC,!0)}constructor(e,t){if(super(e,t),this.options.hljs==null)throw Error(`Syntax module requires highlight.js. Please include the library on the page before Quill.`);this.languages=this.options.languages.reduce((e,t)=>{let{key:n}=t;return e[n]=!0,e},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(U.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof TC))return;let t=this.quill.root.ownerDocument.createElement(`select`);this.options.languages.forEach(e=>{let{key:n,label:r}=e,i=t.ownerDocument.createElement(`option`);i.textContent=r,i.setAttribute(`value`,n),t.appendChild(i)}),t.addEventListener(`change`,()=>{e.format(wC.blotName,t.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode??(e.attachUI(t),e.children.head&&(t.value=wC.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(U.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(U.sources.USER);let n=this.quill.getSelection();(e==null?this.quill.scroll.descendants(TC):[e]).forEach(e=>{e.highlight(this.highlightBlot,t)}),this.quill.update(U.sources.SILENT),n!=null&&this.quill.setSelection(n,U.sources.SILENT)}highlightBlot(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:`plain`;if(t=this.languages[t]?t:`plain`,t===`plain`)return gb(e).split(`
`).reduce((e,n,r)=>(r!==0&&e.insert(`
`,{[Px.blotName]:t}),e.insert(n)),new xC.default);let n=this.quill.root.ownerDocument.createElement(`div`);return n.classList.add(Px.className),n.innerHTML=EC(this.options.hljs,t,e),OS(this.quill.scroll,n,[(e,t)=>{let n=SC.value(e);return n?t.compose(new xC.default().retain(t.length(),{[CC.blotName]:n})):t}],[(e,n)=>e.data.split(`
`).reduce((e,n,r)=>(r!==0&&e.insert(`
`,{[Px.blotName]:t}),e.insert(n)),n)],new WeakMap)}};DC.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:`plain`,label:`Plain`},{key:`bash`,label:`Bash`},{key:`cpp`,label:`C++`},{key:`cs`,label:`C#`},{key:`css`,label:`CSS`},{key:`diff`,label:`Diff`},{key:`xml`,label:`HTML/XML`},{key:`java`,label:`Java`},{key:`javascript`,label:`JavaScript`},{key:`markdown`,label:`Markdown`},{key:`php`,label:`PHP`},{key:`python`,label:`Python`},{key:`ruby`,label:`Ruby`},{key:`sql`,label:`SQL`}]};var OC=class e extends yb{static blotName=`table`;static tagName=`TD`;static create(e){let t=super.create();return e?t.setAttribute(`data-row`,e):t.setAttribute(`data-row`,MC()),t}static formats(e){if(e.hasAttribute(`data-row`))return e.getAttribute(`data-row`)}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,n){t===e.blotName&&n?this.domNode.setAttribute(`data-row`,n):super.format(t,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}},kC=class extends _x{static blotName=`table-row`;static tagName=`TR`;checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){let e=this.children.head.formats(),t=this.children.tail.formats(),n=this.next.children.head.formats(),r=this.next.children.tail.formats();return e.table===t.table&&e.table===n.table&&e.table===r.table}return!1}optimize(e){super.optimize(e),this.children.forEach(e=>{if(e.next==null)return;let t=e.formats(),n=e.next.formats();if(t.table!==n.table){let t=this.splitAfter(e);t&&t.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}},AC=class extends _x{static blotName=`table-body`;static tagName=`TBODY`},jC=class extends _x{static blotName=`table-container`;static tagName=`TABLE`;balanceCells(){let e=this.descendants(kC),t=e.reduce((e,t)=>Math.max(t.children.length,e),0);e.forEach(e=>{Array(t-e.children.length).fill(0).forEach(()=>{let t;e.children.head!=null&&(t=OC.formats(e.children.head.domNode));let n=this.scroll.create(OC.blotName,t);e.appendChild(n),n.optimize()})})}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){let[t]=this.descendant(AC);t==null||t.children.head==null||t.children.forEach(t=>{t.children.at(e)?.remove()})}insertColumn(e){let[t]=this.descendant(AC);t==null||t.children.head==null||t.children.forEach(t=>{let n=t.children.at(e),r=OC.formats(t.children.head.domNode),i=this.scroll.create(OC.blotName,r);t.insertBefore(i,n)})}insertRow(e){let[t]=this.descendant(AC);if(t==null||t.children.head==null)return;let n=MC(),r=this.scroll.create(kC.blotName);t.children.head.children.forEach(()=>{let e=this.scroll.create(OC.blotName,n);r.appendChild(e)});let i=t.children.at(e);t.insertBefore(r,i)}rows(){let e=this.children.head;return e==null?[]:e.children.map(e=>e)}};jC.allowedChildren=[AC],AC.requiredContainer=jC,AC.allowedChildren=[kC],kC.requiredContainer=AC,kC.allowedChildren=[OC],OC.requiredContainer=kC;function MC(){return`row-${Math.random().toString(36).slice(2,6)}`}var NC=l(ub()),PC=class extends Jb{static register(){U.register(OC),U.register(kC),U.register(AC),U.register(jC)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(jC).forEach(e=>{e.balanceCells()})}deleteColumn(){let[e,,t]=this.getTable();t!=null&&(e.deleteColumn(t.cellOffset()),this.quill.update(U.sources.USER))}deleteRow(){let[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(U.sources.USER))}deleteTable(){let[e]=this.getTable();if(e==null)return;let t=e.offset();e.remove(),this.quill.update(U.sources.USER),this.quill.setSelection(t,U.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];let[t,n]=this.quill.getLine(e.index);if(t==null||t.statics.blotName!==OC.blotName)return[null,null,null,-1];let r=t.parent;return[r.parent.parent,r,t,n]}insertColumn(e){let t=this.quill.getSelection();if(!t)return;let[n,r,i]=this.getTable(t);if(i==null)return;let a=i.cellOffset();n.insertColumn(a+e),this.quill.update(U.sources.USER);let o=r.rowOffset();e===0&&(o+=1),this.quill.setSelection(t.index+o,t.length,U.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){let t=this.quill.getSelection();if(!t)return;let[n,r,i]=this.getTable(t);if(i==null)return;let a=r.rowOffset();n.insertRow(a+e),this.quill.update(U.sources.USER),e>0?this.quill.setSelection(t,U.sources.SILENT):this.quill.setSelection(t.index+r.children.length,t.length,U.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,t){let n=this.quill.getSelection();if(n==null)return;let r=Array(e).fill(0).reduce(e=>{let n=Array(t).fill(`
`).join(``);return e.insert(n,{table:MC()})},new NC.default().retain(n.index));this.quill.updateContents(r,U.sources.USER),this.quill.setSelection(n.index,U.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(U.events.SCROLL_OPTIMIZE,e=>{e.some(e=>[`TD`,`TR`,`TBODY`,`TABLE`].includes(e.target.tagName)?(this.quill.once(U.events.TEXT_CHANGE,(e,t,n)=>{n===U.sources.USER&&this.balanceTables()}),!0):!1)})}},FC=l(ub()),IC=Ab(`quill:toolbar`),LC=class extends Jb{constructor(e,t){if(super(e,t),Array.isArray(this.options.container)){let t=document.createElement(`div`);t.setAttribute(`role`,`toolbar`),zC(t,this.options.container),e.container?.parentNode?.insertBefore(t,e.container),this.container=t}else typeof this.options.container==`string`?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){IC.error(`Container required for toolbar`,this.options);return}this.container.classList.add(`ql-toolbar`),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(e=>{let t=this.options.handlers?.[e];t&&this.addHandler(e,t)}),Array.from(this.container.querySelectorAll(`button, select`)).forEach(e=>{this.attach(e)}),this.quill.on(U.events.EDITOR_CHANGE,()=>{let[e]=this.quill.selection.getRange();this.update(e)})}addHandler(e,t){this.handlers[e]=t}attach(e){let t=Array.from(e.classList).find(e=>e.indexOf(`ql-`)===0);if(!t)return;if(t=t.slice(3),e.tagName===`BUTTON`&&e.setAttribute(`type`,`button`),this.handlers[t]==null&&this.quill.scroll.query(t)==null){IC.warn(`ignoring attaching to nonexistent format`,t,e);return}let n=e.tagName===`SELECT`?`change`:`click`;e.addEventListener(n,n=>{let r;if(e.tagName===`SELECT`){if(e.selectedIndex<0)return;let t=e.options[e.selectedIndex];r=t.hasAttribute(`selected`)?!1:t.value||!1}else r=e.classList.contains(`ql-active`)?!1:e.value||!e.hasAttribute(`value`),n.preventDefault();this.quill.focus();let[i]=this.quill.selection.getRange();if(this.handlers[t]!=null)this.handlers[t].call(this,r);else if(this.quill.scroll.query(t).prototype instanceof Zy){if(r=prompt(`Enter ${t}`),!r)return;this.quill.updateContents(new FC.default().retain(i.index).delete(i.length).insert({[t]:r}),U.sources.USER)}else this.quill.format(t,r,U.sources.USER);this.update(i)}),this.controls.push([t,e])}update(e){let t=e==null?{}:this.quill.getFormat(e);this.controls.forEach(n=>{let[r,i]=n;if(i.tagName===`SELECT`){let n=null;if(e==null)n=null;else if(t[r]==null)n=i.querySelector(`option[selected]`);else if(!Array.isArray(t[r])){let e=t[r];typeof e==`string`&&(e=e.replace(/"/g,`\\"`)),n=i.querySelector(`option[value="${e}"]`)}n==null?(i.value=``,i.selectedIndex=-1):n.selected=!0}else if(e==null)i.classList.remove(`ql-active`),i.setAttribute(`aria-pressed`,`false`);else if(i.hasAttribute(`value`)){let e=t[r],n=e===i.getAttribute(`value`)||e!=null&&e.toString()===i.getAttribute(`value`)||e==null&&!i.getAttribute(`value`);i.classList.toggle(`ql-active`,n),i.setAttribute(`aria-pressed`,n.toString())}else{let e=t[r]!=null;i.classList.toggle(`ql-active`,e),i.setAttribute(`aria-pressed`,e.toString())}})}};LC.DEFAULTS={};function RC(e,t,n){let r=document.createElement(`button`);r.setAttribute(`type`,`button`),r.classList.add(`ql-${t}`),r.setAttribute(`aria-pressed`,`false`),n==null?r.setAttribute(`aria-label`,t):(r.value=n,r.setAttribute(`aria-label`,`${t}: ${n}`)),e.appendChild(r)}function zC(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(t=>{let n=document.createElement(`span`);n.classList.add(`ql-formats`),t.forEach(e=>{if(typeof e==`string`)RC(n,e);else{let t=Object.keys(e)[0],r=e[t];Array.isArray(r)?BC(n,t,r):RC(n,t,r)}}),e.appendChild(n)})}function BC(e,t,n){let r=document.createElement(`select`);r.classList.add(`ql-${t}`),n.forEach(e=>{let t=document.createElement(`option`);e===!1?t.setAttribute(`selected`,`selected`):t.setAttribute(`value`,String(e)),r.appendChild(t)}),e.appendChild(r)}LC.DEFAULTS={container:null,handlers:{clean(){let e=this.quill.getSelection();if(e!=null)if(e.length===0){let e=this.quill.getFormat();Object.keys(e).forEach(e=>{this.quill.scroll.query(e,V.INLINE)!=null&&this.quill.format(e,!1,U.sources.USER)})}else this.quill.removeFormat(e.index,e.length,U.sources.USER)},direction(e){let{align:t}=this.quill.getFormat();e===`rtl`&&t==null?this.quill.format(`align`,`right`,U.sources.USER):!e&&t===`right`&&this.quill.format(`align`,!1,U.sources.USER),this.quill.format(`direction`,e,U.sources.USER)},indent(e){let t=this.quill.getSelection(),n=this.quill.getFormat(t),r=parseInt(n.indent||0,10);if(e===`+1`||e===`-1`){let t=e===`+1`?1:-1;n.direction===`rtl`&&(t*=-1),this.quill.format(`indent`,r+t,U.sources.USER)}},link(e){e===!0&&(e=prompt(`Enter link URL:`)),this.quill.format(`link`,e,U.sources.USER)},list(e){let t=this.quill.getSelection(),n=this.quill.getFormat(t);e===`check`?n.list===`checked`||n.list===`unchecked`?this.quill.format(`list`,!1,U.sources.USER):this.quill.format(`list`,`unchecked`,U.sources.USER):this.quill.format(`list`,e,U.sources.USER)}}};var VC=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>`,HC=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>`,UC=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>`,WC=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>`,GC=`<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>`,KC=`<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>`,qC=`<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>`,JC=`<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>`,YC=`<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>`,XC=`<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>`,ZC=`<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>`,QC=`<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>`,$C=`<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>`,ew=`<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>`,tw=`<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>`,nw=`<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>`,rw=`<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>`,iw=`<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>`,aw=`<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>`,ow=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>`,sw=`<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>`,cw=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>`,lw=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>`,uw=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>`,dw=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>`,fw=`<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>`,pw=`<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>`,mw=`<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>`,hw=`<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>`,gw=`<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>`,_w=`<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>`,vw=`<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>`,yw=`<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>`,bw={align:{"":VC,center:HC,right:UC,justify:WC},background:GC,blockquote:KC,bold:qC,clean:JC,code:YC,"code-block":YC,color:XC,direction:{"":ZC,rtl:QC},formula:$C,header:{1:ew,2:tw,3:nw,4:rw,5:iw,6:aw},italic:ow,image:sw,indent:{"+1":cw,"-1":lw},link:uw,list:{bullet:dw,check:fw,ordered:pw},script:{sub:mw,super:hw},strike:gw,table:_w,underline:vw,video:yw},xw=`<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>`,Sw=0;function Cw(e,t){e.setAttribute(t,`${e.getAttribute(t)!==`true`}`)}var ww=class{constructor(e){this.select=e,this.container=document.createElement(`span`),this.buildPicker(),this.select.style.display=`none`,this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener(`mousedown`,()=>{this.togglePicker()}),this.label.addEventListener(`keydown`,e=>{switch(e.key){case`Enter`:this.togglePicker();break;case`Escape`:this.escape(),e.preventDefault();break;default:}}),this.select.addEventListener(`change`,this.update.bind(this))}togglePicker(){this.container.classList.toggle(`ql-expanded`),Cw(this.label,`aria-expanded`),Cw(this.options,`aria-hidden`)}buildItem(e){let t=document.createElement(`span`);t.tabIndex=`0`,t.setAttribute(`role`,`button`),t.classList.add(`ql-picker-item`);let n=e.getAttribute(`value`);return n&&t.setAttribute(`data-value`,n),e.textContent&&t.setAttribute(`data-label`,e.textContent),t.addEventListener(`click`,()=>{this.selectItem(t,!0)}),t.addEventListener(`keydown`,e=>{switch(e.key){case`Enter`:this.selectItem(t,!0),e.preventDefault();break;case`Escape`:this.escape(),e.preventDefault();break;default:}}),t}buildLabel(){let e=document.createElement(`span`);return e.classList.add(`ql-picker-label`),e.innerHTML=xw,e.tabIndex=`0`,e.setAttribute(`role`,`button`),e.setAttribute(`aria-expanded`,`false`),this.container.appendChild(e),e}buildOptions(){let e=document.createElement(`span`);e.classList.add(`ql-picker-options`),e.setAttribute(`aria-hidden`,`true`),e.tabIndex=`-1`,e.id=`ql-picker-options-${Sw}`,Sw+=1,this.label.setAttribute(`aria-controls`,e.id),this.options=e,Array.from(this.select.options).forEach(t=>{let n=this.buildItem(t);e.appendChild(n),t.selected===!0&&this.selectItem(n)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add(`ql-picker`),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove(`ql-expanded`),this.label.setAttribute(`aria-expanded`,`false`),this.options.setAttribute(`aria-hidden`,`true`)}selectItem(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=this.container.querySelector(`.ql-selected`);e!==n&&(n?.classList.remove(`ql-selected`),e!=null&&(e.classList.add(`ql-selected`),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute(`data-value`)?this.label.setAttribute(`data-value`,e.getAttribute(`data-value`)):this.label.removeAttribute(`data-value`),e.hasAttribute(`data-label`)?this.label.setAttribute(`data-label`,e.getAttribute(`data-label`)):this.label.removeAttribute(`data-label`),t&&(this.select.dispatchEvent(new Event(`change`)),this.close())))}update(){let e;if(this.select.selectedIndex>-1){let t=this.container.querySelector(`.ql-picker-options`).children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);let t=e!=null&&e!==this.select.querySelector(`option[selected]`);this.label.classList.toggle(`ql-active`,t)}},Tw=class extends ww{constructor(e,t){super(e),this.label.innerHTML=t,this.container.classList.add(`ql-color-picker`),Array.from(this.container.querySelectorAll(`.ql-picker-item`)).slice(0,7).forEach(e=>{e.classList.add(`ql-primary`)})}buildItem(e){let t=super.buildItem(e);return t.style.backgroundColor=e.getAttribute(`value`)||``,t}selectItem(e,t){super.selectItem(e,t);let n=this.label.querySelector(`.ql-color-label`),r=e&&e.getAttribute(`data-value`)||``;n&&(n.tagName===`line`?n.style.stroke=r:n.style.fill=r)}},Ew=class extends ww{constructor(e,t){super(e),this.container.classList.add(`ql-icon-picker`),Array.from(this.container.querySelectorAll(`.ql-picker-item`)).forEach(e=>{e.innerHTML=t[e.getAttribute(`data-value`)||``]}),this.defaultItem=this.container.querySelector(`.ql-selected`),this.selectItem(this.defaultItem)}selectItem(e,t){super.selectItem(e,t);let n=e||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}},Dw=e=>{let{overflowY:t}=getComputedStyle(e,null);return t!==`visible`&&t!==`clip`},Ow=class{constructor(e,t){this.quill=e,this.boundsContainer=t||document.body,this.root=e.addContainer(`ql-tooltip`),this.root.innerHTML=this.constructor.TEMPLATE,Dw(this.quill.root)&&this.quill.root.addEventListener(`scroll`,()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add(`ql-hidden`)}position(e){let t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${t}px`,this.root.style.top=`${n}px`,this.root.classList.remove(`ql-flip`);let r=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect(),a=0;if(i.right>r.right&&(a=r.right-i.right,this.root.style.left=`${t+a}px`),i.left<r.left&&(a=r.left-i.left,this.root.style.left=`${t+a}px`),i.bottom>r.bottom){let t=i.bottom-i.top,r=e.bottom-e.top+t;this.root.style.top=`${n-r}px`,this.root.classList.add(`ql-flip`)}return a}show(){this.root.classList.remove(`ql-editing`),this.root.classList.remove(`ql-hidden`)}},kw=[!1,`center`,`right`,`justify`],Aw=`#000000.#e60000.#ff9900.#ffff00.#008a00.#0066cc.#9933ff.#ffffff.#facccc.#ffebcc.#ffffcc.#cce8cc.#cce0f5.#ebd6ff.#bbbbbb.#f06666.#ffc266.#ffff66.#66b966.#66a3e0.#c285ff.#888888.#a10000.#b26b00.#b2b200.#006100.#0047b2.#6b24b2.#444444.#5c0000.#663d00.#666600.#003700.#002966.#3d1466`.split(`.`),jw=[!1,`serif`,`monospace`],Mw=[`1`,`2`,`3`,!1],Nw=[`small`,!1,`large`,`huge`],Pw=class extends Qb{constructor(e,t){super(e,t);let n=t=>{if(!document.body.contains(e.root)){document.body.removeEventListener(`click`,n);return}this.tooltip!=null&&!this.tooltip.root.contains(t.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(e=>{e.container.contains(t.target)||e.close()})};e.emitter.listenDOM(`click`,document.body,n)}addModule(e){let t=super.addModule(e);return e===`toolbar`&&this.extendToolbar(t),t}buildButtons(e,t){Array.from(e).forEach(e=>{(e.getAttribute(`class`)||``).split(/\s+/).forEach(n=>{if(n.startsWith(`ql-`)&&(n=n.slice(3),t[n]!=null))if(n===`direction`)e.innerHTML=t[n][``]+t[n].rtl;else if(typeof t[n]==`string`)e.innerHTML=t[n];else{let r=e.value||``;r!=null&&t[n][r]&&(e.innerHTML=t[n][r])}})})}buildPickers(e,t){this.pickers=Array.from(e).map(e=>{if(e.classList.contains(`ql-align`)&&(e.querySelector(`option`)??Lw(e,kw),typeof t.align==`object`))return new Ew(e,t.align);if(e.classList.contains(`ql-background`)||e.classList.contains(`ql-color`)){let n=e.classList.contains(`ql-background`)?`background`:`color`;return e.querySelector(`option`)??Lw(e,Aw,n===`background`?`#ffffff`:`#000000`),new Tw(e,t[n])}return e.querySelector(`option`)??(e.classList.contains(`ql-font`)?Lw(e,jw):e.classList.contains(`ql-header`)?Lw(e,Mw):e.classList.contains(`ql-size`)&&Lw(e,Nw)),new ww(e)}),this.quill.on(H.events.EDITOR_CHANGE,()=>{this.pickers.forEach(e=>{e.update()})})}};Pw.DEFAULTS=Ty({},Qb.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit(`formula`)},image(){let e=this.container.querySelector(`input.ql-image[type=file]`);e??(e=document.createElement(`input`),e.setAttribute(`type`,`file`),e.setAttribute(`accept`,this.quill.uploader.options.mimetypes.join(`, `)),e.classList.add(`ql-image`),e.addEventListener(`change`,()=>{let t=this.quill.getSelection(!0);this.quill.uploader.upload(t,e.files),e.value=``}),this.container.appendChild(e)),e.click()},video(){this.quill.theme.tooltip.edit(`video`)}}}}});var Fw=class extends Ow{constructor(e,t){super(e,t),this.textbox=this.root.querySelector(`input[type="text"]`),this.listen()}listen(){this.textbox.addEventListener(`keydown`,e=>{e.key===`Enter`?(this.save(),e.preventDefault()):e.key===`Escape`&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:`link`,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove(`ql-hidden`),this.root.classList.add(`ql-editing`),this.textbox==null)return;t==null?e!==this.root.getAttribute(`data-mode`)&&(this.textbox.value=``):this.textbox.value=t;let n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute(`placeholder`,this.textbox.getAttribute(`data-${e}`)||``),this.root.setAttribute(`data-mode`,e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute(`data-mode`)){case`link`:{let{scrollTop:t}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,`link`,e,H.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format(`link`,e,H.sources.USER)),this.quill.root.scrollTop=t;break}case`video`:e=Iw(e);case`formula`:{if(!e)break;let t=this.quill.getSelection(!0);if(t!=null){let n=t.index+t.length;this.quill.insertEmbed(n,this.root.getAttribute(`data-mode`),e,H.sources.USER),this.root.getAttribute(`data-mode`)===`formula`&&this.quill.insertText(n+1,` `,H.sources.USER),this.quill.setSelection(n+2,H.sources.USER)}break}default:}this.textbox.value=``,this.hide()}};function Iw(e){let t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||`https`}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||`https`}://player.vimeo.com/video/${t[2]}/`:e}function Lw(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(t=>{let r=document.createElement(`option`);t===n?r.setAttribute(`selected`,`selected`):r.setAttribute(`value`,String(t)),e.appendChild(r)})}var Rw=[[`bold`,`italic`,`link`],[{header:1},{header:2},`blockquote`]],zw=class extends Fw{static TEMPLATE=[`<span class="ql-tooltip-arrow"></span>`,`<div class="ql-tooltip-editor">`,`<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">`,`<a class="ql-close"></a>`,`</div>`].join(``);constructor(e,t){super(e,t),this.quill.on(H.events.EDITOR_CHANGE,(e,t,n,r)=>{if(e===H.events.SELECTION_CHANGE)if(t!=null&&t.length>0&&r===H.sources.USER){this.show(),this.root.style.left=`0px`,this.root.style.width=``,this.root.style.width=`${this.root.offsetWidth}px`;let e=this.quill.getLines(t.index,t.length);if(e.length===1){let e=this.quill.getBounds(t);e!=null&&this.position(e)}else{let n=e[e.length-1],r=this.quill.getIndex(n),i=Math.min(n.length()-1,t.index+t.length-r),a=this.quill.getBounds(new Nb(r,i));a!=null&&this.position(a)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(`.ql-close`).addEventListener(`click`,()=>{this.root.classList.remove(`ql-editing`)}),this.quill.on(H.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains(`ql-hidden`))return;let e=this.quill.getSelection();if(e!=null){let t=this.quill.getBounds(e);t!=null&&this.position(t)}},1)})}cancel(){this.show()}position(e){let t=super.position(e),n=this.root.querySelector(`.ql-tooltip-arrow`);return n.style.marginLeft=``,t!==0&&(n.style.marginLeft=`${-1*t-n.offsetWidth/2}px`),t}},Bw=class extends Pw{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=Rw),super(e,t),this.quill.container.classList.add(`ql-bubble`)}extendToolbar(e){this.tooltip=new zw(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll(`button`),bw),this.buildPickers(e.container.querySelectorAll(`select`),bw))}};Bw.DEFAULTS=Ty({},Pw.DEFAULTS,{modules:{toolbar:{handlers:{link(e){e?this.quill.theme.tooltip.edit():this.quill.format(`link`,!1,U.sources.USER)}}}}});var Vw=[[{header:[`1`,`2`,`3`,!1]}],[`bold`,`italic`,`underline`,`link`],[{list:`ordered`},{list:`bullet`}],[`clean`]],Hw=class extends Fw{static TEMPLATE=[`<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>`,`<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">`,`<a class="ql-action"></a>`,`<a class="ql-remove"></a>`].join(``);preview=this.root.querySelector(`a.ql-preview`);listen(){super.listen(),this.root.querySelector(`a.ql-action`).addEventListener(`click`,e=>{this.root.classList.contains(`ql-editing`)?this.save():this.edit(`link`,this.preview.textContent),e.preventDefault()}),this.root.querySelector(`a.ql-remove`).addEventListener(`click`,e=>{if(this.linkRange!=null){let e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,`link`,!1,H.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on(H.events.SELECTION_CHANGE,(e,t,n)=>{if(e!=null){if(e.length===0&&n===H.sources.USER){let[t,n]=this.quill.scroll.descendant(dC,e.index);if(t!=null){this.linkRange=new Nb(e.index-n,t.length());let r=dC.formats(t.domNode);this.preview.textContent=r,this.preview.setAttribute(`href`,r),this.show();let i=this.quill.getBounds(this.linkRange);i!=null&&this.position(i);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute(`data-mode`)}},Uw=class extends Pw{constructor(e,t){t.modules.toolbar!=null&&t.modules.toolbar.container==null&&(t.modules.toolbar.container=Vw),super(e,t),this.quill.container.classList.add(`ql-snow`)}extendToolbar(e){e.container!=null&&(e.container.classList.add(`ql-snow`),this.buildButtons(e.container.querySelectorAll(`button`),bw),this.buildPickers(e.container.querySelectorAll(`select`),bw),this.tooltip=new Hw(this.quill,this.options.bounds),e.container.querySelector(`.ql-link`)&&this.quill.keyboard.addBinding({key:`k`,shortKey:!0},(t,n)=>{e.handlers.link.call(e,!n.format.link)}))}};Uw.DEFAULTS=Ty({},Pw.DEFAULTS,{modules:{toolbar:{handlers:{link(e){if(e){let e=this.quill.getSelection();if(e==null||e.length===0)return;let t=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(t)&&t.indexOf(`mailto:`)!==0&&(t=`mailto:${t}`);let{tooltip:n}=this.quill.theme;n.edit(`link`,t)}else this.quill.format(`link`,!1,U.sources.USER)}}}}});var Ww=Uw;rC.register({"attributors/attribute/direction":Lx,"attributors/class/align":Ex,"attributors/class/background":jx,"attributors/class/color":kx,"attributors/class/direction":Rx,"attributors/class/font":Vx,"attributors/class/size":Ux,"attributors/style/align":Dx,"attributors/style/background":Mx,"attributors/style/color":Ax,"attributors/style/direction":zx,"attributors/style/font":Hx,"attributors/style/size":Wx},!0),rC.register({"formats/align":Ex,"formats/direction":Rx,"formats/indent":iC,"formats/background":Mx,"formats/color":Ax,"formats/font":Vx,"formats/size":Ux,"formats/blockquote":aC,"formats/code-block":Px,"formats/header":oC,"formats/list":cC,"formats/bold":lC,"formats/code":Fx,"formats/italic":uC,"formats/link":dC,"formats/script":pC,"formats/strike":mC,"formats/underline":hC,"formats/formula":gC,"formats/image":vC,"formats/video":bC,"modules/syntax":DC,"modules/table":PC,"modules/toolbar":LC,"themes/bubble":Bw,"themes/snow":Ww,"ui/icons":bw,"ui/picker":ww,"ui/icon-picker":Ew,"ui/color-picker":Tw,"ui/tooltip":Ow},!0);var Gw=rC,Kw=class extends v.Component{constructor(e){super(e),this.editingAreaRef=(0,v.createRef)(),this.containerRef=(0,v.createRef)(),this.dirtyProps=[`modules`,`formats`,`bounds`,`theme`,`children`],this.cleanProps=[`id`,`className`,`style`,`placeholder`,`tabIndex`,`onChange`,`onChangeSelection`,`onFocus`,`onBlur`,`onKeyPress`,`onKeyDown`,`onKeyUp`],this.state={generation:0},this.selection=null,this.onEditorChange=(e,t,n,r)=>{e===`text-change`?this.onEditorChangeText?.(this.editor.root.innerHTML,t,r,this.unprivilegedEditor):e===`selection-change`&&this.onEditorChangeSelection?.(t,r,this.unprivilegedEditor)},this.value=(this.isControlled()?e.value:e.defaultValue)??``}validateProps(e){if(v.Children.count(e.children)>1)throw Error(`The Quill editing area can only be composed of a single React element.`);if(v.Children.count(e.children)&&v.Children.only(e.children)?.type===`textarea`)throw Error(`Quill does not support editing on a <textarea>. Use a <div> instead.`);if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(e,t){if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if(`value`in e){let t=this.getEditorContents(),n=e.value??``;this.isEqualValue(n,t)||this.setEditorContents(this.editor,n)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),[...this.cleanProps,...this.dirtyProps].some(t=>!wy(e[t],this.props[t]))}shouldComponentRegenerate(e){return this.dirtyProps.some(t=>!wy(e[t],this.props[t]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(e,t){if(this.editor&&this.shouldComponentRegenerate(e)){let e=this.editor.getContents(),t=this.editor.getSelection();this.regenerationSnapshot={delta:e,selection:t},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){let{delta:e,selection:t}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();let n=this.editor;n.setContents(e),qw(()=>this.setEditorSelection(n,t))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);let e=this.props.modules?.toolbar;if(!(typeof e==`object`&&e&&`container`in e&&typeof e.container==`string`||typeof e==`string`)){let e=this.containerRef.current?.querySelector(`.ql-toolbar`);e&&e.remove()}delete this.editor}isControlled(){return`value`in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw Error(`Accessing non-instantiated editor`);return this.editor}createEditor(e,t){let n=new Gw(e,t);return t.tabIndex!=null&&this.setEditorTabIndex(n,t.tabIndex),this.hookEditor(n),n}hookEditor(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on(`editor-change`,this.onEditorChange)}unhookEditor(e){e.off(`editor-change`,this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(e){return e&&e.ops}isEqualValue(e,t){return this.isDelta(e)&&this.isDelta(t)?wy(e.ops,t.ops):wy(e,t)}setEditorContents(e,t){this.value=t;let n=this.getEditorSelection();typeof t==`string`?e.setContents(e.clipboard.convert({html:t})):e.setContents(t),qw(()=>this.setEditorSelection(e,n))}setEditorSelection(e,t){if(this.selection=t,t){let n=e.getLength();t.index=Math.max(0,Math.min(t.index,n-1)),t.length=Math.max(0,Math.min(t.length,n-1-t.index)),e.setSelection(t)}}setEditorTabIndex(e,t){e?.scroll?.domNode&&(e.scroll.domNode.tabIndex=t)}setEditorReadOnly(e,t){t?e.disable():e.enable()}makeUnprivilegedEditor(e){let t=e;return{getHTML:()=>t.root.innerHTML,getSemanticHTML:t.getSemanticHTML.bind(t),getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}}getEditingArea(){let e=this.editingAreaRef.current;if(!e)throw Error(`Cannot find element for editing area`);if(e.nodeType===3)throw Error(`Editing area cannot be a text node`);return e}renderEditingArea(){let{children:e,preserveWhitespace:t}=this.props,{generation:n}=this.state,r={key:n,ref:this.editingAreaRef};return v.Children.count(e)?v.cloneElement(v.Children.only(e),r):t?v.createElement(`pre`,{...r}):v.createElement(`div`,{...r})}render(){return v.createElement(`div`,{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??``}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(e,t,n,r){if(!this.editor)return;let i=this.isDelta(this.value)?r.getContents():r.getHTML();i!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=i,this.props.onChange?.(e,t,n,r))}onEditorChangeSelection(e,t,n){if(!this.editor)return;let r=this.getEditorSelection(),i=!r&&e,a=r&&!e;wy(e,r)||(this.selection=e,this.props.onChangeSelection?.(e,t,n),i?this.props.onFocus?.(e,t,n):a&&this.props.onBlur?.(r,t,n))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}};Kw.displayName=`React Quill`,Kw.Quill=Gw,Kw.defaultProps={theme:`snow`,modules:{},readOnly:!1};function qw(e){Promise.resolve().then(e)}var Jw=Kw,Yw=()=>void 0,Xw=function(e){let t=[],n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)==55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)==56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Zw=function(e){let t=[],n=0,r=0;for(;n<e.length;){let i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[n++];t[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){let a=e[n++],o=e[n++],s=e[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{let a=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return t.join(``)},Qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`,get ENCODED_VALS(){return this.ENCODED_VALS_BASE+`+/=`},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+`-_.`},HAS_NATIVE_SUPPORT:typeof atob==`function`,encodeByteArray(e,t){if(!Array.isArray(e))throw Error(`encodeByteArray takes an array as a parameter`);this.init_();let n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,c=s?e[t+2]:0,l=i>>2,u=(i&3)<<4|o>>4,d=(o&15)<<2|c>>6,f=c&63;s||(f=64,a||(d=64)),r.push(n[l],n[u],n[d],n[f])}return r.join(``)},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xw(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Zw(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let i=n[e.charAt(t++)],a=t<e.length?n[e.charAt(t)]:0;++t;let o=t<e.length?n[e.charAt(t)]:64;++t;let s=t<e.length?n[e.charAt(t)]:64;if(++t,i==null||a==null||o==null||s==null)throw new $w;let c=i<<2|a>>4;if(r.push(c),o!==64){let e=a<<4&240|o>>2;if(r.push(e),s!==64){let e=o<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},$w=class extends Error{constructor(){super(...arguments),this.name=`DecodeBase64StringError`}},eT=function(e){let t=Xw(e);return Qw.encodeByteArray(t,!0)},tT=function(e){return eT(e).replace(/\./g,``)},nT=function(e){try{return Qw.decodeString(e,!0)}catch(e){console.error(`base64Decode failed: `,e)}return null};
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function rT(){if(typeof self<`u`)return self;if(typeof window<`u`)return window;if(typeof global<`u`)return global;throw Error(`Unable to locate global object.`)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var iT=()=>rT().__FIREBASE_DEFAULTS__,aT=()=>{if(typeof process>`u`)return;let e={}.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},oT=()=>{if(typeof document>`u`)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=e&&nT(e[1]);return t&&JSON.parse(t)},sT=()=>{try{return Yw()||iT()||aT()||oT()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},cT=e=>sT()?.emulatorHosts?.[e],lT=e=>{let t=cT(e);if(!t)return;let n=t.lastIndexOf(`:`);if(n<=0||n+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(n+1),10);return t[0]===`[`?[t.substring(1,n-1),r]:[t.substring(0,n),r]},uT=()=>sT()?.config,dT=e=>sT()?.[`_${e}`],fT=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e==`function`&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}};
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function pT(e){try{return(e.startsWith(`http://`)||e.startsWith(`https://`)?new URL(e).hostname:e).endsWith(`.cloudworkstations.dev`)}catch{return!1}}async function mT(e){return(await fetch(e,{credentials:`include`})).ok}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function hT(e,t){if(e.uid)throw Error(`The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.`);let n={alg:`none`,type:`JWT`},r=t||`demo-project`,i=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error(`mockUserToken must contain 'sub' or 'user_id' field!`);let o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:`custom`,identities:{}},...e};return[tT(JSON.stringify(n)),tT(JSON.stringify(o)),``].join(`.`)}var gT={};function _T(){let e={prod:[],emulator:[]};for(let t of Object.keys(gT))gT[t]?e.emulator.push(t):e.prod.push(t);return e}function vT(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement(`div`),t.setAttribute(`id`,e),n=!0),{created:n,element:t}}var yT=!1;function bT(e,t){if(typeof window>`u`||typeof document>`u`||!pT(window.location.host)||gT[e]===t||gT[e]||yT)return;gT[e]=t;function n(e){return`__firebase__banner__${e}`}let r=`__firebase__banner`,i=_T().prod.length>0;function a(){let e=document.getElementById(r);e&&e.remove()}function o(e){e.style.display=`flex`,e.style.background=`#7faaf0`,e.style.position=`fixed`,e.style.bottom=`5px`,e.style.left=`5px`,e.style.padding=`.5em`,e.style.borderRadius=`5px`,e.style.alignItems=`center`}function s(e,t){e.setAttribute(`width`,`24`),e.setAttribute(`id`,t),e.setAttribute(`height`,`24`),e.setAttribute(`viewBox`,`0 0 24 24`),e.setAttribute(`fill`,`none`),e.style.marginLeft=`-6px`}function c(){let e=document.createElement(`span`);return e.style.cursor=`pointer`,e.style.marginLeft=`16px`,e.style.fontSize=`24px`,e.innerHTML=` &times;`,e.onclick=()=>{yT=!0,a()},e}function l(e,t){e.setAttribute(`id`,t),e.innerText=`Learn more`,e.href=`https://firebase.google.com/docs/studio/preview-apps#preview-backend`,e.setAttribute(`target`,`__blank`),e.style.paddingLeft=`5px`,e.style.textDecoration=`underline`}function u(){let e=vT(r),t=n(`text`),a=document.getElementById(t)||document.createElement(`span`),u=n(`learnmore`),d=document.getElementById(u)||document.createElement(`a`),f=n(`preprendIcon`),p=document.getElementById(f)||document.createElementNS(`http://www.w3.org/2000/svg`,`svg`);if(e.created){let t=e.element;o(t),l(d,u);let n=c();s(p,f),t.append(p,a,d,n),document.body.appendChild(t)}i?(a.innerText=`Preview backend disconnected.`,p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText=`Preview backend running in this workspace.`),a.setAttribute(`id`,t)}document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,u):u()}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function xT(){return typeof navigator<`u`&&typeof navigator.userAgent==`string`?navigator.userAgent:``}function ST(){return typeof window<`u`&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xT())}function CT(){let e=sT()?.forceEnvironment;if(e===`node`)return!0;if(e===`browser`)return!1;try{return Object.prototype.toString.call(global.process)===`[object process]`}catch{return!1}}function wT(){return typeof navigator<`u`&&navigator.userAgent===`Cloudflare-Workers`}function TT(){let e=typeof chrome==`object`?chrome.runtime:typeof browser==`object`?browser.runtime:void 0;return typeof e==`object`&&e.id!==void 0}function ET(){return typeof navigator==`object`&&navigator.product===`ReactNative`}function DT(){let e=xT();return e.indexOf(`MSIE `)>=0||e.indexOf(`Trident/`)>=0}function OT(){return!CT()&&!!navigator.userAgent&&navigator.userAgent.includes(`Safari`)&&!navigator.userAgent.includes(`Chrome`)}function kT(){try{return typeof indexedDB==`object`}catch{return!1}}function AT(){return new Promise((e,t)=>{try{let n=!0,r=`validate-browser-context-for-indexeddb-analytics-module`,i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||``)}}catch(e){t(e)}})}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var jT=`FirebaseError`,MT=class e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=jT,Object.setPrototypeOf(this,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,NT.prototype.create)}},NT=class{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){let n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?PT(i,n):`Error`,o=`${this.serviceName}: ${a} (${r}).`;return new MT(r,o,n)}};function PT(e,t){return e.replace(FT,(e,n)=>{let r=t[n];return r==null?`<${n}?>`:String(r)})}var FT=/\{\$([^}]+)}/g;function IT(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function LT(e,t){if(e===t)return!0;let n=Object.keys(e),r=Object.keys(t);for(let i of n){if(!r.includes(i))return!1;let n=e[i],a=t[i];if(RT(n)&&RT(a)){if(!LT(n,a))return!1}else if(n!==a)return!1}for(let e of r)if(!n.includes(e))return!1;return!0}function RT(e){return typeof e==`object`&&!!e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function zT(e){let t=[];for(let[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+`=`+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+`=`+encodeURIComponent(r));return t.length?`&`+t.join(`&`):``}function BT(e){let t={};return e.replace(/^\?/,``).split(`&`).forEach(e=>{if(e){let[n,r]=e.split(`=`);t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function VT(e){let t=e.indexOf(`?`);if(!t)return``;let n=e.indexOf(`#`,t);return e.substring(t,n>0?n:void 0)}function HT(e,t){let n=new UT(e,t);return n.subscribe.bind(n)}var UT=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(e===void 0&&t===void 0&&n===void 0)throw Error(`Missing Observer.`);r=WT(e,[`next`,`error`,`complete`])?e:{next:e,error:t,complete:n},r.next===void 0&&(r.next=GT),r.error===void 0&&(r.error=GT),r.complete===void 0&&(r.complete=GT);let i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],--this.observerCount,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(e){typeof console<`u`&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function WT(e,t){if(typeof e!=`object`||!e)return!1;for(let n of t)if(n in e&&typeof e[n]==`function`)return!0;return!1}function GT(){}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function KT(e){return e&&e._delegate?e._delegate:e}var qT=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=`LAZY`,this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},JT=`[DEFAULT]`,YT=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new fT;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}else if(n)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(ZT(e))try{this.getOrInitializeService({instanceIdentifier:JT})}catch{}for(let[e,t]of this.instancesDeferred.entries()){let n=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch{}}}}clearInstance(e=JT){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>`INTERNAL`in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>`_delete`in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=JT){return this.instances.has(e)}getOptions(e=JT){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);n===i&&t.resolve(r)}return r}onInit(e,t){let n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);let i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let n=this.onInitCallbacks.get(t);if(n)for(let r of n)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:XT(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=JT){return this.component?this.component.multipleInstances?e:JT:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!==`EXPLICIT`}};function XT(e){return e===JT?void 0:e}function ZT(e){return e.instantiationMode===`EAGER`}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var QT=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new YT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},$T=[],eE;(function(e){e[e.DEBUG=0]=`DEBUG`,e[e.VERBOSE=1]=`VERBOSE`,e[e.INFO=2]=`INFO`,e[e.WARN=3]=`WARN`,e[e.ERROR=4]=`ERROR`,e[e.SILENT=5]=`SILENT`})(eE||={});var tE={debug:eE.DEBUG,verbose:eE.VERBOSE,info:eE.INFO,warn:eE.WARN,error:eE.ERROR,silent:eE.SILENT},nE=eE.INFO,rE={[eE.DEBUG]:`log`,[eE.VERBOSE]:`log`,[eE.INFO]:`info`,[eE.WARN]:`warn`,[eE.ERROR]:`error`},iE=(e,t,...n)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),i=rE[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)},aE=class{constructor(e){this.name=e,this._logLevel=nE,this._logHandler=iE,this._userLogHandler=null,$T.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in eE))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e==`string`?tE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!=`function`)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,eE.DEBUG,...e),this._logHandler(this,eE.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,eE.VERBOSE,...e),this._logHandler(this,eE.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,eE.INFO,...e),this._logHandler(this,eE.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,eE.WARN,...e),this._logHandler(this,eE.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,eE.ERROR,...e),this._logHandler(this,eE.ERROR,...e)}},oE=(e,t)=>t.some(t=>e instanceof t),sE,cE;function lE(){return sE||=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]}function uE(){return cE||=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]}var dE=new WeakMap,fE=new WeakMap,pE=new WeakMap,mE=new WeakMap,hE=new WeakMap;function gE(e){let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`success`,i),e.removeEventListener(`error`,a)},i=()=>{t(SE(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener(`success`,i),e.addEventListener(`error`,a)});return t.then(t=>{t instanceof IDBCursor&&dE.set(t,e)}).catch(()=>{}),hE.set(t,e),t}function _E(e){if(fE.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener(`complete`,i),e.removeEventListener(`error`,a),e.removeEventListener(`abort`,a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException(`AbortError`,`AbortError`)),r()};e.addEventListener(`complete`,i),e.addEventListener(`error`,a),e.addEventListener(`abort`,a)});fE.set(e,t)}var vE={get(e,t,n){if(e instanceof IDBTransaction){if(t===`done`)return fE.get(e);if(t===`objectStoreNames`)return e.objectStoreNames||pE.get(e);if(t===`store`)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return SE(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t===`done`||t===`store`)?!0:t in e}};function yE(e){vE=e(vE)}function bE(e){return e===IDBDatabase.prototype.transaction&&!(`objectStoreNames`in IDBTransaction.prototype)?function(t,...n){let r=e.call(CE(this),t,...n);return pE.set(r,t.sort?t.sort():[t]),SE(r)}:uE().includes(e)?function(...t){return e.apply(CE(this),t),SE(dE.get(this))}:function(...t){return SE(e.apply(CE(this),t))}}function xE(e){return typeof e==`function`?bE(e):(e instanceof IDBTransaction&&_E(e),oE(e,lE())?new Proxy(e,vE):e)}function SE(e){if(e instanceof IDBRequest)return gE(e);if(mE.has(e))return mE.get(e);let t=xE(e);return t!==e&&(mE.set(e,t),hE.set(t,e)),t}var CE=e=>hE.get(e);function wE(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){let o=indexedDB.open(e,t),s=SE(o);return r&&o.addEventListener(`upgradeneeded`,e=>{r(SE(o.result),e.oldVersion,e.newVersion,SE(o.transaction),e)}),n&&o.addEventListener(`blocked`,e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener(`close`,()=>a()),i&&e.addEventListener(`versionchange`,e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}var TE=[`get`,`getKey`,`getAll`,`getAllKeys`,`count`],EE=[`put`,`add`,`delete`,`clear`],DE=new Map;function OE(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t==`string`))return;if(DE.get(t))return DE.get(t);let n=t.replace(/FromIndex$/,``),r=t!==n,i=EE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TE.includes(n)))return;let a=async function(e,...t){let a=this.transaction(e,i?`readwrite`:`readonly`),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return DE.set(t,a),a}yE(e=>({...e,get:(t,n,r)=>OE(t,n)||e.get(t,n,r),has:(t,n)=>!!OE(t,n)||e.has(t,n)}));
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var kE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(AE(e)){let t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(` `)}};function AE(e){return e.getComponent()?.type===`VERSION`}var jE=`@firebase/app`,ME=`0.14.8`,NE=new aE(`@firebase/app`),PE=`@firebase/app-compat`,FE=`@firebase/analytics-compat`,IE=`@firebase/analytics`,LE=`@firebase/app-check-compat`,RE=`@firebase/app-check`,zE=`@firebase/auth`,BE=`@firebase/auth-compat`,VE=`@firebase/database`,HE=`@firebase/data-connect`,UE=`@firebase/database-compat`,WE=`@firebase/functions`,GE=`@firebase/functions-compat`,KE=`@firebase/installations`,qE=`@firebase/installations-compat`,JE=`@firebase/messaging`,YE=`@firebase/messaging-compat`,XE=`@firebase/performance`,ZE=`@firebase/performance-compat`,QE=`@firebase/remote-config`,$E=`@firebase/remote-config-compat`,eD=`@firebase/storage`,tD=`@firebase/storage-compat`,nD=`@firebase/firestore`,rD=`@firebase/ai`,iD=`@firebase/firestore-compat`,aD=`firebase`,oD=`12.9.0`,sD=`[DEFAULT]`,cD={[jE]:`fire-core`,[PE]:`fire-core-compat`,[IE]:`fire-analytics`,[FE]:`fire-analytics-compat`,[RE]:`fire-app-check`,[LE]:`fire-app-check-compat`,[zE]:`fire-auth`,[BE]:`fire-auth-compat`,[VE]:`fire-rtdb`,[HE]:`fire-data-connect`,[UE]:`fire-rtdb-compat`,[WE]:`fire-fn`,[GE]:`fire-fn-compat`,[KE]:`fire-iid`,[qE]:`fire-iid-compat`,[JE]:`fire-fcm`,[YE]:`fire-fcm-compat`,[XE]:`fire-perf`,[ZE]:`fire-perf-compat`,[QE]:`fire-rc`,[$E]:`fire-rc-compat`,[eD]:`fire-gcs`,[tD]:`fire-gcs-compat`,[nD]:`fire-fst`,[iD]:`fire-fst-compat`,[rD]:`fire-vertex`,"fire-js":`fire-js`,[aD]:`fire-js-all`},lD=new Map,uD=new Map,dD=new Map;function fD(e,t){try{e.container.addComponent(t)}catch(n){NE.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function pD(e){let t=e.name;if(dD.has(t))return NE.debug(`There were multiple attempts to register component ${t}.`),!1;dD.set(t,e);for(let t of lD.values())fD(t,e);for(let t of uD.values())fD(t,e);return!0}function mD(e,t){let n=e.container.getProvider(`heartbeat`).getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function hD(e){return e==null?!1:e.settings!==void 0}var gD=new NT(`app`,`Firebase`,{"no-app":`No Firebase App '{$appName}' has been created - call initializeApp() first`,"bad-app-name":`Illegal App name: '{$appName}'`,"duplicate-app":`Firebase App named '{$appName}' already exists with different options or config`,"app-deleted":`Firebase App named '{$appName}' already deleted`,"server-app-deleted":`Firebase Server App has been deleted`,"no-options":`Need to provide options, when not being deployed to hosting via source.`,"invalid-app-argument":`firebase.{$appName}() takes either no argument or a Firebase App instance.`,"invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":`Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.`,"idb-get":`Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.`,"idb-set":`Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.`,"idb-delete":`Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.`,"finalization-registry-not-supported":`FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.`,"invalid-server-app-environment":`FirebaseServerApp is not for use in browser environments.`}),_D=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new qT(`app`,()=>this,`PUBLIC`))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gD.create(`app-deleted`,{appName:this._name})}},vD=oD;function yD(e,t={}){let n=e;typeof t!=`object`&&(t={name:t});let r={name:sD,automaticDataCollectionEnabled:!0,...t},i=r.name;if(typeof i!=`string`||!i)throw gD.create(`bad-app-name`,{appName:String(i)});if(n||=uT(),!n)throw gD.create(`no-options`);let a=lD.get(i);if(a){if(LT(n,a.options)&&LT(r,a.config))return a;throw gD.create(`duplicate-app`,{appName:i})}let o=new QT(i);for(let e of dD.values())o.addComponent(e);let s=new _D(n,r,o);return lD.set(i,s),s}function bD(e=sD){let t=lD.get(e);if(!t&&e===`[DEFAULT]`&&uT())return yD();if(!t)throw gD.create(`no-app`,{appName:e});return t}function xD(e,t,n){let r=cD[e]??e;n&&(r+=`-${n}`);let i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${r}" with version "${t}":`];i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&e.push(`and`),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),NE.warn(e.join(` `));return}pD(new qT(`${r}-version`,()=>({library:r,version:t}),`VERSION`))}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var SD=`firebase-heartbeat-database`,CD=1,wD=`firebase-heartbeat-store`,TD=null;function ED(){return TD||=wE(SD,CD,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(wD)}catch(e){console.warn(e)}}}}).catch(e=>{throw gD.create(`idb-open`,{originalErrorMessage:e.message})}),TD}async function DD(e){try{let t=(await ED()).transaction(wD),n=await t.objectStore(wD).get(kD(e));return await t.done,n}catch(e){if(e instanceof MT)NE.warn(e.message);else{let t=gD.create(`idb-get`,{originalErrorMessage:e?.message});NE.warn(t.message)}}}async function OD(e,t){try{let n=(await ED()).transaction(wD,`readwrite`);await n.objectStore(wD).put(t,kD(e)),await n.done}catch(e){if(e instanceof MT)NE.warn(e.message);else{let t=gD.create(`idb-set`,{originalErrorMessage:e?.message});NE.warn(t.message)}}}function kD(e){return`${e.name}!${e.options.appId}`}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var AD=1024,jD=30,MD=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider(`app`).getImmediate();this._storage=new FD(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider(`platform-logger`).getImmediate().getPlatformInfoString(),t=ND();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>jD){let e=LD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){NE.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return``;let e=ND(),{heartbeatsToSend:t,unsentEntries:n}=PD(this._heartbeatsCache.heartbeats),r=tT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return NE.warn(e),``}}};function ND(){return new Date().toISOString().substring(0,10)}function PD(e,t=AD){let n=[],r=e.slice();for(let i of e){let e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ID(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ID(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var FD=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kT()?AT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let e=await DD(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return OD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return OD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}else return}};function ID(e){return tT(JSON.stringify({version:2,heartbeats:e})).length}function LD(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function RD(e){pD(new qT(`platform-logger`,e=>new kE(e),`PRIVATE`)),pD(new qT(`heartbeat`,e=>new MD(e),`PRIVATE`)),xD(jE,ME,e),xD(jE,ME,`esm2020`),xD(`fire-js`,``)}RD(``);var zD=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},BD={},VD,HD;(function(){var e;function t(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(e,t,n){n||=0;let r=Array(16);if(typeof t==`string`)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(a^n&(i^a))+r[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=a+(i^t&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,i=a+(o<<17&4294967295|o>>>15),o=n+(t^i&(a^t))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^a&(n^i))+r[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^a&(n^i))+r[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=a+(n^i&(t^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,i=a+(o<<14&4294967295|o>>>18),o=n+(a^t&(i^a))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^a)+r[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^a)+r[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=a+(t^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,i=a+(o<<16&4294967295|o>>>16),o=n+(i^a^t)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~a))+r[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~a))+r[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=a+(n^(t|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,i=a+(o<<15&4294967295|o>>>17),o=n+(a^(i|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}r.prototype.v=function(e,t){t===void 0&&(t=e.length);let n=t-this.blockSize,r=this.C,a=this.h,o=0;for(;o<t;){if(a==0)for(;o<=n;)i(this,e,o),o+=this.blockSize;if(typeof e==`string`){for(;o<t;)if(r[a++]=e.charCodeAt(o++),a==this.blockSize){i(this,r),a=0;break}}else for(;o<t;)if(r[a++]=e[o++],a==this.blockSize){i(this,r),a=0;break}}this.h=a,this.o+=t},r.prototype.A=function(){var e=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=this.o*8;for(var n=e.length-8;n<e.length;++n)e[n]=t&255,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};function a(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}function o(e,t){this.h=t;let n=[],r=!0;for(let i=e.length-1;i>=0;i--){let a=e[i]|0;r&&a==t||(n[i]=a,r=!1)}this.g=n}var s={};function c(e){return-128<=e&&e<128?a(e,function(e){return new o([e|0],e<0?-1:0)}):new o([e|0],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return d;if(e<0)return g(l(-e));let t=[],n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new o(t,0)}function u(e,t){if(e.length==0)throw Error(`number format error: empty string`);if(t||=10,t<2||36<t)throw Error(`radix out of range: `+t);if(e.charAt(0)==`-`)return g(u(e.substring(1),t));if(e.indexOf(`-`)>=0)throw Error(`number format error: interior "-" character`);let n=l(t**8),r=d;for(let a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a);let o=parseInt(e.substring(a,a+i),t);i<8?(i=l(t**+i),r=r.j(i).add(l(o))):(r=r.j(n),r=r.add(l(o)))}return r}var d=c(0),f=c(1),p=c(16777216);e=o.prototype,e.m=function(){if(h(this))return-g(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){let r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(e||=10,e<2||36<e)throw Error(`radix out of range: `+e);if(m(this))return`0`;if(h(this))return`-`+g(this).toString(e);let t=l(e**6);var n=this;let r=``;for(;;){let i=b(n,t).g;n=_(n,i.j(t));let a=((n.g.length>0?n.g[0]:n.h)>>>0).toString(e);if(n=i,m(n))return a+r;for(;a.length<6;)a=`0`+a;r=a+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h};function m(e){if(e.h!=0)return!1;for(let t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function h(e){return e.h==-1}e.l=function(e){return e=_(this,e),h(e)?-1:m(e)?0:1};function g(e){let t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new o(n,~e.h).add(f)}e.abs=function(){return h(this)?g(this):this},e.add=function(e){let t=Math.max(this.g.length,e.g.length),n=[],r=0;for(let i=0;i<=t;i++){let t=r+(this.i(i)&65535)+(e.i(i)&65535),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,t&=65535,a&=65535,n[i]=a<<16|t}return new o(n,n[n.length-1]&-2147483648?-1:0)};function _(e,t){return e.add(g(t))}e.j=function(e){if(m(this)||m(e))return d;if(h(this))return h(e)?g(this).j(g(e)):g(g(this).j(e));if(h(e))return g(this.j(g(e)));if(this.l(p)<0&&e.l(p)<0)return l(this.m()*e.m());let t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let i=this.i(r)>>>16,a=this.i(r)&65535,o=e.i(t)>>>16,s=e.i(t)&65535;n[2*r+2*t]+=a*s,v(n,2*r+2*t),n[2*r+2*t+1]+=i*s,v(n,2*r+2*t+1),n[2*r+2*t+1]+=a*o,v(n,2*r+2*t+1),n[2*r+2*t+2]+=i*o,v(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new o(n,0)};function v(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function y(e,t){this.g=e,this.h=t}function b(e,t){if(m(t))throw Error(`division by zero`);if(m(e))return new y(d,d);if(h(e))return t=b(g(e),t),new y(g(t.g),g(t.h));if(h(t))return t=b(e,g(t)),new y(g(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error(`slowDivide_ only works with positive integers.`);for(var n=f,r=t;r.l(e)<=0;)n=x(n),r=x(r);var i=S(n,1),a=S(r,1);for(r=S(r,2),n=S(n,2);!m(r);){var o=a.add(r);o.l(e)<=0&&(i=i.add(n),a=o),r=S(r,1),n=S(n,1)}return t=_(e,i.j(t)),new y(i,t)}for(i=d;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=Math.ceil(Math.log(n)/Math.LN2),r=r<=48?1:2**(r-48),a=l(n),o=a.j(t);h(o)||o.l(e)>0;)n-=r,a=l(n),o=a.j(t);m(a)&&(a=f),i=i.add(a),e=_(e,o)}return new y(i,e)}e.B=function(e){return b(this,e).h},e.and=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new o(n,this.h&e.h)},e.or=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new o(n,this.h|e.h)},e.xor=function(e){let t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new o(n,this.h^e.h)};function x(e){let t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new o(n,e.h)}function S(e,t){let n=t>>5;t%=32;let r=e.g.length-n,i=[];for(let a=0;a<r;a++)i[a]=t>0?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new o(i,e.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,HD=BD.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,VD=BD.Integer=o}).apply(zD===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:zD);var UD=typeof globalThis<`u`?globalThis:typeof window<`u`?window:typeof global<`u`?global:typeof self<`u`?self:{},WD={},GD,KD,qD,JD,YD,XD,ZD,QD;(function(){var e,t=Object.defineProperty;function n(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof UD==`object`&&UD];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var r=n(this);function i(e,n){if(n)a:{var i=r;e=e.split(`.`);for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break a;i=i[o]}e=e[e.length-1],a=i[e],n=n(a),n!=a&&n!=null&&t(i,e,{configurable:!0,writable:!0,value:n})}}i(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)}),i(`Array.prototype.values`,function(e){return e||function(){return this[Symbol.iterator]()}}),i(`Object.entries`,function(e){return e||function(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push([n,e[n]]);return t}});var a=a||{},o=this||self;function s(e){var t=typeof e;return t==`object`&&e!=null||t==`function`}function c(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return l=c,l.apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}var f=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function p(e){let t=e.length;if(t>0){let n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function m(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var n=typeof r;if(n=n==`object`?r?Array.isArray(r)?`array`:n:`null`:n,n==`array`||n==`object`&&typeof r.length==`number`){n=e.length||0;let t=r.length||0;e.length=n+t;for(let i=0;i<t;i++)e[n+i]=r[i]}else e.push(r)}}class h{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function g(e){o.setTimeout(()=>{throw e},0)}function _(){var e=C;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class v{constructor(){this.h=this.g=null}add(e,t){let n=y.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var y=new h(()=>new b,e=>e.reset());class b{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,C=new v,w=()=>{let e=Promise.resolve(void 0);x=()=>{e.then(T)}};function T(){for(var e;e=_();){try{e.h.call(e.g)}catch(e){g(e)}var t=y;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}S=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},`passive`,{get:function(){e=!0}});try{let e=()=>{};o.addEventListener(`test`,e,t),o.removeEventListener(`test`,e,t)}catch{}return e}();function ee(e){return/^[\s\xa0]*$/.test(e)}function te(e,t){D.call(this,e?e.type:``),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=``,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType=``,this.i=null,e&&this.init(e,t)}d(te,D),te.prototype.init=function(e,t){let n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget,t||(n==`mouseover`?t=e.fromElement:n==`mouseout`&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=r.clientX===void 0?r.pageX:r.clientX,this.clientY=r.clientY===void 0?r.pageY:r.clientY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX===void 0?e.pageX:e.clientX,this.clientY=e.clientY===void 0?e.pageY:e.clientY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||``,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ne=`closure_listenable_`+(Math.random()*1e6|0),k=0;function re(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++k,this.da=this.fa=!1}function ie(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function ae(e,t,n){for(let r in e)t.call(n,e[r],r,e)}function A(e,t){for(let n in e)t.call(void 0,e[n],n,e)}function j(e){let t={};for(let n in e)t[n]=e[n];return t}let oe=`constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf`.split(` `);function se(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<oe.length;t++)n=oe[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ce(e){this.src=e,this.g={},this.h=0}ce.prototype.add=function(e,t,n,r,i){let a=e.toString();e=this.g[a],e||(e=this.g[a]=[],this.h++);let o=le(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):(t=new re(t,this.src,a,!!r,i),t.fa=n,e.push(t)),t};function M(e,t){let n=t.type;if(n in e.g){var r=e.g[n],i=Array.prototype.indexOf.call(r,t,void 0),a;(a=i>=0)&&Array.prototype.splice.call(r,i,1),a&&(ie(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function le(e,t,n,r){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}var N=`closure_lm_`+(Math.random()*1e6|0),P={};function F(e,t,n,r,i){if(r&&r.once)return fe(e,t,n,r,i);if(Array.isArray(t)){for(let a=0;a<t.length;a++)F(e,t[a],n,r,i);return null}return n=ye(n),e&&e[ne]?e.J(t,n,s(r)?!!r.capture:!!r,i):ue(e,t,n,!1,r,i)}function ue(e,t,n,r,i,a){if(!t)throw Error(`Invalid event type`);let o=s(i)?!!i.capture:!!i,c=_e(e);if(c||(e[N]=c=new ce(e)),n=c.add(t,n,r,o,a),n.proxy)return n;if(r=de(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(he(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error(`addEventListener and attachEvent are unavailable.`);return n}function de(){function e(n){return t.call(e.src,e.listener,n)}let t=ge;return e}function fe(e,t,n,r,i){if(Array.isArray(t)){for(let a=0;a<t.length;a++)fe(e,t[a],n,r,i);return null}return n=ye(n),e&&e[ne]?e.K(t,n,s(r)?!!r.capture:!!r,i):ue(e,t,n,!0,r,i)}function pe(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)pe(e,t[a],n,r,i);else r=s(r)?!!r.capture:!!r,n=ye(n),e&&e[ne]?(e=e.i,a=String(t).toString(),a in e.g&&(t=e.g[a],n=le(t,n,r,i),n>-1&&(ie(t[n]),Array.prototype.splice.call(t,n,1),t.length==0&&(delete e.g[a],e.h--)))):(e&&=_e(e))&&(t=e.g[t.toString()],e=-1,t&&(e=le(t,n,r,i)),(n=e>-1?t[e]:null)&&me(n))}function me(e){if(typeof e!=`number`&&e&&!e.da){var t=e.src;if(t&&t[ne])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(he(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_e(t))?(M(n,e),n.h==0&&(n.src=null,t[N]=null)):ie(e)}}}function he(e){return e in P?P[e]:P[e]=`on`+e}function ge(e,t){if(e.da)e=!0;else{t=new te(t,this);let n=e.listener,r=e.ha||e.src;e.fa&&me(e),e=n.call(r,t)}return e}function _e(e){return e=e[N],e instanceof ce?e:null}var ve=`__closure_events_fn_`+(Math.random()*1e9>>>0);function ye(e){return typeof e==`function`?e:(e[ve]||(e[ve]=function(t){return e.handleEvent(t)}),e[ve])}function be(){E.call(this),this.i=new ce(this),this.M=this,this.G=null}d(be,E),be.prototype[ne]=!0,be.prototype.removeEventListener=function(e,t,n,r){pe(this,e,t,n,r)};function xe(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,typeof t==`string`)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;t=new D(r,e),se(t,i)}i=!0;let a,o;if(n)for(o=n.length-1;o>=0;o--)a=t.g=n[o],i=Se(a,r,!0,t)&&i;if(a=t.g=e,i=Se(a,r,!0,t)&&i,i=Se(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.g=n[o],i=Se(a,r,!1,t)&&i}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let n=e.g[t];for(let e=0;e<n.length;e++)ie(n[e]);delete e.g[t],e.h--}}this.G=null},be.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},be.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};function Se(e,t,n,r){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==n){let t=o.listener,n=o.ha||o.src;o.fa&&M(e.i,o),i=t.call(n,r)!==!1&&i}}return i&&!r.defaultPrevented}function Ce(e,t){if(typeof e!=`function`)if(e&&typeof e.handleEvent==`function`)e=l(e.handleEvent,e);else throw Error(`Invalid listener argument`);return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}function we(e){e.g=Ce(()=>{e.g=null,e.i&&(e.i=!1,we(e))},e.l);let t=e.h;e.h=null,e.m.apply(null,t)}class Te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ee(e){E.call(this),this.h=e,this.g={}}d(Ee,E);var De=[];function Oe(e){ae(e.g,function(e,t){this.g.hasOwnProperty(t)&&me(e)},e),e.g={}}Ee.prototype.N=function(){Ee.Z.N.call(this),Oe(this)},Ee.prototype.handleEvent=function(){throw Error(`EventHandler.handleEvent not implemented`)};var ke=o.JSON.stringify,Ae=o.JSON.parse,je=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function Me(){}function Ne(){}var Pe={OPEN:`a`,hb:`b`,ERROR:`c`,tb:`d`};function Fe(){D.call(this,`d`)}d(Fe,D);function Ie(){D.call(this,`c`)}d(Ie,D);var Le={},Re=null;function ze(){return Re||=new be}Le.Ia=`serverreachability`;function Be(e){D.call(this,Le.Ia,e)}d(Be,D);function Ve(e){let t=ze();xe(t,new Be(t))}Le.STAT_EVENT=`statevent`;function He(e,t){D.call(this,Le.STAT_EVENT,e),this.stat=t}d(He,D);function Ue(e){let t=ze();xe(t,new He(t,e))}Le.Ja=`timingevent`;function We(e,t){D.call(this,Le.Ja,e),this.size=t}d(We,D);function Ge(e,t){if(typeof e!=`function`)throw Error(`Fn must not be null and must be a function`);return o.setTimeout(function(){e()},t)}function Ke(){this.g=!0}Ke.prototype.ua=function(){this.g=!1};function qe(e,t,n,r,i,a){e.info(function(){if(e.g)if(a){var o=``,s=a.split(`&`);for(let e=0;e<s.length;e++){var c=s[e].split(`=`);if(c.length>1){let e=c[0];c=c[1];let t=e.split(`_`);o=t.length>=2&&t[1]==`type`?o+(e+`=`+c+`&`):o+(e+`=redacted&`)}}}else o=null;else o=a;return`XMLHTTP REQ (`+r+`) [attempt `+i+`]: `+t+`
`+n+`
`+o})}function Je(e,t,n,r,i,a,o){e.info(function(){return`XMLHTTP RESP (`+r+`) [ attempt `+i+`]: `+t+`
`+n+`
`+a+` `+o})}function Ye(e,t,n,r){e.info(function(){return`XMLHTTP TEXT (`+t+`): `+Ze(e,n)+(r?` `+r:``)})}function Xe(e,t){e.info(function(){return`TIMEOUT: `+t})}Ke.prototype.info=function(){};function Ze(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var n=a[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if(i!=`noop`&&i!=`stop`&&i!=`close`)for(let e=1;e<r.length;e++)r[e]=``}}}}return ke(a)}catch{return t}}var Qe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$e={ib:`complete`,Fb:`success`,ERROR:`error`,Ga:`abort`,xb:`ready`,yb:`readystatechange`,TIMEOUT:`timeout`,sb:`incrementaldata`,wb:`progress`,lb:`downloadprogress`,Nb:`uploadprogress`},et;function tt(){}d(tt,Me),tt.prototype.g=function(){return new XMLHttpRequest},et=new tt;function nt(e){return encodeURIComponent(String(e))}function rt(e){var t=1;e=e.split(`:`);let n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(`:`)),n}function it(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new Ee(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new at}function at(){this.i=null,this.g=``,this.h=!1}var ot={},st={};function ct(e,t,n){e.M=1,e.A=Pt(At(t)),e.u=n,e.R=!0,lt(e,null)}function lt(e,t){e.F=Date.now(),pt(e),e.B=At(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Jt(n.i,`t`,r),e.C=0,n=e.j.L,e.h=new at,e.g=Bn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new Te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i=`readystatechange`;Array.isArray(i)||(i&&(De[0]=i.toString()),i=De);for(let e=0;e<i.length;e++){let a=F(n,i[e],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.J?j(e.J):{},e.u?(e.v||=`POST`,t[`Content-Type`]=`application/x-www-form-urlencoded`,e.g.ea(e.B,e.v,e.u,t)):(e.v=`GET`,e.g.ea(e.B,e.v,null,t)),Ve(),qe(e.i,e.v,e.B,e.l,e.S,e.u)}it.prototype.ba=function(e){e=e.target;let t=this.O;t&&_n(e)==3?t.j():this.Y(e)},it.prototype.Y=function(e){try{if(e==this.g)a:{let s=_n(this.g),c=this.g.ya(),l=this.g.ca();if(!(s<3)&&(s!=3||this.g&&(this.h.h||this.g.la()||vn(this.g)))){this.K||s!=4||c==7||Ve(c==8||l<=0?3:2),ht(this);var t=this.g.ca();this.X=t;var n=ut(this);if(this.o=t==200,Je(this.i,this.v,this.B,this.l,this.S,s,t),this.o){if(this.U&&!this.L){b:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader(`X-HTTP-Initial-Response`):null)&&!ee(r)){var a=r;break b}}a=null}if(e=a)Ye(this.i,this.l,e,`Initial handshake response via X-HTTP-Initial-Response`),this.L=!0,vt(this,e);else{this.o=!1,this.m=3,Ue(12),_t(this),gt(this);break a}}if(this.R){e=!0;let t;for(;!this.K&&this.C<n.length;)if(t=ft(this,n),t==st){s==4&&(this.m=4,Ue(14),e=!1),Ye(this.i,this.l,null,`[Incomplete Response]`);break}else if(t==ot){this.m=4,Ue(15),Ye(this.i,this.l,n,`[Invalid Chunk]`),e=!1;break}else Ye(this.i,this.l,t,null),vt(this,t);if(dt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),s!=4||n.length!=0||this.h.h||(this.m=1,Ue(16),e=!1),this.o=this.o&&e,!e)Ye(this.i,this.l,n,`[Invalid Chunked Response]`),_t(this),gt(this);else if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info(`Great, no buffering proxy detected. Bytes received: `+n.length),Mn(o),o.P=!0,Ue(11))}}else Ye(this.i,this.l,n,null),vt(this,n);s==4&&_t(this),this.o&&!this.K&&(s==4?Fn(this.j,this):(this.o=!1,pt(this)))}else yn(this.g),t==400&&n.indexOf(`Unknown SID`)>0?(this.m=3,Ue(12)):(this.m=0,Ue(13)),_t(this),gt(this)}}}catch{}};function ut(e){if(!dt(e))return e.g.la();let t=vn(e.g);if(t===``)return``;let n=``,r=t.length,i=_n(e.g)==4;if(!e.h.i){if(typeof TextDecoder>`u`)return _t(e),gt(e),``;e.h.i=new o.TextDecoder}for(let a=0;a<r;a++)e.h.h=!0,n+=e.h.i.decode(t[a],{stream:!(i&&a==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}function dt(e){return e.g?e.v==`GET`&&e.M!=2&&e.j.Aa:!1}function ft(e,t){var n=e.C,r=t.indexOf(`
`,n);return r==-1?st:(n=Number(t.substring(n,r)),isNaN(n)?ot:(r+=1,r+n>t.length?st:(t=t.slice(r,r+n),e.C=r+n,t)))}it.prototype.cancel=function(){this.K=!0,_t(this)};function pt(e){e.T=Date.now()+e.H,mt(e,e.H)}function mt(e,t){if(e.D!=null)throw Error(`WatchDog timer not null`);e.D=Ge(l(e.aa,e),t)}function ht(e){e.D&&=(o.clearTimeout(e.D),null)}it.prototype.aa=function(){this.D=null;let e=Date.now();e-this.T>=0?(Xe(this.i,this.B),this.M!=2&&(Ve(),Ue(17)),_t(this),this.m=2,gt(this)):mt(this,this.T-e)};function gt(e){e.j.I==0||e.K||Fn(e.j,e)}function _t(e){ht(e);var t=e.O;t&&typeof t.dispose==`function`&&t.dispose(),e.O=null,Oe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function vt(e,t){try{var n=e.j;if(n.I!=0&&(n.g==e||Ct(n.h,e))){if(!e.L&&Ct(n.h,e)&&n.I==3){try{var r=n.Ba.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){a:if(!n.v){if(n.g)if(n.g.F+3e3<e.F)Pn(n),Cn(n);else break a;jn(n),Ue(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&n.A==0&&!n.C&&(n.C=Ge(l(n.Va,n),6e3));St(n.h)<=1&&n.ta&&(n.ta=void 0)}else Ln(n,11)}else if((e.L||n.g==e)&&Pn(n),!ee(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t],u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],n.I==2)if(l[0]==`c`){n.M=l[1],n.ba=l[2];let t=l[3];t!=null&&(n.ka=t,n.j.info(`VER=`+n.ka));let i=l[4];i!=null&&(n.za=i,n.j.info(`SVER=`+n.za));let u=l[5];u!=null&&typeof u==`number`&&u>0&&(r=1.5*u,n.O=r,n.j.info(`backChannelRequestTimeoutMs_=`+r)),r=n;let d=e.g;if(d){let e=d.g?d.g.getResponseHeader(`X-Client-Wire-Protocol`):null;if(e){var a=r.h;a.g||e.indexOf(`spdy`)==-1&&e.indexOf(`quic`)==-1&&e.indexOf(`h2`)==-1||(a.j=a.l,a.g=new Set,a.h&&=(wt(a,a.h),null))}if(r.G){let e=d.g?d.g.getResponseHeader(`X-HTTP-Session-Id`):null;e&&(r.wa=e,I(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info(`Handshake RTT: `+n.T+`ms`)),r=n;var o=e;if(r.na=zn(r,r.L?r.ba:null,r.W),o.L){Tt(r.h,o);var s=o,c=r.O;c&&(s.H=c),s.D&&(ht(s),pt(s)),r.g=o}else An(r);n.i.length>0&&Tn(n)}else l[0]!=`stop`&&l[0]!=`close`||Ln(n,7);else n.I==3&&(l[0]==`stop`||l[0]==`close`?l[0]==`stop`?Ln(n,7):Sn(n):l[0]!=`noop`&&n.l&&n.l.qa(l),n.A=0)}}Ve(4)}catch{}}var yt=class{constructor(e,t){this.g=e,this.map=t}};function bt(e){this.l=e||10,o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType(`navigation`),e=e.length>0&&(e[0].nextHopProtocol==`hq`||e[0].nextHopProtocol==`h2`)):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xt(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function St(e){return e.h?1:e.g?e.g.size:0}function Ct(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function wt(e,t){e.g?e.g.add(t):e.h=t}function Tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}bt.prototype.cancel=function(){if(this.i=Et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let e of this.g.values())e.cancel();this.g.clear()}};function Et(e){if(e.h!=null)return e.i.concat(e.h.G);if(e.g!=null&&e.g.size!==0){let t=e.i;for(let n of e.g.values())t=t.concat(n.G);return t}return p(e.i)}var Dt=RegExp(`^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$`);function Ot(e,t){if(e){e=e.split(`&`);for(let n=0;n<e.length;n++){let r=e[n].indexOf(`=`),i,a=null;r>=0?(i=e[n].substring(0,r),a=e[n].substring(r+1)):i=e[n],t(i,a?decodeURIComponent(a.replace(/\+/g,` `)):``)}}}function kt(e){this.g=this.o=this.j=``,this.u=null,this.m=this.h=``,this.l=!1;let t;e instanceof kt?(this.l=e.l,jt(this,e.j),this.o=e.o,this.g=e.g,Mt(this,e.u),this.h=e.h,Nt(this,Yt(e.i)),this.m=e.m):e&&(t=String(e).match(Dt))?(this.l=!1,jt(this,t[1]||``,!0),this.o=Ft(t[2]||``),this.g=Ft(t[3]||``,!0),Mt(this,t[4]),this.h=Ft(t[5]||``,!0),Nt(this,t[6]||``,!0),this.m=Ft(t[7]||``)):(this.l=!1,this.i=new Ut(null,this.l))}kt.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(It(t,Rt,!0),`:`);var n=this.g;return(n||t==`file`)&&(e.push(`//`),(t=this.o)&&e.push(It(t,Rt,!0),`@`),e.push(nt(n).replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),n=this.u,n!=null&&e.push(`:`,String(n))),(n=this.h)&&(this.g&&n.charAt(0)!=`/`&&e.push(`/`),e.push(It(n,n.charAt(0)==`/`?Bt:zt,!0))),(n=this.i.toString())&&e.push(`?`,n),(n=this.m)&&e.push(`#`,It(n,Ht)),e.join(``)},kt.prototype.resolve=function(e){let t=At(this),n=!!e.j;n?jt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=e.u!=null;var r=e.h;if(n)Mt(t,e.u);else if(n=!!e.h){if(r.charAt(0)!=`/`)if(this.g&&!this.h)r=`/`+r;else{var i=t.h.lastIndexOf(`/`);i!=-1&&(r=t.h.slice(0,i+1)+r)}if(i=r,i==`..`||i==`.`)r=``;else if(i.indexOf(`./`)!=-1||i.indexOf(`/.`)!=-1){r=i.lastIndexOf(`/`,0)==0,i=i.split(`/`);let e=[];for(let t=0;t<i.length;){let n=i[t++];n==`.`?r&&t==i.length&&e.push(``):n==`..`?((e.length>1||e.length==1&&e[0]!=``)&&e.pop(),r&&t==i.length&&e.push(``)):(e.push(n),r=!0)}r=e.join(`/`)}else r=i}return n?t.h=r:n=e.i.toString()!==``,n?Nt(t,Yt(e.i)):n=!!e.m,n&&(t.m=e.m),t};function At(e){return new kt(e)}function jt(e,t,n){e.j=n?Ft(t,!0):t,e.j&&=e.j.replace(/:$/,``)}function Mt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error(`Bad port number `+t);e.u=t}else e.u=null}function Nt(e,t,n){t instanceof Ut?(e.i=t,Zt(e.i,e.l)):(n||(t=It(t,Vt)),e.i=new Ut(t,e.l))}function I(e,t,n){e.i.set(t,n)}function Pt(e){return I(e,`zx`,Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),e}function Ft(e,t){return e?t?decodeURI(e.replace(/%25/g,`%2525`)):decodeURIComponent(e):``}function It(e,t,n){return typeof e==`string`?(e=encodeURI(e).replace(t,Lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,`%$1`)),e):null}function Lt(e){return e=e.charCodeAt(0),`%`+(e>>4&15).toString(16)+(e&15).toString(16)}var Rt=/[#\/\?@]/g,zt=/[#\?:]/g,Bt=/[#\?]/g,Vt=/[#\?@]/g,Ht=/#/g;function Ut(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Wt(e){e.g||(e.g=new Map,e.h=0,e.i&&Ot(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g,` `)),n)}))}e=Ut.prototype,e.add=function(e,t){Wt(this),this.i=null,e=Xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function Gt(e,t){Wt(e),t=Xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Kt(e,t){return Wt(e),t=Xt(e,t),e.g.has(t)}e.forEach=function(e,t){Wt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)};function qt(e,t){Wt(e);let n=[];if(typeof t==`string`)Kt(e,t)&&(n=n.concat(e.g.get(Xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}e.set=function(e,t){return Wt(this),this.i=null,e=Xt(this,e),Kt(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e?(e=qt(this,e),e.length>0?String(e[0]):t):t};function Jt(e,t,n){Gt(e,t),n.length>0&&(e.i=null,e.g.set(Xt(e,t),p(n)),e.h+=n.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return``;let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];let i=nt(n);n=qt(this,n);for(let t=0;t<n.length;t++){let r=i;n[t]!==``&&(r+=`=`+nt(n[t])),e.push(r)}}return this.i=e.join(`&`)};function Yt(e){let t=new Ut;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Zt(e,t){t&&!e.j&&(Wt(e),e.i=null,e.g.forEach(function(e,t){let n=t.toLowerCase();t!=n&&(Gt(this,t),Jt(this,n,e))},e)),e.j=t}function Qt(e,t){let n=new Ke;if(o.Image){let r=new Image;r.onload=u(en,n,`TestLoadImage: loaded`,!0,t,r),r.onerror=u(en,n,`TestLoadImage: error`,!1,t,r),r.onabort=u(en,n,`TestLoadImage: abort`,!1,t,r),r.ontimeout=u(en,n,`TestLoadImage: timeout`,!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function $t(e,t){let n=new Ke,r=new AbortController,i=setTimeout(()=>{r.abort(),en(n,`TestPingServer: timeout`,!1,t)},1e4);fetch(e,{signal:r.signal}).then(e=>{clearTimeout(i),e.ok?en(n,`TestPingServer: ok`,!0,t):en(n,`TestPingServer: server error`,!1,t)}).catch(()=>{clearTimeout(i),en(n,`TestPingServer: error`,!1,t)})}function en(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch{}}function tn(){this.g=new je}function nn(e){this.i=e.Sb||null,this.h=e.ab||!1}d(nn,Me),nn.prototype.g=function(){return new rn(this.i,this.h)};function rn(e,t){be.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText=``,this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F=`GET`,this.D=``,this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(rn,be),e=rn.prototype,e.open=function(e,t){if(this.readyState!=0)throw this.abort(),Error(`Error reopening a connection`);this.F=e,this.D=t,this.readyState=1,sn(this)},e.send=function(e){if(this.readyState!=1)throw this.abort(),Error(`need to call open() first. `);if(this.v.signal.aborted)throw this.abort(),Error(`Request was aborted.`);this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText=``,this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel(`Request was aborted.`).catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,on(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,sn(this)),this.g&&(this.readyState=3,sn(this),this.g)))if(this.responseType===`arraybuffer`)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(o.ReadableStream!==void 0&&`body`in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error(`responseType must be empty for "streamBinaryChunks" mode responses.`);this.response=[]}else this.response=this.responseText=``,this.B=new TextDecoder;an(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))};function an(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array;(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?on(this):sn(this),this.readyState==3&&an(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,on(this))},e.Na=function(e){this.g&&(this.response=e,on(this))},e.ga=function(){this.g&&on(this)};function on(e){e.readyState=4,e.l=null,e.j=null,e.B=null,sn(e)}e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||``},e.getAllResponseHeaders=function(){if(!this.h)return``;let e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+`: `+n[1]),n=t.next();return e.join(`\r
`)};function sn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(rn.prototype,`withCredentials`,{get:function(){return this.m===`include`},set:function(e){this.m=e?`include`:`same-origin`}});function cn(e){let t=``;return ae(e,function(e,n){t+=n,t+=`:`,t+=e,t+=`\r
`}),t}function ln(e,t,n){a:{for(r in n){var r=!1;break a}r=!0}r||(n=cn(n),typeof e==`string`||I(e,t,n))}function un(e){be.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D=``,this.o=0,this.l=``,this.j=this.B=this.v=this.A=!1,this.m=null,this.F=``,this.H=!1}d(un,be);var dn=/^https?$/i,fn=[`POST`,`PUT`];e=un.prototype,e.Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error(`[goog.net.XhrIo] Object is active with another request=`+this.D+`; newUri=`+e);t=t?t.toUpperCase():`GET`,this.D=e,this.l=``,this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():et.g(),this.g.onreadystatechange=f(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(e){pn(this,e);return}if(e=n||``,n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys==`function`&&typeof r.get==`function`)for(let e of r.keys())n.set(e,r.get(e));else throw Error(`Unknown input type for opt_headers: `+String(r));r=Array.from(n.keys()).find(e=>e.toLowerCase()==`content-type`),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(fn,t,void 0)>=0)||r||i||n.set(`Content-Type`,`application/x-www-form-urlencoded;charset=utf-8`);for(let[e,t]of n)this.g.setRequestHeader(e,t);this.F&&(this.g.responseType=this.F),`withCredentials`in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&=(clearTimeout(this.m),null),this.v=!0,this.g.send(e),this.v=!1}catch(e){pn(this,e)}};function pn(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,mn(e),gn(e)}function mn(e){e.A||(e.A=!0,xe(e,`complete`),xe(e,`error`))}e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,xe(this,`complete`),xe(this,`abort`),gn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gn(this,!0)),un.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?hn(this):this.Xa())},e.Xa=function(){hn(this)};function hn(e){if(e.h&&a!==void 0){if(e.v&&_n(e)==4)setTimeout(e.Ca.bind(e),0);else if(xe(e,`readystatechange`),_n(e)==4){e.h=!1;try{let a=e.ca();a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break a;default:t=!1}var n;if(!(n=t)){var r;if(r=a===0){let t=String(e.D).match(Dt)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!dn.test(t?t.toLowerCase():``)}n=r}if(n)xe(e,`complete`),xe(e,`success`);else{e.o=6;try{var i=_n(e)>2?e.g.statusText:``}catch{i=``}e.l=i+` [`+e.ca()+`]`,mn(e)}}finally{gn(e)}}}}function gn(e,t){if(e.g){e.m&&=(clearTimeout(e.m),null);let n=e.g;e.g=null,t||xe(e,`ready`);try{n.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function _n(e){return e.g?e.g.readyState:0}e.ca=function(){try{return _n(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:``}catch{return``}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Ae(t)}};function vn(e){try{if(!e.g)return null;if(`response`in e.g)return e.g.response;switch(e.F){case``:case`text`:return e.g.responseText;case`arraybuffer`:if(`mozResponseArrayBuffer`in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function yn(e){let t={};e=(e.g&&_n(e)>=2&&e.g.getAllResponseHeaders()||``).split(`\r
`);for(let r=0;r<e.length;r++){if(ee(e[r]))continue;var n=rt(e[r]);let i=n[0];if(n=n[1],typeof n!=`string`)continue;n=n.trim();let a=t[i]||[];t[i]=a,a.push(n)}A(t,function(e){return e.join(`, `)})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l==`string`?this.l:String(this.l)};function bn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function xn(e){this.za=0,this.i=[],this.j=new Ke,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bn(`failFast`,!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bn(`baseRetryDelayMs`,5e3,e),this.Za=bn(`retryDelaySeedMs`,1e4,e),this.Ta=bn(`forwardChannelMaxRetries`,2,e),this.va=bn(`forwardChannelRequestTimeoutMs`,2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M=``,this.h=new bt(e&&e.concurrentRequestLimit),this.Ba=new tn,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=xn.prototype,e.ka=8,e.I=1,e.connect=function(e,t,n,r){Ue(0),this.W=e,this.H=t||{},n&&r!==void 0&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=zn(this,null,this.W),Tn(this)};function Sn(e){if(wn(e),e.I==3){var t=e.V++,n=At(e.J);if(I(n,`SID`,e.M),I(n,`RID`,t),I(n,`TYPE`,`terminate`),On(e,n),t=new it(e,e.j,t),t.M=2,t.A=Pt(At(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),``)}catch{}!n&&o.Image&&(new Image().src=t.A,n=!0),n||(t.g=Bn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),pt(t)}Rn(e)}function Cn(e){e.g&&=(Mn(e),e.g.cancel(),null)}function wn(e){Cn(e),e.v&&=(o.clearTimeout(e.v),null),Pn(e),e.h.cancel(),e.m&&=(typeof e.m==`number`&&o.clearTimeout(e.m),null)}function Tn(e){if(!xt(e.h)&&!e.m){e.m=!0;var t=e.Ea;x||w(),S||=(x(),!0),C.add(t,e),e.D=0}}function En(e,t){return St(e.h)>=e.h.j-(e.m?1:0)?!1:e.m?(e.i=t.G.concat(e.i),!0):e.I==1||e.I==2||e.D>=(e.Sa?0:e.Ta)?!1:(e.m=Ge(l(e.Ea,e,t),In(e,e.D)),e.D++,!0)}e.Ea=function(e){if(this.m)if(this.m=null,this.I==1){if(!e){this.V=Math.floor(Math.random()*1e5),e=this.V++;let i=new it(this,this.j,e),a=this.o;if(this.U&&(a?(a=j(a),se(a,this.U)):a=this.U),this.u!==null||this.R||(i.J=a,a=null),this.S)a:{for(var t=0,n=0;n<this.i.length;n++){b:{var r=this.i[n];if(`__data__`in r.map&&(r=r.map.__data__,typeof r==`string`)){r=r.length;break b}r=void 0}if(r===void 0)break;if(t+=r,t>4096){t=n;break a}if(t===4096||n===this.i.length-1){t=n+1;break a}}t=1e3}else t=1e3;t=kn(this,i,t),n=At(this.J),I(n,`RID`,e),I(n,`CVER`,22),this.G&&I(n,`X-HTTP-Session-Id`,this.G),On(this,n),a&&(this.R?t=`headers=`+nt(cn(a))+`&`+t:this.u&&ln(n,this.u,a)),wt(this.h,i),this.Ra&&I(n,`TYPE`,`init`),this.S?(I(n,`$req`,t),I(n,`SID`,`null`),i.U=!0,ct(i,n,null)):ct(i,n,t),this.I=2}}else this.I==3&&(e?Dn(this,e):this.i.length==0||xt(this.h)||Dn(this))};function Dn(e,t){var n=t?t.l:e.V++;let r=At(e.J);I(r,`SID`,e.M),I(r,`RID`,n),I(r,`AID`,e.K),On(e,r),e.u&&e.o&&ln(r,e.u,e.o),n=new it(e,e.j,n,e.D+1),e.u===null&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=kn(e,n,1e3),n.H=Math.round(e.va*.5)+Math.round(e.va*.5*Math.random()),wt(e.h,n),ct(n,r,t)}function On(e,t){e.H&&ae(e.H,function(e,n){I(t,n,e)}),e.l&&ae({},function(e,n){I(t,n,e)})}function kn(e,t,n){n=Math.min(e.i.length,n);let r=e.l?l(e.l.Ka,e.l,e):null;a:{var i=e.i;let t=-1;for(;;){let e=[`count=`+n];t==-1?n>0?(t=i[0].g,e.push(`ofs=`+t)):t=0:e.push(`ofs=`+t);let c=!0;for(let l=0;l<n;l++){var a=i[l].g;let n=i[l].map;if(a-=t,a<0)t=Math.max(0,i[l].g-100),c=!1;else try{a=`req`+a+`_`||``;try{var o=n instanceof Map?n:Object.entries(n);for(let[t,n]of o){let r=n;s(n)&&(r=ke(n)),e.push(a+t+`=`+encodeURIComponent(r))}}catch(t){throw e.push(a+`type=_badmap`),t}}catch{r&&r(n)}}if(c){o=e.join(`&`);break a}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function An(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;x||w(),S||=(x(),!0),C.add(t,e),e.A=0}}function jn(e){return e.g||e.v||e.A>=3?!1:(e.Y++,e.v=Ge(l(e.Da,e),In(e,e.A)),e.A++,!0)}e.Da=function(){if(this.v=null,Nn(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var e=4*this.T;this.j.info(`BP detection timer enabled: `+e),this.B=Ge(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info(`BP detection timeout reached.`),this.j.info(`Buffering proxy detected and switch to long-polling!`),this.F=!1,this.P=!0,Ue(10),Cn(this),Nn(this))};function Mn(e){e.B!=null&&(o.clearTimeout(e.B),e.B=null)}function Nn(e){e.g=new it(e,e.j,`rpc`,e.Y),e.u===null&&(e.g.J=e.o),e.g.P=0;var t=At(e.na);I(t,`RID`,`rpc`),I(t,`SID`,e.M),I(t,`AID`,e.K),I(t,`CI`,e.F?`0`:`1`),!e.F&&e.ia&&I(t,`TO`,e.ia),I(t,`TYPE`,`xmlhttp`),On(e,t),e.u&&e.o&&ln(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=Pt(At(t)),n.u=null,n.R=!0,lt(n,e)}e.Va=function(){this.C!=null&&(this.C=null,Cn(this),jn(this),Ue(19))};function Pn(e){e.C!=null&&(o.clearTimeout(e.C),e.C=null)}function Fn(e,t){var n=null;if(e.g==t){Pn(e),Mn(e),e.g=null;var r=2}else if(Ct(e.h,t))n=t.G,Tt(e.h,t),r=1;else return;if(e.I!=0){if(t.o)if(r==1){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;r=ze(),xe(r,new We(r,n)),Tn(e)}else An(e);else if(i=t.m,i==3||i==0&&t.X>0||!(r==1&&En(e,t)||r==2&&jn(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Ln(e,5);break;case 4:Ln(e,10);break;case 3:Ln(e,6);break;default:Ln(e,2)}}}function In(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function Ln(e,t){if(e.j.info(`Error code `+t),t==2){var n=l(e.bb,e),r=e.Ua;let t=!r;r=new kt(r||`//www.google.com/images/cleardot.gif`),o.location&&o.location.protocol==`http`||jt(r,`https`),Pt(r),t?Qt(r.toString(),n):$t(r.toString(),n)}else Ue(2);e.I=0,e.l&&e.l.pa(t),Rn(e),wn(e)}e.bb=function(e){e?(this.j.info(`Successfully pinged google.com`),Ue(2)):(this.j.info(`Failed to ping google.com`),Ue(1))};function Rn(e){if(e.I=0,e.ja=[],e.l){let t=Et(e.h);(t.length!=0||e.i.length!=0)&&(m(e.ja,t),m(e.ja,e.i),e.h.i.length=0,p(e.i),e.i.length=0),e.l.oa()}}function zn(e,t,n){var r=n instanceof kt?At(n):new kt(n);if(r.g!=``)t&&(r.g=t+`.`+r.g),Mt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+`.`+i.hostname:i.hostname,i=+i.port;let e=new kt(null);r&&jt(e,r),t&&(e.g=t),i&&Mt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&I(r,n,t),I(r,`VER`,e.ka),On(e,r),r}function Bn(e,t,n){if(t&&!e.L)throw Error(`Can't create secondary domain capable XhrIo object.`);return t=e.Aa&&!e.ma?new un(new nn({ab:n})):new un(e.ma),t.Fa(e.L),t}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vn(){}e=Vn.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function Hn(){}Hn.prototype.g=function(e,t){return new Un(e,t)};function Un(e,t){be.call(this),this.g=new xn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e[`X-Client-Protocol`]=`webchannel`:e={"X-Client-Protocol":`webchannel`}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e[`X-WebChannel-Content-Type`]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e[`X-WebChannel-Client-Profile`]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!ee(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t&&=t.httpSessionIdParam)&&!ee(t)&&(this.g.G=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Kn(this)}d(Un,be),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Sn(this.g)},Un.prototype.o=function(e){var t=this.g;if(typeof e==`string`){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=ke(e),e=n);t.i.push(new yt(t.Ya++,e)),t.I==3&&Tn(t)},Un.prototype.N=function(){this.g.l=null,delete this.j,Sn(this.g),delete this.g,Un.Z.N.call(this)};function Wn(e){Fe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){a:{for(let n in t){e=n;break a}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}d(Wn,Fe);function Gn(){Ie.call(this),this.status=1}d(Gn,Ie);function Kn(e){this.g=e}d(Kn,Vn),Kn.prototype.ra=function(){xe(this.g,`a`)},Kn.prototype.qa=function(e){xe(this.g,new Wn(e))},Kn.prototype.pa=function(e){xe(this.g,new Gn)},Kn.prototype.oa=function(){xe(this.g,`b`)},Hn.prototype.createWebChannel=Hn.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,QD=WD.createWebChannelTransport=function(){return new Hn},ZD=WD.getStatEventTarget=function(){return ze()},XD=WD.Event=Le,YD=WD.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qe.NO_ERROR=0,Qe.TIMEOUT=8,Qe.HTTP_ERROR=6,JD=WD.ErrorCode=Qe,$e.COMPLETE=`complete`,qD=WD.EventType=$e,Ne.EventType=Pe,Pe.OPEN=`a`,Pe.CLOSE=`b`,Pe.ERROR=`c`,Pe.MESSAGE=`d`,be.prototype.listen=be.prototype.J,KD=WD.WebChannel=Ne,WD.FetchXmlHttpFactory=nn,un.prototype.listenOnce=un.prototype.K,un.prototype.getLastError=un.prototype.Ha,un.prototype.getLastErrorCode=un.prototype.ya,un.prototype.getStatus=un.prototype.ca,un.prototype.getResponseJson=un.prototype.La,un.prototype.getResponseText=un.prototype.la,un.prototype.send=un.prototype.ea,un.prototype.setWithCredentials=un.prototype.Fa,GD=WD.XhrIo=un}).apply(UD===void 0?typeof self<`u`?self:typeof window<`u`?window:{}:UD);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $D=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?`uid:`+this.uid:`anonymous-user`}isEqual(e){return e.uid===this.uid}};$D.UNAUTHENTICATED=new $D(null),$D.GOOGLE_CREDENTIALS=new $D(`google-credentials-uid`),$D.FIRST_PARTY=new $D(`first-party-uid`),$D.MOCK_USER=new $D(`mock-user`);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var eO=`12.9.0`;function tO(e){eO=e}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var nO=new aE(`@firebase/firestore`);function rO(){return nO.logLevel}function W(e,...t){if(nO.logLevel<=eE.DEBUG){let n=t.map(oO);nO.debug(`Firestore (${eO}): ${e}`,...n)}}function iO(e,...t){if(nO.logLevel<=eE.ERROR){let n=t.map(oO);nO.error(`Firestore (${eO}): ${e}`,...n)}}function aO(e,...t){if(nO.logLevel<=eE.WARN){let n=t.map(oO);nO.warn(`Firestore (${eO}): ${e}`,...n)}}function oO(e){if(typeof e==`string`)return e;try{return function(e){return JSON.stringify(e)}(e)}catch{return e}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function G(e,t,n){let r=`Unexpected state`;typeof t==`string`?r=t:n=t,sO(e,r,n)}function sO(e,t,n){let r=`FIRESTORE (${eO}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=` CONTEXT: `+JSON.stringify(n)}catch{r+=` CONTEXT: `+n}throw iO(r),Error(r)}function cO(e,t,n,r){let i=`Unexpected state`;typeof n==`string`?i=n:r=n,e||sO(t,i,r)}function K(e,t){return e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q={OK:`ok`,CANCELLED:`cancelled`,UNKNOWN:`unknown`,INVALID_ARGUMENT:`invalid-argument`,DEADLINE_EXCEEDED:`deadline-exceeded`,NOT_FOUND:`not-found`,ALREADY_EXISTS:`already-exists`,PERMISSION_DENIED:`permission-denied`,UNAUTHENTICATED:`unauthenticated`,RESOURCE_EXHAUSTED:`resource-exhausted`,FAILED_PRECONDITION:`failed-precondition`,ABORTED:`aborted`,OUT_OF_RANGE:`out-of-range`,UNIMPLEMENTED:`unimplemented`,INTERNAL:`internal`,UNAVAILABLE:`unavailable`,DATA_LOSS:`data-loss`},J=class extends MT{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}},lO=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},uO=class{constructor(e,t){this.user=t,this.type=`OAuth`,this.headers=new Map,this.headers.set(`Authorization`,`Bearer ${e}`)}},dO=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t($D.UNAUTHENTICATED)))}shutdown(){}},fO=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}},pO=class{constructor(e){this.t=e,this.currentUser=$D.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){cO(this.o===void 0,42304);let n=this.i,r=e=>this.i===n?Promise.resolve():(n=this.i,t(e)),i=new lO;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new lO,e.enqueueRetryable((()=>r(this.currentUser)))};let a=()=>{let t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{W(`FirebaseAuthCredentialsProvider`,`Auth detected`),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(W(`FirebaseAuthCredentialsProvider`,`Auth not yet detected`),i.resolve(),i=new lO)}}),0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i===e?t?(cO(typeof t.accessToken==`string`,31837,{l:t}),new uO(t.accessToken,this.currentUser)):null:(W(`FirebaseAuthCredentialsProvider`,`getToken aborted due to token change.`),this.getToken()))):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return cO(e===null||typeof e==`string`,2055,{h:e}),new $D(e)}},mO=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type=`FirstParty`,this.user=$D.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set(`X-Goog-AuthUser`,this.P);let e=this.A();return e&&this.R.set(`Authorization`,e),this.T&&this.R.set(`X-Goog-Iam-Authorization-Token`,this.T),this.R}},hO=class{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new mO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t($D.FIRST_PARTY)))}shutdown(){}invalidateToken(){}},gO=class{constructor(e){this.value=e,this.type=`AppCheck`,this.headers=new Map,e&&e.length>0&&this.headers.set(`x-firebase-appcheck`,this.value)}},_O=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hD(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){cO(this.o===void 0,3512);let n=e=>{e.error!=null&&W(`FirebaseAppCheckTokenProvider`,`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let n=e.token!==this.m;return this.m=e.token,W(`FirebaseAppCheckTokenProvider`,`Received ${n?`new`:`existing`} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};let r=e=>{W(`FirebaseAppCheckTokenProvider`,`AppCheck detected`),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):W(`FirebaseAppCheckTokenProvider`,`AppCheck not yet detected`)}}),0)}getToken(){if(this.p)return Promise.resolve(new gO(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(cO(typeof e.token==`string`,44558,{tokenResult:e}),this.m=e.token,new gO(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function vO(e){let t=typeof self<`u`&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues==`function`)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var yO=class{static newId(){let e=``;for(;e.length<20;){let t=vO(40);for(let n=0;n<t.length;++n)e.length<20&&t[n]<248&&(e+=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789`.charAt(t[n]%62))}return e}};function bO(e,t){return e<t?-1:e>t?1:0}function xO(e,t){let n=Math.min(e.length,t.length);for(let r=0;r<n;r++){let n=e.charAt(r),i=t.charAt(r);if(n!==i)return wO(n)===wO(i)?bO(n,i):wO(n)?1:-1}return bO(e.length,t.length)}var SO=55296,CO=57343;function wO(e){let t=e.charCodeAt(0);return t>=SO&&t<=CO}function TO(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EO=`__name__`,DO=class e{constructor(e,t,n){t===void 0?t=0:t>e.length&&G(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&G(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((e=>{n.push(e)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let r=Math.min(t.length,n.length);for(let i=0;i<r;i++){let r=e.compareSegments(t.get(i),n.get(i));if(r!==0)return r}return bO(t.length,n.length)}static compareSegments(t,n){let r=e.isNumericId(t),i=e.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?e.extractNumericId(t).compare(e.extractNumericId(n)):xO(t,n)}static isNumericId(e){return e.startsWith(`__id`)&&e.endsWith(`__`)}static extractNumericId(e){return VD.fromString(e.substring(4,e.length-2))}},OO=class e extends DO{construct(t,n,r){return new e(t,n,r)}canonicalString(){return this.toArray().join(`/`)}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join(`/`)}static fromString(...t){let n=[];for(let e of t){if(e.indexOf(`//`)>=0)throw new J(q.INVALID_ARGUMENT,`Invalid segment (${e}). Paths must not contain // in them.`);n.push(...e.split(`/`).filter((e=>e.length>0)))}return new e(n)}static emptyPath(){return new e([])}},kO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,AO=class e extends DO{construct(t,n,r){return new e(t,n,r)}static isValidIdentifier(e){return kO.test(e)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,`\\\\`).replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(`.`)}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===`__name__`}static keyField(){return new e([EO])}static fromServerFormat(t){let n=[],r=``,i=0,a=()=>{if(r.length===0)throw new J(q.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=``},o=!1;for(;i<t.length;){let e=t[i];if(e===`\\`){if(i+1===t.length)throw new J(q.INVALID_ARGUMENT,`Path has trailing escape character: `+t);let e=t[i+1];if(e!==`\\`&&e!==`.`&&e!=="`")throw new J(q.INVALID_ARGUMENT,`Path has invalid escape sequence: `+t);r+=e,i+=2}else e==="`"?(o=!o,i++):e!==`.`||o?(r+=e,i++):(a(),i++)}if(a(),o)throw new J(q.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}},Y=class e{constructor(e){this.path=e}static fromPath(t){return new e(OO.fromString(t))}static fromName(t){return new e(OO.fromString(t).popFirst(5))}static empty(){return new e(OO.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&OO.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return OO.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(t){return new e(new OO(t.slice()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jO(e,t,n){if(!n)throw new J(q.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function MO(e,t,n,r){if(!0===t&&!0===r)throw new J(q.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function NO(e){if(!Y.isDocumentKey(e))throw new J(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function PO(e){return typeof e==`object`&&!!e&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function FO(e){if(e===void 0)return`undefined`;if(e===null)return`null`;if(typeof e==`string`)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e==`number`||typeof e==`boolean`)return``+e;if(typeof e==`object`){if(e instanceof Array)return`an array`;{let t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:`an object`}}return typeof e==`function`?`a function`:G(12329,{type:typeof e})}function IO(e,t){if(`_delegate`in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new J(q.INVALID_ARGUMENT,`Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?`);{let n=FO(e);throw new J(q.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
* @license
* Copyright 2025 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function LO(e,t){let n={typeString:e};return t&&(n.value=t),n}function RO(e,t){if(!PO(e))throw new J(q.INVALID_ARGUMENT,`JSON must be an object`);let n;for(let r in t)if(t[r]){let i=t[r].typeString,a=`value`in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}let o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new J(q.INVALID_ARGUMENT,n);return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var zO=-62135596800,BO=1e6,VO=class e{static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*BO);return new e(n,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new J(q.INVALID_ARGUMENT,`Timestamp nanoseconds out of range: `+t);if(e<zO||e>=253402300800)throw new J(q.INVALID_ARGUMENT,`Timestamp seconds out of range: `+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BO}_compareTo(e){return this.seconds===e.seconds?bO(this.nanoseconds,e.nanoseconds):bO(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return`Timestamp(seconds=`+this.seconds+`, nanoseconds=`+this.nanoseconds+`)`}toJSON(){return{type:e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(RO(t,e._jsonSchema))return new e(t.seconds,t.nanoseconds)}valueOf(){let e=this.seconds-zO;return String(e).padStart(12,`0`)+`.`+String(this.nanoseconds).padStart(9,`0`)}};VO._jsonSchemaVersion=`firestore/timestamp/1.0`,VO._jsonSchema={type:LO(`string`,VO._jsonSchemaVersion),seconds:LO(`number`),nanoseconds:LO(`number`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var X=class e{static fromTimestamp(t){return new e(t)}static min(){return new e(new VO(0,0))}static max(){return new e(new VO(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return`SnapshotVersion(`+this.timestamp.toString()+`)`}toTimestamp(){return this.timestamp}},HO=-1,UO=class{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}};UO.UNKNOWN_ID=-1;function WO(e,t){let n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new VO(n+1,0):new VO(n,r));return new KO(i,Y.empty(),t)}function GO(e){return new KO(e.readTime,e.key,HO)}var KO=class e{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new e(X.min(),Y.empty(),HO)}static max(){return new e(X.max(),Y.empty(),HO)}};function qO(e,t){let n=e.readTime.compareTo(t.readTime);return n===0?(n=Y.comparator(e.documentKey,t.documentKey),n===0?bO(e.largestBatchId,t.largestBatchId):n):n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JO=`The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.`,YO=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function XO(e){if(e.code!==q.FAILED_PRECONDITION||e.message!==JO)throw e;W(`LocalStore`,`Unexpectedly lost primary lease`)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Z=class e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(t,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(((e,r)=>{this.nextCallback=n=>{this.wrapSuccess(t,n).next(e,r)},this.catchCallback=t=>{this.wrapFailure(n,t).next(e,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):e.reject(n)}static resolve(t){return new e(((e,n)=>{e(t)}))}static reject(t){return new e(((e,n)=>{n(t)}))}static waitFor(t){return new e(((e,n)=>{let r=0,i=0,a=!1;t.forEach((t=>{++r,t.next((()=>{++i,a&&i===r&&e()}),(e=>n(e)))})),a=!0,i===r&&e()}))}static or(t){let n=e.resolve(!1);for(let r of t)n=n.next((t=>t?e.resolve(t):r()));return n}static forEach(e,t){let n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(t,n){return new e(((e,r)=>{let i=t.length,a=Array(i),o=0;for(let s=0;s<i;s++){let c=s;n(t[c]).next((t=>{a[c]=t,++o,o===i&&e(a)}),(e=>r(e)))}}))}static doWhile(t,n){return new e(((e,r)=>{let i=()=>{!0===t()?n().next((()=>{i()}),r):e()};i()}))}};function ZO(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(`.`).slice(0,2).join(`.`):`-1`;return Number(n)}function QO(e){return e.name===`IndexedDbTransactionError`}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $O=class{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}};$O.ce=-1;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ek=-1;function tk(e){return e==null}function nk(e){return e===0&&1/e==-1/0}function rk(e){return typeof e==`number`&&Number.isInteger(e)&&!nk(e)&&e<=2**53-1&&e>=-(2**53-1)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ik=``;function ak(e){let t=``;for(let n=0;n<e.length;n++)t.length>0&&(t=sk(t)),t=ok(e.get(n),t);return sk(t)}function ok(e,t){let n=t,r=e.length;for(let t=0;t<r;t++){let r=e.charAt(t);switch(r){case`\0`:n+=``;break;case ik:n+=``;break;default:n+=r}}return n}function sk(e){return e+ik+``}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ck(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function lk(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uk(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var dk=class e{constructor(e,t){this.comparator=e,this.root=t||pk.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,pk.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,pk.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){let e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(`, `)}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fk(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fk(this.root,e,this.comparator,!1)}getReverseIterator(){return new fk(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fk(this.root,e,this.comparator,!0)}},fk=class{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pk=class e{constructor(t,n,r,i,a){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=a??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,a){return new e(t??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return 2**this.check()<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};pk.EMPTY=null,pk.RED=!0,pk.BLACK=!1,pk.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new pk(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var mk=class e{constructor(e){this.comparator=e,this.data=new dk(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){let n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=t===void 0?this.data.getIterator():this.data.getIteratorFrom(t);n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hk(this.data.getIterator())}getIteratorFrom(e){return new hk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(this.comparator(e,t)!==0)return!1}return!0}toArray(){let e=[];return this.forEach((t=>{e.push(t)})),e}toString(){let e=[];return this.forEach((t=>e.push(t))),`SortedSet(`+e.toString()+`)`}copy(t){let n=new e(this.comparator);return n.data=t,n}},hk=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}},gk=class e{constructor(e){this.fields=e,e.sort(AO.comparator)}static empty(){return new e([])}unionWith(t){let n=new mk(AO.comparator);for(let e of this.fields)n=n.add(e);for(let e of t)n=n.add(e);return new e(n.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return TO(this.fields,e.fields,((e,t)=>e.isEqual(t)))}},_k=class extends Error{constructor(){super(...arguments),this.name=`Base64DecodeError`}},vk=class e{constructor(e){this.binaryString=e}static fromBase64String(t){let n=function(e){try{return atob(e)}catch(e){throw typeof DOMException<`u`&&e instanceof DOMException?new _k(`Invalid base64 string: `+e):e}}(t);return new e(n)}static fromUint8Array(t){let n=function(e){let t=``;for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bO(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};vk.EMPTY_BYTE_STRING=new vk(``);var yk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bk(e){if(cO(!!e,39018),typeof e==`string`){let t=0,n=yk.exec(e);if(cO(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+`000000000`).substr(0,9),t=Number(e)}let r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xk(e.seconds),nanos:xk(e.nanos)}}function xk(e){return typeof e==`number`?e:typeof e==`string`?Number(e):0}function Sk(e){return typeof e==`string`?vk.fromBase64String(e):vk.fromUint8Array(e)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Ck=`server_timestamp`,wk=`__type__`,Tk=`__previous_value__`,Ek=`__local_write_time__`;function Dk(e){return(e?.mapValue?.fields||{})[wk]?.stringValue===Ck}function Ok(e){let t=e.mapValue.fields[Tk];return Dk(t)?Ok(t):t}function kk(e){let t=bk(e.mapValue.fields[Ek].timestampValue);return new VO(t.seconds,t.nanos)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ak=class{constructor(e,t,n,r,i,a,o,s,c,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=c,this.isUsingEmulator=l,this.apiKey=u}},jk=`(default)`,Mk=class e{constructor(e,t){this.projectId=e,this.database=t||jk}static empty(){return new e(``,``)}get isDefaultDatabase(){return this.database===jk}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};function Nk(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,[`projectId`]))throw new J(q.INVALID_ARGUMENT,`"projectId" not provided in firebase.initializeApp.`);return new Mk(e.options.projectId,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pk=`__type__`,Fk=`__max__`,Ik={mapValue:{fields:{__type__:{stringValue:Fk}}}},Lk=`__vector__`,Rk=`value`;function zk(e){return`nullValue`in e?0:`booleanValue`in e?1:`integerValue`in e||`doubleValue`in e?2:`timestampValue`in e?3:`stringValue`in e?5:`bytesValue`in e?6:`referenceValue`in e?7:`geoPointValue`in e?8:`arrayValue`in e?9:`mapValue`in e?Dk(e)?4:tA(e)?9007199254740991:$k(e)?10:11:G(28295,{value:e})}function Bk(e,t){if(e===t)return!0;let n=zk(e);if(n!==zk(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kk(e).isEqual(kk(t));case 3:return function(e,t){if(typeof e.timestampValue==`string`&&typeof t.timestampValue==`string`&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=bk(e.timestampValue),r=bk(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Sk(e.bytesValue).isEqual(Sk(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xk(e.geoPointValue.latitude)===xk(t.geoPointValue.latitude)&&xk(e.geoPointValue.longitude)===xk(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if(`integerValue`in e&&`integerValue`in t)return xk(e.integerValue)===xk(t.integerValue);if(`doubleValue`in e&&`doubleValue`in t){let n=xk(e.doubleValue),r=xk(t.doubleValue);return n===r?nk(n)===nk(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return TO(e.arrayValue.values||[],t.arrayValue.values||[],Bk);case 10:case 11:return function(e,t){let n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ck(n)!==ck(r))return!1;for(let e in n)if(n.hasOwnProperty(e)&&(r[e]===void 0||!Bk(n[e],r[e])))return!1;return!0}(e,t);default:return G(52216,{left:e})}}function Vk(e,t){return(e.values||[]).find((e=>Bk(e,t)))!==void 0}function Hk(e,t){if(e===t)return 0;let n=zk(e),r=zk(t);if(n!==r)return bO(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bO(e.booleanValue,t.booleanValue);case 2:return function(e,t){let n=xk(e.integerValue||e.doubleValue),r=xk(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Uk(e.timestampValue,t.timestampValue);case 4:return Uk(kk(e),kk(t));case 5:return xO(e.stringValue,t.stringValue);case 6:return function(e,t){let n=Sk(e),r=Sk(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let n=e.split(`/`),r=t.split(`/`);for(let e=0;e<n.length&&e<r.length;e++){let t=bO(n[e],r[e]);if(t!==0)return t}return bO(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let n=bO(xk(e.latitude),xk(t.latitude));return n===0?bO(xk(e.longitude),xk(t.longitude)):n}(e.geoPointValue,t.geoPointValue);case 9:return Wk(e.arrayValue,t.arrayValue);case 10:return function(e,t){let n=e.fields||{},r=t.fields||{},i=n[Rk]?.arrayValue,a=r[Rk]?.arrayValue,o=bO(i?.values?.length||0,a?.values?.length||0);return o===0?Wk(i,a):o}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ik.mapValue&&t===Ik.mapValue)return 0;if(e===Ik.mapValue)return 1;if(t===Ik.mapValue)return-1;let n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(let e=0;e<r.length&&e<a.length;++e){let t=xO(r[e],a[e]);if(t!==0)return t;let o=Hk(n[r[e]],i[a[e]]);if(o!==0)return o}return bO(r.length,a.length)}(e.mapValue,t.mapValue);default:throw G(23264,{he:n})}}function Uk(e,t){if(typeof e==`string`&&typeof t==`string`&&e.length===t.length)return bO(e,t);let n=bk(e),r=bk(t),i=bO(n.seconds,r.seconds);return i===0?bO(n.nanos,r.nanos):i}function Wk(e,t){let n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){let t=Hk(n[e],r[e]);if(t)return t}return bO(n.length,r.length)}function Gk(e){return Kk(e)}function Kk(e){return`nullValue`in e?`null`:`booleanValue`in e?``+e.booleanValue:`integerValue`in e?``+e.integerValue:`doubleValue`in e?``+e.doubleValue:`timestampValue`in e?function(e){let t=bk(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):`stringValue`in e?e.stringValue:`bytesValue`in e?function(e){return Sk(e).toBase64()}(e.bytesValue):`referenceValue`in e?function(e){return Y.fromName(e).toString()}(e.referenceValue):`geoPointValue`in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):`arrayValue`in e?function(e){let t=`[`,n=!0;for(let r of e.values||[])n?n=!1:t+=`,`,t+=Kk(r);return t+`]`}(e.arrayValue):`mapValue`in e?function(e){let t=Object.keys(e.fields||{}).sort(),n=`{`,r=!0;for(let i of t)r?r=!1:n+=`,`,n+=`${i}:${Kk(e.fields[i])}`;return n+`}`}(e.mapValue):G(61005,{value:e})}function qk(e){switch(zk(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Ok(e);return t?16+qk(t):16;case 5:return 2*e.stringValue.length;case 6:return Sk(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+qk(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return lk(e.fields,((e,n)=>{t+=e.length+qk(n)})),t}(e.mapValue);default:throw G(13486,{value:e})}}function Jk(e){return!!e&&`integerValue`in e}function Yk(e){return!!e&&`arrayValue`in e}function Xk(e){return!!e&&`nullValue`in e}function Zk(e){return!!e&&`doubleValue`in e&&isNaN(Number(e.doubleValue))}function Qk(e){return!!e&&`mapValue`in e}function $k(e){return(e?.mapValue?.fields||{})[Pk]?.stringValue===Lk}function eA(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue==`object`)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return lk(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=eA(n))),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=eA(e.arrayValue.values[n]);return t}return{...e}}function tA(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Fk}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var nA=class e{constructor(e){this.value=e}static empty(){return new e({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Qk(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eA(t)}setAll(e){let t=AO.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=eA(e):r.push(i.lastSegment())}));let i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){let t=this.field(e.popLast());Qk(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bk(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Qk(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){lk(t,((t,n)=>e[t]=n));for(let t of n)delete e[t]}clone(){return new e(eA(this.value))}};function rA(e){let t=[];return lk(e.fields,((e,n)=>{let r=new AO([e]);if(Qk(n)){let e=rA(n.mapValue).fields;if(e.length===0)t.push(r);else for(let n of e)t.push(r.child(n))}else t.push(r)})),new gk(t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var iA=class e{constructor(e,t,n,r,i,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(t){return new e(t,0,X.min(),X.min(),X.min(),nA.empty(),0)}static newFoundDocument(t,n,r,i){return new e(t,1,n,X.min(),r,i,0)}static newNoDocument(t,n){return new e(t,2,n,X.min(),X.min(),nA.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,X.min(),X.min(),nA.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nA.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nA.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}},aA=class{constructor(e,t){this.position=e,this.inclusive=t}};function oA(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Y.comparator(Y.fromName(o.referenceValue),n.key):Hk(o,n.data.field(a.field)),a.dir===`desc`&&(r*=-1),r!==0)break}return r}function sA(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Bk(e.position[n],t.position[n]))return!1;return!0}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var cA=class{constructor(e,t=`asc`){this.field=e,this.dir=t}};function lA(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uA=class{},dA=class e extends uA{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(t,n,r){return t.isKeyField()?n===`in`||n===`not-in`?this.createKeyFieldInFilter(t,n,r):new yA(t,n,r):n===`array-contains`?new CA(t,r):n===`in`?new wA(t,r):n===`not-in`?new TA(t,r):n===`array-contains-any`?new EA(t,r):new e(t,n,r)}static createKeyFieldInFilter(e,t,n){return t===`in`?new bA(e,n):new xA(e,n)}matches(e){let t=e.data.field(this.field);return this.op===`!=`?t!==null&&t.nullValue===void 0&&this.matchesComparison(Hk(t,this.value)):t!==null&&zk(this.value)===zk(t)&&this.matchesComparison(Hk(t,this.value))}matchesComparison(e){switch(this.op){case`<`:return e<0;case`<=`:return e<=0;case`==`:return e===0;case`!=`:return e!==0;case`>`:return e>0;case`>=`:return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return[`<`,`<=`,`>`,`>=`,`!=`,`not-in`].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fA=class e extends uA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(t,n){return new e(t,n)}matches(e){return pA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function pA(e){return e.op===`and`}function mA(e){return hA(e)&&pA(e)}function hA(e){for(let t of e.filters)if(t instanceof fA)return!1;return!0}function gA(e){if(e instanceof dA)return e.field.canonicalString()+e.op.toString()+Gk(e.value);if(mA(e))return e.filters.map((e=>gA(e))).join(`,`);{let t=e.filters.map((e=>gA(e))).join(`,`);return`${e.op}(${t})`}}function _A(e,t){return e instanceof dA?function(e,t){return t instanceof dA&&e.op===t.op&&e.field.isEqual(t.field)&&Bk(e.value,t.value)}(e,t):e instanceof fA?function(e,t){return t instanceof fA&&e.op===t.op&&e.filters.length===t.filters.length?e.filters.reduce(((e,n,r)=>e&&_A(n,t.filters[r])),!0):!1}(e,t):void G(19439)}function vA(e){return e instanceof dA?function(e){return`${e.field.canonicalString()} ${e.op} ${Gk(e.value)}`}(e):e instanceof fA?function(e){return e.op.toString()+` {`+e.getFilters().map(vA).join(` ,`)+`}`}(e):`Filter`}var yA=class extends dA{constructor(e,t,n){super(e,t,n),this.key=Y.fromName(n.referenceValue)}matches(e){let t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}},bA=class extends dA{constructor(e,t){super(e,`in`,t),this.keys=SA(`in`,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}},xA=class extends dA{constructor(e,t){super(e,`not-in`,t),this.keys=SA(`not-in`,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}};function SA(e,t){return(t.arrayValue?.values||[]).map((e=>Y.fromName(e.referenceValue)))}var CA=class extends dA{constructor(e,t){super(e,`array-contains`,t)}matches(e){let t=e.data.field(this.field);return Yk(t)&&Vk(t.arrayValue,this.value)}},wA=class extends dA{constructor(e,t){super(e,`in`,t)}matches(e){let t=e.data.field(this.field);return t!==null&&Vk(this.value.arrayValue,t)}},TA=class extends dA{constructor(e,t){super(e,`not-in`,t)}matches(e){if(Vk(this.value.arrayValue,{nullValue:`NULL_VALUE`}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vk(this.value.arrayValue,t)}},EA=class extends dA{constructor(e,t){super(e,`array-contains-any`,t)}matches(e){let t=e.data.field(this.field);return!(!Yk(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Vk(this.value.arrayValue,e)))}},DA=class{constructor(e,t=null,n=[],r=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}};function OA(e,t=null,n=[],r=[],i=null,a=null,o=null){return new DA(e,t,n,r,i,a,o)}function kA(e){let t=K(e);if(t.Te===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+=`|cg:`+t.collectionGroup),e+=`|f:`,e+=t.filters.map((e=>gA(e))).join(`,`),e+=`|ob:`,e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(`,`),tk(t.limit)||(e+=`|l:`,e+=t.limit),t.startAt&&(e+=`|lb:`,e+=t.startAt.inclusive?`b:`:`a:`,e+=t.startAt.position.map((e=>Gk(e))).join(`,`)),t.endAt&&(e+=`|ub:`,e+=t.endAt.inclusive?`a:`:`b:`,e+=t.endAt.position.map((e=>Gk(e))).join(`,`)),t.Te=e}return t.Te}function AA(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!lA(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!_A(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sA(e.startAt,t.startAt)&&sA(e.endAt,t.endAt)}function jA(e){return Y.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var MA=class{constructor(e,t=null,n=[],r=[],i=null,a=`F`,o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}};function NA(e,t,n,r,i,a,o,s){return new MA(e,t,n,r,i,a,o,s)}function PA(e){return new MA(e)}function FA(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function IA(e){return Y.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function LA(e){return e.collectionGroup!==null}function RA(e){let t=K(e);if(t.Ie===null){t.Ie=[];let e=new Set;for(let n of t.explicitOrderBy)t.Ie.push(n),e.add(n.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:`asc`;(function(e){let t=new mk(AO.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t})(t).forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new cA(r,n))})),e.has(AO.keyField().canonicalString())||t.Ie.push(new cA(AO.keyField(),n))}return t.Ie}function zA(e){let t=K(e);return t.Ee||=BA(t,RA(e)),t.Ee}function BA(e,t){if(e.limitType===`F`)return OA(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{let t=e.dir===`desc`?`asc`:`desc`;return new cA(e.field,t)}));let n=e.endAt?new aA(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new aA(e.startAt.position,e.startAt.inclusive):null;return OA(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function VA(e,t,n){return new MA(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function HA(e,t){return AA(zA(e),zA(t))&&e.limitType===t.limitType}function UA(e){return`${kA(zA(e))}|lt:${e.limitType}`}function WA(e){return`Query(target=${function(e){let t=e.path.canonicalString();return e.collectionGroup!==null&&(t+=` collectionGroup=`+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>vA(e))).join(`, `)}]`),tk(e.limit)||(t+=`, limit: `+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(`, `)}]`),e.startAt&&(t+=`, startAt: `,t+=e.startAt.inclusive?`b:`:`a:`,t+=e.startAt.position.map((e=>Gk(e))).join(`,`)),e.endAt&&(t+=`, endAt: `,t+=e.endAt.inclusive?`a:`:`b:`,t+=e.endAt.position.map((e=>Gk(e))).join(`,`)),`Target(${t})`}(zA(e))}; limitType=${e.limitType})`}function GA(e,t){return t.isFoundDocument()&&function(e,t){let n=t.key.path;return e.collectionGroup===null?Y.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n):t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n)}(e,t)&&function(e,t){for(let n of RA(e))if(!n.field.isKeyField()&&t.data.field(n.field)===null)return!1;return!0}(e,t)&&function(e,t){for(let n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){let r=oA(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,RA(e),t)||e.endAt&&!function(e,t,n){let r=oA(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,RA(e),t))}(e,t)}function KA(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function qA(e){return(t,n)=>{let r=!1;for(let i of RA(e)){let e=JA(i,t,n);if(e!==0)return e;r||=i.field.isKeyField()}return 0}}function JA(e,t,n){let r=e.field.isKeyField()?Y.comparator(t.key,n.key):function(e,t,n){let r=t.data.field(e),i=n.data.field(e);return r!==null&&i!==null?Hk(r,i):G(42886)}(e.field,t,n);switch(e.dir){case`asc`:return r;case`desc`:return-1*r;default:return G(19790,{direction:e.dir})}}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var YA=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(let[t,r]of n)if(this.equalsFn(t,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){lk(this.inner,((t,n)=>{for(let[t,r]of n)e(t,r)}))}isEmpty(){return uk(this.inner)}size(){return this.innerSize}},XA=new dk(Y.comparator);function ZA(){return XA}var QA=new dk(Y.comparator);function $A(...e){let t=QA;for(let n of e)t=t.insert(n.key,n);return t}function ej(e){let t=QA;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function tj(){return rj()}function nj(){return rj()}function rj(){return new YA((e=>e.toString()),((e,t)=>e.isEqual(t)))}var ij=new dk(Y.comparator),aj=new mk(Y.comparator);function oj(...e){let t=aj;for(let n of e)t=t.add(n);return t}var sj=new mk(bO);function cj(){return sj}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function lj(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:`NaN`};if(t===1/0)return{doubleValue:`Infinity`};if(t===-1/0)return{doubleValue:`-Infinity`}}return{doubleValue:nk(t)?`-0`:t}}function uj(e){return{integerValue:``+e}}function dj(e,t){return rk(t)?uj(t):lj(e,t)}
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var fj=class{constructor(){this._=void 0}};function pj(e,t,n){return e instanceof gj?function(e,t){let n={fields:{[wk]:{stringValue:Ck},[Ek]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Dk(t)&&(t=Ok(t)),t&&(n.fields[Tk]=t),{mapValue:n}}(n,t):e instanceof _j?vj(e,t):e instanceof yj?bj(e,t):function(e,t){let n=hj(e,t),r=Sj(n)+Sj(e.Ae);return Jk(n)&&Jk(e.Ae)?uj(r):lj(e.serializer,r)}(e,t)}function mj(e,t,n){return e instanceof _j?vj(e,t):e instanceof yj?bj(e,t):n}function hj(e,t){return e instanceof xj?function(e){return Jk(e)||function(e){return!!e&&`doubleValue`in e}(e)}(t)?t:{integerValue:0}:null}var gj=class extends fj{},_j=class extends fj{constructor(e){super(),this.elements=e}};function vj(e,t){let n=Cj(t);for(let t of e.elements)n.some((e=>Bk(e,t)))||n.push(t);return{arrayValue:{values:n}}}var yj=class extends fj{constructor(e){super(),this.elements=e}};function bj(e,t){let n=Cj(t);for(let t of e.elements)n=n.filter((e=>!Bk(e,t)));return{arrayValue:{values:n}}}var xj=class extends fj{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function Sj(e){return xk(e.integerValue||e.doubleValue)}function Cj(e){return Yk(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function wj(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof _j&&t instanceof _j||e instanceof yj&&t instanceof yj?TO(e.elements,t.elements,Bk):e instanceof xj&&t instanceof xj?Bk(e.Ae,t.Ae):e instanceof gj&&t instanceof gj}(e.transform,t.transform)}var Tj=class{constructor(e,t){this.version=e,this.transformResults=t}},Ej=class e{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Dj(e,t){return e.updateTime===void 0?e.exists===void 0||e.exists===t.isFoundDocument():t.isFoundDocument()&&t.version.isEqual(e.updateTime)}var Oj=class{};function kj(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new zj(e.key,Ej.none()):new Pj(e.key,e.data,Ej.none());{let n=e.data,r=nA.empty(),i=new mk(AO.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);t===null&&e.length>1&&(e=e.popLast(),t=n.field(e)),t===null?r.delete(e):r.set(e,t),i=i.add(e)}return new Fj(e.key,r,new gk(i.toArray()),Ej.none())}}function Aj(e,t,n){e instanceof Pj?function(e,t,n){let r=e.value.clone(),i=Lj(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Fj?function(e,t,n){if(!Dj(e.precondition,t))return void t.convertToUnknownDocument(n.version);let r=Lj(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ij(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function jj(e,t,n,r){return e instanceof Pj?function(e,t,n,r){if(!Dj(e.precondition,t))return n;let i=e.value.clone(),a=Rj(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Fj?function(e,t,n,r){if(!Dj(e.precondition,t))return n;let i=Rj(e.fieldTransforms,r,t),a=t.data;return a.setAll(Ij(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),n===null?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Dj(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Mj(e,t){let n=null;for(let r of e.fieldTransforms){let e=t.data.field(r.field),i=hj(r.transform,e||null);i!=null&&(n===null&&(n=nA.empty()),n.set(r.field,i))}return n||null}function Nj(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return e===void 0&&t===void 0||!(!e||!t)&&TO(e,t,((e,t)=>wj(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Pj=class extends Oj{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Fj=class extends Oj{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}};function Ij(e){let t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){let r=e.data.field(n);t.set(n,r)}})),t}function Lj(e,t,n){let r=new Map;cO(e.length===n.length,32656,{Ve:n.length,de:e.length});for(let i=0;i<n.length;i++){let a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,mj(o,s,n[i]))}return r}function Rj(e,t,n){let r=new Map;for(let i of e){let e=i.transform,a=n.data.field(i.field);r.set(i.field,pj(e,a,t))}return r}var zj=class extends Oj{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Bj=class extends Oj{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}},Vj=class{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){let n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&Aj(r,e,n[t])}}applyToLocalView(e,t){for(let n of this.baseMutations)n.key.isEqual(e.key)&&(t=jj(n,e,t,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(e.key)&&(t=jj(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let n=nj();return this.mutations.forEach((r=>{let i=e.get(r.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields);o=t.has(r.key)?null:o;let s=kj(a,o);s!==null&&n.set(r.key,s),a.isValidDocument()||a.convertToNoDocument(X.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),oj())}isEqual(e){return this.batchId===e.batchId&&TO(this.mutations,e.mutations,((e,t)=>Nj(e,t)))&&TO(this.baseMutations,e.baseMutations,((e,t)=>Nj(e,t)))}},Hj=class e{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(t,n,r){cO(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let i=function(){return ij}(),a=t.mutations;for(let e=0;e<a.length;e++)i=i.insert(a[e].key,r[e].version);return new e(t,n,r,i)}},Uj=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}},Wj=class{constructor(e,t){this.count=e,this.unchangedNames=t}},Gj,Kj;function qj(e){switch(e){case q.OK:return G(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return G(15467,{code:e})}}function Jj(e){if(e===void 0)return iO(`GRPC error has no .code`),q.UNKNOWN;switch(e){case Gj.OK:return q.OK;case Gj.CANCELLED:return q.CANCELLED;case Gj.UNKNOWN:return q.UNKNOWN;case Gj.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case Gj.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case Gj.INTERNAL:return q.INTERNAL;case Gj.UNAVAILABLE:return q.UNAVAILABLE;case Gj.UNAUTHENTICATED:return q.UNAUTHENTICATED;case Gj.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case Gj.NOT_FOUND:return q.NOT_FOUND;case Gj.ALREADY_EXISTS:return q.ALREADY_EXISTS;case Gj.PERMISSION_DENIED:return q.PERMISSION_DENIED;case Gj.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case Gj.ABORTED:return q.ABORTED;case Gj.OUT_OF_RANGE:return q.OUT_OF_RANGE;case Gj.UNIMPLEMENTED:return q.UNIMPLEMENTED;case Gj.DATA_LOSS:return q.DATA_LOSS;default:return G(39323,{code:e})}}(Kj=Gj||={})[Kj.OK=0]=`OK`,Kj[Kj.CANCELLED=1]=`CANCELLED`,Kj[Kj.UNKNOWN=2]=`UNKNOWN`,Kj[Kj.INVALID_ARGUMENT=3]=`INVALID_ARGUMENT`,Kj[Kj.DEADLINE_EXCEEDED=4]=`DEADLINE_EXCEEDED`,Kj[Kj.NOT_FOUND=5]=`NOT_FOUND`,Kj[Kj.ALREADY_EXISTS=6]=`ALREADY_EXISTS`,Kj[Kj.PERMISSION_DENIED=7]=`PERMISSION_DENIED`,Kj[Kj.UNAUTHENTICATED=16]=`UNAUTHENTICATED`,Kj[Kj.RESOURCE_EXHAUSTED=8]=`RESOURCE_EXHAUSTED`,Kj[Kj.FAILED_PRECONDITION=9]=`FAILED_PRECONDITION`,Kj[Kj.ABORTED=10]=`ABORTED`,Kj[Kj.OUT_OF_RANGE=11]=`OUT_OF_RANGE`,Kj[Kj.UNIMPLEMENTED=12]=`UNIMPLEMENTED`,Kj[Kj.INTERNAL=13]=`INTERNAL`,Kj[Kj.UNAVAILABLE=14]=`UNAVAILABLE`,Kj[Kj.DATA_LOSS=15]=`DATA_LOSS`;
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Yj=null;
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Xj(){return new TextEncoder}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Zj=new VD([4294967295,4294967295],0);function Qj(e){let t=Xj().encode(e),n=new HD;return n.update(t),new Uint8Array(n.digest())}function $j(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new VD([n,r],0),new VD([i,a],0)]}var eM=class e{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new tM(`Invalid padding: ${t}`);if(n<0||e.length>0&&this.hashCount===0)throw new tM(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new tM(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=VD.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(VD.fromNumber(n)));return r.compare(Zj)===1&&(r=new VD([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=Qj(e),[n,r]=$j(t);for(let e=0;e<this.hashCount;e++){let t=this.ye(n,r,e);if(!this.we(t))return!1}return!0}static create(t,n,r){let i=t%8==0?0:8-t%8,a=new Uint8Array(Math.ceil(t/8)),o=new e(a,i,n);return r.forEach((e=>o.insert(e))),o}insert(e){if(this.ge===0)return;let t=Qj(e),[n,r]=$j(t);for(let e=0;e<this.hashCount;e++){let t=this.ye(n,r,e);this.be(t)}}be(e){let t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}},tM=class extends Error{constructor(){super(...arguments),this.name=`BloomFilterError`}},nM=class e{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){let i=new Map;return i.set(t,rM.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(X.min(),i,new dk(bO),ZA(),oj())}},rM=class e{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new e(r,n,oj(),oj(),oj())}},iM=class{constructor(e,t,n,r){this.Se=e,this.removedTargetIds=t,this.key=n,this.De=r}},aM=class{constructor(e,t){this.targetId=e,this.Ce=t}},oM=class{constructor(e,t,n=vk.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}},sM=class{constructor(){this.ve=0,this.Fe=uM(),this.Me=vk.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oj(),t=oj(),n=oj();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:G(38017,{changeType:i})}})),new rM(this.Me,this.xe,e,t,n)}Ke(){this.Oe=!1,this.Fe=uM()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){--this.ve,cO(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}},cM=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=ZA(),this.He=lM(),this.Je=lM(),this.Ze=new dk(bO)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{let n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:G(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((e,n)=>{this.rt(n)&&t(n)}))}st(e){let t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){let i=r.target;if(jA(i))if(n===0){let e=new Y(i.path);this.et(t,e,iA.newNoDocument(e,X.min()))}else cO(n===1,20013,{expectedCount:n});else{let r=this._t(t);if(r!==n){let n=this.ut(e),i=n?this.ct(n,e,r):1;if(i!==0){this.it(t);let e=i===2?`TargetPurposeExistenceFilterMismatchBloom`:`TargetPurposeExistenceFilterMismatch`;this.Ze=this.Ze.insert(t,e)}Yj?.lt(function(e,t,n,r,i){let a={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(a.bloomFilter={applied:i===0,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),a}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:n=``,padding:r=0},hashCount:i=0}=t,a,o;try{a=Sk(n).toUint8Array()}catch(e){if(e instanceof _k)return aO(`Decoding the base64 bloom filter in existence filter failed (`+e.message+`); ignoring the bloom filter and falling back to full re-query.`),null;throw e}try{o=new eM(a,r,i)}catch(e){return aO(e instanceof tM?`BloomFilter error: `:`Applying bloom filter failed: `,e),null}return o.ge===0?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){let n=this.Ge.getRemoteKeysForTarget(t),r=0;return n.forEach((n=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(a)||(this.et(t,n,null),r++)})),r}Tt(e){let t=new Map;this.ze.forEach(((n,r)=>{let i=this.ot(r);if(i){if(n.current&&jA(i.target)){let t=new Y(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,iA.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.Ke())}}));let n=oj();this.Je.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{let t=this.ot(e);return!t||t.purpose===`TargetPurposeLimboResolution`||(r=!1,!1)})),r&&(n=n.add(e))})),this.je.forEach(((t,n)=>n.setReadTime(e)));let r=new nM(e,t,this.Ze,this.je,n);return this.je=ZA(),this.He=lM(),this.Je=lM(),this.Ze=new dk(bO),r}Ye(e,t){if(!this.rt(e))return;let n=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,n),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;let r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new sM,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new mk(bO),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new mk(bO),this.He=this.He.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||W(`WatchChangeAggregator`,`Detected inactive target`,e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sM),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function lM(){return new dk(Y.comparator)}function uM(){return new dk(Y.comparator)}var dM=(()=>({asc:`ASCENDING`,desc:`DESCENDING`}))(),fM=(()=>({"<":`LESS_THAN`,"<=":`LESS_THAN_OR_EQUAL`,">":`GREATER_THAN`,">=":`GREATER_THAN_OR_EQUAL`,"==":`EQUAL`,"!=":`NOT_EQUAL`,"array-contains":`ARRAY_CONTAINS`,in:`IN`,"not-in":`NOT_IN`,"array-contains-any":`ARRAY_CONTAINS_ANY`}))(),pM=(()=>({and:`AND`,or:`OR`}))(),mM=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function hM(e,t){return e.useProto3Json||tk(t)?t:{value:t}}function gM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,``).replace(`Z`,``)}.${(`000000000`+t.nanoseconds).slice(-9)}Z`:{seconds:``+t.seconds,nanos:t.nanoseconds}}function _M(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vM(e,t){return gM(e,t.toTimestamp())}function yM(e){return cO(!!e,49232),X.fromTimestamp(function(e){let t=bk(e);return new VO(t.seconds,t.nanos)}(e))}function bM(e,t){return xM(e,t).canonicalString()}function xM(e,t){let n=function(e){return new OO([`projects`,e.projectId,`databases`,e.database])}(e).child(`documents`);return t===void 0?n:n.child(t)}function SM(e){let t=OO.fromString(e);return cO(GM(t),10190,{key:t.toString()}),t}function CM(e,t){return bM(e.databaseId,t.path)}function wM(e,t){let n=SM(t);if(n.get(1)!==e.databaseId.projectId)throw new J(q.INVALID_ARGUMENT,`Tried to deserialize key from different project: `+n.get(1)+` vs `+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new J(q.INVALID_ARGUMENT,`Tried to deserialize key from different database: `+n.get(3)+` vs `+e.databaseId.database);return new Y(OM(n))}function TM(e,t){return bM(e.databaseId,t)}function EM(e){let t=SM(e);return t.length===4?OO.emptyPath():OM(t)}function DM(e){return new OO([`projects`,e.databaseId.projectId,`databases`,e.databaseId.database]).canonicalString()}function OM(e){return cO(e.length>4&&e.get(4)===`documents`,29091,{key:e.toString()}),e.popFirst(5)}function kM(e,t,n){return{name:CM(e,t),fields:n.value.mapValue.fields}}function AM(e,t){let n;if(`targetChange`in t){t.targetChange;let r=function(e){return e===`NO_CHANGE`?0:e===`ADD`?1:e===`REMOVE`?2:e===`CURRENT`?3:e===`RESET`?4:G(39313,{state:e})}(t.targetChange.targetChangeType||`NO_CHANGE`),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(cO(t===void 0||typeof t==`string`,58123),vk.fromBase64String(t||``)):(cO(t===void 0||t instanceof Buffer||t instanceof Uint8Array,16193),vk.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){let t=e.code===void 0?q.UNKNOWN:Jj(e.code);return new J(t,e.message||``)}(o);n=new oM(r,i,a,s||null)}else if(`documentChange`in t){t.documentChange;let r=t.documentChange;r.document,r.document.name,r.document.updateTime;let i=wM(e,r.document.name),a=yM(r.document.updateTime),o=r.document.createTime?yM(r.document.createTime):X.min(),s=new nA({mapValue:{fields:r.document.fields}}),c=iA.newFoundDocument(i,a,o,s),l=r.targetIds||[],u=r.removedTargetIds||[];n=new iM(l,u,c.key,c)}else if(`documentDelete`in t){t.documentDelete;let r=t.documentDelete;r.document;let i=wM(e,r.document),a=r.readTime?yM(r.readTime):X.min(),o=iA.newNoDocument(i,a),s=r.removedTargetIds||[];n=new iM([],s,o.key,o)}else if(`documentRemove`in t){t.documentRemove;let r=t.documentRemove;r.document;let i=wM(e,r.document),a=r.removedTargetIds||[];n=new iM([],a,i,null)}else{if(!(`filter`in t))return G(11601,{Vt:t});{t.filter;let e=t.filter;e.targetId;let{count:r=0,unchangedNames:i}=e,a=new Wj(r,i),o=e.targetId;n=new aM(o,a)}}return n}function jM(e,t){let n;if(t instanceof Pj)n={update:kM(e,t.key,t.value)};else if(t instanceof zj)n={delete:CM(e,t.key)};else if(t instanceof Fj)n={update:kM(e,t.key,t.data),updateMask:WM(t.fieldMask)};else{if(!(t instanceof Bj))return G(16599,{dt:t.type});n={verify:CM(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){let n=t.transform;if(n instanceof gj)return{fieldPath:t.field.canonicalString(),setToServerValue:`REQUEST_TIME`};if(n instanceof _j)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yj)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof xj)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw G(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return t.updateTime===void 0?t.exists===void 0?G(27497):{exists:t.exists}:{updateTime:vM(e,t.updateTime)}}(e,t.precondition)),n}function MM(e,t){return e&&e.length>0?(cO(t!==void 0,14353),e.map((e=>function(e,t){let n=e.updateTime?yM(e.updateTime):yM(t);return n.isEqual(X.min())&&(n=yM(t)),new Tj(n,e.transformResults||[])}(e,t)))):[]}function NM(e,t){return{documents:[TM(e,t.path)]}}function PM(e,t){let n={structuredQuery:{}},r=t.path,i;t.collectionGroup===null?(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]):(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]),n.parent=TM(e,i);let a=function(e){if(e.length!==0)return UM(fA.create(e,`and`))}(t.filters);a&&(n.structuredQuery.where=a);let o=function(e){if(e.length!==0)return e.map((e=>function(e){return{field:VM(e.field),direction:RM(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let s=hM(e,t.limit);return s!==null&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function FM(e){let t=EM(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){cO(r===1,65062);let e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let a=[];n.where&&(a=function(e){let t=LM(e);return t instanceof fA&&mA(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new cA(HM(e.field),function(e){switch(e){case`ASCENDING`:return`asc`;case`DESCENDING`:return`desc`;default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t=typeof e==`object`?e.value:e,tk(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){let t=!!e.before,n=e.values||[];return new aA(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){let t=!e.before,n=e.values||[];return new aA(n,t)}(n.endAt)),NA(t,i,o,a,s,`F`,c,l)}function IM(e,t){let n=function(e){switch(e){case`TargetPurposeListen`:return null;case`TargetPurposeExistenceFilterMismatch`:return`existence-filter-mismatch`;case`TargetPurposeExistenceFilterMismatchBloom`:return`existence-filter-mismatch-bloom`;case`TargetPurposeLimboResolution`:return`limbo-document`;default:return G(28987,{purpose:e})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function LM(e){return e.unaryFilter===void 0?e.fieldFilter===void 0?e.compositeFilter===void 0?G(30097,{filter:e}):function(e){return fA.create(e.compositeFilter.filters.map((e=>LM(e))),function(e){switch(e){case`AND`:return`and`;case`OR`:return`or`;default:return G(1026)}}(e.compositeFilter.op))}(e):function(e){return dA.create(HM(e.fieldFilter.field),function(e){switch(e){case`EQUAL`:return`==`;case`NOT_EQUAL`:return`!=`;case`GREATER_THAN`:return`>`;case`GREATER_THAN_OR_EQUAL`:return`>=`;case`LESS_THAN`:return`<`;case`LESS_THAN_OR_EQUAL`:return`<=`;case`ARRAY_CONTAINS`:return`array-contains`;case`IN`:return`in`;case`NOT_IN`:return`not-in`;case`ARRAY_CONTAINS_ANY`:return`array-contains-any`;case`OPERATOR_UNSPECIFIED`:return G(58110);default:return G(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):function(e){switch(e.unaryFilter.op){case`IS_NAN`:let t=HM(e.unaryFilter.field);return dA.create(t,`==`,{doubleValue:NaN});case`IS_NULL`:let n=HM(e.unaryFilter.field);return dA.create(n,`==`,{nullValue:`NULL_VALUE`});case`IS_NOT_NAN`:let r=HM(e.unaryFilter.field);return dA.create(r,`!=`,{doubleValue:NaN});case`IS_NOT_NULL`:let i=HM(e.unaryFilter.field);return dA.create(i,`!=`,{nullValue:`NULL_VALUE`});case`OPERATOR_UNSPECIFIED`:return G(61313);default:return G(60726)}}(e)}function RM(e){return dM[e]}function zM(e){return fM[e]}function BM(e){return pM[e]}function VM(e){return{fieldPath:e.canonicalString()}}function HM(e){return AO.fromServerFormat(e.fieldPath)}function UM(e){return e instanceof dA?function(e){if(e.op===`==`){if(Zk(e.value))return{unaryFilter:{field:VM(e.field),op:`IS_NAN`}};if(Xk(e.value))return{unaryFilter:{field:VM(e.field),op:`IS_NULL`}}}else if(e.op===`!=`){if(Zk(e.value))return{unaryFilter:{field:VM(e.field),op:`IS_NOT_NAN`}};if(Xk(e.value))return{unaryFilter:{field:VM(e.field),op:`IS_NOT_NULL`}}}return{fieldFilter:{field:VM(e.field),op:zM(e.op),value:e.value}}}(e):e instanceof fA?function(e){let t=e.getFilters().map((e=>UM(e)));return t.length===1?t[0]:{compositeFilter:{op:BM(e.op),filters:t}}}(e):G(54877,{filter:e})}function WM(e){let t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function GM(e){return e.length>=4&&e.get(0)===`projects`&&e.get(2)===`databases`}function KM(e){return!!e&&typeof e._toProto==`function`&&e._protoValueType===`ProtoValue`}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var qM=class e{constructor(e,t,n,r,i=X.min(),a=X.min(),o=vk.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}},JM=class{constructor(e){this.yt=e}};function YM(e){let t=FM({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType===`LAST`?VA(t,t.limit,`L`):t}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var XM=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if(`nullValue`in e)this.Ft(t,5);else if(`booleanValue`in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if(`integerValue`in e)this.Ft(t,15),t.Mt(xk(e.integerValue));else if(`doubleValue`in e){let n=xk(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),nk(n)?t.Mt(0):t.Mt(n))}else if(`timestampValue`in e){let n=e.timestampValue;this.Ft(t,20),typeof n==`string`&&(n=bk(n)),t.xt(`${n.seconds||``}`),t.Mt(n.nanos||0)}else if(`stringValue`in e)this.Ot(e.stringValue,t),this.Nt(t);else if(`bytesValue`in e)this.Ft(t,30),t.Bt(Sk(e.bytesValue)),this.Nt(t);else if(`referenceValue`in e)this.Lt(e.referenceValue,t);else if(`geoPointValue`in e){let n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else `mapValue`in e?tA(e)?this.Ft(t,2**53-1):$k(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):`arrayValue`in e?(this.qt(e.arrayValue,t),this.Nt(t)):G(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let n=e.fields||{};this.Ft(t,55);for(let e of Object.keys(n))this.Ot(e,t),this.Ct(n[e],t)}kt(e,t){let n=e.fields||{};this.Ft(t,53);let r=Rk,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(xk(i)),this.Ot(r,t),this.Ct(n[r],t)}qt(e,t){let n=e.values||[];this.Ft(t,50);for(let e of n)this.Ct(e,t)}Lt(e,t){this.Ft(t,37),Y.fromName(e).path.forEach((e=>{this.Ft(t,60),this.$t(e,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};XM.Wt=new XM;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var ZM=class{constructor(){this.Sn=new QM}addToCollectionParentIndex(e,t){return this.Sn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(KO.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(KO.min())}updateCollectionGroup(e,t,n){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}},QM=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mk(OO.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){let t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new mk(OO.comparator)).toArray()}};new Uint8Array;
/**
* @license
* Copyright 2018 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $M={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eN=41943040,tN=class e{static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
tN.DEFAULT_COLLECTION_PERCENTILE=10,tN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tN.DEFAULT=new tN(eN,tN.DEFAULT_COLLECTION_PERCENTILE,tN.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tN.DISABLED=new tN(-1,0,0);
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var nN=class e{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new e(0)}static ar(){return new e(-1)}},rN=`LruGarbageCollector`,iN=1048576;function aN([e,t],[n,r]){let i=bO(e,n);return i===0?bO(t,r):i}var oN=class{constructor(e){this.Pr=e,this.buffer=new mk(aN),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();aN(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}},sN=class{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&=(this.Rr.cancel(),null)}get started(){return this.Rr!==null}Ar(e){W(rN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay(`lru_garbage_collection`,e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){QO(e)?W(rN,`Ignoring IndexedDB error during garbage collection: `,e):await XO(e)}await this.Ar(3e5)}))}},cN=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve($O.ce);let n=new oN(t);return this.Vr.forEachTarget(e,(e=>n.Er(e.sequenceNumber))).next((()=>this.Vr.mr(e,(e=>n.Er(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(W(`LruGarbageCollector`,`Garbage collection skipped; disabled`),Z.resolve($M)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(W(`LruGarbageCollector`,`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$M):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let n,r,i,a,o,s,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(W(`LruGarbageCollector`,`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),rO()<=eE.DEBUG&&W(`LruGarbageCollector`,`LRU Garbage Collection\n\tCounted targets in ${a-l}ms\n\tDetermined least recently used ${r} in `+(o-a)+`ms
\tRemoved ${i} targets in `+(s-o)+`ms
\tRemoved ${e} documents in `+(c-s)+`ms
Total Duration: ${c-l}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}};function lN(e,t){return new cN(e,t)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var uN=class{constructor(){this.changes=new YA((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,iA.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let n=this.changes.get(t);return n===void 0?this.getFromCache(e,t):Z.resolve(n)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}},dN=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}},fN=class{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(n!==null&&jj(n.mutation,e,gk.empty(),VO.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,oj()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=oj()){let r=tj();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=$A();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){let n=tj();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,oj())))}populateOverlays(e,t,n){let r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=ZA(),a=rj(),o=function(){return rj()}();return t.forEach(((e,t)=>{let o=n.get(t.key);r.has(t.key)&&(o===void 0||o.mutation instanceof Fj)?i=i.insert(t.key,t):o===void 0?a.set(t.key,gk.empty()):(a.set(t.key,o.mutation.getFieldMask()),jj(o.mutation,t,o.mutation.getFieldMask(),VO.now()))})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>a.set(e,t))),t.forEach(((e,t)=>o.set(e,new dN(t,a.get(e)??null)))),o)))}recalculateAndSaveOverlays(e,t){let n=rj(),r=new dk(((e,t)=>e-t)),i=oj();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(let i of e)i.keys().forEach((e=>{let a=t.get(e);if(a===null)return;let o=n.get(e)||gk.empty();o=i.applyToLocalView(a,o),n.set(e,o);let s=(r.get(i.batchId)||oj()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{let a=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),s=r.key,c=r.value,l=nj();c.forEach((e=>{if(!i.has(e)){let r=kj(t.get(e),n.get(e));r!==null&&l.set(e,r),i=i.add(e)}})),a.push(this.documentOverlayCache.saveOverlays(e,s,l))}return Z.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return IA(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):LA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{let a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Z.resolve(tj()),o=HO,s=i;return a.next((t=>Z.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Z.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,oj()))).next((e=>({batchId:o,changes:ej(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next((e=>{let t=$A();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){let i=t.collectionGroup,a=$A();return this.indexManager.getCollectionParents(e,i).next((o=>Z.forEach(o,(o=>{let s=function(e,t){return new MA(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{a=a.insert(e,t)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{let r=n.getKey();e.get(r)===null&&(e=e.insert(r,iA.newInvalidDocument(r)))}));let n=$A();return e.forEach(((e,r)=>{let a=i.get(e);a!==void 0&&jj(a.mutation,r,gk.empty(),VO.now()),GA(t,r)&&(n=n.insert(e,r))})),n}))}},pN=class{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:yM(e.createTime)}}(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,function(e){return{name:e.name,query:YM(e.bundledQuery),readTime:yM(e.readTime)}}(t)),Z.resolve()}},mN=class{constructor(){this.overlays=new dk(Y.comparator),this.Lr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){let n=tj();return Z.forEach(t,(t=>this.getOverlay(e,t).next((e=>{e!==null&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.bt(e,t,r)})),Z.resolve()}removeOverlaysForBatchId(e,t,n){let r=this.Lr.get(n);return r!==void 0&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Lr.delete(n)),Z.resolve()}getOverlaysForCollection(e,t,n){let r=tj(),i=t.length+1,a=new Y(t.child(``)),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new dk(((e,t)=>e-t)),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);t===null&&(t=tj(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=tj(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Z.resolve(o)}bt(e,t,n){let r=this.overlays.get(n.key);if(r!==null){let e=this.Lr.get(r.largestBatchId).delete(n.key);this.Lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Uj(t,n));let i=this.Lr.get(t);i===void 0&&(i=oj(),this.Lr.set(t,i)),this.Lr.set(t,i.add(n.key))}},hN=class{constructor(){this.sessionToken=vk.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}},gN=class{constructor(){this.kr=new mk(_N.Kr),this.qr=new mk(_N.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let n=new _N(e,t);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Wr(new _N(e,t))}Qr(e,t){e.forEach((e=>this.removeReference(e,t)))}Gr(e){let t=new Y(new OO([])),n=new _N(t,e),r=new _N(t,e+1),i=[];return this.qr.forEachInRange([n,r],(e=>{this.Wr(e),i.push(e.key)})),i}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new Y(new OO([])),n=new _N(t,e),r=new _N(t,e+1),i=oj();return this.qr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){let t=new _N(e,0),n=this.kr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}},_N=class{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Y.comparator(e.key,t.key)||bO(e.Hr,t.Hr)}static Ur(e,t){return bO(e.Hr,t.Hr)||Y.comparator(e.key,t.key)}},vN=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new mk(_N.Kr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,r){let i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Vj(i,t,n,r);this.mutationQueue.push(a);for(let t of r)this.Jr=this.Jr.add(new _N(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let n=t+1,r=this.Xr(n),i=r<0?0:r;return Z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?ek:this.Yn-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let n=new _N(t,0),r=new _N(t,1/0),i=[];return this.Jr.forEachInRange([n,r],(e=>{let t=this.Zr(e.Hr);i.push(t)})),Z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mk(bO);return t.forEach((e=>{let t=new _N(e,0),r=new _N(e,1/0);this.Jr.forEachInRange([t,r],(e=>{n=n.add(e.Hr)}))})),Z.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,t){let n=t.path,r=n.length+1,i=n;Y.isDocumentKey(i)||(i=i.child(``));let a=new _N(new Y(i),0),o=new mk(bO);return this.Jr.forEachWhile((e=>{let t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Hr)),!0)}),a),Z.resolve(this.Yr(o))}Yr(e){let t=[];return e.forEach((e=>{let n=this.Zr(e);n!==null&&t.push(n)})),t}removeMutationBatch(e,t){cO(this.ei(t.batchId,`removed`)===0,55003),this.mutationQueue.shift();let n=this.Jr;return Z.forEach(t.mutations,(r=>{let i=new _N(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=n}))}nr(e){}containsKey(e,t){let n=new _N(t,0),r=this.Jr.firstAfterOrEqual(n);return Z.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}},yN=class{constructor(e){this.ti=e,this.docs=function(){return new dk(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ti(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let n=this.docs.get(t);return Z.resolve(n?n.document.mutableCopy():iA.newInvalidDocument(t))}getEntries(e,t){let n=ZA();return t.forEach((e=>{let t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():iA.newInvalidDocument(e))})),Z.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ZA(),a=t.path,o=new Y(a.child(`__id-9223372036854775808__`)),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||qO(GO(o),n)<=0||(r.has(o.key)||GA(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Z.resolve(i)}getAllFromCollectionGroup(e,t,n,r){G(9500)}ni(e,t){return Z.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new bN(this)}getSize(e){return Z.resolve(this.size)}},bN=class extends uN{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(n)})),Z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}},xN=class{constructor(e){this.persistence=e,this.ri=new YA((e=>kA(e)),AA),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.ii=0,this.si=new gN,this.targetCount=0,this.oi=nN._r()}forEachTarget(e,t){return this.ri.forEach(((e,n)=>t(n))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ii&&(this.ii=t),Z.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new nN(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.lr(t),Z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),--this.targetCount,Z.resolve()}removeTargets(e,t,n){let r=0,i=[];return this.ri.forEach(((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Z.waitFor(i).next((()=>r))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){let n=this.ri.get(t)||null;return Z.resolve(n)}addMatchingKeys(e,t,n){return this.si.$r(t,n),Z.resolve()}removeMatchingKeys(e,t,n){this.si.Qr(t,n);let r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Z.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){let n=this.si.jr(t);return Z.resolve(n)}containsKey(e,t){return Z.resolve(this.si.containsKey(t))}},SN=class{constructor(e,t){this._i={},this.overlays={},this.ai=new $O(0),this.ui=!1,this.ui=!0,this.ci=new hN,this.referenceDelegate=e(this),this.li=new xN(this),this.indexManager=new ZM,this.remoteDocumentCache=function(e){return new yN(e)}((e=>this.referenceDelegate.hi(e))),this.serializer=new JM(t),this.Pi=new pN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this._i[e.toKey()];return n||(n=new vN(t,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,n){W(`MemoryPersistence`,`Starting transaction:`,e);let r=new CN(this.ai.next());return this.referenceDelegate.Ti(),n(r).next((e=>this.referenceDelegate.Ii(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Ei(e,t){return Z.or(Object.values(this._i).map((n=>()=>n.containsKey(e,t))))}},CN=class extends YO{constructor(e){super(),this.currentSequenceNumber=e}},wN=class e{constructor(e){this.persistence=e,this.Ri=new gN,this.Ai=null}static Vi(t){return new e(t)}get di(){if(this.Ai)return this.Ai;throw G(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.di.delete(n.toString()),Z.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.di.add(n.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((e=>this.di.add(e.toString())));let n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.di,(n=>{let r=Y.fromPath(n);return this.mi(e,r).next((e=>{e||t.removeEntry(r,X.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},TN=class e{constructor(e,t){this.persistence=e,this.fi=new YA((e=>ak(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=lN(this,t)}static Vi(t,n){return new e(t,n)}Ti(){}Ii(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}pr(e){let t=0;return this.mr(e,(e=>{t++})).next((()=>t))}mr(e,t){return Z.forEach(this.fi,((n,r)=>this.wr(e,n,r).next((e=>e?Z.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0,r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ni(e,(r=>this.wr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,X.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){let n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,n){return this.fi.set(n,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qk(e.data.value)),t}wr(e,t,n){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.fi.get(t);return Z.resolve(e!==void 0&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}},EN=class e{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Ts=n,this.Is=r}static Es(t,n){let r=oj(),i=oj();for(let e of n.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new e(t,n.fromCache,r,i)}},DN=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}},ON=class{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return OT()?8:ZO(xT())>0?6:4}()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){let i={result:null};return this.gs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ps(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;let n=new DN;return this.ys(e,t,n).next((r=>{if(i.result=r,this.As)return this.ws(e,t,n,r.size)}))})).next((()=>i.result))}ws(e,t,n,r){return n.documentReadCount<this.Vs?(rO()<=eE.DEBUG&&W(`QueryEngine`,`SDK will not create cache indexes for query:`,WA(t),`since it only creates cache indexes for collection contains`,`more than or equal to`,this.Vs,`documents`),Z.resolve()):(rO()<=eE.DEBUG&&W(`QueryEngine`,`Query:`,WA(t),`scans`,n.documentReadCount,`local documents and returns`,r,`documents as results.`),n.documentReadCount>this.ds*r?(rO()<=eE.DEBUG&&W(`QueryEngine`,`The SDK decides to create cache indexes for query:`,WA(t),`as using cache indexes may help improve performance.`),this.indexManager.createTargetIndexes(e,zA(t))):Z.resolve())}gs(e,t){if(FA(t))return Z.resolve(null);let n=zA(t);return this.indexManager.getIndexType(e,n).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=VA(t,null,`F`),n=zA(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{let i=oj(...r);return this.fs.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{let a=this.bs(t,r);return this.Ss(t,a,i,n.readTime)?this.gs(e,VA(t,null,`F`)):this.Ds(e,a,t,n)}))))})))))}ps(e,t,n,r){return FA(t)||r.isEqual(X.min())?Z.resolve(null):this.fs.getDocuments(e,n).next((i=>{let a=this.bs(t,i);return this.Ss(t,a,n,r)?Z.resolve(null):(rO()<=eE.DEBUG&&W(`QueryEngine`,`Re-using previous result from %s to execute query: %s`,r.toString(),WA(t)),this.Ds(e,a,t,WO(r,HO)).next((e=>e)))}))}bs(e,t){let n=new mk(qA(e));return t.forEach(((t,r)=>{GA(e,r)&&(n=n.add(r))})),n}Ss(e,t,n,r){if(e.limit===null)return!1;if(n.size!==t.size)return!0;let i=e.limitType===`F`?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ys(e,t,n){return rO()<=eE.DEBUG&&W(`QueryEngine`,`Using full collection scan to execute query:`,WA(t)),this.fs.getDocumentsMatchingQuery(e,t,KO.min(),n)}Ds(e,t,n,r){return this.fs.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}},kN=`LocalStore`,AN=3e8,jN=class{constructor(e,t,n,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new dk(bO),this.Fs=new YA((e=>kA(e)),AA),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction(`Collect garbage`,`readwrite-primary`,(t=>e.collect(t,this.vs)))}};function MN(e,t,n,r){return new jN(e,t,n,r)}async function NN(e,t){let n=K(e);return await n.persistence.runTransaction(`Handle user change`,`readonly`,(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{let i=[],a=[],o=oj();for(let e of r){i.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}for(let e of t){a.push(e.batchId);for(let t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ns:e,removedBatchIds:i,addedBatchIds:a})))}))}))}function PN(e,t){let n=K(e);return n.persistence.runTransaction(`Acknowledge batch`,`readwrite-primary`,(e=>{let r=t.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){let i=n.batch,a=i.keys(),o=Z.resolve();return a.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{let a=n.docVersions.get(e);cO(a!==null,48541),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=oj();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}function FN(e){let t=K(e);return t.persistence.runTransaction(`Get last remote snapshot version`,`readonly`,(e=>t.li.getLastRemoteSnapshotVersion(e)))}function IN(e,t){let n=K(e),r=t.snapshotVersion,i=n.vs;return n.persistence.runTransaction(`Apply remote event`,`readwrite-primary`,(e=>{let a=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;let o=[];t.targetChanges.forEach(((a,s)=>{let c=i.get(s);if(!c)return;o.push(n.li.removeMatchingKeys(e,a.removedDocuments,s).next((()=>n.li.addMatchingKeys(e,a.addedDocuments,s))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.get(s)===null?a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)):l=l.withResumeToken(vk.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()),i=i.insert(s,l),function(e,t,n){return e.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=AN?!0:n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,a)&&o.push(n.li.updateTargetData(e,l))}));let s=ZA(),c=oj();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(LN(e,a,t.documentUpdates).next((e=>{s=e.Bs,c=e.Ls}))),!r.isEqual(X.min())){let t=n.li.getLastRemoteSnapshotVersion(e).next((t=>n.li.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Z.waitFor(o).next((()=>a.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,c))).next((()=>s))})).then((e=>(n.vs=i,e)))}function LN(e,t,n){let r=oj(),i=oj();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=ZA();return n.forEach(((n,a)=>{let o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(X.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||a.version.compareTo(o.version)===0&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):W(kN,`Ignoring outdated watch update for `,n,`. Current version:`,o.version,` Watch version:`,a.version)})),{Bs:r,Ls:i}}))}function RN(e,t){let n=K(e);return n.persistence.runTransaction(`Get next mutation batch`,`readonly`,(e=>(t===void 0&&(t=ek),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function zN(e,t){let n=K(e);return n.persistence.runTransaction(`Allocate target`,`readwrite`,(e=>{let r;return n.li.getTargetData(e,t).next((i=>i?(r=i,Z.resolve(r)):n.li.allocateTargetId(e).next((i=>(r=new qM(t,i,`TargetPurposeListen`,e.currentSequenceNumber),n.li.addTargetData(e,r).next((()=>r)))))))})).then((e=>{let r=n.vs.get(e.targetId);return(r===null||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.vs=n.vs.insert(e.targetId,e),n.Fs.set(t,e.targetId)),e}))}async function BN(e,t,n){let r=K(e),i=r.vs.get(t),a=n?`readwrite`:`readwrite-primary`;try{n||await r.persistence.runTransaction(`Release target`,a,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!QO(e))throw e;W(kN,`Failed to update sequence numbers for target ${t}: ${e}`)}r.vs=r.vs.remove(t),r.Fs.delete(i.target)}function VN(e,t,n){let r=K(e),i=X.min(),a=oj();return r.persistence.runTransaction(`Execute query`,`readwrite`,(e=>function(e,t,n){let r=K(e),i=r.Fs.get(n);return i===void 0?r.li.getTargetData(t,n):Z.resolve(r.vs.get(i))}(r,e,zA(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(e,t.targetId).next((e=>{a=e}))})).next((()=>r.Cs.getDocumentsMatchingQuery(e,t,n?i:X.min(),n?a:oj()))).next((e=>(HN(r,KA(t),e),{documents:e,ks:a})))))}function HN(e,t,n){let r=e.Ms.get(t)||X.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ms.set(t,r)}var UN=class{constructor(){this.activeTargetIds=cj()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},WN=class{constructor(){this.vo=new UN,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||`not-current`}updateQueryState(e,t,n){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new UN,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}},GN=class{Mo(e){}shutdown(){}},KN=`ConnectivityMonitor`,qN=class{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener(`online`,this.xo),window.removeEventListener(`offline`,this.No)}ko(){window.addEventListener(`online`,this.xo),window.addEventListener(`offline`,this.No)}Oo(){W(KN,`Network connectivity changed: AVAILABLE`);for(let e of this.Lo)e(0)}Bo(){W(KN,`Network connectivity changed: UNAVAILABLE`);for(let e of this.Lo)e(1)}static v(){return typeof window<`u`&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}},JN=null;function YN(){return JN===null?JN=function(){return 268435456+Math.round(2147483648*Math.random())}():JN++,`0x`+JN.toString(16)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XN=`RestConnection`,ZN={BatchGetDocuments:`batchGet`,Commit:`commit`,RunQuery:`runQuery`,RunAggregationQuery:`runAggregationQuery`,ExecutePipeline:`executePipeline`},QN=class{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?`https`:`http`,n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+`://`+e.host,this.Uo=`projects/${n}/databases/${r}`,this.$o=this.databaseId.database===jk?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Wo(e,t,n,r,i){let a=YN(),o=this.Qo(e,t.toUriEncodedString());W(XN,`Sending RPC '${e}' ${a}:`,o,n);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(s,r,i);let{host:c}=new URL(o),l=pT(c);return this.zo(e,o,s,n,l).then((t=>(W(XN,`Received RPC '${e}' ${a}: `,t),t)),(t=>{throw aO(XN,`RPC '${e}' ${a} failed with error: `,t,`url: `,o,`request:`,n),t}))}jo(e,t,n,r,i,a){return this.Wo(e,t,n,r,i)}Go(e,t,n){e[`X-Goog-Api-Client`]=function(){return`gl-js/ fire/`+eO}(),e[`Content-Type`]=`text/plain`,this.databaseInfo.appId&&(e[`X-Firebase-GMPID`]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Qo(e,t){let n=ZN[e],r=`${this.qo}/v1/${t}:${n}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}},$N=class{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}},eP=`WebChannelConnection`,tP=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))},nP=class e extends QN{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!e.c_){let t=ZD();tP(t,XD.STAT_EVENT,(e=>{e.stat===YD.PROXY?W(eP,`STAT_EVENT: detected buffering proxy`):e.stat===YD.NOPROXY&&W(eP,`STAT_EVENT: detected no buffering proxy`)})),e.c_=!0}}zo(e,t,n,r,i){let a=YN();return new Promise(((i,o)=>{let s=new GD;s.setWithCredentials(!0),s.listenOnce(qD.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case JD.NO_ERROR:let t=s.getResponseJson();W(eP,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case JD.TIMEOUT:W(eP,`RPC '${e}' ${a} timed out`),o(new J(q.DEADLINE_EXCEEDED,`Request time out`));break;case JD.HTTP_ERROR:let n=s.getStatus();if(W(eP,`RPC '${e}' ${a} failed with status:`,n,`response text:`,s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,`-`);return Object.values(q).indexOf(t)>=0?t:q.UNKNOWN}(t.status);o(new J(e,t.message))}else o(new J(q.UNKNOWN,`Server responded with status `+s.getStatus()))}else o(new J(q.UNAVAILABLE,`Connection failed.`));break;default:G(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{W(eP,`RPC '${e}' ${a} completed.`)}}));let c=JSON.stringify(r);W(eP,`RPC '${e}' ${a} sending request:`,r),s.send(t,`POST`,c,n,15)}))}T_(t,n,r){let i=YN(),a=[this.qo,`/`,`google.firestore.v1.Firestore`,`/`,t,`/channel`],o=this.createWebChannelTransport(),s={httpSessionIdParam:`gsessionid`,initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(s.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Go(s.initMessageHeaders,n,r),s.encodeInitMessageHeaders=!0;let l=a.join(``);W(eP,`Creating RPC '${t}' stream ${i}: ${l}`,s);let u=o.createWebChannel(l,s);this.I_(u);let d=!1,f=!1,p=new $N({Ho:e=>{f?W(eP,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(d||=(W(eP,`Opening RPC '${t}' stream ${i} transport.`),u.open(),!0),W(eP,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},Jo:()=>u.close()});return tP(u,KD.EventType.OPEN,(()=>{f||(W(eP,`RPC '${t}' stream ${i} transport opened.`),p.i_())})),tP(u,KD.EventType.CLOSE,(()=>{f||(f=!0,W(eP,`RPC '${t}' stream ${i} transport closed`),p.o_(),this.E_(u))})),tP(u,KD.EventType.ERROR,(e=>{f||(f=!0,aO(eP,`RPC '${t}' stream ${i} transport errored. Name:`,e.name,`Message:`,e.message),p.o_(new J(q.UNAVAILABLE,`The operation could not be completed`)))})),tP(u,KD.EventType.MESSAGE,(e=>{if(!f){let n=e.data[0];cO(!!n,16349);let r=n,a=r?.error||r[0]?.error;if(a){W(eP,`RPC '${t}' stream ${i} received error:`,a);let e=a.status,n=function(e){let t=Gj[e];if(t!==void 0)return Jj(t)}(e),r=a.message;e===`NOT_FOUND`&&r.includes(`database`)&&r.includes(`does not exist`)&&r.includes(this.databaseId.database)&&aO(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),n===void 0&&(n=q.INTERNAL,r=`Unknown error status: `+e+` with message `+a.message),f=!0,p.o_(new J(n,r)),u.close()}else W(eP,`RPC '${t}' stream ${i} received:`,n),p.__(n)}})),e.u_(),setTimeout((()=>{p.s_()}),0),p}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,n){super.Go(e,t,n),this.databaseInfo.apiKey&&(e[`x-goog-api-key`]=this.databaseInfo.apiKey)}createWebChannelTransport(){return QD()}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function rP(e){return new nP(e)}function iP(){return typeof document<`u`?document:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aP(e){return new mM(e,!0)}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/nP.c_=!1;var oP=class{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=n,this.A_=r,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&W(`ExponentialBackoff`,`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}},sP=`PersistentStream`,cP=class{constructor(e,t,n,r,i,a,o,s){this.Ci=e,this.b_=n,this.S_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oP(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state===4?this.N_():this.auth()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&=(this.C_.cancel(),null)}U_(){this.v_&&=(this.v_.cancel(),null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e===4?t&&t.code===q.RESOURCE_EXHAUSTED?(iO(t.toString()),iO(`Using maximum backoff delay to prevent overloading the backend.`),this.M_.g_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()):this.M_.reset(),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.D_===t&&this.G_(e,n)}),(t=>{e((()=>{let e=new J(q.UNKNOWN,`Fetching auth token failed: `+t.message);return this.z_(e)}))}))}G_(e,t){let n=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{n((()=>this.listener.Zo()))})),this.stream.Yo((()=>{n((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((e=>{n((()=>this.z_(e)))})),this.stream.onMessage((e=>{n((()=>++this.F_==1?this.H_(e):this.onNext(e)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return W(sP,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(W(sP,`stream callback skipped by getCloseGuardedDispatcher.`),Promise.resolve())))}}},lP=class extends cP{constructor(e,t,n,r,i,a){super(e,`listen_stream_connection_backoff`,`listen_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}j_(e,t){return this.connection.T_(`Listen`,e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=AM(this.serializer,e),n=function(e){if(!(`targetChange`in e))return X.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?X.min():t.readTime?yM(t.readTime):X.min()}(e);return this.listener.J_(t,n)}Z_(e){let t={};t.database=DM(this.serializer),t.addTarget=function(e,t){let n,r=t.target;if(n=jA(r)?{documents:NM(e,r)}:{query:PM(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=_M(e,t.resumeToken);let r=hM(e,t.expectedCount);r!==null&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(X.min())>0){n.readTime=gM(e,t.snapshotVersion.toTimestamp());let r=hM(e,t.expectedCount);r!==null&&(n.expectedCount=r)}return n}(this.serializer,e);let n=IM(this.serializer,e);n&&(t.labels=n),this.K_(t)}X_(e){let t={};t.database=DM(this.serializer),t.removeTarget=e,this.K_(t)}},uP=class extends cP{constructor(e,t,n,r,i,a){super(e,`write_stream_connection_backoff`,`write_stream_idle`,`health_check_timeout`,t,n,r,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_(`Write`,e,t)}H_(e){return cO(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,cO(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){cO(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=MM(e.writeResults,e.commitTime),n=yM(e.commitTime);return this.listener.na(n,t)}ra(){let e={};e.database=DM(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map((e=>jM(this.serializer,e)))};this.K_(t)}},dP=class{},fP=class extends dP{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new J(q.FAILED_PRECONDITION,`The client has already been terminated.`)}Wo(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(e,xM(t,n),r,i,a))).catch((e=>{throw e.name===`FirebaseError`?(e.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new J(q.UNKNOWN,e.toString())}))}jo(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.jo(e,xM(t,n),r,a,o,i))).catch((e=>{throw e.name===`FirebaseError`?(e.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new J(q.UNKNOWN,e.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}};function pP(e,t,n,r){return new fP(e,t,n,r)}var mP=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=`Unknown`,this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca(`Unknown`),this._a=this.asyncQueue.enqueueAfterDelay(`online_state_timeout`,1e4,(()=>(this._a=null,this.la(`Backend didn't respond within 10 seconds.`),this.ca(`Offline`),Promise.resolve()))))}ha(e){this.state===`Online`?this.ca(`Unknown`):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca(`Offline`)))}set(e){this.Pa(),this.oa=0,e===`Online`&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(iO(t),this.aa=!1):W(`OnlineStateTracker`,t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}},hP=`RemoteStore`,gP=class{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo((e=>{n.enqueueAndForget((async()=>{TP(this)&&(W(hP,`Restarting streams for network reachability change.`),await async function(e){let t=K(e);t.Ea.add(4),await vP(t),t.Va.set(`Unknown`),t.Ea.delete(4),await _P(t)}(this))}))})),this.Va=new mP(n,r)}};async function _P(e){if(TP(e))for(let t of e.Ra)await t(!0)}async function vP(e){for(let t of e.Ra)await t(!1)}function yP(e,t){let n=K(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),wP(n)?CP(n):WP(n).O_()&&xP(n,t))}function bP(e,t){let n=K(e),r=WP(n);n.Ia.delete(t),r.O_()&&SP(n,t),n.Ia.size===0&&(r.O_()?r.L_():TP(n)&&n.Va.set(`Unknown`))}function xP(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(X.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}WP(e).Z_(t)}function SP(e,t){e.da.$e(t),WP(e).X_(t)}function CP(e){e.da=new cM({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),WP(e).start(),e.Va.ua()}function wP(e){return TP(e)&&!WP(e).x_()&&e.Ia.size>0}function TP(e){return K(e).Ea.size===0}function EP(e){e.da=void 0}async function DP(e){e.Va.set(`Online`)}async function OP(e){e.Ia.forEach(((t,n)=>{xP(e,t)}))}async function kP(e,t){EP(e),wP(e)?(e.Va.ha(t),CP(e)):e.Va.set(`Unknown`)}async function AP(e,t,n){if(e.Va.set(`Online`),t instanceof oM&&t.state===2&&t.cause)try{await async function(e,t){let n=t.cause;for(let r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.da.removeTarget(r))}(e,t)}catch(n){W(hP,`Failed to remove targets %s: %s `,t.targetIds.join(`,`),n),await jP(e,n)}else if(t instanceof iM?e.da.Xe(t):t instanceof aM?e.da.st(t):e.da.tt(t),!n.isEqual(X.min()))try{let t=await FN(e.localStore);n.compareTo(t)>=0&&await function(e,t){let n=e.da.Tt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{let r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(vk.EMPTY_BYTE_STRING,r.snapshotVersion)),SP(e,t);let i=new qM(r.target,t,n,r.sequenceNumber);xP(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){W(hP,`Failed to raise snapshot:`,t),await jP(e,t)}}async function jP(e,t,n){if(!QO(t))throw t;e.Ea.add(1),await vP(e),e.Va.set(`Offline`),n||=()=>FN(e.localStore),e.asyncQueue.enqueueRetryable((async()=>{W(hP,`Retrying IndexedDB access`),await n(),e.Ea.delete(1),await _P(e)}))}function MP(e,t){return t().catch((n=>jP(e,n,t)))}async function NP(e){let t=K(e),n=GP(t),r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ek;for(;PP(t);)try{let e=await RN(t.localStore,r);if(e===null){t.Ta.length===0&&n.L_();break}r=e.batchId,FP(t,e)}catch(e){await jP(t,e)}IP(t)&&LP(t)}function PP(e){return TP(e)&&e.Ta.length<10}function FP(e,t){e.Ta.push(t);let n=GP(e);n.O_()&&n.Y_&&n.ea(t.mutations)}function IP(e){return TP(e)&&!GP(e).x_()&&e.Ta.length>0}function LP(e){GP(e).start()}async function RP(e){GP(e).ra()}async function zP(e){let t=GP(e);for(let n of e.Ta)t.ea(n.mutations)}async function BP(e,t,n){let r=e.Ta.shift(),i=Hj.from(r,t,n);await MP(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await NP(e)}async function VP(e,t){t&&GP(e).Y_&&await async function(e,t){if(function(e){return qj(e)&&e!==q.ABORTED}(t.code)){let n=e.Ta.shift();GP(e).B_(),await MP(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await NP(e)}}(e,t),IP(e)&&LP(e)}async function HP(e,t){let n=K(e);n.asyncQueue.verifyOperationInProgress(),W(hP,`RemoteStore received new credentials`);let r=TP(n);n.Ea.add(3),await vP(n),r&&n.Va.set(`Unknown`),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await _P(n)}async function UP(e,t){let n=K(e);t?(n.Ea.delete(2),await _P(n)):t||(n.Ea.add(2),await vP(n),n.Va.set(`Unknown`))}function WP(e){return e.ma||(e.ma=function(e,t,n){let r=K(e);return r.sa(),new lP(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:DP.bind(null,e),Yo:OP.bind(null,e),t_:kP.bind(null,e),J_:AP.bind(null,e)}),e.Ra.push((async t=>{t?(e.ma.B_(),wP(e)?CP(e):e.Va.set(`Unknown`)):(await e.ma.stop(),EP(e))}))),e.ma}function GP(e){return e.fa||(e.fa=function(e,t,n){let r=K(e);return r.sa(),new uP(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),Yo:RP.bind(null,e),t_:VP.bind(null,e),ta:zP.bind(null,e),na:BP.bind(null,e)}),e.Ra.push((async t=>{t?(e.fa.B_(),await NP(e)):(await e.fa.stop(),e.Ta.length>0&&(W(hP,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var KP=class e{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new lO,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,a){let o=Date.now()+r,s=new e(t,n,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(q.CANCELLED,`Operation cancelled`+(e?`: `+e:``))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle===null?Promise.resolve():(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e))))))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qP(e,t){if(iO(`AsyncQueue`,`${t}: ${e}`),QO(e))return new J(q.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var JP=class e{static emptySet(t){return new e(t.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Y.comparator(t.key,n.key):(e,t)=>Y.comparator(e.key,t.key),this.keyedMap=$A(),this.sortedSet=new dk(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){let e=n.getNext().key,t=r.getNext().key;if(!e.isEqual(t))return!1}return!0}toString(){let e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?`DocumentSet ()`:`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(t,n){let r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}},YP=class{constructor(){this.ga=new dk(Y.comparator)}track(e){let t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):G(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}},XP=class e{constructor(e,t,n,r,i,a,o,s,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=c}static fromInitialDocuments(t,n,r,i,a){let o=[];return n.forEach((e=>{o.push({type:0,doc:e})})),new e(t,n,JP.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&HA(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}},ZP=class{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}},QP=class{constructor(){this.queries=$P(),this.onlineState=`Unknown`,this.Ca=new Set}terminate(){(function(e,t){let n=K(e),r=n.queries;n.queries=$P(),r.forEach(((e,n)=>{for(let e of n.ba)e.onError(t)}))})(this,new J(q.ABORTED,`Firestore shutting down`))}};function $P(){return new YA((e=>UA(e)),HA)}async function eF(e,t){let n=K(e),r=3,i=t.query,a=n.queries.get(i);a?!a.Sa()&&t.Da()&&(r=2):(a=new ZP,r=t.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){let n=qP(e,`Initialization of query '${WA(t.query)}' failed`);t.onError(n);return}n.queries.set(i,a),a.ba.push(t),t.va(n.onlineState),a.wa&&t.Fa(a.wa)&&iF(n)}async function tF(e,t){let n=K(e),r=t.query,i=3,a=n.queries.get(r);if(a){let e=a.ba.indexOf(t);e>=0&&(a.ba.splice(e,1),a.ba.length===0?i=t.Da()?0:1:!a.Sa()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nF(e,t){let n=K(e),r=!1;for(let e of t){let t=e.query,i=n.queries.get(t);if(i){for(let t of i.ba)t.Fa(e)&&(r=!0);i.wa=e}}r&&iF(n)}function rF(e,t,n){let r=K(e),i=r.queries.get(t);if(i)for(let e of i.ba)e.onError(n);r.queries.delete(t)}function iF(e){e.Ca.forEach((e=>{e.next()}))}var aF,oF;(oF=aF||={}).Ma=`default`,oF.Cache=`cache`;var sF=class{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState=`Unknown`,this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let n of e.docChanges)n.type!==3&&t.push(n);e=new XP(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let n=t!==`Offline`;return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t===`Offline`)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=XP.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==aF.Cache}},cF=class{constructor(e){this.key=e}},lF=class{constructor(e){this.key=e}},uF=class{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oj(),this.mutatedKeys=oj(),this.eu=qA(e),this.tu=new JP(this.eu)}get nu(){return this.Za}ru(e,t){let n=t?t.iu:new YP,r=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=r,o=!1,s=this.query.limitType===`F`&&r.size===this.query.limit?r.last():null,c=this.query.limitType===`L`&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{let l=r.get(e),u=GA(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),f=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;l&&u?l.data.isEqual(u.data)?d!==f&&(n.track({type:3,doc:u}),p=!0):this.su(l,u)||(n.track({type:2,doc:u}),p=!0,(s&&this.eu(u,s)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(s||c)&&(o=!0)),p&&(u?(a=a.add(u),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))})),this.query.limit!==null)for(;a.size>this.query.limit;){let e=this.query.limitType===`F`?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:a,iu:n,Ss:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort(((e,t)=>function(e,t){let n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc))),this.ou(n),r??=!1;let o=t&&!r?this._u():[],s=this.Ya.size===0&&this.current&&!r?1:0,c=s!==this.Xa;return this.Xa=s,a.length!==0||c?{snapshot:new XP(this.query,e.tu,i,a,e.mutatedKeys,s===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e===`Offline`?(this.current=!1,this.applyChanges({tu:this.tu,iu:new YP,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((e=>this.Za=this.Za.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Za=this.Za.delete(e))),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=oj(),this.tu.forEach((e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))}));let t=[];return e.forEach((e=>{this.Ya.has(e)||t.push(new lF(e))})),this.Ya.forEach((n=>{e.has(n)||t.push(new cF(n))})),t}cu(e){this.Za=e.ks,this.Ya=oj();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return XP.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}},dF=`SyncEngine`,fF=class{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}},pF=class{constructor(e){this.key=e,this.hu=!1}},mF=class{constructor(e,t,n,r,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new YA((e=>UA(e)),HA),this.Iu=new Map,this.Eu=new Set,this.Ru=new dk(Y.comparator),this.Au=new Map,this.Vu=new gN,this.du={},this.mu=new Map,this.fu=nN.ar(),this.onlineState=`Unknown`,this.gu=void 0}get isPrimaryClient(){return!0===this.gu}};async function hF(e,t,n=!0){let r=LF(e),i,a=r.Tu.get(t);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await _F(r,t,n,!0),i}async function gF(e,t){let n=LF(e);await _F(n,t,!0,!1)}async function _F(e,t,n,r){let i=await zN(e.localStore,zA(t)),a=i.targetId,o=e.sharedClientState.addLocalQueryTarget(a,n),s;return r&&(s=await vF(e,t,a,o===`current`,i.resumeToken)),e.isPrimaryClient&&n&&yP(e.remoteStore,i),s}async function vF(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Ss&&(i=await VN(e.localStore,t.query,!1).then((({documents:e})=>t.view.ru(e,i))));let a=r&&r.targetChanges.get(t.targetId),o=r&&r.targetMismatches.get(t.targetId)!=null,s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return jF(e,t.targetId,s.au),s.snapshot}(e,t,n,r);let a=await VN(e.localStore,t,!0),o=new uF(t,a.ks),s=o.ru(a.documents),c=rM.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!==`Offline`,i),l=o.applyChanges(s,e.isPrimaryClient,c);jF(e,n,l.au);let u=new fF(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function yF(e,t,n){let r=K(e),i=r.Tu.get(t),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((e=>!HA(e,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await BN(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bP(r.remoteStore,i.targetId),kF(r,i.targetId)})).catch(XO)):(kF(r,i.targetId),await BN(r.localStore,i.targetId,!0))}async function bF(e,t){let n=K(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bP(n.remoteStore,r.targetId))}async function xF(e,t,n){let r=RF(e);try{let e=await function(e,t){let n=K(e),r=VO.now(),i=t.reduce(((e,t)=>e.add(t.key)),oj()),a,o;return n.persistence.runTransaction(`Locally write mutations`,`readwrite`,(e=>{let s=ZA(),c=oj();return n.xs.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{a=i;let o=[];for(let e of t){let t=Mj(e,a.get(e.key).overlayedDocument);t!=null&&o.push(new Fj(e.key,t,rA(t.value.mapValue),Ej.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;let r=t.applyToLocalDocumentSet(a,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ej(a)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.du[e.currentUser.toKey()];r||=new dk(bO),r=r.insert(t,n),e.du[e.currentUser.toKey()]=r}(r,e.batchId,n),await PF(r,e.changes),await NP(r.remoteStore)}catch(e){let t=qP(e,`Failed to persist write`);n.reject(t)}}async function SF(e,t){let n=K(e);try{let e=await IN(n.localStore,t);t.targetChanges.forEach(((e,t)=>{let r=n.Au.get(t);r&&(cO(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?cO(r.hu,14607):e.removedDocuments.size>0&&(cO(r.hu,42227),r.hu=!1))})),await PF(n,e,t)}catch(e){await XO(e)}}function CF(e,t,n){let r=K(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let e=[];r.Tu.forEach(((n,r)=>{let i=r.view.va(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){let n=K(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(let e of n.ba)e.va(t)&&(r=!0)})),r&&iF(n)}(r.eventManager,t),e.length&&r.Pu.J_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function wF(e,t,n){let r=K(e);r.sharedClientState.updateQueryState(t,`rejected`,n);let i=r.Au.get(t),a=i&&i.key;if(a){let e=new dk(Y.comparator);e=e.insert(a,iA.newNoDocument(a,X.min()));let n=oj().add(a),i=new nM(X.min(),new Map,new dk(bO),e,n);await SF(r,i),r.Ru=r.Ru.remove(a),r.Au.delete(t),NF(r)}else await BN(r.localStore,t,!1).then((()=>kF(r,t,n))).catch(XO)}async function TF(e,t){let n=K(e),r=t.batch.batchId;try{let e=await PN(n.localStore,t);OF(n,r,null),DF(n,r),n.sharedClientState.updateMutationState(r,`acknowledged`),await PF(n,e)}catch(e){await XO(e)}}async function EF(e,t,n){let r=K(e);try{let e=await function(e,t){let n=K(e);return n.persistence.runTransaction(`Reject batch`,`readwrite-primary`,(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(cO(t!==null,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);OF(r,t,n),DF(r,t),r.sharedClientState.updateMutationState(t,`rejected`,n),await PF(r,e)}catch(e){await XO(e)}}function DF(e,t){(e.mu.get(t)||[]).forEach((e=>{e.resolve()})),e.mu.delete(t)}function OF(e,t,n){let r=K(e),i=r.du[r.currentUser.toKey()];if(i){let e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.du[r.currentUser.toKey()]=i}}function kF(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach((t=>{e.Vu.containsKey(t)||AF(e,t)}))}function AF(e,t){e.Eu.delete(t.path.canonicalString());let n=e.Ru.get(t);n!==null&&(bP(e.remoteStore,n),e.Ru=e.Ru.remove(t),e.Au.delete(n),NF(e))}function jF(e,t,n){for(let r of n)r instanceof cF?(e.Vu.addReference(r.key,t),MF(e,r)):r instanceof lF?(W(dF,`Document no longer in limbo: `+r.key),e.Vu.removeReference(r.key,t),e.Vu.containsKey(r.key)||AF(e,r.key)):G(19791,{wu:r})}function MF(e,t){let n=t.key,r=n.path.canonicalString();e.Ru.get(n)||e.Eu.has(r)||(W(dF,`New document in limbo: `+n),e.Eu.add(r),NF(e))}function NF(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let n=new Y(OO.fromString(t)),r=e.fu.next();e.Au.set(r,new pF(n)),e.Ru=e.Ru.insert(n,r),yP(e.remoteStore,new qM(zA(PA(n.path)),r,`TargetPurposeLimboResolution`,$O.ce))}}async function PF(e,t,n){let r=K(e),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((e,s)=>{o.push(r.pu(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){let t=e?!e.fromCache:n?.targetChanges.get(s.targetId)?.current;r.sharedClientState.updateQueryState(s.targetId,t?`current`:`not-current`)}if(e){i.push(e);let t=EN.Es(s.targetId,e);a.push(t)}})))})),await Promise.all(o),r.Pu.J_(i),await async function(e,t){let n=K(e);try{await n.persistence.runTransaction(`notifyLocalViewChanges`,`readwrite`,(e=>Z.forEach(t,(t=>Z.forEach(t.Ts,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Z.forEach(t.Is,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!QO(e))throw e;W(kN,`Failed to update sequence numbers: `+e)}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=n.vs.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.vs=n.vs.insert(t,i)}}}(r.localStore,a))}async function FF(e,t){let n=K(e);if(!n.currentUser.isEqual(t)){W(dF,`User change. New user:`,t.toKey());let e=await NN(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach((e=>{e.forEach((e=>{e.reject(new J(q.CANCELLED,t))}))})),e.mu.clear()}(n,`'waitForPendingWrites' promise is rejected due to a user change.`),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await PF(n,e.Ns)}}function IF(e,t){let n=K(e),r=n.Au.get(t);if(r&&r.hu)return oj().add(r.key);{let e=oj(),r=n.Iu.get(t);if(!r)return e;for(let t of r){let r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function LF(e){let t=K(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=SF.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=IF.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wF.bind(null,t),t.Pu.J_=nF.bind(null,t.eventManager),t.Pu.yu=rF.bind(null,t.eventManager),t}function RF(e){let t=K(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=TF.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=EF.bind(null,t),t}var zF=class{constructor(){this.kind=`memory`,this.synchronizeTabs=!1}async initialize(e){this.serializer=aP(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return MN(this.persistence,new ON,e.initialUser,this.serializer)}Cu(e){return new SN(wN.Vi,this.serializer)}Du(e){return new WN}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}};zF.provider={build:()=>new zF};var BF=class extends zF{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){cO(this.persistence.referenceDelegate instanceof TN,46915);let n=this.persistence.referenceDelegate.garbageCollector;return new sN(n,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes===void 0?tN.DEFAULT:tN.withCacheSize(this.cacheSizeBytes);return new SN((e=>TN.Vi(e,t)),this.serializer)}},VF=class{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>CF(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=FF.bind(null,this.syncEngine),await UP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QP}()}createDatastore(e){let t=aP(e.databaseInfo.databaseId),n=rP(e.databaseInfo);return pP(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new gP(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>CF(this.syncEngine,e,0)),function(){return qN.v()?new qN:new GN}())}createSyncEngine(e,t){return function(e,t,n,r,i,a,o){let s=new mF(e,t,n,r,i,a);return o&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){let t=K(e);W(hP,`RemoteStore shutting down.`),t.Ea.add(5),await vP(t),t.Aa.shutdown(),t.Va.set(`Unknown`)}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}};VF.provider={build:()=>new VF};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var HF=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):iO(`Uncaught Error in snapshot listener:`,e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}},UF=`FirestoreClient`,WF=class{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this._databaseInfo=r,this.user=$D.UNAUTHENTICATED,this.clientId=yO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{W(UF,`Received user=`,e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(W(UF,`Received new app check token=`,e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new lO;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let n=qP(t,`Failed to shutdown persistence`);e.reject(n)}})),e.promise}};async function GF(e,t){e.asyncQueue.verifyOperationInProgress(),W(UF,`Initializing OfflineComponentProvider`);let n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await NN(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function KF(e,t){e.asyncQueue.verifyOperationInProgress();let n=await qF(e);W(UF,`Initializing OnlineComponentProvider`),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>HP(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>HP(t.remoteStore,n))),e._onlineComponents=t}async function qF(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){W(UF,`Using user provided OfflineComponentProvider`);try{await GF(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(e){return e.name===`FirebaseError`?e.code===q.FAILED_PRECONDITION||e.code===q.UNIMPLEMENTED:!(typeof DOMException<`u`&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}(n))throw n;aO(`Error using user provided cache. Falling back to memory cache: `+n),await GF(e,new zF)}}else W(UF,`Using default OfflineComponentProvider`),await GF(e,new BF(void 0));return e._offlineComponents}async function JF(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(W(UF,`Using user provided OnlineComponentProvider`),await KF(e,e._uninitializedComponentsProvider._online)):(W(UF,`Using default OnlineComponentProvider`),await KF(e,new VF))),e._onlineComponents}function YF(e){return JF(e).then((e=>e.syncEngine))}async function XF(e){let t=await JF(e),n=t.eventManager;return n.onListen=hF.bind(null,t.syncEngine),n.onUnlisten=yF.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gF.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=bF.bind(null,t.syncEngine),n}function ZF(e,t,n,r){let i=new HF(r),a=new sF(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>eF(await XF(e),a))),()=>{i.Nu(),e.asyncQueue.enqueueAndForget((async()=>tF(await XF(e),a)))}}function QF(e,t){let n=new lO;return e.asyncQueue.enqueueAndForget((async()=>xF(await YF(e),t,n))),n.promise}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function $F(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eI=`ComponentProvider`,tI=new Map;function nI(e,t,n,r,i){return new Ak(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,$F(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rI=`firestore.googleapis.com`,iI=!0,aI=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(q.INVALID_ARGUMENT,`Can't provide ssl option if host option is not set`);this.host=rI,this.ssl=iI}else this.host=e.host,this.ssl=e.ssl??iI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iN)throw new J(q.INVALID_ARGUMENT,`cacheSizeBytes must be at least 1048576`);this.cacheSizeBytes=e.cacheSizeBytes}MO(`experimentalForceLongPolling`,e.experimentalForceLongPolling,`experimentalAutoDetectLongPolling`,e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$F(e.experimentalLongPollingOptions??{}),function(e){if(e.timeoutSeconds!==void 0){if(isNaN(e.timeoutSeconds))throw new J(q.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new J(q.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new J(q.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},oI=class{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type=`firestore-lite`,this._persistenceKey=`(lite)`,this._settings=new aI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask=`notTerminated`}get app(){if(!this._app)throw new J(q.FAILED_PRECONDITION,`Firestore was not initialized using the Firebase SDK. 'app' is not available`);return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==`notTerminated`}_setSettings(e){if(this._settingsFrozen)throw new J(q.FAILED_PRECONDITION,`Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.`);this._settings=new aI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(e){if(!e)return new dO;switch(e.type){case`firstParty`:return new hO(e.sessionIndex||`0`,e.iamToken||null,e.authTokenFactory||null);case`provider`:return e.client;default:throw new J(q.INVALID_ARGUMENT,`makeAuthCredentialsProvider failed due to invalid credential type`)}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask===`notTerminated`&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask===`notTerminated`?await this._terminate():this._terminateTask=`notTerminated`}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=tI.get(e);t&&(W(eI,`Removing Datastore`),tI.delete(e),t.terminate())}(this),Promise.resolve()}};function sI(e,t,n,r={}){e=IO(e,oI);let i=pT(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${n}`;i&&(mT(`https://${s}`),bT(`Firestore`,!0)),a.host!==rI&&a.host!==s&&aO(`Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.`);let c={...a,host:s,ssl:i,emulatorOptions:r};if(!LT(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if(typeof r.mockUserToken==`string`)t=r.mockUserToken,n=$D.MOCK_USER;else{t=hT(r.mockUserToken,e._app?.options.projectId);let i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new J(q.INVALID_ARGUMENT,`mockUserToken must contain 'sub' or 'user_id' field!`);n=new $D(i)}e._authCredentials=new fO(new uO(t,n))}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var cI=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type=`query`,this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},lI=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type=`document`,this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uI(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}toJSON(){return{type:e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(RO(n,e._jsonSchema))return new e(t,r||null,new Y(OO.fromString(n.referencePath)))}};lI._jsonSchemaVersion=`firestore/documentReference/1.0`,lI._jsonSchema={type:LO(`string`,lI._jsonSchemaVersion),referencePath:LO(`string`)};var uI=class e extends cI{constructor(e,t,n){super(e,t,PA(n)),this._path=n,this.type=`collection`}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new lI(this.firestore,null,new Y(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function dI(e,t,...n){if(e=KT(e),arguments.length===1&&(t=yO.newId()),jO(`doc`,`path`,t),e instanceof oI){let r=OO.fromString(t,...n);return NO(r),new lI(e,null,new Y(r))}{if(!(e instanceof lI||e instanceof uI))throw new J(q.INVALID_ARGUMENT,`Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore`);let r=e._path.child(OO.fromString(t,...n));return NO(r),new lI(e.firestore,e instanceof uI?e.converter:null,new Y(r))}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fI=`AsyncQueue`,pI=class{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oP(this,`async_queue_retry`),this._c=()=>{let e=iP();e&&W(fI,`Visibility state changed to `+e.visibilityState),this.M_.w_()},this.ac=e;let t=iP();t&&typeof t.addEventListener==`function`&&t.addEventListener(`visibilitychange`,this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=iP();t&&typeof t.removeEventListener==`function`&&t.removeEventListener(`visibilitychange`,this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));let t=new lO;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!QO(e))throw e;W(fI,`Operation failed with retryable error: `+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){let t=this.ac.then((()=>(this.rc=!0,e().catch((e=>{throw this.nc=e,this.rc=!1,iO(`INTERNAL UNHANDLED ERROR: `,mI(e)),e})).then((e=>(this.rc=!1,e))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=KP.createAndSchedule(this,e,t,n,(e=>this.hc(e)));return this.tc.push(r),r}uc(){this.nc&&G(47125,{Pc:mI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(let t of this.tc)if(t.skipDelay(),e!==`all`&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function mI(e){let t=e.message||``;return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}var hI=class extends oI{constructor(e,t,n,r){super(e,t,n,r),this.type=`firestore`,this._queue=new pI,this._persistenceKey=r?.name||`[DEFAULT]`}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new pI(e),this._firestoreClient=void 0,await e}}};function gI(e,t){let n=typeof e==`object`?e:bD(),r=typeof e==`string`?e:t||jk,i=mD(n,`firestore`).getImmediate({identifier:r});if(!i._initialized){let e=lT(`firestore`);e&&sI(i,...e)}return i}function _I(e){if(e._terminated)throw new J(q.FAILED_PRECONDITION,`The client has already been terminated.`);return e._firestoreClient||vI(e),e._firestoreClient}function vI(e){let t=e._freezeSettings(),n=nI(e._databaseId,e._app?.options.appId||``,e._persistenceKey,e._app?.options.apiKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new WF(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){let t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var yI=class e{constructor(e){this._byteString=e}static fromBase64String(t){try{return new e(vk.fromBase64String(t))}catch(e){throw new J(q.INVALID_ARGUMENT,`Failed to construct data from Base64 string: `+e)}}static fromUint8Array(t){return new e(vk.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return`Bytes(base64: `+this.toBase64()+`)`}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:e._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(RO(t,e._jsonSchema))return e.fromBase64String(t.bytes)}};yI._jsonSchemaVersion=`firestore/bytes/1.0`,yI._jsonSchema={type:LO(`string`,yI._jsonSchemaVersion),bytes:LO(`string`)};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var bI=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J(q.INVALID_ARGUMENT,`Invalid field name at argument $(i + 1). Field names must not be empty.`);this._internalPath=new AO(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},xI=class{constructor(e){this._methodName=e}},SI=class e{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J(q.INVALID_ARGUMENT,`Latitude must be a number between -90 and 90, but was: `+e);if(!isFinite(t)||t<-180||t>180)throw new J(q.INVALID_ARGUMENT,`Longitude must be a number between -180 and 180, but was: `+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bO(this._lat,e._lat)||bO(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:e._jsonSchemaVersion}}static fromJSON(t){if(RO(t,e._jsonSchema))return new e(t.latitude,t.longitude)}};SI._jsonSchemaVersion=`firestore/geoPoint/1.0`,SI._jsonSchema={type:LO(`string`,SI._jsonSchemaVersion),latitude:LO(`number`),longitude:LO(`number`)};
/**
* @license
* Copyright 2024 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var CI=class e{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:e._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(RO(t,e._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((e=>typeof e==`number`)))return new e(t.vectorValues);throw new J(q.INVALID_ARGUMENT,`Expected 'vectorValues' field to be a number array`)}}};CI._jsonSchemaVersion=`firestore/vectorValue/1.0`,CI._jsonSchema={type:LO(`string`,CI._jsonSchemaVersion),vectorValues:LO(`object`)};
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var wI=/^__.*__$/,TI=class{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask===null?new Pj(e,this.data,t,this.fieldTransforms):new Fj(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function EI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{dataSource:e})}}var DI=class e{constructor(e,t,n,r,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new e({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){let t=this.path?.child(e),n=this.contextWith({path:t,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return RI(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError(`Document fields must not be empty`);if(EI(this.dataSource)&&wI.test(e))throw this.createError(`Document fields cannot begin and end with "__"`)}},OI=class{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||aP(e)}createContext(e,t,n,r=!1){return new DI({dataSource:e,methodName:t,targetDoc:n,path:AO.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function kI(e){let t=e._freezeSettings(),n=aP(e._databaseId);return new OI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function AI(e,t,n,r,i,a={}){let o=e.createContext(a.merge||a.mergeFields?2:0,t,n,i);PI(`Data must be an object, but it was:`,o,r);let s=MI(r,o),c,l;if(a.merge)c=new gk(o.fieldMask),l=o.fieldTransforms;else if(a.mergeFields){let e=[];for(let r of a.mergeFields){let i=FI(t,r,n);if(!o.contains(i))throw new J(q.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);zI(e,i)||e.push(i)}c=new gk(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new TI(new nA(s),c,l)}function jI(e,t){if(NI(e=KT(e)))return PI(`Unsupported field value:`,t,e),MI(e,t);if(e instanceof xI)return function(e,t){if(!EI(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError(`Nested arrays are not supported`);return function(e,t){let n=[],r=0;for(let i of e){let e=jI(i,t.childContextForArray(r));e??={nullValue:`NULL_VALUE`},n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if((e=KT(e))===null)return{nullValue:`NULL_VALUE`};if(typeof e==`number`)return dj(t.serializer,e);if(typeof e==`boolean`)return{booleanValue:e};if(typeof e==`string`)return{stringValue:e};if(e instanceof Date){let n=VO.fromDate(e);return{timestampValue:gM(t.serializer,n)}}if(e instanceof VO){let n=new VO(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gM(t.serializer,n)}}if(e instanceof SI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof yI)return{bytesValue:_M(t.serializer,e._byteString)};if(e instanceof lI){let n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.createError(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:bM(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof CI)return function(e,t){let n=e instanceof CI?e.toArray():e;return{mapValue:{fields:{[Pk]:{stringValue:Lk},[Rk]:{arrayValue:{values:n.map((e=>{if(typeof e!=`number`)throw t.createError(`VectorValues must only contain numeric values.`);return lj(t.serializer,e)}))}}}}}}(e,t);if(KM(e))return e._toProto(t.serializer);throw t.createError(`Unsupported field value: ${FO(e)}`)}(e,t)}function MI(e,t){let n={};return uk(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lk(e,((e,r)=>{let i=jI(r,t.childContextForField(e));i!=null&&(n[e]=i)})),{mapValue:{fields:n}}}function NI(e){return!(typeof e!=`object`||!e||e instanceof Array||e instanceof Date||e instanceof VO||e instanceof SI||e instanceof yI||e instanceof lI||e instanceof xI||e instanceof CI||KM(e))}function PI(e,t,n){if(!NI(n)||!PO(n)){let r=FO(n);throw r===`an object`?t.createError(e+` a custom object`):t.createError(e+` `+r)}}function FI(e,t,n){if((t=KT(t))instanceof bI)return t._internalPath;if(typeof t==`string`)return LI(e,t);throw RI(`Field path arguments must be of type string or `,e,!1,void 0,n)}var II=RegExp(`[~\\*/\\[\\]]`);function LI(e,t,n){if(t.search(II)>=0)throw RI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new bI(...t.split(`.`))._internalPath}catch{throw RI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function RI(e,t,n,r,i){let a=r&&!r.isEmpty(),o=i!==void 0,s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=`. `;let c=``;return(a||o)&&(c+=` (found`,a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=`)`),new J(q.INVALID_ARGUMENT,s+e+c)}function zI(e,t){return e.some((e=>e.isEqual(t)))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var BI=class{convertValue(e,t=`none`){switch(zk(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xk(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sk(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t=`none`){let n={};return lk(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){let t=e.fields?.[Rk].arrayValue?.values?.map((e=>xk(e.doubleValue)));return new CI(t)}convertGeoPoint(e){return new SI(xk(e.latitude),xk(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case`previous`:let n=Ok(e);return n==null?null:this.convertValue(n,t);case`estimate`:return this.convertTimestamp(kk(e));default:return null}}convertTimestamp(e){let t=bk(e);return new VO(t.seconds,t.nanos)}convertDocumentKey(e,t){let n=OO.fromString(e);cO(GM(n),9688,{name:e});let r=new Mk(n.get(1),n.get(3)),i=new Y(n.popFirst(5));return r.isEqual(t)||iO(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}},VI=class extends BI{constructor(e){super(),this.firestore=e}convertBytes(e){return new yI(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new lI(this.firestore,null,t)}},HI=`@firebase/firestore`,UI=`4.11.0`;
/**
* @license
* Copyright 2017 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function WI(e){return function(e,t){if(typeof e!=`object`||!e)return!1;let n=e;for(let e of t)if(e in n&&typeof n[e]==`function`)return!0;return!1}(e,[`next`,`error`,`complete`])}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var GI=class{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lI(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new KI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(FI(`DocumentSnapshot.get`,e));if(t!==null)return this._userDataWriter.convertValue(t)}}},KI=class extends GI{data(){return super.data()}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qI(e){if(e.limitType===`L`&&e.explicitOrderBy.length===0)throw new J(q.UNIMPLEMENTED,`limitToLast() queries require specifying at least one orderBy() clause`)}function JI(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}var YI=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},XI=class e extends GI{constructor(e,t,n,r,i,a){super(e,t,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ZI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let n=this._document.data.field(FI(`DocumentSnapshot.get`,e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(q.FAILED_PRECONDITION,`DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t=this._document,n={};return n.type=e._jsonSchemaVersion,n.bundle=``,n.bundleSource=`DocumentSnapshot`,n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,`previous`),n.bundle=(this._firestore,this.ref.path,`NOT SUPPORTED`),n)}};XI._jsonSchemaVersion=`firestore/documentSnapshot/1.0`,XI._jsonSchema={type:LO(`string`,XI._jsonSchemaVersion),bundleSource:LO(`string`,`DocumentSnapshot`),bundleName:LO(`string`),bundle:LO(`string`)};var ZI=class extends XI{data(e={}){return super.data(e)}},QI=class e{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new YI(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ZI(this._firestore,this._userDataWriter,n.key,n,new YI(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J(q.INVALID_ARGUMENT,`To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().`);return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{let r=new ZI(e._firestore,e._userDataWriter,n.doc.key,n.doc,new YI(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:`added`,doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||e.type!==3)).map((t=>{let r=new ZI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new YI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return t.type!==0&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),t.type!==1&&(n=n.add(t.doc),a=n.indexOf(t.doc.key)),{type:$I(t.type),doc:r,oldIndex:i,newIndex:a}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(q.FAILED_PRECONDITION,`QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().`);let t={};t.type=e._jsonSchemaVersion,t.bundleSource=`QuerySnapshot`,t.bundleName=yO.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach((e=>{e._document!==null&&(n.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,`previous`)),i.push(e.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,`NOT SUPPORTED`),t}};function $I(e){switch(e){case 0:return`added`;case 2:case 3:return`modified`;case 1:return`removed`;default:return G(61501,{type:e})}}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/QI._jsonSchemaVersion=`firestore/querySnapshot/1.0`,QI._jsonSchema={type:LO(`string`,QI._jsonSchemaVersion),bundleSource:LO(`string`,`QuerySnapshot`),bundleName:LO(`string`),bundle:LO(`string`)};function eL(e,t,n){e=IO(e,lI);let r=IO(e.firestore,hI),i=JI(e.converter,t,n),a=kI(r);return rL(r,[AI(a,`setDoc`,e._key,i,e.converter!==null,n).toMutation(e._key,Ej.none())])}function tL(e){return rL(IO(e.firestore,hI),[new zj(e._key,Ej.none())])}function nL(e,...t){e=KT(e);let n={includeMetadataChanges:!1,source:`default`},r=0;typeof t[r]!=`object`||WI(t[r])||(n=t[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(WI(t[r])){let e=t[r];t[r]=e.next?.bind(e),t[r+1]=e.error?.bind(e),t[r+2]=e.complete?.bind(e)}let a,o,s;if(e instanceof lI)o=IO(e.firestore,hI),s=PA(e._key.path),a={next:n=>{t[r]&&t[r](iL(o,e,n))},error:t[r+1],complete:t[r+2]};else{let n=IO(e,cI);o=IO(n.firestore,hI),s=n._query;let i=new VI(o);a={next:e=>{t[r]&&t[r](new QI(o,i,n,e))},error:t[r+1],complete:t[r+2]},qI(e._query)}let c=_I(o);return ZF(c,s,i,a)}function rL(e,t){let n=_I(e);return QF(n,t)}function iL(e,t,n){let r=n.docs.get(t._key),i=new VI(e);return new XI(e,i,t._key,r,new YI(n.hasPendingWrites,n.fromCache),t.converter)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(function(e,t=!0){tO(vD),pD(new qT(`firestore`,((e,{instanceIdentifier:n,options:r})=>{let i=e.getProvider(`app`).getImmediate(),a=new hI(new pO(e.getProvider(`auth-internal`)),new _O(i,e.getProvider(`app-check-internal`)),Nk(i,n),i);return r={useFetchStreams:t,...r},a._setSettings(r),a}),`PUBLIC`).setMultipleInstances(!0)),xD(HI,UI,e),xD(HI,UI,`esm2020`)})(),xD(`firebase`,`12.9.0`,`app`);function aL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var oL=aL,sL=new NT(`auth`,`Firebase`,aL()),cL=new aE(`@firebase/auth`);function lL(e,...t){cL.logLevel<=eE.WARN&&cL.warn(`Auth (${vD}): ${e}`,...t)}function uL(e,...t){cL.logLevel<=eE.ERROR&&cL.error(`Auth (${vD}): ${e}`,...t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function dL(e,...t){throw hL(e,...t)}function fL(e,...t){return hL(e,...t)}function pL(e,t,n){let r={...oL(),[t]:n};return new NT(`auth`,`Firebase`,r).create(t,{appName:e.name})}function mL(e){return pL(e,`operation-not-supported-in-this-environment`,`Operations that alter the current user are not supported in conjunction with FirebaseServerApp`)}function hL(e,...t){if(typeof e!=`string`){let n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return sL.create(e,...t)}function Q(e,t,...n){if(!e)throw hL(t,...n)}function gL(e){let t=`INTERNAL ASSERTION FAILED: `+e;throw uL(t),Error(t)}function _L(e,t){e||gL(t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function vL(){return typeof self<`u`&&self.location?.href||``}function yL(){return bL()===`http:`||bL()===`https:`}function bL(){return typeof self<`u`&&self.location?.protocol||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function xL(){return typeof navigator<`u`&&navigator&&`onLine`in navigator&&typeof navigator.onLine==`boolean`&&(yL()||TT()||`connection`in navigator)?navigator.onLine:!0}function SL(){if(typeof navigator>`u`)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var CL=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,_L(t>e,`Short delay should be less than long delay!`),this.isMobile=ST()||ET()}get(){return xL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function wL(e,t){_L(e.emulator,`Emulator should always be set here`);let{url:n}=e.emulator;return t?`${n}${t.startsWith(`/`)?t.slice(1):t}`:n}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var TL=class{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<`u`&&`fetch`in self)return self.fetch;if(typeof globalThis<`u`&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<`u`)return fetch;gL(`Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<`u`&&`Headers`in self)return self.Headers;if(typeof globalThis<`u`&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<`u`)return Headers;gL(`Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<`u`&&`Response`in self)return self.Response;if(typeof globalThis<`u`&&globalThis.Response)return globalThis.Response;if(typeof Response<`u`)return Response;gL(`Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill`)}},EL={CREDENTIAL_MISMATCH:`custom-token-mismatch`,MISSING_CUSTOM_TOKEN:`internal-error`,INVALID_IDENTIFIER:`invalid-email`,MISSING_CONTINUE_URI:`internal-error`,INVALID_PASSWORD:`wrong-password`,MISSING_PASSWORD:`missing-password`,INVALID_LOGIN_CREDENTIALS:`invalid-credential`,EMAIL_EXISTS:`email-already-in-use`,PASSWORD_LOGIN_DISABLED:`operation-not-allowed`,INVALID_IDP_RESPONSE:`invalid-credential`,INVALID_PENDING_TOKEN:`invalid-credential`,FEDERATED_USER_ID_ALREADY_LINKED:`credential-already-in-use`,MISSING_REQ_TYPE:`internal-error`,EMAIL_NOT_FOUND:`user-not-found`,RESET_PASSWORD_EXCEED_LIMIT:`too-many-requests`,EXPIRED_OOB_CODE:`expired-action-code`,INVALID_OOB_CODE:`invalid-action-code`,MISSING_OOB_CODE:`internal-error`,CREDENTIAL_TOO_OLD_LOGIN_AGAIN:`requires-recent-login`,INVALID_ID_TOKEN:`invalid-user-token`,TOKEN_EXPIRED:`user-token-expired`,USER_NOT_FOUND:`user-token-expired`,TOO_MANY_ATTEMPTS_TRY_LATER:`too-many-requests`,PASSWORD_DOES_NOT_MEET_REQUIREMENTS:`password-does-not-meet-requirements`,INVALID_CODE:`invalid-verification-code`,INVALID_SESSION_INFO:`invalid-verification-id`,INVALID_TEMPORARY_PROOF:`invalid-credential`,MISSING_SESSION_INFO:`missing-verification-id`,SESSION_EXPIRED:`code-expired`,MISSING_ANDROID_PACKAGE_NAME:`missing-android-pkg-name`,UNAUTHORIZED_DOMAIN:`unauthorized-continue-uri`,INVALID_OAUTH_CLIENT_ID:`invalid-oauth-client-id`,ADMIN_ONLY_OPERATION:`admin-restricted-operation`,INVALID_MFA_PENDING_CREDENTIAL:`invalid-multi-factor-session`,MFA_ENROLLMENT_NOT_FOUND:`multi-factor-info-not-found`,MISSING_MFA_ENROLLMENT_ID:`missing-multi-factor-info`,MISSING_MFA_PENDING_CREDENTIAL:`missing-multi-factor-session`,SECOND_FACTOR_EXISTS:`second-factor-already-in-use`,SECOND_FACTOR_LIMIT_EXCEEDED:`maximum-second-factor-count-exceeded`,BLOCKING_FUNCTION_ERROR_RESPONSE:`internal-error`,RECAPTCHA_NOT_ENABLED:`recaptcha-not-enabled`,MISSING_RECAPTCHA_TOKEN:`missing-recaptcha-token`,INVALID_RECAPTCHA_TOKEN:`invalid-recaptcha-token`,INVALID_RECAPTCHA_ACTION:`invalid-recaptcha-action`,MISSING_CLIENT_TYPE:`missing-client-type`,MISSING_RECAPTCHA_VERSION:`missing-recaptcha-version`,INVALID_RECAPTCHA_VERSION:`invalid-recaptcha-version`,INVALID_REQ_TYPE:`invalid-req-type`},DL=[`/v1/accounts:signInWithCustomToken`,`/v1/accounts:signInWithEmailLink`,`/v1/accounts:signInWithIdp`,`/v1/accounts:signInWithPassword`,`/v1/accounts:signInWithPhoneNumber`,`/v1/token`],OL=new CL(3e4,6e4);function kL(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function AL(e,t,n,r,i={}){return jL(e,i,async()=>{let i={},a={};r&&(t===`GET`?a=r:i={body:JSON.stringify(r)});let o=zT({key:e.config.apiKey,...a}).slice(1),s=await e._getAdditionalHeaders();s[`Content-Type`]=`application/json`,e.languageCode&&(s[`X-Firebase-Locale`]=e.languageCode);let c={method:t,headers:s,...i};return wT()||(c.referrerPolicy=`no-referrer`),e.emulatorConfig&&pT(e.emulatorConfig.host)&&(c.credentials=`include`),TL.fetch()(await NL(e,e.config.apiHost,n,o),c)})}async function jL(e,t,n){e._canInitEmulator=!1;let r={...EL,...t};try{let t=new FL(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();let a=await i.json();if(`needConfirmation`in a)throw IL(e,`account-exists-with-different-credential`,a);if(i.ok&&!(`errorMessage`in a))return a;{let[t,n]=(i.ok?a.errorMessage:a.error.message).split(` : `);if(t===`FEDERATED_USER_ID_ALREADY_LINKED`)throw IL(e,`credential-already-in-use`,a);if(t===`EMAIL_EXISTS`)throw IL(e,`email-already-in-use`,a);if(t===`USER_DISABLED`)throw IL(e,`user-disabled`,a);let o=r[t]||t.toLowerCase().replace(/[_\s]+/g,`-`);if(n)throw pL(e,o,n);dL(e,o)}}catch(t){if(t instanceof MT)throw t;dL(e,`network-request-failed`,{message:String(t)})}}async function ML(e,t,n,r,i={}){let a=await AL(e,t,n,r,i);return`mfaPendingCredential`in a&&dL(e,`multi-factor-auth-required`,{_serverResponse:a}),a}async function NL(e,t,n,r){let i=`${t}${n}?${r}`,a=e,o=a.config.emulator?wL(e.config,i):`${e.config.apiScheme}://${i}`;return DL.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()===`COOKIE`)?a._getPersistence()._getFinalTarget(o).toString():o}function PL(e){switch(e){case`ENFORCE`:return`ENFORCE`;case`AUDIT`:return`AUDIT`;case`OFF`:return`OFF`;default:return`ENFORCEMENT_STATE_UNSPECIFIED`}}var FL=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(fL(this.auth,`network-request-failed`)),OL.get())})}};function IL(e,t,n){let r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=fL(e,t,r);return i.customData._tokenResponse=n,i}function LL(e){return e!==void 0&&e.enterprise!==void 0}var RL=class{constructor(e){if(this.siteKey=``,this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw Error(`recaptchaKey undefined`);this.siteKey=e.recaptchaKey.split(`/`)[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return PL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)===`ENFORCE`||this.getProviderEnforcementState(e)===`AUDIT`}isAnyProviderEnabled(){return this.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)||this.isProviderEnabled(`PHONE_PROVIDER`)}};async function zL(e,t){return AL(e,`GET`,`/v2/recaptchaConfig`,kL(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function BL(e,t){return AL(e,`POST`,`/v1/accounts:delete`,t)}async function VL(e,t){return AL(e,`POST`,`/v1/accounts:lookup`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function HL(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function UL(e,t=!1){let n=KT(e),r=await n.getIdToken(t),i=GL(r);Q(i&&i.exp&&i.auth_time&&i.iat,n.auth,`internal-error`);let a=typeof i.firebase==`object`?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:HL(WL(i.auth_time)),issuedAtTime:HL(WL(i.iat)),expirationTime:HL(WL(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function WL(e){return Number(e)*1e3}function GL(e){let[t,n,r]=e.split(`.`);if(t===void 0||n===void 0||r===void 0)return uL(`JWT malformed, contained fewer than 3 sections`),null;try{let e=nT(n);return e?JSON.parse(e):(uL(`Failed to decode base64 JWT payload`),null)}catch(e){return uL(`Caught error parsing JWT payload as JSON`,e?.toString()),null}}function KL(e){let t=GL(e);return Q(t,`internal-error`),Q(t.exp!==void 0,`internal-error`),Q(t.iat!==void 0,`internal-error`),Number(t.exp)-Number(t.iat)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function qL(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof MT&&JL(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}function JL({code:e}){return e===`auth/user-disabled`||e===`auth/user-token-expired`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var YL=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;let e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code===`auth/network-request-failed`&&this.schedule(!0);return}this.schedule()}},XL=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=HL(this.lastLoginAt),this.creationTime=HL(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function ZL(e){let t=e.auth,n=await e.getIdToken(),r=await qL(e,VL(t,{idToken:n}));Q(r?.users.length,t,`internal-error`);let i=r.users[0];e._notifyReloadListener(i);let a=i.providerUserInfo?.length?eR(i.providerUserInfo):[],o=$L(e.providerData,a),s=e.isAnonymous,c=!(e.email&&i.passwordHash)&&!o?.length,l=s?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new XL(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)}async function QL(e){let t=KT(e);await ZL(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function $L(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function eR(e){return e.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||``,displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function tR(e,t){let n=await jL(e,{},async()=>{let n=zT({grant_type:`refresh_token`,refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await NL(e,r,`/v1/token`,`key=${i}`),o=await e._getAdditionalHeaders();o[`Content-Type`]=`application/x-www-form-urlencoded`;let s={method:`POST`,headers:o,body:n};return e.emulatorConfig&&pT(e.emulatorConfig.host)&&(s.credentials=`include`),TL.fetch()(a,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nR(e,t){return AL(e,`POST`,`/v2/accounts:revokeToken`,kL(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rR=class e{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,`internal-error`),Q(e.idToken!==void 0,`internal-error`),Q(e.refreshToken!==void 0,`internal-error`);let t=`expiresIn`in e&&e.expiresIn!==void 0?Number(e.expiresIn):KL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,`internal-error`);let t=KL(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,`user-token-expired`),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:n,refreshToken:r,expiresIn:i}=await tR(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,n){let{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new e;return r&&(Q(typeof r==`string`,`internal-error`,{appName:t}),o.refreshToken=r),i&&(Q(typeof i==`string`,`internal-error`,{appName:t}),o.accessToken=i),a&&(Q(typeof a==`number`,`internal-error`,{appName:t}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new e,this.toJSON())}_performRefresh(){return gL(`not implemented`)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function iR(e,t){Q(typeof e==`string`||e===void 0,`internal-error`,{appName:t})}var aR=class e{constructor({uid:e,auth:t,stsTokenManager:n,...r}){this.providerId=`firebase`,this.proactiveRefresh=new YL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new XL(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){let t=await qL(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,`internal-error`),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return UL(this,e)}reload(){return QL(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,`internal-error`),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(t){let n=new e({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,`internal-error`),this.reloadListener=e,this.reloadUserInfo&&=(this._notifyReloadListener(this.reloadUserInfo),null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ZL(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hD(this.auth.app))return Promise.reject(mL(this.auth));let e=await this.getIdToken();return await qL(this,BL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||``}static _fromJSON(t,n){let r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,c=n._redirectEventId??void 0,l=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:d,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:h}=n;Q(d&&h,t,`internal-error`);let g=rR.fromJSON(this.name,h);Q(typeof d==`string`,t,`internal-error`),iR(r,t.name),iR(i,t.name),Q(typeof f==`boolean`,t,`internal-error`),Q(typeof p==`boolean`,t,`internal-error`),iR(a,t.name),iR(o,t.name),iR(s,t.name),iR(c,t.name),iR(l,t.name),iR(u,t.name);let _=new e({uid:d,auth:t,email:i,emailVerified:f,displayName:r,isAnonymous:p,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:g,createdAt:l,lastLoginAt:u});return m&&Array.isArray(m)&&(_.providerData=m.map(e=>({...e}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(t,n,r=!1){let i=new rR;i.updateFromServerResponse(n);let a=new e({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await ZL(a),a}static async _fromGetAccountInfoResponse(t,n,r){let i=n.users[0];Q(i.localId!==void 0,`internal-error`);let a=i.providerUserInfo===void 0?[]:eR(i.providerUserInfo),o=!(i.email&&i.passwordHash)&&!a?.length,s=new rR;s.updateFromIdToken(r);let c=new e({uid:i.localId,auth:t,stsTokenManager:s,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new XL(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(c,l),c}},oR=new Map;function sR(e){_L(e instanceof Function,`Expected a class definition`);let t=oR.get(e);return t?(_L(t instanceof e,`Instance stored in cache mismatched with class`),t):(t=new e,oR.set(e,t),t)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var cR=class{constructor(){this.type=`NONE`,this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};cR.type=`NONE`;var lR=cR;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function uR(e,t,n){return`firebase:${e}:${t}:${n}`}var dR=class e{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;let{config:r,name:i}=this.auth;this.fullUserKey=uR(this.userKey,r.apiKey,i),this.fullPersistenceKey=uR(`persistence`,r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e==`string`){let t=await VL(this.auth,{idToken:e}).catch(()=>void 0);return t?aR._fromGetAccountInfoResponse(this.auth,t,e):null}return aR._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r=`authUser`){if(!n.length)return new e(sR(lR),t,r);let i=(await Promise.all(n.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=i[0]||sR(lR),o=uR(r,t.config.apiKey,t.name),s=null;for(let e of n)try{let n=await e._get(o);if(n){let r;if(typeof n==`string`){let e=await VL(t,{idToken:n}).catch(()=>void 0);if(!e)break;r=await aR._fromGetAccountInfoResponse(t,e,n)}else r=aR._fromJSON(t,n);e!==a&&(s=r),a=e;break}}catch{}let c=i.filter(e=>e._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new e(a,t,r):(a=c[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async e=>{if(e!==a)try{await e._remove(o)}catch{}})),new e(a,t,r))}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function fR(e){let t=e.toLowerCase();if(t.includes(`opera/`)||t.includes(`opr/`)||t.includes(`opios/`))return`Opera`;if(gR(t))return`IEMobile`;if(t.includes(`msie`)||t.includes(`trident/`))return`IE`;if(t.includes(`edge/`))return`Edge`;if(pR(t))return`Firefox`;if(t.includes(`silk/`))return`Silk`;if(vR(t))return`Blackberry`;if(yR(t))return`Webos`;if(mR(t))return`Safari`;if((t.includes(`chrome/`)||hR(t))&&!t.includes(`edge/`))return`Chrome`;if(_R(t))return`Android`;{let t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(t?.length===2)return t[1]}return`Other`}function pR(e=xT()){return/firefox\//i.test(e)}function mR(e=xT()){let t=e.toLowerCase();return t.includes(`safari/`)&&!t.includes(`chrome/`)&&!t.includes(`crios/`)&&!t.includes(`android`)}function hR(e=xT()){return/crios\//i.test(e)}function gR(e=xT()){return/iemobile/i.test(e)}function _R(e=xT()){return/android/i.test(e)}function vR(e=xT()){return/blackberry/i.test(e)}function yR(e=xT()){return/webos/i.test(e)}function bR(e=xT()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function xR(e=xT()){return bR(e)&&!!window.navigator?.standalone}function SR(){return DT()&&document.documentMode===10}function CR(e=xT()){return bR(e)||_R(e)||yR(e)||vR(e)||/windows phone/i.test(e)||gR(e)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function wR(e,t=[]){let n;switch(e){case`Browser`:n=fR(xT());break;case`Worker`:n=`${fR(xT())}-${e}`;break;default:n=e}let r=t.length?t.join(`,`):`FirebaseCore-web`;return`${n}/JsCore/${vD}/${r}`}
/**
* @license
* Copyright 2022 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var TR=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let n=t=>new Promise((n,r)=>{try{let r=e(t);n(r)}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(let e of t)try{e()}catch{}throw this.auth._errorFactory.create(`login-blocked`,{originalMessage:e?.message})}}};
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function ER(e,t={}){return AL(e,`GET`,`/v2/passwordPolicy`,kL(e,t))}
/**
* @license
* Copyright 2023 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var DR=6,OR=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??DR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState===`ENFORCEMENT_STATE_UNSPECIFIED`&&(this.enforcementState=`OFF`),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join(``)??``,this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&=t.meetsMinPasswordLength??!0,t.isValid&&=t.meetsMaxPasswordLength??!0,t.isValid&&=t.containsLowercaseLetter??!0,t.isValid&&=t.containsUppercaseLetter??!0,t.isValid&&=t.containsNumericCharacter??!0,t.isValid&&=t.containsNonAlphanumericCharacter??!0,t}validatePasswordLengthOptions(e,t){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>=`a`&&n<=`z`,n>=`A`&&n<=`Z`,n>=`0`&&n<=`9`,this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||=t),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||=n),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||=r),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||=i)}},kR=class{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jR(this),this.idTokenSubscription=new jR(this),this.beforeStateQueue=new TR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sR(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await dR.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await VL(this,{idToken:e}),n=await aR._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(e){console.warn(`FirebaseServerApp could not login user with provided authIdToken: `,e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hD(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!t||t===i)&&a?.user&&(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,`argument-error`),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ZL(e)}catch(e){if(e?.code!==`auth/network-request-failed`)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hD(this.app))return Promise.reject(mL(this));let t=e?KT(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,`invalid-user-token`),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,`tenant-id-mismatch`),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hD(this.app)?Promise.reject(mL(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hD(this.app)?Promise.reject(mL(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sR(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?t.validatePassword(e):Promise.reject(this._errorFactory.create(`unsupported-password-policy-schema-version`,{}))}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await ER(this),t=new OR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new NT(`auth`,`Firebase`,e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),n={providerId:`apple.com`,tokenType:`ACCESS_TOKEN`,token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await nR(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&sR(e)||this._popupRedirectResolver;Q(t,this,`argument-error`),this.redirectPersistenceManager=await dR.create(this,[sR(t._redirectPersistence)],`redirectUser`),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};let i=typeof t==`function`?t:t.next.bind(t),a=!1,o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(o,this,`internal-error`),o.then(()=>{a||i(this.currentUser)}),typeof t==`function`){let i=e.addObserver(t,n,r);return()=>{a=!0,i()}}else{let n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,`internal-error`),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e[`X-Firebase-gmpid`]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e[`X-Firebase-Client`]=t);let n=await this._getAppCheckToken();return n&&(e[`X-Firebase-AppCheck`]=n),e}async _getAppCheckToken(){if(hD(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&lL(`Error while retrieving App Check token: ${e.error}`),e?.token}};function AR(e){return KT(e)}var jR=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=HT(e=>this.observer=e)}get next(){return Q(this.observer,this.auth,`internal-error`),this.observer.next.bind(this.observer)}},MR={async loadJS(){throw Error(`Unable to load external scripts`)},recaptchaV2Script:``,recaptchaEnterpriseScript:``,gapiScript:``};function NR(e){MR=e}function PR(e){return MR.loadJS(e)}function FR(){return MR.recaptchaEnterpriseScript}function IR(){return MR.gapiScript}function LR(e){return`__${e}${Math.floor(Math.random()*1e6)}`}var RR=class{constructor(){this.enterprise=new zR}ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},zR=class{ready(e){e()}execute(e,t){return Promise.resolve(`token`)}render(e,t){return``}},BR=`recaptcha-enterprise`,VR=`NO_RECAPTCHA`,HR=class{constructor(e){this.type=BR,this.auth=AR(e)}async verify(e=`verify`,t=!1){async function n(e){if(!t){if(e.tenantId==null&&e._agentRecaptchaConfig!=null)return e._agentRecaptchaConfig.siteKey;if(e.tenantId!=null&&e._tenantRecaptchaConfigs[e.tenantId]!==void 0)return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{zL(e,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}).then(r=>{if(r.recaptchaKey===void 0)n(Error(`recaptcha Enterprise site key undefined`));else{let n=new RL(r);return e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}}).catch(e=>{n(e)})})}function r(t,n,r){let i=window.grecaptcha;LL(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(VR)})}):r(Error(`No reCAPTCHA enterprise script loaded.`))}return this.auth.settings.appVerificationDisabledForTesting?new RR().execute(`siteKey`,{action:`verify`}):new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&LL(window.grecaptcha))r(n,e,i);else{if(typeof window>`u`){i(Error(`RecaptchaVerifier is only supported in browser`));return}let t=FR();t.length!==0&&(t+=n),PR(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}};async function UR(e,t,n,r=!1,i=!1){let a=new HR(e),o;if(i)o=VR;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}let s={...t};if(n===`mfaSmsEnrollment`||n===`mfaSmsSignIn`){if(`phoneEnrollmentInfo`in s){let e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}else if(`phoneSignInInfo`in s){let e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:`CLIENT_TYPE_WEB`,recaptchaVersion:`RECAPTCHA_ENTERPRISE`}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:`CLIENT_TYPE_WEB`}),Object.assign(s,{recaptchaVersion:`RECAPTCHA_ENTERPRISE`}),s}async function WR(e,t,n,r,i){if(i===`EMAIL_PASSWORD_PROVIDER`)if(e._getRecaptchaConfig()?.isProviderEnabled(`EMAIL_PASSWORD_PROVIDER`)){let i=await UR(e,t,n,n===`getOobCode`);return r(e,i)}else return r(e,t).catch(async i=>{if(i.code===`auth/missing-recaptcha-token`){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let i=await UR(e,t,n,n===`getOobCode`);return r(e,i)}else return Promise.reject(i)});else if(i===`PHONE_PROVIDER`)if(e._getRecaptchaConfig()?.isProviderEnabled(`PHONE_PROVIDER`)){let i=await UR(e,t,n);return r(e,i).catch(async i=>{if(e._getRecaptchaConfig()?.getProviderEnforcementState(`PHONE_PROVIDER`)===`AUDIT`&&(i.code===`auth/missing-recaptcha-token`||i.code===`auth/invalid-app-credential`)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let i=await UR(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}else{let i=await UR(e,t,n,!1,!0);return r(e,i)}else return Promise.reject(i+` provider is not supported.`)}async function GR(e){let t=AR(e),n=await zL(t,{clientType:`CLIENT_TYPE_WEB`,version:`RECAPTCHA_ENTERPRISE`}),r=new RL(n);t.tenantId==null?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()&&new HR(t).verify()}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function KR(e,t){let n=mD(e,`auth`);if(n.isInitialized()){let e=n.getImmediate(),r=n.getOptions();if(LT(r,t??{}))return e;dL(e,`already-initialized`)}return n.initialize({options:t})}function qR(e,t){let n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(sR);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function JR(e,t,n){let r=AR(e);Q(/^https?:\/\//.test(t),r,`invalid-emulator-scheme`);let i=!!n?.disableWarnings,a=YR(t),{host:o,port:s}=XR(t),c=s===null?``:`:${s}`,l={url:`${a}//${o}${c}/`},u=Object.freeze({host:o,port:s,protocol:a.replace(`:`,``),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,`emulator-config-failed`),Q(LT(l,r.config.emulator)&&LT(u,r.emulatorConfig),r,`emulator-config-failed`);return}r.config.emulator=l,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,pT(o)?(mT(`${a}//${o}${c}`),bT(`Auth`,!0)):i||QR()}function YR(e){let t=e.indexOf(`:`);return t<0?``:e.substr(0,t+1)}function XR(e){let t=YR(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:``,port:null};let r=n[2].split(`@`).pop()||``,i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let e=i[1];return{host:e,port:ZR(r.substr(e.length+1))}}else{let[e,t]=r.split(`:`);return{host:e,port:ZR(t)}}}function ZR(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}function QR(){function e(){let e=document.createElement(`p`),t=e.style;e.innerText=`Running in emulator mode. Do not use with production credentials.`,t.position=`fixed`,t.width=`100%`,t.backgroundColor=`#ffffff`,t.border=`.1em solid #000000`,t.color=`#b50000`,t.bottom=`0px`,t.left=`0px`,t.margin=`0px`,t.zIndex=`10000`,t.textAlign=`center`,e.classList.add(`firebase-emulator-warning`),document.body.appendChild(e)}typeof console<`u`&&typeof console.info==`function`&&console.info(`WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.`),typeof window<`u`&&typeof document<`u`&&(document.readyState===`loading`?window.addEventListener(`DOMContentLoaded`,e):e())}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var $R=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gL(`not implemented`)}_getIdTokenResponse(e){return gL(`not implemented`)}_linkToIdToken(e,t){return gL(`not implemented`)}_getReauthenticationResolver(e){return gL(`not implemented`)}};async function ez(e,t){return AL(e,`POST`,`/v1/accounts:signUp`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function tz(e,t){return ML(e,`POST`,`/v1/accounts:signInWithPassword`,kL(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function nz(e,t){return ML(e,`POST`,`/v1/accounts:signInWithEmailLink`,kL(e,t))}async function rz(e,t){return ML(e,`POST`,`/v1/accounts:signInWithEmailLink`,kL(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var iz=class e extends $R{constructor(e,t,n,r=null){super(`password`,n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(t,n){return new e(t,n,`password`)}static _fromEmailAndCode(t,n,r=null){return new e(t,n,`emailLink`,r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e==`string`?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod===`password`)return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod===`emailLink`)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case`password`:let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`};return WR(e,t,`signInWithPassword`,tz,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return nz(e,{email:this._email,oobCode:this._password});default:dL(e,`internal-error`)}}async _linkToIdToken(e,t){switch(this.signInMethod){case`password`:let n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:`CLIENT_TYPE_WEB`};return WR(e,n,`signUpPassword`,ez,`EMAIL_PASSWORD_PROVIDER`);case`emailLink`:return rz(e,{idToken:t,email:this._email,oobCode:this._password});default:dL(e,`internal-error`)}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function az(e,t){return ML(e,`POST`,`/v1/accounts:signInWithIdp`,kL(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var oz=`http://localhost`,sz=class e extends $R{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let n=new e(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):dL(`argument-error`),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let{providerId:n,signInMethod:r,...i}=typeof t==`string`?JSON.parse(t):t;if(!n||!r)return null;let a=new e(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return az(e,t)}_linkToIdToken(e,t){let n=this.buildRequest();return n.idToken=t,az(e,n)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,az(e,t)}buildRequest(){let e={requestUri:oz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zT(t)}return e}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function cz(e,t){return AL(e,`POST`,`/v1/accounts:sendVerificationCode`,kL(e,t))}async function lz(e,t){return ML(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,kL(e,t))}async function uz(e,t){let n=await ML(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,kL(e,t));if(n.temporaryProof)throw IL(e,`account-exists-with-different-credential`,n);return n}var dz={USER_NOT_FOUND:`user-not-found`};async function fz(e,t){let n={...t,operation:`REAUTH`};return ML(e,`POST`,`/v1/accounts:signInWithPhoneNumber`,kL(e,n),dz)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var pz=class e extends $R{constructor(e){super(`phone`,`phone`),this.params=e}static _fromVerification(t,n){return new e({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new e({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(e){return lz(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return uz(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return fz(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(t){typeof t==`string`&&(t=JSON.parse(t));let{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a}=t;return!r&&!n&&!i&&!a?null:new e({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:a})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function mz(e){switch(e){case`recoverEmail`:return`RECOVER_EMAIL`;case`resetPassword`:return`PASSWORD_RESET`;case`signIn`:return`EMAIL_SIGNIN`;case`verifyEmail`:return`VERIFY_EMAIL`;case`verifyAndChangeEmail`:return`VERIFY_AND_CHANGE_EMAIL`;case`revertSecondFactorAddition`:return`REVERT_SECOND_FACTOR_ADDITION`;default:return null}}function hz(e){let t=BT(VT(e)).link,n=t?BT(VT(t)).deep_link_id:null,r=BT(VT(e)).deep_link_id;return(r?BT(VT(r)).link:null)||r||n||t||e}var gz=class e{constructor(e){let t=BT(VT(e)),n=t.apiKey??null,r=t.oobCode??null,i=mz(t.mode??null);Q(n&&r&&i,`argument-error`),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(t){let n=hz(t);try{return new e(n)}catch{return null}}},_z=class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return iz._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let n=gz.parseLink(t);return Q(n,`argument-error`),iz._fromEmailAndCode(e,n.code,n.tenantId)}};_z.PROVIDER_ID=`password`,_z.EMAIL_PASSWORD_SIGN_IN_METHOD=`password`,_z.EMAIL_LINK_SIGN_IN_METHOD=`emailLink`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var vz=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}},yz=class extends vz{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}},bz=class e extends yz{constructor(){super(`facebook.com`)}static credential(t){return sz._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};bz.FACEBOOK_SIGN_IN_METHOD=`facebook.com`,bz.PROVIDER_ID=`facebook.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var xz=class e extends yz{constructor(){super(`google.com`),this.addScope(`profile`)}static credential(t,n){return sz._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch{return null}}};xz.GOOGLE_SIGN_IN_METHOD=`google.com`,xz.PROVIDER_ID=`google.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Sz=class e extends yz{constructor(){super(`github.com`)}static credential(t){return sz._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!(`oauthAccessToken`in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch{return null}}};Sz.GITHUB_SIGN_IN_METHOD=`github.com`,Sz.PROVIDER_ID=`github.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Cz=class e extends yz{constructor(){super(`twitter.com`)}static credential(t,n){return sz._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch{return null}}};Cz.TWITTER_SIGN_IN_METHOD=`twitter.com`,Cz.PROVIDER_ID=`twitter.com`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function wz(e,t){return ML(e,`POST`,`/v1/accounts:signUp`,kL(e,t))}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Tz=class e{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){let a=await aR._fromIdTokenResponse(t,r,i),o=Ez(r);return new e({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);let i=Ez(r);return new e({user:t,providerId:i,_tokenResponse:r,operationType:n})}};function Ez(e){return e.providerId?e.providerId:`phoneNumber`in e?`phone`:null}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Dz=class e extends MT{constructor(t,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,e.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new e(t,n,r,i)}};function Oz(e,t,n,r){return(t===`reauthenticate`?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw n.code===`auth/multi-factor-auth-required`?Dz._fromErrorAndOperation(e,n,t,r):n})}async function kz(e,t,n=!1){let r=await qL(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Tz._forOperation(e,`link`,r)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Az(e,t,n=!1){let{auth:r}=e;if(hD(r.app))return Promise.reject(mL(r));let i=`reauthenticate`;try{let a=await qL(e,Oz(r,i,t,e),n);Q(a.idToken,r,`internal-error`);let o=GL(a.idToken);Q(o,r,`internal-error`);let{sub:s}=o;return Q(e.uid===s,r,`user-mismatch`),Tz._forOperation(e,i,a)}catch(e){throw e?.code===`auth/user-not-found`&&dL(r,`user-mismatch`),e}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function jz(e,t,n=!1){if(hD(e.app))return Promise.reject(mL(e));let r=`signIn`,i=await Oz(e,r,t),a=await Tz._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}async function Mz(e,t){return jz(AR(e),t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function Nz(e){let t=AR(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Pz(e,t,n){if(hD(e.app))return Promise.reject(mL(e));let r=AR(e),i=await WR(r,{returnSecureToken:!0,email:t,password:n,clientType:`CLIENT_TYPE_WEB`},`signUpPassword`,wz,`EMAIL_PASSWORD_PROVIDER`).catch(t=>{throw t.code===`auth/password-does-not-meet-requirements`&&Nz(e),t}),a=await Tz._fromIdTokenResponse(r,`signIn`,i);return await r._updateCurrentUser(a.user),a}function Fz(e,t,n){return hD(e.app)?Promise.reject(mL(e)):Mz(KT(e),_z.credential(t,n)).catch(async t=>{throw t.code===`auth/password-does-not-meet-requirements`&&Nz(e),t})}function Iz(e,t,n,r){return KT(e).onIdTokenChanged(t,n,r)}function Lz(e,t,n){return KT(e).beforeAuthStateChanged(t,n)}function Rz(e,t,n,r){return KT(e).onAuthStateChanged(t,n,r)}function zz(e){return KT(e).signOut()}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function Bz(e,t){return AL(e,`POST`,`/v2/accounts/mfaEnrollment:start`,kL(e,t))}function Vz(e,t){return AL(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,kL(e,t))}function Hz(e,t){return AL(e,`POST`,`/v2/accounts/mfaEnrollment:start`,kL(e,t))}function Uz(e,t){return AL(e,`POST`,`/v2/accounts/mfaEnrollment:finalize`,kL(e,t))}var Wz=`__sak`,Gz=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wz,`1`),this.storage.removeItem(Wz),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}},Kz=1e3,qz=10,Jz=class extends Gz{constructor(){super(()=>window.localStorage,`LOCAL`),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});return}let n=e.key;t?this.detachListener():this.stopPolling();let r=()=>{let e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},i=this.storage.getItem(n);SR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,qz):r()}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent(`storage`,{key:e,oldValue:t,newValue:n}),!0)})},Kz)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}attachListener(){window.addEventListener(`storage`,this.boundEventHandler)}detachListener(){window.removeEventListener(`storage`,this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};Jz.type=`LOCAL`;var Yz=Jz,Xz=1e3;function Zz(e){let t=e.replace(/[\\^$.*+?()[\]{}|]/g,`\\$&`),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function Qz(e){return`${window.location.protocol===`http:`?`__dev_`:`__HOST-`}FIREBASE_${e.split(`:`)[3]}`}var $z=class{constructor(){this.type=`COOKIE`,this.listenerUnsubscribes=new Map}_getFinalTarget(e){let t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set(`finalTarget`,e),t}async _isAvailable(){return typeof isSecureContext==`boolean`&&!isSecureContext||typeof navigator>`u`||typeof document>`u`?!1:navigator.cookieEnabled??!0}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;let t=Qz(e);return window.cookieStore?(await window.cookieStore.get(t))?.value:Zz(t)}async _remove(e){if(!this._isAvailable()||!await this._get(e))return;let t=Qz(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch(`/__cookies__`,{method:`DELETE`}).catch(()=>void 0)}_addListener(e,t){if(!this._isAvailable())return;let n=Qz(e);if(window.cookieStore){let e=(e=>{let r=e.changed.find(e=>e.name===n);r&&t(r.value),e.deleted.find(e=>e.name===n)&&t(null)});return this.listenerUnsubscribes.set(t,()=>window.cookieStore.removeEventListener(`change`,e)),window.cookieStore.addEventListener(`change`,e)}let r=Zz(n),i=setInterval(()=>{let e=Zz(n);e!==r&&(t(e),r=e)},Xz);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){let n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}};$z.type=`COOKIE`;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var eB=class extends Gz{constructor(){super(()=>window.sessionStorage,`SESSION`)}_addListener(e,t){}_removeListener(e,t){}};eB.type=`SESSION`;var tB=eB;
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function nB(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var rB=class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;let r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:`ack`,eventId:n,eventType:r});let o=Array.from(a).map(async e=>e(t.origin,i)),s=await nB(o);t.ports[0].postMessage({status:`done`,eventId:n,eventType:r,response:s})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener(`message`,this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener(`message`,this.boundEventHandler)}};rB.receivers=[];
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function iB(e=``,t=10){let n=``;for(let e=0;e<t;e++)n+=Math.floor(Math.random()*10);return e+n}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var aB=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener(`message`,e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){let r=typeof MessageChannel<`u`?new MessageChannel:null;if(!r)throw Error(`connection_unavailable`);let i,a;return new Promise((o,s)=>{let c=iB(``,20);r.port1.start();let l=setTimeout(()=>{s(Error(`unsupported_event`))},n);a={messageChannel:r,onMessage(e){let t=e;if(t.data.eventId===c)switch(t.data.status){case`ack`:clearTimeout(l),i=setTimeout(()=>{s(Error(`timeout`))},3e3);break;case`done`:clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(Error(`invalid_response`));break}}},this.handlers.add(a),r.port1.addEventListener(`message`,a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function oB(){return window}function sB(e){oB().location.href=e}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function cB(){return oB().WorkerGlobalScope!==void 0&&typeof oB().importScripts==`function`}async function lB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uB(){return navigator?.serviceWorker?.controller||null}function dB(){return cB()?self:null}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var fB=`firebaseLocalStorageDb`,pB=1,mB=`firebaseLocalStorage`,hB=`fbase_key`,gB=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener(`success`,()=>{e(this.request.result)}),this.request.addEventListener(`error`,()=>{t(this.request.error)})})}};function _B(e,t){return e.transaction([mB],t?`readwrite`:`readonly`).objectStore(mB)}function vB(){let e=indexedDB.deleteDatabase(fB);return new gB(e).toPromise()}function yB(){let e=indexedDB.open(fB,pB);return new Promise((t,n)=>{e.addEventListener(`error`,()=>{n(e.error)}),e.addEventListener(`upgradeneeded`,()=>{let t=e.result;try{t.createObjectStore(mB,{keyPath:hB})}catch(e){n(e)}}),e.addEventListener(`success`,async()=>{let n=e.result;n.objectStoreNames.contains(mB)?t(n):(n.close(),await vB(),t(await yB()))})})}async function bB(e,t,n){let r=_B(e,!0).put({[hB]:t,value:n});return new gB(r).toPromise()}async function xB(e,t){let n=_B(e,!1).get(t),r=await new gB(n).toPromise();return r===void 0?null:r.value}function SB(e,t){let n=_B(e,!0).delete(t);return new gB(n).toPromise()}var CB=800,wB=3,TB=class{constructor(){this.type=`LOCAL`,this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||=await yB(),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>wB)throw e;this.db&&=(this.db.close(),void 0)}}async initializeServiceWorkerMessaging(){return cB()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rB._getInstance(dB()),this.receiver._subscribe(`keyChanged`,async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe(`ping`,async(e,t)=>[`keyChanged`])}async initializeSender(){if(this.activeServiceWorker=await lB(),!this.activeServiceWorker)return;this.sender=new aB(this.activeServiceWorker);let e=await this.sender._send(`ping`,{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes(`keyChanged`)&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uB()!==this.activeServiceWorker))try{await this.sender._send(`keyChanged`,{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await yB();return await bB(e,Wz,`1`),await SB(e,Wz),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>bB(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>xB(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>SB(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>{let t=_B(e,!1).getAll();return new gB(t).toPromise()});if(!e||this.pendingWrites!==0)return[];let t=[],n=new Set;if(e.length!==0)for(let{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(let e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let n=this.listeners[e];if(n)for(let e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CB)}stopPolling(){this.pollTimer&&=(clearInterval(this.pollTimer),null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};TB.type=`LOCAL`;var EB=TB;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function DB(e,t){return AL(e,`POST`,`/v2/accounts/mfaSignIn:start`,kL(e,t))}function OB(e,t){return AL(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,kL(e,t))}function kB(e,t){return AL(e,`POST`,`/v2/accounts/mfaSignIn:finalize`,kL(e,t))}LR(`rcb`),new CL(3e4,6e4);
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var AB=`recaptcha`;async function jB(e,t,n){if(!e._getRecaptchaConfig())try{await GR(e)}catch{console.log(`Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.`)}try{let r;if(r=typeof t==`string`?{phoneNumber:t}:t,`session`in r){let t=r.session;if(`phoneNumber`in r){Q(t.type===`enroll`,e,`internal-error`);let i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`}};return(await WR(e,i,`mfaSmsEnrollment`,async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===VR){Q(n?.type===AB,e,`argument-error`);let r=await MB(e,t,n);return Bz(e,r)}return Bz(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}else{Q(t.type===`signin`,e,`internal-error`);let i=r.multiFactorHint?.uid||r.multiFactorUid;Q(i,e,`missing-multi-factor-info`);let a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:`CLIENT_TYPE_WEB`}};return(await WR(e,a,`mfaSmsSignIn`,async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===VR){Q(n?.type===AB,e,`argument-error`);let r=await MB(e,t,n);return DB(e,r)}return DB(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}else{let t={phoneNumber:r.phoneNumber,clientType:`CLIENT_TYPE_WEB`};return(await WR(e,t,`sendVerificationCode`,async(e,t)=>{if(t.captchaResponse===VR){Q(n?.type===AB,e,`argument-error`);let r=await MB(e,t,n);return cz(e,r)}return cz(e,t)},`PHONE_PROVIDER`).catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function MB(e,t,n){Q(n.type===AB,e,`argument-error`);let r=await n.verify();Q(typeof r==`string`,e,`argument-error`);let i={...t};if(`phoneEnrollmentInfo`in i){let e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}else if(`phoneSignInInfo`in i){let e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}else return Object.assign(i,{recaptchaToken:r}),i}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var NB=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=AR(t)}verifyPhoneNumber(e,t){return jB(this.auth,e,KT(t))}static credential(e,t){return pz._fromVerification(e,t)}static credentialFromResult(t){let n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:n}=e;return t&&n?pz._fromTokenResponse(t,n):null}};NB.PROVIDER_ID=`phone`,NB.PHONE_SIGN_IN_METHOD=`phone`;
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function PB(e,t){return t?sR(t):(Q(e._popupRedirectResolver,e,`argument-error`),e._popupRedirectResolver)}
/**
* @license
* Copyright 2019 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var FB=class extends $R{constructor(e){super(`custom`,`custom`),this.params=e}_getIdTokenResponse(e){return az(e,this._buildIdpRequest())}_linkToIdToken(e,t){return az(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return az(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function IB(e){return jz(e.auth,new FB(e),e.bypassAuthState)}function LB(e){let{auth:t,user:n}=e;return Q(n,t,`internal-error`),Az(n,new FB(e),e.bypassAuthState)}async function RB(e){let{auth:t,user:n}=e;return Q(n,t,`internal-error`),kz(n,new FB(e),e.bypassAuthState)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var zB=class{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:o}=e;if(a){this.reject(a);return}let s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(s))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case`signInViaPopup`:case`signInViaRedirect`:return IB;case`linkViaPopup`:case`linkViaRedirect`:return RB;case`reauthViaPopup`:case`reauthViaRedirect`:return LB;default:dL(this.auth,`internal-error`)}}resolve(e){_L(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_L(this.pendingPromise,`Pending promise was never set`),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}},BB=new CL(2e3,1e4),VB=class e extends zB{constructor(t,n,r,i,a){super(t,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return Q(e,this.auth,`internal-error`),e}async onExecution(){_L(this.filter.length===1,`Popup operations only handle one event`);let e=iB();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(fL(this.auth,`web-storage-unsupported`))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fL(this.auth,`cancelled-popup-request`))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){let e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fL(this.auth,`popup-closed-by-user`))},8e3);return}this.pollId=window.setTimeout(e,BB.get())};e()}};VB.currentPopupAction=null;
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var HB=`pendingRedirect`,UB=new Map,WB=class extends zB{constructor(e,t,n=!1){super(e,[`signInViaRedirect`,`linkViaRedirect`,`reauthViaRedirect`,`unknown`],t,void 0,n),this.eventId=null}async execute(){let e=UB.get(this.auth._key());if(!e){try{let t=await GB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}UB.set(this.auth._key(),e)}return this.bypassAuthState||UB.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type===`signInViaRedirect`)return super.onAuthEvent(e);if(e.type===`unknown`){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function GB(e,t){let n=JB(t),r=qB(e);if(!await r._isAvailable())return!1;let i=await r._get(n)===`true`;return await r._remove(n),i}function KB(e,t){UB.set(e._key(),t)}function qB(e){return sR(e._redirectPersistence)}function JB(e){return uR(HB,e.config.apiKey,e.name)}async function YB(e,t,n=!1){if(hD(e.app))return Promise.reject(mL(e));let r=AR(e),i=PB(r,t),a=await new WB(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var XB=600*1e3,ZB=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eV(e)?t:(this.hasHandledPotentialRedirect=!0,t||=(this.queuedRedirectEvent=e,!0),t)}sendToConsumer(e,t){if(e.error&&!$B(e)){let n=e.error.code?.split(`auth/`)[1]||`internal-error`;t.onError(fL(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XB&&this.cachedEventUids.clear(),this.cachedEventUids.has(QB(e))}saveEventToCache(e){this.cachedEventUids.add(QB(e)),this.lastProcessedEventTime=Date.now()}};function QB(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join(`-`)}function $B({type:e,error:t}){return e===`unknown`&&t?.code===`auth/no-auth-event`}function eV(e){switch(e.type){case`signInViaRedirect`:case`linkViaRedirect`:case`reauthViaRedirect`:return!0;case`unknown`:return $B(e);default:return!1}}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
async function tV(e,t={}){return AL(e,`GET`,`/v1/projects`,t)}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var nV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rV=/^https?/;async function iV(e){if(e.config.emulator)return;let{authorizedDomains:t}=await tV(e);for(let e of t)try{if(aV(e))return}catch{}dL(e,`unauthorized-domain`)}function aV(e){let t=vL(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith(`chrome-extension://`)){let i=new URL(e);return i.hostname===``&&r===``?n===`chrome-extension:`&&e.replace(`chrome-extension://`,``)===t.replace(`chrome-extension://`,``):n===`chrome-extension:`&&i.hostname===r}if(!rV.test(n))return!1;if(nV.test(e))return r===e;let i=e.replace(/\./g,`\\.`);return RegExp(`^(.+\\.`+i+`|`+i+`)$`,`i`).test(r)}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var oV=new CL(3e4,6e4);function sV(){let e=oB().___jsl;if(e?.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}function cV(e){return new Promise((t,n)=>{function r(){sV(),gapi.load(`gapi.iframes`,{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{sV(),n(fL(e,`network-request-failed`))},timeout:oV.get()})}if(oB().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(oB().gapi?.load)r();else{let t=LR(`iframefcb`);return oB()[t]=()=>{gapi.load?r():n(fL(e,`network-request-failed`))},PR(`${IR()}?onload=${t}`).catch(e=>n(e))}}).catch(e=>{throw lV=null,e})}var lV=null;function uV(e){return lV||=cV(e),lV}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var dV=new CL(5e3,15e3),fV=`__/auth/iframe`,pV=`emulator/auth/iframe`,mV={style:{position:`absolute`,top:`-100px`,width:`1px`,height:`1px`},"aria-hidden":`true`,tabindex:`-1`},hV=new Map([[`identitytoolkit.googleapis.com`,`p`],[`staging-identitytoolkit.sandbox.googleapis.com`,`s`],[`test-identitytoolkit.sandbox.googleapis.com`,`t`]]);function gV(e){let t=e.config;Q(t.authDomain,e,`auth-domain-config-required`);let n=t.emulator?wL(t,pV):`https://${e.config.authDomain}/${fV}`,r={apiKey:t.apiKey,appName:e.name,v:vD},i=hV.get(e.config.apiHost);i&&(r.eid=i);let a=e._getFrameworks();return a.length&&(r.fw=a.join(`,`)),`${n}?${zT(r).slice(1)}`}async function _V(e){let t=await uV(e),n=oB().gapi;return Q(n,e,`internal-error`),t.open({where:document.body,url:gV(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mV,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});let i=fL(e,`network-request-failed`),a=oB().setTimeout(()=>{r(i)},dV.get());function o(){oB().clearTimeout(a),n(t)}t.ping(o).then(o,()=>{r(i)})}))}
/**
* @license
* Copyright 2020 Google LLC.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var vV={location:`yes`,resizable:`yes`,statusbar:`yes`,toolbar:`no`},yV=500,bV=600,xV=`_blank`,SV=`http://localhost`,CV=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function wV(e,t,n,r=yV,i=bV){let a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s=``,c={...vV,width:r.toString(),height:i.toString(),top:a,left:o},l=xT().toLowerCase();n&&(s=hR(l)?xV:n),pR(l)&&(t||=SV,c.scrollbars=`yes`);let u=Object.entries(c).reduce((e,[t,n])=>`${e}${t}=${n},`,``);if(xR(l)&&s!==`_self`)return TV(t||``,s),new CV(null);let d=window.open(t||``,s,u);Q(d,e,`popup-blocked`);try{d.focus()}catch{}return new CV(d)}function TV(e,t){let n=document.createElement(`a`);n.href=e,n.target=t;let r=document.createEvent(`MouseEvent`);r.initMouseEvent(`click`,!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
* @license
* Copyright 2021 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var EV=`__/auth/handler`,DV=`emulator/auth/handler`,OV=`fac`;async function kV(e,t,n,r,i,a){Q(e.config.authDomain,e,`auth-domain-config-required`),Q(e.config.apiKey,e,`invalid-api-key`);let o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:vD,eventId:i};if(t instanceof vz){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||``,IT(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[e,t]of Object.entries(a||{}))o[e]=t}if(t instanceof yz){let e=t.getScopes().filter(e=>e!==``);e.length>0&&(o.scopes=e.join(`,`))}e.tenantId&&(o.tid=e.tenantId);let s=o;for(let e of Object.keys(s))s[e]===void 0&&delete s[e];let c=await e._getAppCheckToken(),l=c?`#${OV}=${encodeURIComponent(c)}`:``;return`${AV(e)}?${zT(s).slice(1)}${l}`}function AV({config:e}){return e.emulator?wL(e,DV):`https://${e.authDomain}/${EV}`}
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var jV=`webStorageSupport`,MV=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tB,this._completeRedirectFn=YB,this._overrideRedirectResult=KB}async _openPopup(e,t,n,r){_L(this.eventManagers[e._key()]?.manager,`_initialize() not called before _openPopup()`);let i=await kV(e,t,n,vL(),r);return wV(e,i,iB())}async _openRedirect(e,t,n,r){await this._originValidation(e);let i=await kV(e,t,n,vL(),r);return sB(i),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(_L(n,`If manager is not set, promise should be`),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await _V(e),n=new ZB(e);return t.register(`authEvent`,t=>(Q(t?.authEvent,e,`invalid-auth-event`),{status:n.onEvent(t.authEvent)?`ACK`:`ERROR`}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jV,{type:jV},n=>{let r=n?.[0]?.[jV];r!==void 0&&t(!!r),dL(e,`internal-error`)},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CR()||mR()||bR()}},NV=class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case`enroll`:return this._finalizeEnroll(e,t.credential,n);case`signin`:return this._finalizeSignIn(e,t.credential);default:return gL(`unexpected MultiFactorSessionType`)}}},PV=class e extends NV{constructor(e){super(`phone`),this.credential=e}static _fromCredential(t){return new e(t)}_finalizeEnroll(e,t,n){return Vz(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return OB(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},FV=class{constructor(){}static assertion(e){return PV._fromCredential(e)}};FV.FACTOR_ID=`phone`;var IV=class{static assertionForEnrollment(e,t){return LV._fromSecret(e,t)}static assertionForSignIn(e,t){return LV._fromEnrollmentId(e,t)}static async generateSecret(e){let t=e;Q(t.user?.auth!==void 0,`internal-error`);let n=await Hz(t.user.auth,{idToken:t.credential,totpEnrollmentInfo:{}});return RV._fromStartTotpMfaEnrollmentResponse(n,t.user.auth)}};IV.FACTOR_ID=`totp`;var LV=class e extends NV{constructor(e,t,n){super(`totp`),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(t,n){return new e(n,void 0,t)}static _fromEnrollmentId(t,n){return new e(n,t)}async _finalizeEnroll(e,t,n){return Q(this.secret!==void 0,e,`argument-error`),Uz(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){Q(this.enrollmentId!==void 0&&this.otp!==void 0,e,`argument-error`);let n={verificationCode:this.otp};return kB(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}},RV=class e{constructor(e,t,n,r,i,a,o){this.sessionInfo=a,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=i}static _fromStartTotpMfaEnrollmentResponse(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){let n=!1;return(zV(e)||zV(t))&&(n=!0),n&&(zV(e)&&(e=this.auth.currentUser?.email||`unknownuser`),zV(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function zV(e){return e===void 0||e?.length===0}var BV=`@firebase/auth`,VV=`1.12.0`,HV=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,`dependent-sdk-initialized-before-auth`)}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};
/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
function UV(e){switch(e){case`Node`:return`node`;case`ReactNative`:return`rn`;case`Worker`:return`webworker`;case`Cordova`:return`cordova`;case`WebExtension`:return`web-extension`;default:return}}function WV(e){pD(new qT(`auth`,(t,{options:n})=>{let r=t.getProvider(`app`).getImmediate(),i=t.getProvider(`heartbeat`),a=t.getProvider(`app-check-internal`),{apiKey:o,authDomain:s}=r.options;Q(o&&!o.includes(`:`),`invalid-api-key`,{appName:r.name});let c={apiKey:o,authDomain:s,clientPlatform:e,apiHost:`identitytoolkit.googleapis.com`,tokenApiHost:`securetoken.googleapis.com`,apiScheme:`https`,sdkClientVersion:wR(e)},l=new kR(r,i,a,c);return qR(l,n),l},`PUBLIC`).setInstantiationMode(`EXPLICIT`).setInstanceCreatedCallback((e,t,n)=>{e.getProvider(`auth-internal`).initialize()})),pD(new qT(`auth-internal`,e=>(e=>new HV(e))(AR(e.getProvider(`auth`).getImmediate())),`PRIVATE`).setInstantiationMode(`EXPLICIT`)),xD(BV,VV,UV(e)),xD(BV,VV,`esm2020`)}var GV=dT(`authIdTokenMaxAge`)||300,KV=null,qV=e=>async t=>{let n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GV)return;let i=n?.token;KV!==i&&(KV=i,await fetch(e,{method:i?`POST`:`DELETE`,headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JV(e=bD()){let t=mD(e,`auth`);if(t.isInitialized())return t.getImmediate();let n=KR(e,{popupRedirectResolver:MV,persistence:[EB,Yz,tB]}),r=dT(`authTokenSyncURL`);if(r&&typeof isSecureContext==`boolean`&&isSecureContext){let e=new URL(r,location.origin);if(location.origin===e.origin){let t=qV(e.toString());Lz(n,t,()=>t(n.currentUser)),Iz(n,e=>t(e))}}let i=cT(`auth`);return i&&JR(n,`http://${i}`),n}function YV(){return document.getElementsByTagName(`head`)?.[0]??document}NR({loadJS(e){return new Promise((t,n)=>{let r=document.createElement(`script`);r.setAttribute(`src`,e),r.onload=t,r.onerror=e=>{let t=fL(`internal-error`);t.customData=e,n(t)},r.type=`text/javascript`,r.charset=`UTF-8`,YV().appendChild(r)})},gapiScript:`https://apis.google.com/js/api.js`,recaptchaV2Script:`https://www.google.com/recaptcha/api.js`,recaptchaEnterpriseScript:`https://www.google.com/recaptcha/enterprise.js?render=`}),WV(`Browser`);var XV=yD({apiKey:`AIzaSyA0kYXjq6CrGjXtz-wtieBVyiCVzI4oK88`,authDomain:`sam2-76636.firebaseapp.com`,projectId:`sam2-76636`,storageBucket:`sam2-76636.firebasestorage.app`,messagingSenderId:`867904652229`,appId:`1:867904652229:web:3926e53a16ae2afbe741ac`,measurementId:`G-KGDWEZBWCC`});const ZV=JV(XV),QV=gI(XV);function $V(e,t,n=null){let[r,i]=(0,v.useState)(n),[a,o]=(0,v.useState)(!0),[s,c]=(0,v.useState)(null);return(0,v.useEffect)(()=>{let r=dI(QV,e,t),a=nL(r,e=>{e.exists()?i(e.data().value):i(n),o(!1)},n=>{console.error(`Error syncing ${e}/${t}:`,n),c(n),o(!1)});return()=>a()},[e,t]),{data:r,loading:a,error:s,updateData:async n=>{try{let r=dI(QV,e,t);await eL(r,{value:n},{merge:!0})}catch(n){console.error(`Error updating ${e}/${t}:`,n),c(n)}},deleteData:async()=>{try{let n=dI(QV,e,t);await tL(n)}catch(n){console.error(`Error deleting ${e}/${t}:`,n),c(n)}}}}function eH(e,t=[]){return $V(e,`shared`,t)}var tH=o((e=>{var t=Symbol.for(`react.transitional.element`),n=Symbol.for(`react.fragment`);function r(e,n,r){var i=null;if(r!==void 0&&(i=``+r),n.key!==void 0&&(i=``+n.key),`key`in n)for(var a in r={},n)a!==`key`&&(r[a]=n[a]);else r=n;return n=r.ref,{$$typeof:t,type:e,key:i,ref:n===void 0?null:n,props:r}}e.Fragment=n,e.jsx=r,e.jsxs=r})),$=l(o(((e,t)=>{t.exports=tH()}))()),nH=[`sam.stanley@workmobileforms.com`,`samstanleywm@gmail.com`,`benjamin.agheipour@workmobileforms.com`,`saad.akram@workmobileforms.com`],rH=(0,v.createContext)();const iH=()=>{let e=(0,v.useContext)(rH);if(!e)throw Error(`useAuth must be used within an AuthProvider`);return e},aH=({children:e})=>{let[t,n]=(0,v.useState)(null),[r,i]=(0,v.useState)(!0),[a,o]=(0,v.useState)(null),s=async(e,t)=>{if(o(null),!nH.includes(e))throw Error(`Unauthorized email address`);return Fz(ZV,e,t)},c=async(e,t)=>{if(o(null),!nH.includes(e))throw Error(`Unauthorized email address`);return Pz(ZV,e,t)},l=()=>zz(ZV);(0,v.useEffect)(()=>Rz(ZV,e=>{e&&!nH.includes(e.email)?(zz(ZV),n(null),o(`Unauthorized email address`)):(n(e),o(null)),i(!1)}),[]);let u={currentUser:t,login:s,signup:c,logout:l,loading:r,error:a};return(0,$.jsx)(rH.Provider,{value:u,children:e})};var oH=({children:e,className:t=``,...n})=>(0,$.jsx)(`button`,{className:`flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium focus:outline-none focus:ring-2 focus:ring-blue-400 transition ${t}`,...n,children:e});function sH(){let{darkMode:e}=(0,v.useContext)(dU)||{},{currentUser:t}=iH(),n=(t?.email||`default`).replace(/[@.]/g,`_`),{data:r,updateData:i}=$V(`user-tasks`,n,[]),a=(r||[]).map(e=>({...e,tags:Array.isArray(e?.tags)?e.tags:[],completedAt:e.completedAt||null})),o=e=>{if(typeof e==`function`){let t=e(a);i(t)}else i(e)},{data:s,updateData:c}=$V(`user-tasks-tags`,n,[]),l=Array.isArray(s)?s:[],u=e=>{if(typeof e==`function`){let t=e(l);c(t)}else c(e)},{data:d,updateData:f}=$V(`user-tasks-deleted`,n,[]),p=Array.isArray(d)?d:[],m=e=>{if(typeof e==`function`){let t=e(p);f(t)}else f(e)},[h,g]=(0,v.useState)(``),[_,y]=(0,v.useState)(`all`),[b,x]=(0,v.useState)(()=>localStorage.getItem(`zenTasksViewMode`)===`swimlane`),S=(0,v.useRef)(null),C=(0,v.useRef)(null),[w,T]=(0,v.useState)(null),[E,D]=(0,v.useState)(``),[O,ee]=(0,v.useState)(``),[te,ne]=(0,v.useState)(null),[k,re]=(0,v.useState)(!1),[ie,ae]=(0,v.useState)(!1),[A,j]=(0,v.useState)(!1),[oe,se]=(0,v.useState)(!1),[ce,M]=(0,v.useState)(``),[le,N]=(0,v.useState)(!1),[P,F]=(0,v.useState)(!1),[ue,de]=(0,v.useState)(new Set),[fe,pe]=(0,v.useState)(!1),[me,he]=(0,v.useState)([]),[ge,_e]=(0,v.useState)(!1),ve=e=>{he(t=>[...t.slice(-19),e])},ye=()=>{me.length!==0&&(o(me[me.length-1]),he(e=>e.slice(0,-1)))};(0,v.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&e.key===`z`&&(e.preventDefault(),ye())};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[me]),(0,v.useEffect)(()=>{oe&&C.current&&C.current.focus()},[oe]),(0,v.useEffect)(()=>{localStorage.setItem(`zenTasksViewMode`,b?`swimlane`:`list`)},[b]);let be=new Date().getDay()===5,xe=()=>{let e=new Date,t=new Date(e);t.setDate(e.getDate()-e.getDay()+5);let n=new Date(t),r=new Date(n);return r.setDate(r.getDate()-4),r.setHours(0,0,0,0),t.setHours(23,59,59,999),a.filter(e=>e.status===`done`&&e.completedAt&&new Date(e.completedAt)>=r&&new Date(e.completedAt)<=t)},Se=()=>{let e=xe(),t=e.length,n=`Weekly Summary:\n\nYou completed ${t} ${t===1?`task`:`tasks`} this week.\n\n Tasks:\n${e.map(e=>`- ${e.text}`).join(`
`)}`;navigator.clipboard.writeText(n),j(!0),setTimeout(()=>j(!1),2e3)},Ce=(0,v.useMemo)(()=>[{key:`todo`,label:`To-Do`},{key:`inprogress`,label:`In-Progress`},{key:`done`,label:`Completed`}],[]),we=(0,v.useMemo)(()=>a.filter(e=>!(_===`todo`&&e.status!==`todo`||_===`inprogress`&&e.status!==`inprogress`||_===`completed`&&e.status!==`done`||ce&&!e.text.toLowerCase().includes(ce.toLowerCase()))),[a,_,ce]),Te=async()=>{if(!h.trim())return;re(!0);let e={id:Date.now(),text:h.trim(),detail:``,status:`todo`,tags:[],completedAt:null};await new Promise(e=>setTimeout(e,150)),o(t=>{let n=[...t,e];return ve(t),n}),g(``),re(!1),S.current&&S.current.focus()},Ee=(e,t)=>o(n=>(ve(n),n.map(n=>n.id===e?{...n,status:t,completedAt:t===`done`?new Date().toISOString():n.completedAt}:n))),De=e=>{o(t=>{ve(t);let n=t.find(t=>t.id===e);return n?(m(e=>[{...n,deletedAt:Date.now()},...e]),t.filter(t=>t.id!==e)):t})},Oe=e=>{T(e),D(e.detail||``)},ke=async()=>{w&&(re(!0),await new Promise(e=>setTimeout(e,200)),o(e=>(ve(e),e.map(e=>e.id===w.id?{...e,detail:E,text:w.text}:e))),re(!1),T(null))},Ae=e=>{ne(e),ee(``)},je=e=>{let t=(e||``).trim();!te||!t||(o(e=>(ve(e),e.map(e=>e.id===te.id?{...e,tags:Array.isArray(e.tags)?e.tags.includes(t)?e.tags:[...e.tags,t]:[t]}:e))),u(e=>e.includes(t)?e:[...e,t]),ee(``),ne(null))},Me=(e,t)=>{o(n=>(ve(n),n.map(n=>n.id===e?{...n,tags:(n.tags||[]).filter(e=>e!==t)}:n)))},Ne=()=>{let e=a.filter(e=>e.status===`inprogress`),t=a.filter(e=>e.status===`done`&&e.completedAt&&new Date(e.completedAt)>new Date(Date.now()-1440*60*1e3)),n=`Daily Update:\n\n In Progress:\n${e.length?e.map(e=>`- ${e.text}`).join(`
`):`- None`}\n\n Completed (since yesterday):\n${t.length?t.map(e=>`- ${e.text}`).join(`
`):`- None`}`;navigator.clipboard.writeText(n),j(!0),setTimeout(()=>j(!1),2e3)},Pe=e=>e===`todo`?`To Do`:e===`inprogress`?`In Progress`:`Done`,Fe=()=>{let e=e=>`"${String(e).replaceAll(`"`,`""`)}"`,t=[`Task,Status`,...a.map(t=>`${e(t.text)},${e(Pe(t.status))}`)].join(`
`),n=new Blob([t],{type:`text/csv`}),r=URL.createObjectURL(n),i=document.createElement(`a`);i.href=r,i.download=`tasks.csv`,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(r)},Ie=e=>{if(!e||e.length===0)return;let t=Array.isArray(e)?e:[e];o(e=>{ve(e);let n=p.filter(e=>t.includes(e.id)),r=new Set(e.map(e=>e.id));return[...n.filter(e=>!r.has(e.id)).map(e=>({...e,status:`todo`,deletedAt:void 0})),...e]}),m(e=>e.filter(e=>!t.includes(e.id))),de(new Set)},Le=(0,v.useMemo)(()=>{let e=new Set;return p.filter(t=>e.has(t.id)?!1:(e.add(t.id),!0))},[p]);return(0,v.useEffect)(()=>{m(e=>e.filter(e=>!e.deletedAt||e.deletedAt>Date.now()-1440*60*1e3))},[]),(0,$.jsxs)(`div`,{className:`min-h-screen flex flex-col ${e?`bg-gray-900 text-white`:`bg-white text-gray-900`}`,children:[(0,$.jsxs)(`header`,{className:`p-4 flex items-center justify-center gap-4 flex-wrap shadow-md ${e?`bg-gray-800 border-b border-gray-700`:`bg-gray-50 border-b border-gray-200`}`,children:[(0,$.jsxs)(oH,{onClick:()=>{se(e=>!e),N(!1)},className:`cursor-pointer ${e?`bg-gray-700 text-gray-300 hover:bg-gray-600`:`bg-white text-blue-600 hover:bg-blue-50`}`,children:[(0,$.jsx)(ud,{className:`h-4 w-4`}),` Search`]}),oe&&(0,$.jsxs)(`div`,{className:`flex items-center rounded h-[40px] ${e?`bg-gray-800 border border-gray-700`:`bg-white border border-gray-300`}`,children:[(0,$.jsx)(`input`,{ref:C,value:ce,onChange:e=>M(e.target.value),placeholder:`Search tasks...`,className:`px-3 py-2 w-64 text-sm outline-none flex-1 ${e?`bg-gray-800 text-gray-200 placeholder-gray-500`:`bg-white text-gray-900 placeholder-gray-400`}`}),(0,$.jsx)(`button`,{onClick:()=>{M(``),se(!1)},className:`text-lg px-2 ${e?`text-gray-400 hover:text-gray-300`:`text-gray-500 hover:text-gray-700`}`,title:`Clear`,children:``})]}),(0,$.jsxs)(oH,{variant:`secondary`,onClick:()=>x(e=>!e),className:`cursor-pointer ${e?`bg-gray-700 text-gray-300 hover:bg-gray-600`:`bg-white text-blue-600 hover:bg-blue-50`}`,disabled:k,children:[k?(0,$.jsx)($u,{className:`mr-2 h-4 w-4 animate-spin`}):(0,$.jsx)(Gu,{className:`mr-2 h-4 w-4`}),b?`List Mode`:`Swimlane Mode`]}),(0,$.jsxs)(oH,{onClick:()=>{Fe()},className:`cursor-pointer ${e?`bg-gray-700 text-gray-300 hover:bg-gray-600`:`bg-white text-green-600 hover:bg-green-50`}`,children:[(0,$.jsx)(Yu,{className:`h-4 w-4`}),` Export`]}),(0,$.jsxs)(oH,{onClick:()=>ae(!0),className:`cursor-pointer ${e?`bg-gray-700 text-gray-300 hover:bg-gray-600`:`bg-white text-blue-600 hover:bg-blue-50`}`,children:[(0,$.jsx)(Uu,{className:`h-4 w-4`}),` Daily Update`]}),be&&(0,$.jsxs)(oH,{onClick:()=>_e(!0),className:`bg-purple-500 hover:bg-purple-600 text-white cursor-pointer`,children:[(0,$.jsx)(Uu,{className:`h-4 w-4`}),` Weekly Summary`]}),(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(oH,{onClick:()=>N(e=>!e),className:`cursor-pointer px-3 py-2 ${e?`bg-gray-700 text-gray-300 hover:bg-gray-600`:`bg-white text-blue-600 hover:bg-blue-50`}`,children:`More`}),le&&(0,$.jsxs)(`div`,{className:`absolute right-0 mt-2 w-48 border rounded shadow p-2 z-50 ${e?`bg-gray-800 border-gray-700`:`bg-white border-gray-300`}`,children:[(0,$.jsxs)(`button`,{onClick:()=>{F(!0),N(!1)},className:`w-full text-left px-2 py-2 rounded hover:opacity-80 flex items-center gap-2 ${e?`text-gray-300 hover:bg-gray-700`:`text-gray-900 hover:bg-gray-100`}`,children:[(0,$.jsx)(hd,{className:`h-4 w-4`}),` Bin`]}),(0,$.jsxs)(`button`,{onClick:()=>{N(!1),pe(!0)},className:`w-full text-left px-2 py-2 rounded hover:opacity-80 flex items-center gap-2 ${e?`text-red-400 hover:bg-gray-700`:`text-red-600 hover:bg-gray-100`}`,children:[(0,$.jsx)(gd,{className:`h-4 w-4`}),` Clean Slate`]})]})]})]}),(0,$.jsx)(`main`,{className:`flex-grow p-6 flex flex-col items-center`,children:(0,$.jsxs)(`div`,{className:`w-full max-w-6xl`,children:[(0,$.jsxs)(`div`,{className:`flex gap-2 mb-4 items-center`,children:[(0,$.jsx)(`input`,{ref:S,type:`text`,value:h,onChange:e=>g(e.target.value),onKeyDown:e=>e.key===`Enter`&&Te(),placeholder:`Add a new task...`,disabled:k,className:`flex-1 border border-gray-300 rounded-xl h-[44px] px-3 cursor-text disabled:opacity-60 ${e?`bg-gray-800 text-white`:`bg-white text-gray-900`}`}),(0,$.jsx)(oH,{onClick:Te,disabled:!h.trim()||k,className:`h-[44px] w-[44px] flex items-center justify-center rounded-lg transition-colors ${!h.trim()||k?`bg-gray-300 text-gray-600 cursor-not-allowed`:`bg-green-500 hover:bg-green-600 text-white`}`,title:`Add Task`,children:k?(0,$.jsx)($u,{height:28,width:28,className:`animate-spin`}):(0,$.jsx)(Vu,{height:28,width:28})})]}),!b&&(0,$.jsx)(`div`,{className:`flex justify-center gap-4 mb-6`,children:[`all`,`todo`,`inprogress`,`completed`].map(t=>(0,$.jsx)(`button`,{onClick:()=>y(t),disabled:k,className:`px-3 py-1 rounded-full border ${_===t?`bg-blue-500 text-white`:e?`border-gray-600 text-gray-400 hover:bg-gray-700`:`border-gray-300 text-gray-600 hover:bg-gray-100`} ${k?`opacity-50 cursor-not-allowed`:``}`,children:t===`todo`?`To-Do`:t===`inprogress`?`In-Progress`:t.charAt(0).toUpperCase()+t.slice(1)},t))}),(0,$.jsxs)(xl,{onDragEnd:e=>{let{source:t,destination:n,draggableId:r}=e;if(!n)return;let i=t.droppableId,a=n.droppableId,s=Number(r);o(e=>{let t=t=>e.filter(e=>e.status===t);if(i===a){let r=i,a=t(r),o=a.find(e=>e.id===s);if(!o)return e;let c=a.filter(e=>e.id!==s);c.splice(n.index,0,o);let l=[`todo`,`inprogress`,`done`],u=[];return l.forEach(t=>{t===r?u.push(...c):u.push(...e.filter(e=>e.status===t))}),u}let r=e.filter(e=>e.status===i&&e.id!==s),o=e.find(e=>e.id===s);if(!o)return e;let c=[...e.filter(e=>e.status===a)];c.splice(n.index,0,{...o,status:a});let l=[`todo`,`inprogress`,`done`],u=[];return l.forEach(t=>{t===i?u.push(...r):t===a?u.push(...c):u.push(...e.filter(e=>e.status===t))}),u})},children:[!b&&(0,$.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[we.length===0&&(0,$.jsx)(`p`,{className:`text-center ${e?`text-gray-500`:`text-gray-400`}`,children:`No tasks to show.`}),_===`all`?we.map(t=>(0,$.jsxs)(`div`,{onClick:()=>!k&&Oe(t),className:`flex items-center justify-between p-3 rounded-xl shadow-sm border transition ${e?`bg-gray-800 border-gray-700 hover:bg-gray-750`:`bg-white border-gray-200 hover:bg-blue-50`} ${k?`opacity-70`:`cursor-pointer`} ${t.status===`done`?e?`bg-gray-700 line-through text-gray-500`:`bg-blue-50 line-through text-gray-500`:``}`,children:[(0,$.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-3`,children:[(0,$.jsx)(`span`,{className:`font-medium break-words`,children:t.text}),(0,$.jsxs)(`select`,{value:t.status,onClick:e=>e.stopPropagation(),onChange:e=>{e.stopPropagation(),Ee(t.id,e.target.value)},disabled:k,className:`text-xs border rounded-md px-2 py-1 cursor-pointer disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 ${e?`bg-gray-700 border-gray-600 text-gray-200`:`bg-white border-blue-200 text-gray-900`}`,children:[(0,$.jsx)(`option`,{value:`todo`,children:`To-Do`}),(0,$.jsx)(`option`,{value:`inprogress`,children:`In-Progress`}),(0,$.jsx)(`option`,{value:`done`,children:`Completed`})]})]}),Array.isArray(t.tags)&&t.tags.length>0&&(0,$.jsx)(`div`,{className:`flex flex-wrap gap-1 mt-2`,children:t.tags.map(e=>(0,$.jsxs)(`span`,{className:`flex items-center gap-1 text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full`,children:[e,(0,$.jsx)(`button`,{onClick:n=>{n.stopPropagation(),Me(t.id,e)},className:`text-blue-500 hover:text-red-500 focus:outline-none`,title:`Remove tag`,children:``})]},e))})]}),(0,$.jsxs)(`div`,{className:`task-actions flex items-center justify-end gap-0.5 flex-nowrap min-w-[72px] shrink-0`,children:[(0,$.jsx)(oH,{disabled:k,className:`text-green-600 cursor-pointer p-1`,onClick:e=>{e.stopPropagation(),Ee(t.id,t.status===`done`?`todo`:`done`)},children:t.status===`done`?(0,$.jsx)(Hu,{className:`h-4 w-4 text-red-500`}):(0,$.jsx)($u,{className:`h-4 w-4 text-green-500`})}),(0,$.jsx)(oH,{disabled:k,className:`p-1`,onClick:e=>{e.stopPropagation(),Ae(t)},children:(0,$.jsx)(pd,{className:`text-blue-500`})}),(0,$.jsx)(oH,{disabled:k,className:`p-1`,onClick:e=>{e.stopPropagation(),De(t.id)},children:(0,$.jsx)(hd,{className:`text-red-500`})})]})]},t.id)):(0,$.jsx)(Su,{droppableId:_,children:t=>(0,$.jsxs)(`div`,{ref:t.innerRef,...t.droppableProps,children:[we.map((t,n)=>(0,$.jsx)(Gl,{draggableId:t.id.toString(),index:n,children:n=>(0,$.jsx)(`div`,{ref:n.innerRef,...n.draggableProps,...n.dragHandleProps,onClick:()=>!k&&Oe(t),children:(0,$.jsxs)(`div`,{className:`flex items-center justify-between p-3 rounded-xl shadow-sm border transition ${e?`bg-gray-800 border-gray-700 hover:bg-gray-750`:`bg-white border-gray-200 hover:bg-blue-50`} ${k?`opacity-70`:`cursor-pointer`} ${t.status===`done`?e?`bg-gray-700 line-through text-gray-500`:`bg-blue-50 line-through text-gray-500`:``}`,children:[(0,$.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-3`,children:[(0,$.jsx)(`span`,{className:`font-medium break-words`,children:t.text}),(0,$.jsxs)(`select`,{value:t.status,onClick:e=>e.stopPropagation(),onChange:e=>{e.stopPropagation(),Ee(t.id,e.target.value)},disabled:k,className:`text-xs border rounded-md px-2 py-1 cursor-pointer disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 ${e?`bg-gray-700 border-gray-600 text-gray-200`:`bg-white border-blue-200 text-gray-900`}`,children:[(0,$.jsx)(`option`,{value:`todo`,children:`To-Do`}),(0,$.jsx)(`option`,{value:`inprogress`,children:`In-Progress`}),(0,$.jsx)(`option`,{value:`done`,children:`Completed`})]})]}),Array.isArray(t.tags)&&t.tags.length>0&&(0,$.jsx)(`div`,{className:`flex flex-wrap gap-1 mt-2`,children:t.tags.map(e=>(0,$.jsxs)(`span`,{className:`flex items-center gap-1 text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full`,children:[e,(0,$.jsx)(`button`,{onClick:n=>{n.stopPropagation(),Me(t.id,e)},className:`text-blue-500 hover:text-red-500 focus:outline-none`,title:`Remove tag`,children:``})]},e))})]}),(0,$.jsxs)(`div`,{className:`task-actions flex items-center justify-end gap-0.5 flex-nowrap min-w-[72px] shrink-0`,children:[(0,$.jsx)(oH,{disabled:k,className:`text-green-600 cursor-pointer p-1`,onClick:e=>{e.stopPropagation(),Ee(t.id,t.status===`done`?`todo`:`done`)},children:t.status===`done`?(0,$.jsx)(Hu,{className:`h-4 w-4 text-red-500`}):(0,$.jsx)($u,{className:`h-4 w-4 text-green-500`})}),(0,$.jsx)(oH,{disabled:k,className:`p-1`,onClick:e=>{e.stopPropagation(),Ae(t)},children:(0,$.jsx)(pd,{className:`text-blue-500`})}),(0,$.jsx)(oH,{disabled:k,className:`p-1`,onClick:e=>{e.stopPropagation(),De(t.id)},children:(0,$.jsx)(hd,{className:`text-red-500`})})]})]})})},t.id.toString())),t.placeholder]})})]}),b&&(0,$.jsx)(`div`,{className:`grid grid-cols-3 gap-3 mt-6`,children:Ce.map(t=>(0,$.jsx)(Su,{droppableId:t.key,children:(n,r)=>(0,$.jsxs)(`div`,{ref:n.innerRef,...n.droppableProps,className:`rounded-xl p-3 shadow-inner min-h-[200px] transition ${e?r.isDraggingOver?`bg-gray-700`:`bg-gray-800`:r.isDraggingOver?`bg-blue-50`:`bg-gray-50`}`,children:[(0,$.jsx)(`h2`,{className:`text-lg font-semibold mb-2 text-center ${e?`text-gray-300`:`text-blue-500`}`,children:t.label}),a.filter(e=>e.status===t.key).length===0&&(0,$.jsx)(`p`,{className:`text-center text-sm ${e?`text-gray-500`:`text-gray-400`}`,children:`No tasks`}),a.filter(e=>e.status===t.key).map((n,r)=>(0,$.jsx)(Gl,{draggableId:n.id.toString(),index:r,children:(r,i)=>(0,$.jsx)(`div`,{ref:r.innerRef,...r.draggableProps,...r.dragHandleProps,onClick:()=>!k&&Oe(n),className:`p-3 mb-2 rounded-lg border transition cursor-pointer ${e?`bg-gray-700 border-gray-600 hover:bg-gray-650`:`bg-white border-gray-200 hover:bg-blue-50`} ${i.isDragging?e?`shadow-lg bg-gray-600`:`shadow-lg bg-blue-100`:``}`,children:(0,$.jsxs)(`div`,{className:`flex items-center justify-between gap-2`,children:[(0,$.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,$.jsx)(`span`,{className:`font-medium break-words ${e?`text-gray-200`:`text-gray-900`}`,children:n.text}),Array.isArray(n.tags)&&n.tags.length>0&&(0,$.jsx)(`div`,{className:`flex flex-wrap gap-1 mt-2`,children:n.tags.map(t=>(0,$.jsxs)(`span`,{className:`flex items-center gap-1 text-xs px-2 py-0.5 rounded-full ${e?`bg-gray-600 text-gray-300`:`bg-blue-100 text-blue-700`}`,children:[t,(0,$.jsx)(`button`,{onClick:e=>{e.stopPropagation(),Me(n.id,t)},className:`hover:text-red-500 focus:outline-none ${e?`text-gray-400`:`text-blue-500`}`,title:`Remove tag`,children:``})]},t))})]}),(0,$.jsxs)(`div`,{className:`task-actions flex items-center justify-end gap-0.5 flex-nowrap min-w-[88px] shrink-0`,children:[t.key!==`todo`&&(0,$.jsx)(oH,{disabled:k,onClick:e=>{e.stopPropagation(),Ee(n.id,t.key===`inprogress`?`todo`:`inprogress`)},className:`cursor-pointer p-1 ${e?`text-gray-400 hover:text-gray-300 hover:bg-gray-600`:`text-blue-500 hover:text-blue-700 hover:bg-blue-50`}`,title:`Move Left`,children:(0,$.jsx)(Ru,{className:`h-5 w-5`})}),t.key!==`done`&&(0,$.jsx)(oH,{disabled:k,onClick:e=>{e.stopPropagation(),Ee(n.id,t.key===`todo`?`inprogress`:`done`)},className:`cursor-pointer p-1 ${e?`text-gray-400 hover:text-gray-300 hover:bg-gray-600`:`text-green-500 hover:text-green-700 hover:bg-green-50`}`,title:`Move Right`,children:(0,$.jsx)(zu,{className:`h-5 w-5`})}),(0,$.jsx)(oH,{disabled:k,onClick:e=>{e.stopPropagation(),Ae(n)},className:`cursor-pointer p-1 ${e?`text-gray-400 hover:text-gray-300 hover:bg-gray-600`:`text-blue-500 hover:text-blue-700 hover:bg-blue-50`}`,title:`Add Tag`,children:(0,$.jsx)(pd,{className:`h-5 w-5`})}),(0,$.jsx)(oH,{disabled:k,onClick:e=>{e.stopPropagation(),De(n.id)},className:`cursor-pointer p-1 ${e?`text-gray-400 hover:text-red-400 hover:bg-gray-600`:`text-red-500 hover:bg-red-50`}`,title:`Delete Task`,children:(0,$.jsx)(hd,{className:`h-5 w-5`})})]})]})})},n.id.toString())),n.placeholder]})},t.key))})]})]})}),ie&&(0,$.jsx)(`div`,{className:`fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 ${e?`bg-black/70`:`bg-white/70`}`,children:(0,$.jsxs)(`div`,{className:`p-6 rounded-xl w-full max-w-3xl shadow-lg border ${e?`bg-gray-800 border-gray-700`:`bg-white border-gray-200`}`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,$.jsx)(`h2`,{className:`text-xl font-semibold ${e?`text-gray-200`:`text-blue-500`}`,children:`Daily Update`}),(0,$.jsx)(`button`,{onClick:()=>ae(!1),children:(0,$.jsx)(Hu,{className:`w-6 h-6 ${e?`text-gray-400 hover:text-gray-300`:`text-gray-500 hover:text-gray-700`}`})})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-2 gap-6`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h3`,{className:`text-lg font-medium mb-2 ${e?`text-gray-300`:`text-blue-600`}`,children:`In-Progress`}),a.filter(e=>e.status===`inprogress`).length===0?(0,$.jsx)(`p`,{className:`italic text-gray-500`,children:`No tasks currently in progress.`}):a.filter(e=>e.status===`inprogress`).map(t=>(0,$.jsx)(`div`,{className:`border rounded-md p-2 mb-2 ${e?`border-gray-600 bg-gray-700 text-gray-200`:`border-blue-200 bg-blue-50 text-gray-900`}`,children:t.text},t.id))]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`h3`,{className:`text-lg font-medium mb-2 ${e?`text-gray-300`:`text-green-600`}`,children:`Completed (since yesterday)`}),a.filter(e=>e.status===`done`&&e.completedAt&&new Date(e.completedAt)>new Date(Date.now()-1440*60*1e3)).length===0?(0,$.jsx)(`p`,{className:`italic text-gray-500`,children:`No tasks completed since yesterday.`}):a.filter(e=>e.status===`done`&&e.completedAt&&new Date(e.completedAt)>new Date(Date.now()-1440*60*1e3)).map(t=>(0,$.jsx)(`div`,{className:`border rounded-md p-2 mb-2 ${e?`border-gray-600 bg-gray-700 text-gray-200`:`border-green-200 bg-green-50 text-gray-900`}`,children:t.text},t.id))]})]}),(0,$.jsx)(`div`,{className:`flex justify-end gap-2 mt-5`,children:(0,$.jsx)(oH,{onClick:Ne,className:`${A?`bg-green-500 text-white`:`bg-blue-500 hover:bg-blue-600 text-white`}`,children:A?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Nu,{className:`h-4 w-4`}),` Copied!`]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Ku,{className:`h-4 w-4`}),` Copy to Clipboard`]})})})]})}),w&&(0,$.jsx)(`div`,{className:`fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 ${e?`bg-black/70`:`bg-white/70`}`,children:(0,$.jsxs)(`div`,{className:`p-6 rounded-xl w-full max-w-lg shadow-lg ${e?`bg-gray-800 border border-gray-700`:`bg-white`}`,children:[(0,$.jsx)(`input`,{value:w.text,onChange:e=>T(t=>({...t,text:e.target.value})),className:`w-full border rounded px-3 py-2 mb-3 text-lg font-semibold ${e?`bg-gray-700 border-gray-600 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsx)(`div`,{className:e?`dark-mode`:``,children:(0,$.jsx)(Jw,{theme:`snow`,value:E,onChange:D,placeholder:`Add formatted details or paste screenshots...`,className:`rounded-lg border ${e?`border-gray-600`:`border-gray-300`}`})}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2 mt-4`,children:[(0,$.jsx)(oH,{variant:`secondary`,onClick:()=>T(null),disabled:k,className:`cursor-pointer disabled:opacity-50 ${e?`bg-gray-700 hover:bg-gray-600 text-gray-200`:`bg-gray-200 hover:bg-gray-300 text-gray-700`}`,children:`Cancel`}),(0,$.jsx)(oH,{onClick:ke,disabled:k,className:`bg-blue-500 hover:bg-blue-600 cursor-pointer disabled:opacity-50`,children:k?(0,$.jsx)($u,{className:`mr-2 h-4 w-4 animate-spin`}):`Save`})]})]})}),te&&(0,$.jsx)(`div`,{className:`fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 ${e?`bg-black/70`:`bg-white/70`}`,children:(0,$.jsxs)(`div`,{className:`p-6 rounded-xl w-full max-w-sm shadow-lg ${e?`bg-gray-800 border border-gray-700`:`bg-white`}`,children:[(0,$.jsx)(`h2`,{className:`text-lg font-semibold mb-3 ${e?`text-gray-200`:`text-blue-500`}`,children:`Add Tag`}),(0,$.jsx)(`input`,{type:`text`,value:O,onChange:e=>ee(e.target.value),onKeyDown:e=>e.key===`Enter`&&O.trim()&&je(O),placeholder:`Type or select a tag...`,disabled:k,className:`border rounded-lg w-full p-2 mb-3 disabled:opacity-50 ${e?`bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400`:`border-gray-300 bg-white text-gray-900 placeholder-gray-500`}`}),(0,$.jsx)(`div`,{className:`flex flex-wrap gap-2 mb-3`,children:l.filter(e=>e.toLowerCase().includes(O.toLowerCase())).map(t=>(0,$.jsx)(`button`,{onClick:()=>je(t),disabled:k,className:`text-sm px-2 py-1 rounded-full hover:opacity-80 cursor-pointer disabled:opacity-50 ${e?`bg-gray-700 text-gray-300 border border-gray-600`:`bg-blue-100 text-blue-600`}`,children:t},t))}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(oH,{variant:`secondary`,onClick:()=>ne(null),disabled:k,className:`cursor-pointer disabled:opacity-50 ${e?`bg-gray-700 hover:bg-gray-600 text-gray-200`:`bg-gray-200 hover:bg-gray-300 text-gray-700`}`,children:`Cancel`}),(0,$.jsx)(oH,{onClick:()=>O.trim()&&je(O),disabled:k||!O.trim(),className:`bg-blue-500 hover:bg-blue-600 cursor-pointer disabled:opacity-50`,children:k?(0,$.jsx)($u,{className:`mr-2 h-4 w-4 animate-spin`}):`Save Tag`})]})]})}),P&&(0,$.jsx)(`div`,{className:`fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 ${e?`bg-black/70`:`bg-white/70`}`,children:(0,$.jsxs)(`div`,{className:`p-6 rounded-xl w-full max-w-3xl shadow-lg border ${e?`bg-gray-800 border-gray-700`:`bg-white border-gray-200`}`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,$.jsx)(`h2`,{className:`text-xl font-semibold ${e?`text-gray-200`:`text-blue-500`}`,children:`Bin (deleted last 24h)`}),(0,$.jsx)(`button`,{onClick:()=>F(!1),children:(0,$.jsx)(Hu,{className:`w-6 h-6 ${e?`text-gray-400 hover:text-gray-300`:`text-gray-500 hover:text-gray-700`}`})})]}),(0,$.jsx)(`div`,{children:Le.length===0?(0,$.jsx)(`p`,{className:`italic text-gray-500`,children:`No recently deleted tasks.`}):(0,$.jsx)(`div`,{className:`space-y-2`,children:Le.map(t=>(0,$.jsxs)(`label`,{className:`flex items-center gap-2 border rounded p-2 ${e?`border-gray-700 hover:bg-gray-700`:`border-gray-300 hover:bg-gray-50`}`,children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:ue.has(t.id),onChange:()=>{let e=new Set(ue);e.has(t.id)?e.delete(t.id):e.add(t.id),de(e)}}),(0,$.jsxs)(`div`,{className:`flex-1 ${e?`text-gray-200`:`text-gray-900`}`,children:[t.text,` `,(0,$.jsxs)(`div`,{className:`text-xs text-gray-500`,children:[`Deleted `,new Date(t.deletedAt).toLocaleString()]})]}),(0,$.jsx)(`button`,{onClick:()=>Ie([t.id]),className:`px-2 py-1 ${e?`text-blue-400 hover:text-blue-300`:`text-blue-600 hover:text-blue-700`}`,children:`Restore`})]},t.id))})}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2 mt-4`,children:[(0,$.jsx)(oH,{onClick:()=>{let e=Array.from(ue);Ie(e)},children:`Restore Selected`}),(0,$.jsx)(oH,{variant:`secondary`,onClick:()=>F(!1),className:`${e?`bg-gray-700 hover:bg-gray-600 text-gray-200`:`bg-gray-200 hover:bg-gray-300 text-gray-700`}`,children:`Close`})]})]})}),fe&&(0,$.jsx)(`div`,{className:`fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 ${e?`bg-black/70`:`bg-white/70`}`,children:(0,$.jsxs)(`div`,{className:`p-6 rounded-xl w-full max-w-sm shadow-lg border ${e?`bg-gray-800 border-gray-700`:`bg-white border-gray-200`}`,children:[(0,$.jsx)(`h2`,{className:`text-xl font-semibold mb-4 ${e?`text-gray-200`:`text-blue-500`}`,children:`Clear All Tasks?`}),(0,$.jsx)(`p`,{className:`mb-6 ${e?`text-gray-400`:`text-gray-700`}`,children:`This will permanently delete all tasks from your board. This action cannot be undone.`}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(oH,{variant:`secondary`,onClick:()=>pe(!1),className:`${e?`bg-gray-700 hover:bg-gray-600 text-gray-200`:`bg-gray-200 hover:bg-gray-300 text-gray-700`}`,children:`Cancel`}),(0,$.jsx)(oH,{onClick:()=>{o([]),pe(!1)},className:`bg-red-500 hover:bg-red-600 text-white`,children:`Clear All`})]})]})}),ge&&be&&(0,$.jsx)(`div`,{className:`fixed inset-0 backdrop-blur-sm flex items-center justify-center z-50 ${e?`bg-black/70`:`bg-white/70`}`,children:(0,$.jsxs)(`div`,{className:`p-6 rounded-xl w-full max-w-3xl shadow-lg border ${e?`bg-gray-800 border-gray-700`:`bg-white border-gray-200`}`,children:[(0,$.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,$.jsx)(`h2`,{className:`text-xl font-semibold ${e?`text-gray-200`:`text-purple-500`}`,children:`Weekly Summary`}),(0,$.jsx)(`button`,{onClick:()=>_e(!1),children:(0,$.jsx)(Hu,{className:`w-6 h-6 ${e?`text-gray-400 hover:text-gray-300`:`text-gray-500 hover:text-gray-700`}`})})]}),(0,$.jsx)(`div`,{className:`mb-6`,children:(()=>{let t=xe(),n=t.length;return(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`p`,{className:`text-lg font-medium mb-4 ${e?`text-gray-300`:`text-gray-700`}`,children:[`You completed `,n,` `,n===1?`task`:`tasks`,` this week.`]}),t.length>0?(0,$.jsx)(`div`,{className:`space-y-2`,children:t.map(t=>(0,$.jsx)(`div`,{className:`border rounded-md p-2 ${e?`border-gray-600 bg-gray-700 text-gray-200`:`border-purple-200 bg-purple-50 text-gray-900`}`,children:t.text},t.id))}):(0,$.jsx)(`p`,{className:`italic text-gray-500`,children:`No tasks completed this week.`})]})})()}),(0,$.jsx)(`div`,{className:`flex justify-end gap-2`,children:(0,$.jsx)(oH,{onClick:Se,className:`${A?`bg-green-500 text-white`:`bg-purple-500 hover:bg-purple-600 text-white`}`,children:A?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Nu,{className:`h-4 w-4`}),` Copied!`]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Ku,{className:`h-4 w-4`}),` Copy to Clipboard`]})})})]})})]})}var cH=[`Dev1`,`Dev2`,`Dev3`,`Test`,`Staging`,`Production`];function lH(){return Math.random().toString(36).slice(2,9)}function uH(){let e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,`0`),r=String(e.getDate()).padStart(2,`0`);return`${t}-${n}-${r}`}function dH(e,t,n){let r=0,i=e.map(e=>{if(e.environment!==t)return e;let i=n[r];return r+=1,i||e});return r<n.length&&i.push(...n.slice(r)),i}function fH(e,t,n,r){let i=e.filter(e=>e.environment===t),a=i.findIndex(e=>e.id===n);if(a===-1)return e;let[o]=i.splice(a,1);if(r){let e=i.findIndex(e=>e.id===r);e===-1?i.push(o):i.splice(e,0,o)}else i.push(o);return dH(e,t,i)}function pH(e,t,n,r,i){let a=e.filter(e=>e.environment===t),o=e.filter(e=>e.environment===n),s=a.findIndex(e=>e.id===r);if(s===-1)return e;let[c]=a.splice(s,1),l={...c,environment:n,history:[...c.history||[],{env:n,at:Date.now()}]};if(i){let e=o.findIndex(e=>e.id===i);e===-1?o.push(l):o.splice(e,0,l)}else o.push(l);let u=dH(e,t,a);return u=dH(u,n,o),u}function mH(){let{darkMode:e}=(0,v.useContext)(dU)||{},{data:t,loading:n,updateData:r}=eH(`environments`,[]),i=e=>{if(typeof e==`function`){let n=e(t||[]);r(n)}else r(e)},[a,o]=(0,v.useState)(``),[s,c]=(0,v.useState)(null),l=(0,v.useRef)(null),[u,d]=(0,v.useState)(null),[f,p]=(0,v.useState)(null),[m,h]=(0,v.useState)(!1),[g,_]=(0,v.useState)(null),y=(0,v.useRef)({}),[b,x]=(0,v.useState)(()=>cH.reduce((e,t)=>({...e,[t]:!1}),{})),[S,C]=(0,v.useState)(()=>cH.reduce((e,t)=>({...e,[t]:!1}),{})),[w,T]=(0,v.useState)(!1),[E,D]=(0,v.useState)(``),[O,ee]=(0,v.useState)(``),[te,ne]=(0,v.useState)(!1),[k,re]=(0,v.useState)([]),[ie,ae]=(0,v.useState)(``),[A,j]=(0,v.useState)(``),[oe,se]=(0,v.useState)(``),ce=[{id:`stream-workmobile`,name:`WorkMobile`,color:`#7DD3FC`},{id:`stream-rlb`,name:`RLB`,color:`#1D4ED8`}],{data:M,updateData:le}=$V(`release-schedule`,`streams`,ce),{data:N,updateData:P}=$V(`release-schedule`,`releases`,[]),F=(M||[]).length?M:ce,ue=N||[],de=e=>{if(typeof e==`function`){let t=e(ue);P(t)}else P(e)};(0,v.useEffect)(()=>{l.current?.focus()},[]),(0,v.useEffect)(()=>{g&&requestAnimationFrame(()=>{y.current[g]?.focus()})},[g]);let fe=e=>{c({id:lH(),text:e})},pe=e=>{let t={id:s.id,name:s.text,environment:e,details:``,history:[{env:e,at:Date.now()}]};i(e=>[t,...e]),c(null),o(``),l.current?.focus()},me=e=>{e.key===`Enter`&&a.trim()&&fe(a.trim())},he=e=>{if(!e.destination)return;let{source:n,destination:r,draggableId:a}=e,o=n.droppableId,s=r.droppableId;He.filter(e=>e.environment===o);let c=He.filter(e=>e.environment===s)[r.index]?.id||null;if(o===s){i(e=>fH(e,o,a,c));return}if(i(e=>pH(e,o,s,a,c)),o===`Staging`&&s===`Production`){let e=t.find(e=>e.id===a);e&&(re([{id:e.id,name:e.name}]),ae(``),j(uH()),se(F[0]?.id||``),ne(!0))}},ge=e=>{let t={id:lH(),name:``,environment:e,details:``,history:[{env:e,at:Date.now()}]};i(n=>{let r=n.findIndex(t=>t.environment===e);if(r===-1)return[t,...n];let i=[...n];return i.splice(r,0,t),i}),x(t=>({...t,[e]:!1})),_(t.id)},_e=(e,t)=>{i(n=>n.map(n=>n.id===e?{...n,name:t}:n))},ve=(e,t)=>{let n=t.trim();i(n?t=>t.map(t=>t.id===e?{...t,name:n}:t):t=>t.filter(t=>t.id!==e)),_(null)},ye=()=>{xe(!0)},[be,xe]=(0,v.useState)(!1),[Se,Ce]=(0,v.useState)(``),[we,Te]=(0,v.useState)(``),[Ee,De]=(0,v.useState)(new Set),Oe=e=>{De(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},ke=()=>{if(!Se||!we||Se===we||Ee.size===0)return;let e=Array.from(Ee);i(t=>t.map(t=>e.includes(t.id)?{...t,environment:we,history:[...t.history||[],{env:we,at:Date.now()}]}:t)),xe(!1),Ce(``),Te(``),De(new Set)},Ae=()=>{let e=ie.trim();if(!e||!A)return;let t=k.length>0?[{system:`Website`,features:k.map(e=>e.name),bugs:[]}]:[],n={id:lH(),name:e,date:A,streamId:oe,status:`Confirmed`,versions:[],contents:t,attachments:[],linkedCardIds:k.map(e=>e.id),createdAt:Date.now()};de(e=>[n,...e]);let r=k.map(e=>e.id);i(e=>e.map(e=>r.includes(e.id)?{...e,releaseId:n.id}:e)),ne(!1),re([])},je=()=>{let e=k.length>0?[{system:`Website`,features:k.map(e=>e.name),bugs:[]}]:[],t={id:lH(),name:ie.trim()||`Untitled Release`,date:A||uH(),streamId:oe,status:`Draft`,versions:[],contents:e,attachments:[],linkedCardIds:k.map(e=>e.id),createdAt:Date.now()};de(e=>[t,...e]);let n=k.map(e=>e.id);i(e=>e.map(e=>n.includes(e.id)?{...e,releaseId:t.id}:e)),ne(!1),re([])},Me=e?`text-white`:`text-gray-900`,Ne=e?`rounded-xl p-3 shadow-inner transition bg-gray-800`:`rounded-xl p-3 shadow-inner transition bg-gray-50`,Pe=e?`text-lg font-semibold mb-2 text-gray-300`:`text-lg font-semibold mb-2 text-blue-500`,Fe=e?`bg-gray-800 border-gray-700 text-gray-100 placeholder:text-gray-500`:`bg-white border-gray-300 text-gray-900 placeholder:text-gray-400`,Ie=e?`p-3 rounded-lg border transition cursor-pointer bg-gray-700 border-gray-600 hover:bg-gray-650 text-gray-200`:`p-3 rounded-lg border transition cursor-pointer bg-white border-gray-200 hover:bg-blue-50 text-gray-900`,Le=e?`bg-gray-800 text-gray-100`:`bg-white text-gray-900`,Re=e?`bg-gray-800 border-gray-700`:`bg-white border-gray-200`,ze=e=>{x(t=>({...t,[e]:!t[e]}))},Be=e=>{C(t=>({...t,[e]:!t[e]}))},Ve=cH.every(e=>b[e]),He=(t||[]).filter(e=>{let t=E?e.name.toLowerCase().includes(E.toLowerCase()):!0,n=O?e.environment===O:!0;return t&&n}),Ue=()=>{let e=[...t||[]].sort((e,t)=>e.environment.localeCompare(t.environment)),n=e=>`"${String(e).replace(/"/g,`""`)}"`,r=[[`Feature`,`Environment`],...e.map(e=>[e.name,e.environment])].map(e=>e.map(n).join(`,`)).join(`
`),i=new Date,a=String(i.getDate()).padStart(2,`0`),o=String(i.getMonth()+1).padStart(2,`0`),s=String(i.getFullYear()),c=`Environments_${a}${o}${s}.csv`,l=new Blob([r],{type:`text/csv;charset=utf-8;`}),u=URL.createObjectURL(l),d=document.createElement(`a`);d.href=u,d.download=c,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u)},We=()=>{D(``),ee(``)},Ge=n=>{let r=t.filter(e=>e.environment===n),i=He.filter(e=>e.environment===n),a=!!b[n],o=!!S[n],s=o?i:i.slice(0,5),c=e?`text-sm text-gray-500`:`text-sm text-gray-400`,l=e?`text-gray-500`:`text-gray-400`,u=a?`min-h-0`:`min-h-[200px]`;return(0,$.jsx)(Su,{droppableId:n,isDropDisabled:a,children:t=>(0,$.jsxs)(`div`,{ref:t.innerRef,...t.droppableProps,className:`${Ne} ${u}`,children:[(0,$.jsxs)(`div`,{className:`w-full flex items-center justify-between`,children:[(0,$.jsxs)(`button`,{type:`button`,onClick:()=>ze(n),className:`flex items-center justify-start gap-2 ${Pe}`,"aria-expanded":!a,"aria-controls":`env-panel-${n}`,children:[a?(0,$.jsx)(Iu,{className:`h-5 w-5 ${l}`}):(0,$.jsx)(Pu,{className:`h-5 w-5 ${l}`}),(0,$.jsx)(`span`,{children:n}),(0,$.jsxs)(`span`,{className:c,children:[`(`,r.length,`)`]}),r.length>5&&(0,$.jsx)(`button`,{type:`button`,onClick:e=>{e.stopPropagation(),Be(n)},className:`text-xs underline ${e?`text-gray-400`:`text-gray-500`}`,children:o?`Show less`:`Show all`})]}),(0,$.jsx)(`button`,{type:`button`,onClick:()=>ge(n),className:`p-1 rounded ${e?`text-gray-400 hover:text-gray-200`:`text-blue-500 hover:text-blue-700`}`,title:`Add work`,children:(0,$.jsx)(Vu,{className:`h-4 w-4`})})]}),!a&&(0,$.jsxs)(`div`,{id:`env-panel-${n}`,className:`flex flex-col gap-2 pr-1 ${o?``:`max-h-[320px] overflow-y-auto`}`,children:[s.length===0&&(0,$.jsx)(`p`,{className:`text-center text-sm ${e?`text-gray-500`:`text-gray-400`}`,children:`No work`}),s.map((t,n)=>(0,$.jsx)(Gl,{draggableId:t.id,index:n,children:n=>(0,$.jsxs)(`div`,{ref:n.innerRef,...n.draggableProps,...n.dragHandleProps,className:`flex items-center justify-between ${Ie}`,onClick:()=>{g!==t.id&&d(t)},children:[g===t.id?(0,$.jsx)(`input`,{value:t.name,onChange:e=>_e(t.id,e.target.value),onBlur:e=>ve(t.id,e.target.value),onKeyDown:e=>{e.key===`Enter`&&(e.preventDefault(),ve(t.id,e.currentTarget.value))},ref:e=>{e?y.current[t.id]=e:delete y.current[t.id]},className:`flex-1 border rounded px-2 py-1 ${Fe}`,placeholder:`Work name`}):(0,$.jsxs)(`div`,{className:`flex items-center gap-2 flex-1`,children:[(0,$.jsx)(`span`,{className:`font-medium`,children:t.name}),t.releaseId&&(0,$.jsx)(`span`,{className:`px-2 py-0.5 text-xs rounded ${e?`bg-green-900 text-green-200`:`bg-green-100 text-green-800`}`,children:`Released`})]}),(0,$.jsx)(`button`,{onClick:e=>{e.stopPropagation(),p(t),h(!0)},title:`Delete`,className:`p-1 rounded ${e?`text-gray-400 hover:text-red-400 hover:bg-gray-600`:`text-red-500 hover:bg-red-50`}`,children:(0,$.jsx)(hd,{className:`h-5 w-5`})})]})},t.id)),t.placeholder]})]})},n)};return(0,$.jsxs)(`div`,{className:`w-full ${Me}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 mb-5`,children:[(0,$.jsx)(`input`,{ref:l,value:a,onChange:e=>o(e.target.value),onKeyDown:me,placeholder:`Add a new piece of work...`,className:`flex-1 border rounded px-3 py-2 ${Fe}`}),(0,$.jsxs)(`button`,{onClick:()=>a.trim()&&fe(a.trim()),className:`px-3 py-2 bg-blue-500 text-white rounded flex items-center gap-2`,children:[(0,$.jsx)(Vu,{className:`h-4 w-4`}),`Add`]}),(0,$.jsxs)(`button`,{onClick:ye,className:`px-3 py-2 bg-emerald-500 text-white rounded flex items-center gap-2`,children:[(0,$.jsx)(rd,{className:`h-4 w-4`}),`Merge`]}),(0,$.jsxs)(`button`,{onClick:()=>T(e=>!e),className:`px-3 py-2 rounded flex items-center gap-2 ${e?`bg-gray-700 text-gray-100`:`bg-gray-100 text-gray-700`}`,children:[(0,$.jsx)(ud,{className:`h-4 w-4`}),`Search`]}),(0,$.jsxs)(`button`,{onClick:Ue,className:`px-3 py-2 rounded flex items-center gap-2 ${e?`bg-gray-700 text-gray-100`:`bg-gray-100 text-gray-700`}`,children:[(0,$.jsx)(qu,{className:`h-4 w-4`}),`Export`]})]}),(w||E||O)&&(0,$.jsx)(`div`,{className:`p-4 border rounded mb-4 ${Re}`,children:(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-3 items-center`,children:[(0,$.jsx)(`input`,{value:E,onChange:e=>D(e.target.value),placeholder:`Search features...`,className:`flex-1 border rounded px-3 py-2 ${Fe}`}),(0,$.jsxs)(`select`,{value:O,onChange:e=>ee(e.target.value),className:`border rounded px-3 py-2 ${Fe}`,children:[(0,$.jsx)(`option`,{value:``,children:`All environments`}),cH.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]}),(0,$.jsx)(`button`,{onClick:We,className:`px-3 py-2 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Clear`})]})}),s&&(0,$.jsxs)(`div`,{className:`p-4 border rounded mb-4 ${Re}`,children:[(0,$.jsxs)(`div`,{className:`mb-2`,children:[`Choose environment for `,(0,$.jsx)(`strong`,{children:s.text})]}),(0,$.jsxs)(`div`,{className:`flex gap-2 flex-wrap`,children:[cH.map(t=>(0,$.jsx)(`button`,{onClick:()=>pe(t),className:`px-3 py-1 border rounded ${e?`border-slate-700 hover:border-slate-500`:`border-slate-300 hover:border-slate-400`}`,children:t},t)),(0,$.jsx)(`button`,{onClick:()=>{c(null),l.current?.focus()},className:`px-3 py-1 border rounded ${e?`border-slate-700 hover:border-slate-500`:`border-slate-300 hover:border-slate-400`}`,children:`Cancel`})]})]}),(0,$.jsx)(xl,{onDragEnd:he,children:(0,$.jsxs)(`div`,{className:`flex flex-col ${Ve?`gap-3`:`gap-6`}`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4`,children:[Ge(`Dev1`),Ge(`Dev2`),Ge(`Dev3`)]}),!Ve&&(0,$.jsx)(`div`,{className:`flex justify-center`,children:(0,$.jsx)(Pu,{className:`h-6 w-6 ${e?`text-slate-500`:`text-slate-400`}`})}),(0,$.jsx)(`div`,{className:`flex justify-center`,children:(0,$.jsx)(`div`,{className:`w-full md:w-[70%] lg:w-[60%]`,children:Ge(`Test`)})}),!Ve&&(0,$.jsx)(`div`,{className:`flex justify-center`,children:(0,$.jsx)(Pu,{className:`h-6 w-6 ${e?`text-slate-500`:`text-slate-400`}`})}),(0,$.jsx)(`div`,{className:`flex justify-center`,children:(0,$.jsx)(`div`,{className:`w-full md:w-[65%] lg:w-[55%]`,children:Ge(`Staging`)})}),!Ve&&(0,$.jsx)(`div`,{className:`flex justify-center`,children:(0,$.jsx)(Pu,{className:`h-6 w-6 ${e?`text-slate-500`:`text-slate-400`}`})}),(0,$.jsx)(`div`,{className:`flex justify-center`,children:(0,$.jsx)(`div`,{className:`w-full md:w-[60%] lg:w-[50%]`,children:Ge(`Production`)})})]})}),be&&(0,$.jsx)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,children:(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-2xl ${Le}`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold mb-2`,children:`Merge Work`}),(0,$.jsxs)(`div`,{className:`flex gap-2 mb-3`,children:[(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`label`,{className:`block text-sm`,children:`From`}),(0,$.jsxs)(`select`,{value:Se,onChange:e=>{Ce(e.target.value),De(new Set)},className:`w-full border p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 ${e?`bg-slate-900 border-slate-700 text-slate-100`:`bg-white border-slate-300`}`,children:[(0,$.jsx)(`option`,{value:``,children:`Select environment`}),cH.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]})]}),(0,$.jsxs)(`div`,{className:`flex-1`,children:[(0,$.jsx)(`label`,{className:`block text-sm`,children:`To`}),(0,$.jsxs)(`select`,{value:we,onChange:e=>Te(e.target.value),className:`w-full border p-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 ${e?`bg-slate-900 border-slate-700 text-slate-100`:`bg-white border-slate-300`}`,children:[(0,$.jsx)(`option`,{value:``,children:`Select environment`}),cH.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))]})]})]}),(0,$.jsxs)(`div`,{className:`mb-3`,children:[(0,$.jsxs)(`h4`,{className:`font-semibold`,children:[`Items in `,Se||`...`]}),(0,$.jsx)(`div`,{className:`max-h-40 overflow-auto border rounded p-2 ${e?`border-slate-700`:`border-slate-300`}`,children:!Se||t.filter(e=>e.environment===Se).length===0?(0,$.jsx)(`div`,{className:`text-sm text-gray-500`,children:`No items`}):t.filter(e=>e.environment===Se).map(e=>(0,$.jsxs)(`label`,{className:`flex items-center gap-2 py-1`,children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:Ee.has(e.id),onChange:()=>Oe(e.id)}),(0,$.jsx)(`span`,{children:e.name})]},e.id))})]}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>{xe(!1),De(new Set)},className:`px-3 py-1 border rounded ${e?`border-slate-700`:`border-slate-300`}`,children:`Cancel`}),(0,$.jsx)(`button`,{disabled:!Se||!we||Se===we||Ee.size===0,onClick:ke,className:`px-3 py-1 rounded ${!Se||!we||Se===we||Ee.size===0?`bg-gray-200 text-gray-500`:`bg-blue-500 text-white`}`,children:`Merge`})]})]})}),u&&(0,$.jsx)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,children:(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-2xl ${Le}`,children:[(0,$.jsx)(`input`,{value:u.name,onChange:e=>d(t=>({...t,name:e.target.value})),className:`w-full border p-2 mb-2 ${e?`bg-slate-900 border-slate-700 text-slate-100`:`bg-white border-slate-300`}`}),(0,$.jsx)(Jw,{theme:`snow`,value:u.details,onChange:e=>d(t=>({...t,details:e}))}),(0,$.jsxs)(`div`,{className:`mt-3`,children:[(0,$.jsx)(`h4`,{className:`font-semibold`,children:`History`}),(0,$.jsx)(`ol`,{className:`text-sm`,children:(u.history||[]).map((e,t)=>(0,$.jsxs)(`li`,{children:[new Date(e.at).toLocaleString(),`  `,e.env]},t))})]}),(0,$.jsxs)(`div`,{className:`flex justify-between items-center gap-2 mt-3`,children:[(0,$.jsx)(`div`,{children:(0,$.jsx)(`button`,{onClick:()=>{p(u),h(!0)},className:`px-3 py-1 border rounded text-red-500 ${e?`border-slate-700`:`border-slate-300`}`,children:`Delete`})}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>d(null),className:`px-3 py-1 border rounded ${e?`border-slate-700`:`border-slate-300`}`,children:`Close`}),(0,$.jsx)(`button`,{onClick:()=>{i(e=>e.map(e=>e.id===u.id?{...u,history:e.history}:e)),d(null)},className:`px-3 py-1 bg-blue-500 text-white rounded`,children:`Save`})]})]})]})}),m&&f&&(0,$.jsx)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,children:(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-md ${Le}`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold mb-2`,children:`Confirm Delete`}),(0,$.jsx)(`p`,{className:`mb-4`,children:`Are you sure you want to delete this work item?`}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>{h(!1),p(null)},className:`px-3 py-1 border rounded ${e?`border-slate-700`:`border-slate-300`}`,children:`Cancel`}),(0,$.jsx)(`button`,{onClick:()=>{i(e=>e.filter(e=>e.id!==f.id)),h(!1),p(null),d(null)},className:`px-3 py-1 bg-red-600 text-white rounded`,children:`Delete`})]})]})}),te&&(0,$.jsx)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,children:(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-2xl ${Le}`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold mb-3`,children:`New Release`}),(0,$.jsxs)(`p`,{className:`mb-4 text-sm ${e?`text-gray-400`:`text-gray-600`}`,children:[`The following `,k.length,` `,k.length===1?`item has`:`items have`,` been moved to Production. Create a release record?`]}),(0,$.jsxs)(`div`,{className:"mb-4 p-3 rounded border ${darkMode ? 'border-gray-700 bg-gray-900' : 'border-gray-300 bg-gray-50'}",children:[(0,$.jsx)(`h4`,{className:`font-semibold mb-2 text-sm`,children:`Release Contents`}),(0,$.jsx)(`ul`,{className:`text-sm space-y-1`,children:k.map(t=>(0,$.jsxs)(`li`,{className:`flex items-start gap-2`,children:[(0,$.jsx)(`span`,{className:e?`text-gray-400`:`text-gray-600`,children:``}),(0,$.jsx)(`span`,{children:t.name})]},t.id))})]}),(0,$.jsxs)(`div`,{className:`mb-4 space-y-3`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-semibold mb-1`,children:`Release Name`}),(0,$.jsx)(`input`,{value:ie,onChange:e=>ae(e.target.value),placeholder:`e.g., Sprint 24 Release`,className:`w-full border rounded px-3 py-2 ${Fe}`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-semibold mb-1`,children:`Release Date`}),(0,$.jsx)(`input`,{type:`date`,value:A,onChange:e=>j(e.target.value),className:`w-full border rounded px-3 py-2 ${Fe}`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-semibold mb-1`,children:`Customer`}),(0,$.jsx)(`select`,{value:oe,onChange:e=>se(e.target.value),className:`w-full border rounded px-3 py-2 ${Fe}`,children:F.map(e=>(0,$.jsx)(`option`,{value:e.id,children:e.name},e.id))})]})]}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>{ne(!1),re([])},className:`px-3 py-2 border rounded ${e?`border-slate-700`:`border-slate-300`}`,children:`Cancel`}),(0,$.jsx)(`button`,{onClick:je,className:`px-3 py-2 bg-gray-500 text-white rounded`,children:`Skip (Create Draft)`}),(0,$.jsx)(`button`,{onClick:Ae,className:`px-3 py-2 bg-blue-500 text-white rounded`,children:`Save Release`})]})]})})]})}var hH={tasks:`teamTasks`,assignments:`teamAssignments`,subordinates:`teamSubordinates`,pendingTask:`teamPendingTask`}.pendingTask,gH=`unassigned`,_H=[{key:`todo`,label:`To-Do`},{key:`inprogress`,label:`In-Progress`},{key:`done`,label:`Completed`}],vH=()=>Math.random().toString(36).slice(2,10),yH=e=>{let t=e||new Date,n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,`0`),i=String(t.getDate()).padStart(2,`0`);return`${n}-${r}-${i}`},bH=e=>{if(!e)return``;let[t,n,r]=e.split(`-`);return!t||!n||!r?``:`${r}/${n}/${t}`},xH=e=>{let t=(e||``).trim();if(!t)return{value:``,error:``};let n=t.match(/^(\d{2})\/(\d{2})\/(\d{4})$/);if(!n)return{value:``,error:`Use DD/MM/YYYY`};let r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=new Date(a,i-1,r);return o.getFullYear()!==a||o.getMonth()!==i-1||o.getDate()!==r?{value:``,error:`Invalid date`}:{value:`${a}-${String(i).padStart(2,`0`)}-${String(r).padStart(2,`0`)}`,error:``}},SH=(e,t)=>`${e}::${t}`,CH=e=>{let[t,n]=e.split(`::`);return{personId:t,status:n}},wH=(e,t,n)=>{let r=e.map(e=>({...e}));return r.filter(e=>e.personId===t&&e.status===n).sort((e,t)=>e.orderIndex-t.orderIndex).forEach((e,t)=>{e.orderIndex=t}),r},TH=(e,t,n,r,i)=>{let a=e.map(e=>({...e})),o=a.filter(e=>e.personId===t&&e.status===n).sort((e,t)=>e.orderIndex-t.orderIndex),s=o.findIndex(e=>e.id===r);if(s===-1)return a;let[c]=o.splice(s,1);return o.splice(i,0,c),o.forEach((e,t)=>{e.orderIndex=t}),a},EH=(e,t)=>{let n=e.some(e=>e.taskId===t&&e.personId!==gH),r=e.find(e=>e.taskId===t&&e.personId===gH);if(n&&r)return e.filter(e=>e.id!==r.id);if(!n&&!r){let n=e.filter(e=>e.personId===gH&&e.status===`todo`).length;return[...e,{id:vH(),taskId:t,personId:gH,status:`todo`,orderIndex:n,completedDate:null}]}return e};function DH(){let{darkMode:e}=(0,v.useContext)(dU)||{},t=`sam_stanley_workmobileforms_com`,{data:n,updateData:r}=$V(`user-team-tasks`,`${t}_tasks`,[]),{data:i,updateData:a}=$V(`user-team-tasks`,`${t}_assignments`,[]),{data:o,updateData:s}=$V(`user-team-tasks`,`${t}_subordinates`,[]),{data:c,updateData:l}=$V(`user-team-tasks`,`${t}_tags`,[]),u=(n||[]).map(e=>({...e,tags:Array.isArray(e?.tags)?e.tags:[],detail:e.detail||``,dueDate:e.dueDate||``})),d=(i||[]).map((e,t)=>({...e,status:e.status||`todo`,orderIndex:Number.isFinite(e.orderIndex)?e.orderIndex:t,completedDate:e.completedDate||null})),f=(o||[]).map(e=>({...e,name:e.name||``})),p=c||[],m=e=>{if(typeof e==`function`){let t=e(u);r(t)}else r(e)},h=e=>{if(typeof e==`function`){let t=e(d);a(t)}else a(e)},g=e=>{if(typeof e==`function`){let t=e(f);s(t)}else s(e)},_=e=>{if(typeof e==`function`){let t=e(p);l(t)}else l(e)},[y,b]=(0,v.useState)(null),[x,S]=(0,v.useState)(``),[C,w]=(0,v.useState)(()=>({})),[T,E]=(0,v.useState)(!1),[D,O]=(0,v.useState)(``),[ee,te]=(0,v.useState)(null),[ne,k]=(0,v.useState)(``),[re,ie]=(0,v.useState)(!1),[ae,A]=(0,v.useState)(null),[j,oe]=(0,v.useState)(``),[se,ce]=(0,v.useState)(``),[M,le]=(0,v.useState)(null),[N,P]=(0,v.useState)(!1),[F,ue]=(0,v.useState)({title:``,detail:``,dueDate:``,tags:[],assignees:[]}),[de,fe]=(0,v.useState)(``),[pe,me]=(0,v.useState)(null),he=(0,v.useRef)(null),ge=(0,v.useRef)(null),_e=(0,v.useRef)(null);(0,v.useEffect)(()=>{N&&he.current?.focus()},[N]),(0,v.useEffect)(()=>{T&&ge.current?.focus()},[T]);let ve=yH(),ye=(0,v.useMemo)(()=>[{id:gH,name:`Unassigned`,locked:!0},...f.map(e=>({id:e.id,name:e.name,locked:!1}))],[f]),be=e=>u.find(t=>t.id===e),xe=(e,t)=>d.filter(n=>n.personId===e&&n.status===t).sort((e,t)=>e.orderIndex-t.orderIndex),Se=e=>d.filter(t=>t.taskId===e&&t.personId!==gH),Ce=(e,t)=>!e?.dueDate||t?.status===`done`?!1:e.dueDate<ve,we=e=>{let t=(e||``).trim();return t?(g(e=>[...e,{id:vH(),name:t,createdAt:Date.now()}]),!0):!1},Te=()=>{O(``),E(!0)},Ee=()=>{we(D)&&(E(!1),O(``))},De=e=>{b(e.id),S(e.name)},Oe=()=>{let e=x.trim();!y||!e||(g(t=>t.map(t=>t.id===y?{...t,name:e}:t)),b(null),S(``))},ke=e=>{g(t=>t.filter(t=>t.id!==e)),h(t=>{let n=t.filter(t=>t.personId!==e),r=new Set(n.map(e=>e.taskId)),i=t.filter(t=>t.personId===e).map(e=>e.taskId),a=n;return i.forEach(e=>{a.some(t=>t.taskId===e&&t.personId!==gH)||(a=EH(a,e)),r.add(e)}),a})},Ae=e=>{w(t=>({...t,[e]:!t[e]}))},je=e=>{w(t=>{let n={...t};return f.forEach(t=>{n[t.id]=e}),n})},Me=e=>e?[e]:f.length===1?[f[0].id]:[],Ne=e=>{le(null),ue({title:``,detail:``,dueDate:``,tags:[],assignees:Me(e)}),oe(``),ce(``),fe(``),te(null),P(!0)};(0,v.useEffect)(()=>{let e=localStorage.getItem(hH);if(e)try{let t=JSON.parse(e);le(null),ue({title:t?.title||``,detail:t?.detail||``,dueDate:``,tags:[],assignees:[]}),oe(``),ce(``),fe(``),te(null),P(!0),localStorage.removeItem(hH)}catch{localStorage.removeItem(hH)}},[]),(0,v.useEffect)(()=>{let e=d.filter(e=>e.personId===gH).length;w(t=>({...t,[gH]:e===0}))},[d]),(0,v.useEffect)(()=>{d.some(e=>e.personId===gH&&e.status!==`todo`)&&h(e=>{let t=!1,n=e.map(e=>e.personId===gH&&e.status!==`todo`?(t=!0,{...e,status:`todo`,completedDate:null}):e);return t?wH(n,gH,`todo`):e})},[d]);let Pe=e=>{let t=be(e);if(!t)return;let n=Se(e).map(e=>e.personId);le(e),ue({title:t.title,detail:t.detail,dueDate:t.dueDate||``,tags:t.tags||[],assignees:n}),oe(bH(t.dueDate||``)),ce(``),fe(``),te(null),P(!0)},Fe=e=>{let t=(e||``).trim();t&&(ue(e=>e.tags.includes(t)?e:{...e,tags:[...e.tags,t]}),_(e=>e.includes(t)?e:[...e,t]),fe(``))},Ie=e=>{ue(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},Le=e=>{if(oe(e),!e.trim()){ue(e=>({...e,dueDate:``})),ce(``);return}let t=xH(e);ce(t.error),t.value&&ue(e=>({...e,dueDate:t.value}))},Re=()=>{if(_e.current?.showPicker){_e.current.showPicker();return}_e.current?.focus(),_e.current?.click()},ze=(e,t)=>{let n=(t||``).trim();n&&(m(t=>t.map(t=>t.id===e?{...t,tags:t.tags.includes(n)?t.tags:[...t.tags,n]}:t)),_(e=>e.includes(n)?e:[...e,n]))},Be=(e,t)=>{m(n=>n.map(n=>n.id===e?{...n,tags:n.tags.filter(e=>e!==t)}:n))},Ve=e=>{te(t=>t===e?null:e),k(``)},He=e=>{A(e),ie(!0)},Ue=()=>{ae&&(m(e=>e.filter(e=>e.id!==ae)),h(e=>e.filter(e=>e.taskId!==ae)),ie(!1),A(null),te(null))},We=()=>{let e=F.title.trim();if(!e||se)return;let t=(e,t,n)=>e.filter(e=>e.personId===t&&e.status===n).length;if(M)m(t=>t.map(t=>t.id===M?{...t,title:e,detail:F.detail,dueDate:F.dueDate,tags:F.tags}:t)),h(e=>{let n=e.map(e=>({...e})),r=new Set(n.filter(e=>e.taskId===M&&e.personId!==gH).map(e=>e.personId)),i=new Set(F.assignees);return n=n.filter(e=>!(e.taskId===M&&r.has(e.personId)&&!i.has(e.personId))),F.assignees.forEach(e=>{if(!n.some(t=>t.taskId===M&&t.personId===e)){let r=t(n,e,`todo`);n.push({id:vH(),taskId:M,personId:e,status:`todo`,orderIndex:r,completedDate:null})}}),n=EH(n,M),n});else{let n={id:vH(),title:e,detail:F.detail,dueDate:F.dueDate,tags:F.tags,createdAt:Date.now()};m(e=>[n,...e]),h(e=>{let r=[...e];return F.assignees.length===0?r.push({id:vH(),taskId:n.id,personId:gH,status:`todo`,orderIndex:t(r,gH,`todo`),completedDate:null}):F.assignees.forEach(e=>{r.push({id:vH(),taskId:n.id,personId:e,status:`todo`,orderIndex:t(r,e,`todo`),completedDate:null})}),r})}P(!1),le(null)},Ge=()=>{M&&(m(e=>e.filter(e=>e.id!==M)),h(e=>e.filter(e=>e.taskId!==M)),P(!1),le(null))},Ke=e=>{let{destination:t,source:n,draggableId:r}=e;if(!t)return;let i=CH(n.droppableId),a=CH(t.droppableId);if(i.personId===a.personId&&i.status===a.status&&n.index===t.index)return;let o=d.find(e=>e.id===r);if(!o)return;if(i.personId===a.personId&&i.status===a.status){h(e=>TH(e,i.personId,i.status,o.id,t.index));return}let s=Se(o.taskId).length;if(a.status===`done`&&s>1){me({assignmentId:o.id,destInfo:a,destinationIndex:t.index});return}qe(o.id,a,t.index,i)},qe=(e,t,n,r)=>{h(i=>{let a=i.map(e=>({...e})),o=a.find(t=>t.id===e);if(!o)return i;let s=o.taskId,c=a.find(n=>n.taskId===s&&n.personId===t.personId&&n.id!==e);a=a.filter(t=>t.id!==e);let l=e;c?(c.status=t.status,c.completedDate=t.status===`done`?new Date().toISOString():null,l=c.id):a.push({...o,personId:t.personId,status:t.status,completedDate:t.status===`done`?new Date().toISOString():null,orderIndex:n}),a=EH(a,s);let u=r?.personId||o.personId,d=r?.status||o.status;return a=wH(a,u,d),a=TH(a,t.personId,t.status,l,n),a})},Je=()=>{pe&&(qe(pe.assignmentId,pe.destInfo,pe.destinationIndex),me(null))},Ye=()=>{if(!pe)return;let e=d.find(e=>e.id===pe.assignmentId);if(!e){me(null);return}h(t=>t.map(t=>t.taskId===e.taskId?{...t,status:`done`,completedDate:new Date().toISOString()}:t)),me(null)},Xe=e=>{let t=d.filter(t=>t.personId===e),n=t.length,r=t.filter(e=>e.status===`inprogress`).length,i=t.filter(e=>e.status===`done`&&e.completedDate&&yH(new Date(e.completedDate))===ve).length,a=t.filter(e=>{let t=be(e.taskId);return Ce(t,e)}).length;return{total:n,inProgress:r,completedToday:i,overdue:a}},Ze=(0,v.useMemo)(()=>f.map(e=>Xe(e.id)).reduce((e,t)=>({total:e.total+t.total,inProgress:e.inProgress+t.inProgress,completedToday:e.completedToday+t.completedToday,overdue:e.overdue+t.overdue}),{total:0,inProgress:0,completedToday:0,overdue:0}),[d,u,f]),Qe=e?`text-white`:`text-gray-900`,$e=e?`rounded-xl p-4 shadow-inner transition bg-gray-800`:`rounded-xl p-4 shadow-inner transition bg-gray-50`,et=e?`bg-gray-800 border-gray-700`:`bg-white border-gray-200`,tt=e?`bg-gray-800 border-gray-700 text-gray-100`:`bg-white border-gray-200 text-gray-900`,nt=e?`text-lg font-semibold text-gray-200`:`text-lg font-semibold text-blue-600`,rt=e?`bg-gray-900/40 border-gray-700`:`bg-white border-gray-200`,it=e?`bg-gray-700 border-gray-600 text-gray-100`:`bg-white border-gray-200 text-gray-900`,at=e?`text-gray-400`:`text-gray-500`,ot=!!F.title.trim()&&!se;return(0,$.jsxs)(`div`,{className:`w-full ${Qe}`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col gap-4 mb-6`,children:[(0,$.jsx)(`div`,{className:`flex flex-wrap items-center justify-end gap-3`,children:(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[(0,$.jsxs)(`button`,{onClick:()=>Ne(),className:`px-3 py-2 bg-blue-500 text-white rounded flex items-center gap-2`,children:[(0,$.jsx)(Vu,{className:`h-4 w-4`}),`New Task`]}),(0,$.jsxs)(`button`,{onClick:Te,className:`px-3 py-2 bg-emerald-500 text-white rounded flex items-center gap-2`,children:[(0,$.jsx)(_d,{className:`h-4 w-4`}),`Add Member`]}),f.length>1&&(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>je(!0),className:`px-3 py-2 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Collapse All`}),(0,$.jsx)(`button`,{onClick:()=>je(!1),className:`px-3 py-2 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Expand All`})]})]})}),f.length>1&&(0,$.jsxs)(`div`,{className:`p-3 border rounded ${et} flex flex-wrap gap-4 text-sm`,children:[(0,$.jsxs)(`span`,{children:[`Total Tasks: `,Ze.total]}),(0,$.jsxs)(`span`,{children:[`In-Progress: `,Ze.inProgress]}),(0,$.jsxs)(`span`,{children:[`Completed Today: `,Ze.completedToday]}),Ze.overdue>0&&(0,$.jsxs)(`span`,{className:`text-red-500`,children:[`Overdue: `,Ze.overdue]})]})]}),(0,$.jsx)(xl,{onDragEnd:Ke,children:(0,$.jsx)(`div`,{className:`flex flex-col gap-6`,children:ye.map(t=>{let n=Xe(t.id),r=!!C[t.id],i=t.id===gH,a=i?[_H[0]]:_H;return(0,$.jsxs)(`div`,{className:$e,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center justify-between gap-3 mb-3`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`button`,{type:`button`,onClick:()=>Ae(t.id),className:`p-1 rounded ${e?`text-gray-300`:`text-gray-500`}`,children:r?(0,$.jsx)(Iu,{className:`h-5 w-5`}):(0,$.jsx)(Pu,{className:`h-5 w-5`})}),y===t.id?(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`input`,{value:x,onChange:e=>S(e.target.value),onKeyDown:e=>{e.key===`Enter`&&(e.preventDefault(),Oe()),e.key===`Escape`&&(e.preventDefault(),b(null),S(``))},className:`border rounded px-2 py-1 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsx)(`button`,{onClick:Oe,className:`px-2 py-1 bg-blue-500 text-white rounded`,children:`Save`}),(0,$.jsx)(`button`,{onClick:()=>{b(null),S(``)},className:`px-2 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Cancel`})]}):(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[!t.locked&&(0,$.jsx)(`button`,{onClick:()=>Ne(t.id),className:`p-1 rounded ${e?`text-gray-300`:`text-gray-500`}`,title:`New Task`,children:(0,$.jsx)(Vu,{className:`h-4 w-4`})}),(0,$.jsx)(`h2`,{className:nt,children:t.name}),!t.locked&&(0,$.jsx)(`button`,{onClick:()=>De(t),className:`p-1 rounded ${e?`text-gray-400`:`text-gray-500`}`,title:`Rename team member`,children:(0,$.jsx)(cd,{className:`h-4 w-4`})})]})]}),(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-3 text-sm`,children:[(0,$.jsxs)(`span`,{children:[`Total: `,n.total]}),!i&&(0,$.jsxs)(`span`,{children:[`In-Progress: `,n.inProgress]}),!i&&(0,$.jsxs)(`span`,{children:[`Completed Today: `,n.completedToday]}),n.overdue>0&&(0,$.jsxs)(`span`,{className:`text-red-500`,children:[`Overdue: `,n.overdue]}),!t.locked&&(0,$.jsx)(`button`,{onClick:()=>ke(t.id),className:`p-1 rounded text-red-500`,title:`Delete team member`,children:(0,$.jsx)(hd,{className:`h-4 w-4`})})]})]}),!r&&(0,$.jsx)(`div`,{className:`grid grid-cols-1 ${i?``:`md:grid-cols-3`} gap-3`,children:a.map(n=>(0,$.jsx)(Su,{droppableId:SH(t.id,n.key),children:r=>(0,$.jsxs)(`div`,{ref:r.innerRef,...r.droppableProps,className:`rounded-lg border p-3 min-h-[150px] ${rt}`,children:[(0,$.jsx)(`h3`,{className:`text-sm font-semibold mb-2 ${at}`,children:n.label}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[xe(t.id,n.key).map((t,n)=>{let r=be(t.taskId);if(!r)return null;let i=Ce(r,t);return(0,$.jsx)(Gl,{draggableId:t.id,index:n,children:t=>(0,$.jsxs)(`div`,{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,className:`border rounded-lg p-3 cursor-pointer transition relative ${it} ${i?e?`border-red-500 bg-red-900/40 text-red-100`:`border-red-500 bg-red-100 text-red-900`:``}`,onClick:()=>Pe(r.id),children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between gap-2`,children:[(0,$.jsx)(`span`,{className:`font-medium break-words flex-1 min-w-0`,children:r.title}),(0,$.jsxs)(`div`,{className:`task-actions flex items-center justify-end gap-0.5 flex-nowrap min-w-[60px] shrink-0`,children:[i&&(0,$.jsx)(Wu,{className:`h-4 w-4 text-red-600`}),(0,$.jsx)(`button`,{onClick:e=>{e.stopPropagation(),Ve(r.id)},title:`Tags`,className:`p-1 rounded ${e?`text-gray-300 hover:bg-gray-600`:`text-gray-500 hover:bg-gray-100`}`,children:(0,$.jsx)(pd,{className:`h-4 w-4`})}),(0,$.jsx)(`button`,{onClick:e=>{e.stopPropagation(),He(r.id)},title:`Delete`,className:`p-1 rounded ${e?`text-gray-300 hover:text-red-300 hover:bg-gray-600`:`text-gray-500 hover:text-red-500 hover:bg-red-50`}`,children:(0,$.jsx)(hd,{className:`h-4 w-4`})})]})]}),r.tags?.length>0&&(0,$.jsx)(`div`,{className:`flex flex-wrap gap-1 mt-2`,children:r.tags.map(t=>(0,$.jsx)(`span`,{className:`text-xs px-2 py-0.5 rounded-full ${e?`bg-gray-800 text-gray-300`:`bg-gray-100 text-gray-600`}`,children:t},t))}),ee===r.id&&(0,$.jsxs)(`div`,{className:`absolute right-2 top-10 z-10 w-56 border rounded-lg p-2 shadow-md ${e?`bg-gray-900 border-gray-700`:`bg-white border-gray-200`}`,onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,$.jsx)(`span`,{className:`text-xs font-semibold ${at}`,children:`Tags`}),(0,$.jsx)(`button`,{onClick:()=>te(null),className:`p-1 rounded ${e?`text-gray-400`:`text-gray-500`}`,children:(0,$.jsx)(yd,{className:`h-3 w-3`})})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-1 mb-2`,children:[(0,$.jsx)(`input`,{value:ne,onChange:e=>k(e.target.value),placeholder:`Add tag`,className:`flex-1 border rounded px-2 py-1 text-xs ${e?`bg-gray-800 border-gray-700 text-gray-100`:`bg-white border-gray-200 text-gray-900`}`}),(0,$.jsx)(`button`,{onClick:()=>{ze(r.id,ne),k(``)},className:`px-2 py-1 text-xs bg-blue-500 text-white rounded`,children:`Add`})]}),r.tags?.length>0&&(0,$.jsx)(`div`,{className:`flex flex-wrap gap-1 mb-2`,children:r.tags.map(t=>(0,$.jsxs)(`button`,{onClick:()=>Be(r.id,t),className:`text-xs px-2 py-0.5 rounded-full flex items-center gap-1 ${e?`bg-gray-800 text-gray-300`:`bg-gray-100 text-gray-600`}`,title:`Remove tag`,children:[t,(0,$.jsx)(yd,{className:`h-3 w-3`})]},t))}),p.length>0&&(0,$.jsx)(`div`,{className:`flex flex-wrap gap-1`,children:p.map(t=>(0,$.jsx)(`button`,{onClick:()=>ze(r.id,t),className:`text-xs px-2 py-0.5 rounded-full border ${e?`border-gray-700 text-gray-300`:`border-gray-300 text-gray-600`}`,children:t},t))})]})]})},t.id)}),r.placeholder]})]})},n.key))})]},t.id)})})}),T&&(0,$.jsx)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,children:(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-md border ${tt}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold`,children:`Add Team Member`}),(0,$.jsx)(`button`,{onClick:()=>E(!1),className:`px-2 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Close`})]}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,$.jsx)(`input`,{ref:ge,value:D,onChange:e=>O(e.target.value),onKeyDown:e=>{e.key===`Enter`&&(e.preventDefault(),Ee()),e.key===`Escape`&&(e.preventDefault(),E(!1))},placeholder:`Team member name`,className:`w-full border p-2 rounded ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>E(!1),className:`px-3 py-2 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Cancel`}),(0,$.jsx)(`button`,{onClick:Ee,className:`px-3 py-2 bg-emerald-500 text-white rounded`,children:`Add Member`})]})]})]})}),re&&ae&&(0,$.jsx)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,children:(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-md border ${tt}`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold mb-2`,children:`Delete Task`}),(0,$.jsxs)(`p`,{className:`text-sm mb-4`,children:[`Are you sure you want to delete`,(0,$.jsxs)(`span`,{className:`font-semibold`,children:[` `,be(ae)?.title||`this task`]}),`?`]}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>{ie(!1),A(null)},className:`px-3 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Cancel`}),(0,$.jsx)(`button`,{onClick:Ue,className:`px-3 py-1 bg-red-600 text-white rounded`,children:`Delete`})]})]})}),N&&(0,$.jsx)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,children:(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-3xl border ${tt}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold`,children:M?`Edit Task`:`New Task`}),(0,$.jsx)(`button`,{onClick:()=>P(!1),className:`px-2 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Close`})]}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,$.jsx)(`input`,{ref:he,value:F.title,onChange:e=>ue(t=>({...t,title:e.target.value})),placeholder:`Task title`,className:`w-full border p-2 rounded ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsx)(Jw,{theme:`snow`,value:F.detail,onChange:e=>ue(t=>({...t,detail:e}))}),(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2`,children:[(0,$.jsx)(`label`,{className:`text-sm font-medium`,children:`Due Date`}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`input`,{type:`text`,value:j,onChange:e=>Le(e.target.value),onFocus:Re,placeholder:`DD/MM/YYYY`,className:`border rounded px-2 py-1 w-36 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsx)(`button`,{type:`button`,onClick:Re,className:`p-2 rounded border ${e?`border-gray-700 text-gray-200`:`border-gray-300 text-gray-600`}`,title:`Open calendar`,children:(0,$.jsx)(Mu,{className:`h-4 w-4`})})]}),(0,$.jsx)(`input`,{ref:_e,type:`date`,value:F.dueDate,onChange:e=>{ue(t=>({...t,dueDate:e.target.value})),oe(bH(e.target.value)),ce(``)},className:`absolute opacity-0 w-0 h-0 pointer-events-none`,tabIndex:-1,"aria-hidden":`true`}),F.dueDate&&(0,$.jsx)(`button`,{onClick:()=>{ue(e=>({...e,dueDate:``})),oe(``),ce(``)},className:`px-2 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Clear`}),se&&(0,$.jsx)(`span`,{className:`text-xs text-red-500`,children:se})]}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`input`,{value:de,onChange:e=>fe(e.target.value),placeholder:`Add tag`,className:`flex-1 border rounded px-2 py-1 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsx)(`button`,{onClick:()=>Fe(de),className:`px-3 py-1 bg-blue-500 text-white rounded`,children:`Add Tag`})]}),p.length>0&&(0,$.jsx)(`div`,{className:`flex flex-wrap gap-2 text-xs`,children:p.map(t=>(0,$.jsx)(`button`,{onClick:()=>Fe(t),className:`px-2 py-1 rounded-full border ${e?`border-gray-700 text-gray-300`:`border-gray-300 text-gray-600`}`,children:t},t))}),F.tags.length>0&&(0,$.jsx)(`div`,{className:`flex flex-wrap gap-2`,children:F.tags.map(t=>(0,$.jsxs)(`span`,{className:`px-2 py-1 rounded-full text-xs flex items-center gap-1 ${e?`bg-gray-700 text-gray-100`:`bg-gray-200 text-gray-700`}`,children:[t,(0,$.jsx)(`button`,{onClick:()=>Ie(t),children:(0,$.jsx)(hd,{className:`h-3 w-3`})})]},t))})]}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,$.jsx)(`h4`,{className:`text-sm font-semibold`,children:`Team Members`}),f.length===0&&(0,$.jsx)(`p`,{className:`text-sm ${at}`,children:`No team members yet. Tasks will be unassigned.`}),(0,$.jsx)(`div`,{className:`flex flex-wrap gap-3`,children:f.map(e=>(0,$.jsxs)(`label`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:F.assignees.includes(e.id),onChange:t=>{let n=t.target.checked;ue(t=>{let r=new Set(t.assignees);return n?r.add(e.id):r.delete(e.id),{...t,assignees:Array.from(r)}})}}),(0,$.jsx)(`span`,{children:e.name})]},e.id))})]}),(0,$.jsxs)(`div`,{className:`flex items-center justify-between mt-2`,children:[(0,$.jsx)(`div`,{children:M&&(0,$.jsx)(`button`,{onClick:Ge,className:`px-3 py-2 bg-red-600 text-white rounded`,children:`Delete Task`})}),(0,$.jsxs)(`div`,{className:`flex gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>P(!1),className:`px-3 py-2 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Cancel`}),(0,$.jsx)(`button`,{onClick:We,disabled:!ot,className:`px-3 py-2 rounded ${ot?`bg-blue-500 text-white`:`bg-gray-300 text-gray-500`}`,children:`Save Task`})]})]})]})]})}),pe&&(0,$.jsx)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,children:(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-md border ${tt}`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold mb-2`,children:`Complete Task`}),(0,$.jsx)(`p`,{className:`text-sm mb-4`,children:`This task has multiple assignees. Mark completed for this person only, or for everyone?`}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>me(null),className:`px-3 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:`Cancel`}),(0,$.jsxs)(`button`,{onClick:Je,className:`px-3 py-1 rounded bg-blue-500 text-white flex items-center gap-1`,children:[(0,$.jsx)(Bu,{className:`h-4 w-4`}),`This Person`]}),(0,$.jsxs)(`button`,{onClick:Ye,className:`px-3 py-1 rounded bg-emerald-500 text-white flex items-center gap-1`,children:[(0,$.jsx)(Bu,{className:`h-4 w-4`}),`Everyone`]})]})]})})]})}var OH=[{id:`stream-workmobile`,name:`WorkMobile`,color:`#7DD3FC`},{id:`stream-rlb`,name:`RLB`,color:`#1D4ED8`}],kH=[`Website`,`WMBAPI`,`API2`,`WM2 Portal`,`Web Client`,`Xamarin Android`,`Xamarin iOS`,`MAUI`],AH=()=>Math.random().toString(36).slice(2,10),jH=e=>(e||``).replace(/<[^>]*>/g,` `),MH=e=>e===`Xamarin`?`Xamarin Android`:e||``,NH=(e=new Date)=>{let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,`0`),r=String(e.getDate()).padStart(2,`0`);return`${t}-${n}-${r}`},PH=e=>{if(!e)return null;let[t,n,r]=e.split(`-`).map(Number);return!t||!n||!r?null:new Date(t,n-1,r)},FH=(e,t)=>{let n=PH(e),r=PH(t);if(!n||!r)return null;let i=r.getTime()-n.getTime();return Math.round(i/864e5)},IH=(e,t=``)=>e==null?``:e===0?`Today`:e===1?`1 day${t}`:`${e} days${t}`,LH=e=>String(e||`Customer`).trim().replace(/[^A-Za-z0-9._-]+/g,`_`).replace(/^_+|_+$/g,``),RH=()=>new Date().toISOString().slice(0,10),zH=e=>{if(!e)return``;let t=new Date(`${e}T00:00:00`);return Number.isNaN(t.getTime())?e:t.toLocaleDateString(`en-GB`,{day:`2-digit`,month:`short`,year:`numeric`})},BH=e=>e.toLocaleDateString(void 0,{month:`long`,year:`numeric`}),VH=e=>{let t=new Date(e.getFullYear(),e.getMonth(),1),n=t.getDay(),r=new Date(t);return r.setDate(t.getDate()-n),r},HH=(e,t)=>{let n=new Date(e);return n.setDate(n.getDate()+t),n},UH=e=>e.toISOString().slice(0,10),WH=e=>Array.isArray(e)?e.map(e=>({system:MH(e?.system),version:e?.version||``})).filter(e=>e.system&&e.version):e&&typeof e==`object`?[{system:`Website`,version:e.website},{system:`Xamarin Android`,version:e.android},{system:`Xamarin iOS`,version:e.ios}].filter(e=>e.version):[],GH=e=>{if(Array.isArray(e))return e.map(e=>({system:MH(e?.system),items:Array.isArray(e?.items)?e.items:[],features:Array.isArray(e?.features)?e.features:[],bugs:Array.isArray(e?.bugs)?e.bugs:[]})).map(e=>{let t=e.items.filter(e=>e?.type===`Feature`).map(e=>e?.text||``).concat(e.features||[]).map(e=>String(e||``).trim()).filter(Boolean),n=e.items.filter(e=>e?.type===`Bug`).map(e=>e?.text||``).concat(e.bugs||[]).map(e=>String(e||``).trim()).filter(Boolean);return{system:e.system,features:t,bugs:n}}).filter(e=>e.system&&(e.features.length>0||e.bugs.length>0));if(typeof e==`string`){let t=jH(e).trim();return t?[{system:`Website`,features:[t],bugs:[]}]:[]}return[]},KH=e=>({...e,id:String(e?.id??AH()),name:e?.name||``,date:e?.date||``,versions:WH(e?.versions),contents:GH(e?.contents),attachments:Array.isArray(e?.attachments)?e.attachments:[],streamId:e?.streamId||OH[0].id,status:e?.status||`Confirmed`,linkedCardIds:Array.isArray(e?.linkedCardIds)?e.linkedCardIds:[]}),qH=e=>`${e.system} v${e.version}`;function JH(){let{darkMode:e}=(0,v.useContext)(dU)||{},{data:t,updateData:n}=$V(`release-schedule`,`streams`,OH),{data:r,updateData:i}=$V(`release-schedule`,`releases`,[]),a=(t||[]).length?t:OH,o=(r||[]).map(KH),s=e=>{if(typeof e==`function`){let t=e(a);n(t)}else n(e)},c=e=>{if(typeof e==`function`){let t=e(o);i(t)}else i(e)},[l,u]=(0,v.useState)(()=>OH[0].id),[d,f]=(0,v.useState)(`list`),[p,m]=(0,v.useState)(``),[h,g]=(0,v.useState)(!1),[_,y]=(0,v.useState)(!1),[b,x]=(0,v.useState)(!0),S=(0,v.useRef)(null),[C,w]=(0,v.useState)(()=>({})),[T,E]=(0,v.useState)(!1),[D,O]=(0,v.useState)(`add`),[ee,te]=(0,v.useState)(``),[ne,k]=(0,v.useState)(`#60A5FA`),[re,ie]=(0,v.useState)(null),[ae,A]=(0,v.useState)(!1),[j,oe]=(0,v.useState)(null),[se,ce]=(0,v.useState)(null),[M,le]=(0,v.useState)(!1),[N,P]=(0,v.useState)({name:``,date:``,contents:[],versions:[],attachments:[],streamId:OH[0].id,status:`Confirmed`,linkedCardIds:[]}),F=(0,v.useRef)(null),[ue,de]=(0,v.useState)(()=>new Date);(0,v.useEffect)(()=>{a.find(e=>e.id===l)||u(a[0]?.id||OH[0].id)},[a,l]);let fe=(0,v.useMemo)(()=>{let e=p.trim().toLowerCase();return o.filter(e=>e.streamId===l).filter(t=>{if(!e)return!0;let n=(t.versions||[]).map(e=>`${e.system} ${e.version}`).join(` `),r=(t.contents||[]).flatMap(e=>[...(e.features||[]).map(t=>`${e.system} feature ${t}`),...(e.bugs||[]).map(t=>`${e.system} bug ${t}`)]).join(` `);return[t.name,t.date,n,r].join(` `).toLowerCase().includes(e)}).sort((e,t)=>e.date<t.date?1:-1)},[o,l,p]),pe=(0,v.useMemo)(()=>b?fe.reduce((e,t)=>{let[n,r]=t.date.split(`-`),i=`${n}-${r}`;return e[i]||(e[i]=[]),e[i].push(t),e},{}):{All:fe},[fe,b]),me=e=>({name:e?.name||``,date:e?.date||``,streamId:e?.streamId||``,status:e?.status||`Confirmed`,versions:(e?.versions||[]).map(e=>({system:MH(e.system),version:e.version||``})),contents:(e?.contents||[]).map(e=>({system:MH(e.system),features:(e.features||[]).map(e=>String(e||``)),bugs:(e.bugs||[]).map(e=>String(e||``))})),attachments:(e?.attachments||[]).map(e=>({id:e.id,name:e.name,size:e.size,type:e.type,dataUrl:e.dataUrl})),linkedCardIds:(e?.linkedCardIds||[]).map(String)}),he=(0,v.useMemo)(()=>{if(!se)return!1;let e=me(N);return JSON.stringify(e)!==JSON.stringify(se)},[se,N]),ge=()=>{if(!he){A(!1),le(!1),ce(null),oe(null);return}le(!0)};(0,v.useEffect)(()=>{if(!ae)return;let e=e=>{e.key===`Escape`&&ge()};return window.addEventListener(`keydown`,e),()=>window.removeEventListener(`keydown`,e)},[ae,he]),(0,v.useEffect)(()=>{if(!_)return;let e=e=>{S.current&&!S.current.contains(e.target)&&y(!1)};return window.addEventListener(`mousedown`,e),()=>window.removeEventListener(`mousedown`,e)},[_]);let _e=(e,t)=>{O(e),E(!0),e===`rename`&&t?(te(t.name),k(t.color),ie(t.id)):(te(``),k(`#60A5FA`),ie(null))},ve=()=>{let e=ee.trim();if(e){if(D===`rename`&&re)s(t=>t.map(t=>t.id===re?{...t,name:e,color:ne}:t));else{let t={id:AH(),name:e,color:ne};s(e=>[...e,t]),u(t.id)}E(!1)}},ye=e=>{if(a.length<=1)return;let t=a.find(t=>t.id!==e)?.id;s(t=>t.filter(t=>t.id!==e)),c(n=>n.map(n=>n.streamId===e?{...n,streamId:t}:n)),u(t)},be=(e,t)=>{if(e){oe(e.id);let t={name:e.name,date:e.date,contents:(e.contents||[]).map(e=>({system:MH(e.system),features:Array.isArray(e.features)?[...e.features]:[],bugs:Array.isArray(e.bugs)?[...e.bugs]:[]})),versions:(e.versions||[]).map(e=>({...e,system:MH(e.system)})),attachments:e.attachments,streamId:e.streamId,status:e.status||`Confirmed`,linkedCardIds:e.linkedCardIds||[]};P(t),ce(me(t))}else{oe(null);let e={name:t?.name||``,date:t?.date||``,contents:t?.contents||[],versions:[],attachments:[],streamId:t?.streamId||l,status:t?.status||`Confirmed`,linkedCardIds:t?.linkedCardIds||[]};P(e),ce(me(e))}le(!1),A(!0)},xe=(e=!1)=>{let t=N.name.trim();if(!t||!N.date)return;let n=(N.versions||[]).map(e=>({system:e.system,version:(e.version||``).trim()})).filter(e=>e.system&&e.version),r=(N.contents||[]).map(e=>({system:e.system,features:(e.features||[]).map(e=>String(e||``).trim()).filter(Boolean),bugs:(e.bugs||[]).map(e=>String(e||``).trim()).filter(Boolean)})).filter(e=>e.system&&(e.features.length>0||e.bugs.length>0)),i={...N,name:t,versions:n,contents:r,status:e?`Draft`:N.status||`Confirmed`,linkedCardIds:N.linkedCardIds||[]};c(j?e=>e.map(e=>e.id===j?{...i,id:j}:e):e=>[{...i,id:AH(),createdAt:Date.now()},...e]),A(!1),le(!1),ce(null)},Se=()=>{let e={name:N.name.trim()||`Untitled Release`,date:N.date||RH(),versions:[],contents:N.contents||[],attachments:[],streamId:N.streamId,status:`Draft`,linkedCardIds:N.linkedCardIds||[],id:AH(),createdAt:Date.now()};c(t=>[e,...t]),A(!1),le(!1),ce(null)},Ce=async e=>{if(!e||e.length===0)return;let t=Array.from(e),n=await Promise.all(t.map(e=>new Promise(t=>{let n=new FileReader;n.onload=()=>{t({id:AH(),name:e.name,type:e.type,size:e.size,dataUrl:n.result})},n.readAsDataURL(e)})));P(e=>({...e,attachments:[...e.attachments,...n]})),F.current&&(F.current.value=``)},we=e=>{P(t=>({...t,attachments:t.attachments.filter(t=>t.id!==e)}))},Te=()=>{P(e=>{let t=e.versions.map(e=>e.system),n=kH.find(e=>!t.includes(e));return n?{...e,versions:[...e.versions,{system:n,version:``}]}:e})},Ee=(e,t,n)=>{P(r=>{let i=r.versions.map((e,t)=>({...e}));return!i[e]||t===`system`&&i.filter((t,n)=>n!==e).map(e=>e.system).includes(n)?r:(i[e][t]=n,{...r,versions:i})})},De=e=>{P(t=>({...t,versions:t.versions.filter((t,n)=>n!==e)}))},Oe=()=>{P(e=>{let t=e.contents.map(e=>e.system),n=kH.find(e=>!t.includes(e));return n?{...e,contents:[...e.contents,{system:n,features:[],bugs:[]}]}:e})},ke=(e,t)=>{P(n=>{let r=n.contents.map(e=>({...e,features:[...e.features||[]],bugs:[...e.bugs||[]]}));return!r[e]||r.filter((t,n)=>n!==e).map(e=>e.system).includes(t)?n:(r[e].system=t,{...n,contents:r})})},Ae=e=>{P(t=>{let n=t.contents.map(e=>({...e,features:[...e.features||[]],bugs:[...e.bugs||[]]})),r=n[e];return r?(r.features.push(``),{...t,contents:n}):t})},je=e=>{P(t=>{let n=t.contents.map(e=>({...e,features:[...e.features||[]],bugs:[...e.bugs||[]]})),r=n[e];return r?(r.bugs.push(``),{...t,contents:n}):t})},Me=(e,t,n)=>{P(r=>{let i=r.contents.map(e=>({...e,features:[...e.features||[]],bugs:[...e.bugs||[]]})),a=i[e];return!a||a.features[t]===void 0?r:(a.features[t]=n,{...r,contents:i})})},Ne=(e,t,n)=>{P(r=>{let i=r.contents.map(e=>({...e,features:[...e.features||[]],bugs:[...e.bugs||[]]})),a=i[e];return!a||a.bugs[t]===void 0?r:(a.bugs[t]=n,{...r,contents:i})})},Pe=(e,t)=>{P(n=>{let r=n.contents.map(e=>({...e,features:[...e.features||[]],bugs:[...e.bugs||[]]})),i=r[e];return i?(i.features=i.features.filter((e,n)=>n!==t),{...n,contents:r}):n})},Fe=(e,t)=>{P(n=>{let r=n.contents.map(e=>({...e,features:[...e.features||[]],bugs:[...e.bugs||[]]})),i=r[e];return i?(i.bugs=i.bugs.filter((e,n)=>n!==t),{...n,contents:r}):n})},Ie=e=>{P(t=>({...t,contents:t.contents.filter((t,n)=>n!==e)}))},Le=e=>{w(t=>({...t,[e]:!t[e]}))},Re=()=>{let e=a.find(e=>e.id===l)?.name||`Customer`,t=new Date,n=String(t.getDate()).padStart(2,`0`),r=String(t.getMonth()+1).padStart(2,`0`),i=String(t.getFullYear()),o=`${LH(e)}_ReleaseSchedule_${n}${r}${i}.json`,s={customer:e,exportedAt:t.toISOString(),releases:fe.map(e=>({name:e.name,date:e.date,versions:e.versions,contents:e.contents}))},c=new Blob([JSON.stringify(s,null,2)],{type:`application/json`}),u=URL.createObjectURL(c),d=document.createElement(`a`);d.href=u,d.download=o,document.body.appendChild(d),d.click(),d.remove(),URL.revokeObjectURL(u)},ze=()=>new Promise((e,t)=>{if(window.html2pdf){e(window.html2pdf);return}let n=document.createElement(`script`);n.src=`https://cdn.jsdelivr.net/npm/html2pdf.js@0.14.0/dist/html2pdf.bundle.min.js`,n.async=!0,n.onload=()=>e(window.html2pdf),n.onerror=()=>t(Error(`Failed to load PDF exporter`)),document.body.appendChild(n)}),Be=async()=>{let e=await ze(),t=a.find(e=>e.id===l)?.name||`Customer`,n=new Date,r=String(n.getDate()).padStart(2,`0`),i=String(n.getMonth()+1).padStart(2,`0`),o=String(n.getFullYear()),s=`${LH(t)}_ReleaseSchedule_${r}${i}${o}.pdf`,c=[...fe].sort((e,t)=>e.date<t.date?1:-1),u=document.createElement(`div`);u.style.padding=`24px`,u.style.fontFamily=`Arial, sans-serif`,u.style.color=`#111827`;let d=e=>e.length?`<div style="margin-top: 6px; font-size: 12px; color: #4b5563;">${e.map(e=>`${e.system} v${e.version}`).join(` | `)}</div>`:``,f=e=>e.filter(e=>(e.features||[]).length>0||(e.bugs||[]).length>0).map(e=>{let t=(e.features||[]).map(e=>`<li style="margin: 4px 0;">${e}</li>`).join(``),n=(e.bugs||[]).map(e=>`<li style="margin: 4px 0;">${e}</li>`).join(``);return`
            <div style="margin-top: 12px;">
              <div style="font-weight: 600; margin-bottom: 6px;">${e.system}</div>
              ${t?`<div style="font-size: 12px; text-transform: uppercase; color: #6b7280;">Features</div><ul style="margin: 6px 0 10px 18px; padding: 0;">${t}</ul>`:``}
              ${n?`<div style="font-size: 12px; text-transform: uppercase; color: #6b7280;">Bugs</div><ul style="margin: 6px 0 0 18px; padding: 0;">${n}</ul>`:``}
            </div>
          `}).join(``),p=c.map(e=>{let t=zH(e.date);return`
          <div style="border: 1px solid #e5e7eb; border-radius: 10px; padding: 14px; margin-bottom: 16px;">
            <div style="font-size: 16px; font-weight: 700;">${e.name}</div>
            <div style="font-size: 12px; color: #6b7280; margin-top: 2px;">${t}</div>
            ${d(e.versions||[])}
            ${f(e.contents||[])}
          </div>
        `}).join(``);u.innerHTML=`
      <div style="margin-bottom: 18px;">
        <div style="font-size: 20px; font-weight: 700;">${t} Release Schedule</div>
        <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">Exported ${n.toLocaleString()}</div>
      </div>
      ${p||`<div>No releases found.</div>`}
    `,e().set({margin:.5,filename:s,image:{type:`jpeg`,quality:.98},html2canvas:{scale:2},jsPDF:{unit:`in`,format:`a4`,orientation:`portrait`}}).from(u).save()},Ve=e=>{if(!e.destination)return;let t=e.draggableId,n=e.destination.droppableId;e.source.droppableId!==n&&c(e=>e.map(e=>e.id===t?{...e,date:n}:e))},He=(0,v.useMemo)(()=>{let e=new Date,t=NH(e),n=e.getHours()>=17,r=o.filter(e=>e.streamId===l).sort((e,t)=>e.date===t.date?(e.createdAt||0)-(t.createdAt||0):e.date<t.date?-1:1),i=r.find(e=>e.date===t)||null,a=r.filter(e=>e.date<t),s=r.filter(e=>e.date>t),c=!n&&i?i:s[0]||null,u=n&&i?i:a[a.length-1]||null,d=c?IH(FH(t,c.date)):null,f=u?IH(FH(u.date,t),` ago`):null;return{next:c,past:u,nextLabel:d,pastLabel:f}},[o,l]),Ue=e?`text-white`:`text-gray-900`,We=e?`rounded-xl p-4 shadow-inner transition bg-gray-800`:`rounded-xl p-4 shadow-inner transition bg-gray-50`,Ge=e?`bg-gray-800 border-gray-700`:`bg-white border-gray-200`,Ke=e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-200 text-gray-900`,qe=e?`text-gray-400`:`text-gray-500`,Je=e?`border-gray-700 text-gray-200 hover:bg-gray-700`:`border-gray-300 text-gray-700 hover:bg-gray-100`;return(0,$.jsxs)(`div`,{className:`w-full ${Ue}`,children:[(0,$.jsxs)(`div`,{className:`flex flex-col gap-4 mb-6`,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center justify-between gap-3`,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2`,children:[(0,$.jsxs)(`button`,{onClick:()=>be(),className:`px-3 py-2 bg-blue-500 text-white rounded flex items-center gap-2`,children:[(0,$.jsx)(Vu,{className:`h-4 w-4`}),`New Release`]}),(0,$.jsxs)(`button`,{onClick:()=>{g(e=>!e),y(!1)},className:`px-3 py-2 rounded border flex items-center gap-2 ${Je}`,children:[(0,$.jsx)(ud,{className:`h-4 w-4`}),`Search`]}),(0,$.jsxs)(`div`,{className:`relative`,ref:S,children:[(0,$.jsx)(`button`,{onClick:()=>y(e=>!e),className:`px-3 py-2 rounded border flex items-center gap-2 ${Je}`,children:`More`}),_&&(0,$.jsxs)(`div`,{className:`absolute left-0 mt-2 w-44 border rounded shadow p-2 z-50 ${e?`bg-gray-800 border-gray-700`:`bg-white border-gray-300`}`,children:[(0,$.jsxs)(`button`,{onClick:()=>{Be(),y(!1)},className:`w-full text-left px-2 py-2 rounded hover:opacity-80 flex items-center gap-2 ${e?`text-gray-200 hover:bg-gray-700`:`text-gray-900 hover:bg-gray-100`}`,children:[(0,$.jsx)(qu,{className:`h-4 w-4`}),` Export PDF`]}),(0,$.jsxs)(`button`,{onClick:()=>{Re(),y(!1)},className:`w-full text-left px-2 py-2 rounded hover:opacity-80 flex items-center gap-2 ${e?`text-gray-200 hover:bg-gray-700`:`text-gray-900 hover:bg-gray-100`}`,children:[(0,$.jsx)(qu,{className:`h-4 w-4`}),` Export JSON`]}),(0,$.jsxs)(`button`,{onClick:()=>{_e(`add`),y(!1)},className:`w-full text-left px-2 py-2 rounded hover:opacity-80 flex items-center gap-2 ${e?`text-gray-200 hover:bg-gray-700`:`text-gray-900 hover:bg-gray-100`}`,children:[(0,$.jsx)(Vu,{className:`h-4 w-4`}),` Add Customer`]})]})]})]}),(0,$.jsx)(`div`,{className:`flex flex-wrap items-center gap-2 rounded border px-3 py-2 ${Ge}`,children:a.map(t=>(0,$.jsxs)(`div`,{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${l===t.id?`border-transparent`:e?`border-gray-700`:`border-gray-300`}`,style:{backgroundColor:l===t.id?t.color:`transparent`},children:[(0,$.jsx)(`button`,{onClick:()=>u(t.id),className:`text-sm font-semibold ${l===t.id?`text-gray-900`:qe}`,children:t.name}),(0,$.jsx)(`button`,{onClick:()=>_e(`rename`,t),className:`text-xs`,title:`Rename customer`,children:(0,$.jsx)(ld,{className:`h-3 w-3 ${l===t.id?`text-gray-900`:qe}`})}),(0,$.jsx)(`button`,{onClick:()=>ye(t.id),className:`text-xs`,title:a.length<=1?`At least one customer required`:`Delete customer`,disabled:a.length<=1,children:(0,$.jsx)(hd,{className:`h-3 w-3 ${a.length<=1?qe:l===t.id?`text-gray-900`:`text-red-500`}`})})]},t.id))})]}),(h||p)&&(0,$.jsxs)(`div`,{className:`p-4 border rounded ${Ge} flex flex-wrap gap-3 items-center`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(ud,{className:`h-4 w-4 ${qe}`}),(0,$.jsx)(`input`,{value:p,onChange:e=>m(e.target.value),placeholder:`Search releases`,className:`border rounded px-3 py-2 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`})]}),p&&(0,$.jsx)(`button`,{onClick:()=>m(``),className:`px-3 py-2 rounded border ${Je}`,children:`Clear Search`})]}),(0,$.jsxs)(`div`,{className:`p-3 border rounded ${Ge} flex flex-wrap items-center gap-3`,children:[(0,$.jsxs)(`button`,{onClick:()=>f(`list`),className:`px-3 py-2 rounded flex items-center gap-2 border ${d===`list`?`bg-blue-500 text-white border-transparent`:Je}`,children:[(0,$.jsx)(Qu,{className:`h-4 w-4`}),`List`]}),(0,$.jsxs)(`button`,{onClick:()=>f(`calendar`),className:`px-3 py-2 rounded flex items-center gap-2 border ${d===`calendar`?`bg-blue-500 text-white border-transparent`:Je}`,children:[(0,$.jsx)(ju,{className:`h-4 w-4`}),`Calendar`]}),d===`list`&&(0,$.jsxs)(`label`,{className:`flex items-center gap-2 text-sm`,children:[(0,$.jsx)(`input`,{type:`checkbox`,checked:b,onChange:e=>x(e.target.checked)}),`Group by month`]})]}),(0,$.jsxs)(`div`,{className:`p-4 border rounded ${Ge} flex flex-wrap gap-4 items-center`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`text-sm ${qe}`,children:`Next Release`}),(0,$.jsx)(`div`,{className:`font-semibold`,children:He.next?`${He.next.name} (${He.nextLabel})`:`None`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`text-sm ${qe}`,children:`Last Release`}),(0,$.jsx)(`div`,{className:`font-semibold`,children:He.past?`${He.past.name} (${He.pastLabel})`:`None`})]})]})]}),d===`list`&&(0,$.jsxs)(`div`,{className:`flex flex-col gap-4`,children:[Object.keys(pe).length===0&&(0,$.jsx)(`div`,{className:`p-4 border rounded ${Ge}`,children:`No releases found.`}),Object.entries(pe).map(([t,n])=>(0,$.jsxs)(`div`,{className:We,children:[b&&(0,$.jsx)(`div`,{className:`mb-3 text-sm font-semibold`,children:BH(new Date(`${t}-01`))}),(0,$.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-3`,children:n.map(t=>(0,$.jsxs)(`div`,{className:`border rounded-lg p-3 ${e?`border-gray-700`:`border-gray-200`}`,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap items-start justify-between gap-3`,children:[(0,$.jsxs)(`button`,{type:`button`,onClick:()=>Le(t.id),className:`text-left flex-1`,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 flex-wrap`,children:[(0,$.jsx)(`span`,{className:`text-lg font-semibold`,children:t.name}),t.status===`Draft`&&(0,$.jsx)(`span`,{className:`px-2 py-0.5 text-xs rounded ${e?`bg-yellow-900 text-yellow-200`:`bg-yellow-100 text-yellow-800`}`,children:`Draft`})]}),(0,$.jsx)(`div`,{className:`text-sm ${qe}`,children:zH(t.date)}),t.versions.length>0&&(0,$.jsx)(`div`,{className:`text-sm ${qe} mt-1`,children:t.versions.map(qH).join(`  `)})]}),(0,$.jsx)(`div`,{className:`flex items-center gap-2`,children:(0,$.jsx)(`button`,{onClick:e=>{e.stopPropagation(),be(t)},className:`px-2 py-1 rounded border ${Je}`,children:`Edit`})})]}),(0,$.jsx)(`div`,{className:`mt-3 overflow-hidden transition-all duration-200 ease-out ${C[t.id]?`max-h-0 opacity-0`:`max-h-[1000px] opacity-100`}`,children:t.contents.length>0&&(0,$.jsx)(`div`,{className:`flex flex-col gap-4`,children:t.contents.filter(e=>(e.features||[]).length>0||(e.bugs||[]).length>0).map(e=>(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`text-sm font-semibold`,children:e.system}),(e.features||[]).length>0&&(0,$.jsx)(`ul`,{className:`mt-2 flex flex-col gap-1 text-sm`,children:(e.features||[]).map((t,n)=>(0,$.jsxs)(`li`,{children:[` `,t]},`${e.system}-feature-${n}`))}),(e.bugs||[]).length>0&&(0,$.jsx)(`ul`,{className:`mt-2 flex flex-col gap-1 text-sm`,children:(e.bugs||[]).map((t,n)=>(0,$.jsxs)(`li`,{children:[` `,t]},`${e.system}-bug-${n}`))})]},e.system))})})]},t.id))})]},t))]}),d===`calendar`&&(0,$.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`button`,{onClick:()=>de(e=>new Date(e.getFullYear(),e.getMonth()-1,1)),className:`p-2 rounded border ${Je}`,children:(0,$.jsx)(Fu,{className:`h-4 w-4`})}),(0,$.jsx)(`div`,{className:`text-lg font-semibold`,children:BH(ue)}),(0,$.jsx)(`button`,{onClick:()=>de(e=>new Date(e.getFullYear(),e.getMonth()+1,1)),className:`p-2 rounded border ${Je}`,children:(0,$.jsx)(Iu,{className:`h-4 w-4`})})]}),(0,$.jsx)(xl,{onDragEnd:Ve,children:(0,$.jsx)(`div`,{className:`grid grid-cols-7 gap-2`,children:Array.from({length:42}).map((t,n)=>{let r=VH(ue),i=HH(r,n),s=UH(i),c=s===RH(),u=i.getMonth()===ue.getMonth(),d=o.filter(e=>e.streamId===l&&e.date===s);return(0,$.jsx)(Su,{droppableId:s,children:t=>(0,$.jsxs)(`div`,{ref:t.innerRef,...t.droppableProps,className:`border rounded-lg p-2 min-h-[110px] ${e?`border-gray-700`:`border-gray-200`} ${u?``:`opacity-60`}`,children:[(0,$.jsx)(`div`,{className:`text-xs mb-2 ${c?`font-semibold text-blue-500`:qe}`,children:i.getDate()}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-1`,children:[d.map((t,n)=>{let r=t.date<RH(),i=a.find(e=>e.id===t.streamId)?.color;return(0,$.jsx)(Gl,{draggableId:String(t.id),index:n,children:n=>(0,$.jsx)(`div`,{ref:n.innerRef,...n.draggableProps,...n.dragHandleProps,onClick:()=>be(t),className:`text-xs px-2 py-1 rounded border cursor-pointer ${e?`border-gray-700`:`border-gray-200`} ${r?`opacity-50`:``}`,style:{borderColor:i||void 0,...n.draggableProps.style},children:(0,$.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,$.jsx)(`span`,{children:t.name}),t.status===`Draft`&&(0,$.jsx)(`span`,{className:`px-1 py-0.5 text-[10px] rounded ${e?`bg-yellow-900 text-yellow-200`:`bg-yellow-100 text-yellow-800`}`,children:`D`})]})})},t.id)}),t.placeholder]})]})},s)})})})]}),T&&(0,$.jsx)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,children:(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-md border ${Ke}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold`,children:D===`rename`?`Rename Customer`:`Add Customer`}),(0,$.jsx)(`button`,{onClick:()=>E(!1),className:`px-2 py-1 rounded border ${Je}`,children:`Close`})]}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[(0,$.jsx)(`input`,{value:ee,onChange:e=>te(e.target.value),placeholder:`Customer name`,className:`border rounded px-3 py-2 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`span`,{className:`text-sm ${qe}`,children:`Color`}),(0,$.jsx)(`input`,{type:`color`,value:ne,onChange:e=>k(e.target.value)})]}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>E(!1),className:`px-3 py-2 rounded border ${Je}`,children:`Cancel`}),(0,$.jsx)(`button`,{onClick:ve,className:`px-3 py-2 bg-emerald-500 text-white rounded`,children:`Save`})]})]})]})}),ae&&(0,$.jsxs)(`div`,{className:`fixed inset-0 flex items-center justify-center z-50 bg-black/50`,onClick:ge,children:[(0,$.jsxs)(`div`,{className:`p-4 rounded-lg w-full max-w-4xl border max-h-[85vh] overflow-hidden ${Ke}`,onClick:e=>e.stopPropagation(),children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-3`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-semibold`,children:j?`Edit Release`:`New Release`}),(0,$.jsx)(`button`,{onClick:ge,className:`px-2 py-1 rounded border ${Je}`,children:`Close`})]}),(0,$.jsxs)(`div`,{className:`flex flex-col gap-4 overflow-y-auto pr-1 max-h-[75vh]`,children:[(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-3`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Release Name`}),(0,$.jsx)(`input`,{value:N.name,onChange:e=>P(t=>({...t,name:e.target.value})),className:`w-full border rounded px-3 py-2 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Release Date`}),(0,$.jsx)(`input`,{type:`date`,value:N.date,onChange:e=>P(t=>({...t,date:e.target.value})),className:`w-full border rounded px-3 py-2 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Customer`}),(0,$.jsx)(`select`,{value:N.streamId,onChange:e=>P(t=>({...t,streamId:e.target.value})),className:`w-full border rounded px-3 py-2 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`,children:a.map(e=>(0,$.jsx)(`option`,{value:e.id,children:e.name},e.id))})]})]}),(0,$.jsxs)(`div`,{className:`border rounded p-3 ${Ge}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between gap-2 mb-3`,children:[(0,$.jsx)(`div`,{className:`font-semibold`,children:`Version Numbers`}),(0,$.jsx)(`button`,{onClick:Te,className:`px-2 py-1 rounded border ${Je}`,disabled:N.versions.length>=kH.length,children:`Add Version Field`})]}),N.versions.length===0?(0,$.jsx)(`div`,{className:`text-sm ${qe}`,children:`No version fields yet.`}):(0,$.jsx)(`div`,{className:`flex flex-col gap-2`,children:N.versions.map((t,n)=>(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2`,children:[(0,$.jsx)(`select`,{value:t.system,onChange:e=>Ee(n,`system`,e.target.value),className:`border rounded px-2 py-2 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`,children:kH.map(e=>{let t=N.versions.some((t,r)=>r!==n&&t.system===e);return(0,$.jsx)(`option`,{value:e,disabled:t,children:e},e)})}),(0,$.jsx)(`input`,{value:t.version,onChange:e=>Ee(n,`version`,e.target.value),placeholder:`Version`,className:`flex-1 border rounded px-3 py-2 min-w-[180px] ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsx)(`button`,{onClick:()=>De(n),className:`p-2 rounded border ${Je}`,title:`Remove version`,children:(0,$.jsx)(yd,{className:`h-4 w-4`})})]},`${t.system}-${n}`))})]}),(0,$.jsxs)(`div`,{className:`border rounded p-3 ${Ge}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between gap-2 mb-3`,children:[(0,$.jsx)(`div`,{className:`font-semibold`,children:`Release Contents`}),(0,$.jsx)(`button`,{onClick:Oe,className:`px-2 py-1 rounded border ${Je}`,disabled:N.contents.length>=kH.length,children:`Add Section`})]}),N.contents.length===0?(0,$.jsx)(`div`,{className:`text-sm ${qe}`,children:`No sections yet.`}):(0,$.jsx)(`div`,{className:`flex flex-col gap-3`,children:N.contents.map((t,n)=>{let r=t.features||[],i=t.bugs||[];return(0,$.jsxs)(`div`,{className:`border rounded p-3 ${e?`border-gray-700`:`border-gray-200`}`,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2 mb-3`,children:[(0,$.jsx)(`select`,{value:t.system,onChange:e=>ke(n,e.target.value),className:`border rounded px-2 py-2 ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`,children:kH.map(e=>{let t=N.contents.some((t,r)=>r!==n&&t.system===e);return(0,$.jsx)(`option`,{value:e,disabled:t,children:e},e)})}),(0,$.jsx)(`button`,{onClick:()=>Ie(n),className:`p-2 rounded border ${Je}`,title:`Remove section`,children:(0,$.jsx)(yd,{className:`h-4 w-4`})})]}),r.length===0&&i.length===0?(0,$.jsx)(`div`,{className:`text-sm ${qe}`,children:`No items yet.`}):(0,$.jsxs)(`div`,{className:`flex flex-col gap-3`,children:[r.length>0&&(0,$.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,$.jsx)(`div`,{className:`text-sm font-semibold`,children:`Features`}),r.map((r,i)=>(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2`,children:[(0,$.jsx)(`input`,{value:r,onChange:e=>Me(n,i,e.target.value),placeholder:`Feature detail`,className:`flex-1 border rounded px-3 py-2 min-w-[220px] ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsx)(`button`,{onClick:()=>Pe(n,i),className:`p-2 rounded border ${Je}`,title:`Remove feature`,children:(0,$.jsx)(yd,{className:`h-4 w-4`})})]},`${t.system}-feature-${i}`))]}),i.length>0&&(0,$.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,$.jsx)(`div`,{className:`text-sm font-semibold`,children:`Bugs`}),i.map((r,i)=>(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2`,children:[(0,$.jsx)(`input`,{value:r,onChange:e=>Ne(n,i,e.target.value),placeholder:`Bug fix detail`,className:`flex-1 border rounded px-3 py-2 min-w-[220px] ${e?`bg-gray-900 border-gray-700 text-gray-100`:`bg-white border-gray-300 text-gray-900`}`}),(0,$.jsx)(`button`,{onClick:()=>Fe(n,i),className:`p-2 rounded border ${Je}`,title:`Remove bug`,children:(0,$.jsx)(yd,{className:`h-4 w-4`})})]},`${t.system}-bug-${i}`))]})]}),(0,$.jsxs)(`div`,{className:`mt-3 flex flex-wrap gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>Ae(n),className:`px-2 py-1 rounded border ${Je}`,children:`Add Feature`}),(0,$.jsx)(`button`,{onClick:()=>je(n),className:`px-2 py-1 rounded border ${Je}`,children:`Add Bug`})]})]},`${t.system}-${n}`)})})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Attachments`}),(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center gap-2 mt-2`,children:[(0,$.jsxs)(`button`,{onClick:()=>F.current?.click(),className:`px-3 py-2 rounded border flex items-center gap-2 ${Je}`,children:[(0,$.jsx)(sd,{className:`h-4 w-4`}),`Add Files`]}),(0,$.jsx)(`input`,{ref:F,type:`file`,multiple:!0,onChange:e=>Ce(e.target.files),className:`hidden`})]}),N.attachments.length>0&&(0,$.jsx)(`div`,{className:`flex flex-col gap-2 mt-2`,children:N.attachments.map(t=>(0,$.jsxs)(`div`,{className:`flex items-center justify-between border rounded px-3 py-2 ${e?`border-gray-700`:`border-gray-200`}`,children:[(0,$.jsxs)(`div`,{className:`text-sm`,children:[t.name,` (`,Math.round(t.size/1024),` KB)`]}),(0,$.jsx)(`button`,{onClick:()=>we(t.id),className:`text-red-500`,children:`Remove`})]},t.id))})]}),(0,$.jsxs)(`div`,{className:`flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{onClick:ge,className:`px-3 py-2 rounded border ${Je}`,children:`Cancel`}),!j&&N.linkedCardIds?.length>0&&(0,$.jsx)(`button`,{onClick:Se,className:`px-3 py-2 bg-gray-500 text-white rounded`,children:`Skip (Create Draft)`}),(0,$.jsx)(`button`,{onClick:xe,className:`px-3 py-2 bg-blue-500 text-white rounded`,children:`Save Release`})]})]})]}),M&&(0,$.jsx)(`div`,{className:`fixed inset-0 z-[60] flex items-center justify-center bg-black/60`,onClick:e=>e.stopPropagation(),children:(0,$.jsxs)(`div`,{className:`w-full max-w-md rounded-lg border p-4 shadow-lg ${Ke}`,onClick:e=>e.stopPropagation(),children:[(0,$.jsx)(`div`,{className:`text-lg font-semibold mb-2`,children:`Unsaved changes`}),(0,$.jsx)(`p`,{className:`text-sm ${qe}`,children:`You have unsaved changes. Are you sure you want to close?`}),(0,$.jsxs)(`div`,{className:`mt-4 flex justify-end gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>le(!1),className:`px-3 py-2 rounded border ${Je}`,children:`Cancel`}),(0,$.jsx)(`button`,{onClick:()=>{le(!1),A(!1),ce(null),oe(null)},className:`px-3 py-2 rounded bg-red-500 text-white`,children:`Discard Changes`})]})]})})]})]})}var YH=`bugBuilderDraft`,XH=`bugBuilderWsPort`,ZH=3001,QH=[`Dev1`,`Dev2`,`Dev3`,`Test`,`Staging`,`Production`],$H=typeof window<`u`&&window.localStorage?.getItem(`bugBuilderDebugWs`)===`1`,eU=()=>Math.random().toString(36).slice(2,10),tU=e=>`https://${e===`Production`?`www`:e.toLowerCase()}.esayworkmobile.co.uk/auth/sign-in`,nU={title:``,steps:[{id:eU(),text:``,images:[]}],actual:``,expected:``,actualImages:[],expectedImages:[],formName:``,jobTypeName:``,jobId:``,account:``,password:``,mobileUser:``,mobilePassword:``},rU=e=>({...nU,...e,steps:(e?.steps||nU.steps).map(e=>({...e,images:e?.images||[]})),actualImages:e?.actualImages||[],expectedImages:e?.expectedImages||[]}),iU=e=>{let t=[],n=e=>{e.length!==0&&(t.length>0&&t.push(``),t.push(...e))},r=[];e.account&&r.push(`Account: ${e.account}`),e.password&&r.push(`Password: ${e.password}`),e.mobileUser&&r.push(`Mobile User: ${e.mobileUser}`),e.mobilePassword&&r.push(`Mobile Password: ${e.mobilePassword}`),n(r);let i=[];e.formName&&i.push(`Form Name: ${e.formName}`),e.jobTypeName&&i.push(`Job Type Name: ${e.jobTypeName}`),e.jobId&&i.push(`Job ID: ${e.jobId}`),n(i);let a=e.steps.map(e=>e.text.trim()).filter(Boolean).map((e,t)=>`${t+1}. ${e}`);return a.length>0&&n([`Steps:`,...a]),e.actual&&n([`Actual Result:`,e.actual]),e.expected&&n([`Expected Result:`,e.expected]),t.join(`
`)},aU=e=>e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,`&quot;`).replace(/'/g,`&#39;`),oU=e=>{let t=[],n=e=>{e&&t.push(e)},r=[];e.account&&r.push(`<div><strong>Account:</strong> ${aU(e.account)}</div>`),e.password&&r.push(`<div><strong>Password:</strong> ${aU(e.password)}</div>`),e.mobileUser&&r.push(`<div><strong>Mobile User:</strong> ${aU(e.mobileUser)}</div>`),e.mobilePassword&&r.push(`<div><strong>Mobile Password:</strong> ${aU(e.mobilePassword)}</div>`),r.length>0&&n(r.join(``));let i=[];e.formName&&i.push(`<div><strong>Form Name:</strong> ${aU(e.formName)}</div>`),e.jobTypeName&&i.push(`<div><strong>Job Type Name:</strong> ${aU(e.jobTypeName)}</div>`),e.jobId&&i.push(`<div><strong>Job ID:</strong> ${aU(e.jobId)}</div>`),i.length>0&&n(i.join(``));let a=e.steps.map(e=>e.text.trim()).filter(Boolean).map(e=>`<li>${aU(e)}</li>`);if(a.length>0&&n(`<div><strong>Steps:</strong></div><ol>${a.join(``)}</ol>`),e.steps.flatMap((e,t)=>(e.images||[]).map(e=>`<div><strong>Step ${t+1} Screenshot:</strong></div><div><img src="${e.src}" alt="Step ${t+1} screenshot" style="max-width: 520px; height: auto;"/></div>`)).forEach(e=>n(e)),e.actual&&n(`<div><strong>Actual Result:</strong></div><div>${aU(e.actual)}</div>`),e.actualImages.length>0){let t=e.actualImages.map(e=>`<div><img src="${e.src}" alt="Actual result screenshot" style="max-width: 520px; height: auto;"/></div>`).join(``);n(`<div><strong>Actual Result Screenshots:</strong></div>${t}`)}if(e.expected&&n(`<div><strong>Expected Result:</strong></div><div>${aU(e.expected)}</div>`),e.expectedImages.length>0){let t=e.expectedImages.map(e=>`<div><img src="${e.src}" alt="Expected result screenshot" style="max-width: 520px; height: auto;"/></div>`).join(``);n(`<div><strong>Expected Result Screenshots:</strong></div>${t}`)}return t.join(`<br/>`)},sU=async(e,t)=>{if(navigator.clipboard.write&&window.ClipboardItem){let n=new ClipboardItem({"text/html":new Blob([e],{type:`text/html`}),"text/plain":new Blob([t],{type:`text/plain`})});return await navigator.clipboard.write([n]),!0}let n=document.createElement(`div`);n.innerHTML=e,n.style.position=`fixed`,n.style.left=`-9999px`,n.style.top=`0`,n.setAttribute(`aria-hidden`,`true`),document.body.appendChild(n);let r=window.getSelection();if(!r)return document.body.removeChild(n),!1;r.removeAllRanges();let i=document.createRange();i.selectNodeContents(n),r.addRange(i);let a=document.execCommand(`copy`);return r.removeAllRanges(),document.body.removeChild(n),a},cU=e=>{let t=e.replace(/\s+/g,` `).trim(),n=/(account|username|password|mobile user|mobile password|form name|job type name|job id|steps|actual result|expected result)\s*(?:[:\-]|is\b)?\s*/gi,r=[],i;for(;(i=n.exec(t))!==null;)r.push({index:i.index,label:i[1].toLowerCase(),length:i[0].length});let a={},o=e=>e===`username`||e===`account`?`account`:e===`password`?`password`:e===`mobile user`?`mobileUser`:e===`mobile password`?`mobilePassword`:e===`form name`?`formName`:e===`job type name`?`jobTypeName`:e===`job id`?`jobId`:e===`steps`?`steps`:e===`actual result`?`actual`:e===`expected result`?`expected`:null;if(r.forEach((e,n)=>{let i=r[n+1]?.index??t.length,s=t.slice(e.index+e.length,i).trim(),c=o(e.label);c&&s&&(a[c]=s)}),a.steps){let e=a.steps.split(/\s*\d+[\).:-]\s*/).map(e=>e.trim()).filter(Boolean),t=a.steps.split(/\s*;\s*|\s*\n\s*/).map(e=>e.trim()).filter(Boolean);a.steps=e.length>1?e:t}else{let e=Array.from(t.matchAll(/step\s*\d+\s*[:\).\-]?\s*([^\n\.]+)/gi));e.length>0&&(a.steps=e.map(e=>e[1].trim()).filter(Boolean))}return a},lU=e=>{let t=e?.label||e?.text||e?.name||``,n=e?.value||e?.selected||e?.input||``,r=e?.url||e?.path||``;switch(e?.type){case`click`:return t?`Click "${t}"`:null;case`input`:return t||n?`Enter "${n||`[value]`}" into "${t||`[field]`}"`:null;case`select`:return t||n?`Select "${n||`[option]`}" from "${t||`[dropdown]`}"`:null;case`toggle`:return t?e?.checked?`Enable "${t}"`:`Disable "${t}"`:null;case`navigation`:return r?`Navigate to "${r}"`:null;case`error`:return e?.message?`See error "${e.message}"`:null;default:return e?.text?e.text:null}};function uU(){let{darkMode:e}=(0,v.useContext)(dU)||{},{data:t,updateData:n,deleteData:r}=$V(`bug-builder`,`draft`,nU),i=t?rU(t):nU,a=e=>{if(typeof e==`function`){let t=e(i);n(t)}else n(e)},[o,s]=(0,v.useState)(!1),[c,l]=(0,v.useState)(null),[u,d]=(0,v.useState)(!1),[f,p]=(0,v.useState)(!0),[m,h]=(0,v.useState)(()=>{let e=localStorage.getItem(YH);if(e)try{return JSON.parse(e).environment||`Test`}catch{return`Test`}return`Test`}),[g,_]=(0,v.useState)(()=>{let e=localStorage.getItem(XH);return e?Number(e):ZH}),[y,b]=(0,v.useState)(`disconnected`),[x,S]=(0,v.useState)(``),[C,w]=(0,v.useState)(!1);(0,v.useRef)(!1);let T=(0,v.useRef)({}),E=(0,v.useRef)(null),D=(0,v.useRef)(null),O=(0,v.useRef)(``),ee=(0,v.useRef)(null),te=(0,v.useRef)(null),ne=(0,v.useRef)(null),k=(0,v.useRef)(new Map);(0,v.useEffect)(()=>{let e={environment:m};localStorage.setItem(YH,JSON.stringify(e))},[m]),(0,v.useEffect)(()=>{localStorage.setItem(XH,String(g))},[g]),(0,v.useEffect)(()=>{if(!o)return;let e=e=>{e.preventDefault(),e.returnValue=``};return window.addEventListener(`beforeunload`,e),()=>window.removeEventListener(`beforeunload`,e)},[o]),(0,v.useEffect)(()=>{if(!c)return;let e=setTimeout(()=>l(null),1e4);return()=>clearTimeout(e)},[c]),(0,v.useEffect)(()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;p(!!e)},[]),(0,v.useEffect)(()=>{if(!E.current)return;let e=E.current;E.current=null,requestAnimationFrame(()=>{T.current[e]?.focus()})},[i.steps]),(0,v.useEffect)(()=>{if(!g)return;let e=`ws://localhost:${g}`,t=!0;ne.current&&=(clearTimeout(ne.current),null);let n=n=>{n.onopen=()=>{b(`connected`),$H&&console.log(`[BB] WS open`,e)},n.onclose=()=>{$H&&console.log(`[BB] WS close`,e),ee.current===n&&(ee.current=null),t&&(b(`disconnected`),te.current=setTimeout(r,2e3))},n.onerror=()=>{S(`Recorder connection error`),$H&&console.warn(`[BB] WS error`,e)},n.onmessage=e=>{$H&&console.log(`[BB] WS message`,e.data);try{let t=JSON.parse(e.data);if(t.type===`screenshot`&&t.dataUrl){a(e=>{if(e.steps.length===0)return e;let n=[...e.steps],r=n[n.steps.length-1];return n[n.steps.length-1]={...r,images:[...r.images||[],{id:eU(),src:t.dataUrl}]},{...e,steps:n}});return}ae(t)}catch{}}},r=()=>{if(!t)return;b(`connecting`);let r=ee.current;if(r&&r.url===e&&(r.readyState===WebSocket.OPEN||r.readyState===WebSocket.CONNECTING)){n(r);return}let i=new WebSocket(e);ee.current=i,n(i)};return r(),()=>{t=!1,te.current&&clearTimeout(te.current),ne.current=setTimeout(()=>{ee.current&&ee.current.url===e&&(ee.current.readyState===WebSocket.OPEN||ee.current.readyState===WebSocket.CONNECTING)&&ee.current.close()},250)}},[g]);let re=(0,v.useMemo)(()=>iU(i),[i]),ie=(0,v.useMemo)(()=>tU(m),[m]),ae=e=>{let t=[e?.type,e?.label,e?.value,e?.checked,e?.timestamp].filter(e=>e!=null).join(`|`);if(t){let e=Date.now(),n=k.current.get(t);if(n&&e-n<750)return;if(k.current.set(t,e),k.current.size>50){let e=Array.from(k.current.entries()).slice(-30);k.current=new Map(e)}}let n=lU(e);if(!n)return;let r={id:eU(),text:n,images:[]};E.current=r.id,a(e=>({...e,steps:[...e.steps,r]}))},A=async()=>{await navigator.clipboard.writeText(`npm run dev
npm run recorder:server`),l({type:`success`,message:`Commands copied`})},j=(e,t)=>{a(n=>({...n,[e]:t}))},oe=()=>{a(e=>({...e,steps:[...e.steps,{id:eU(),text:``,images:[]}]}))},se=e=>{let t=eU();E.current=t,a(n=>{let r=[...n.steps];return r.splice(e+1,0,{id:t,text:``,images:[]}),{...n,steps:r}})},ce=(e,t)=>{a(n=>({...n,steps:n.steps.map(n=>n.id===e?{...n,images:[...n.images||[],{id:eU(),src:t}]}:n)}))},M=(e,t)=>{a(n=>({...n,steps:n.steps.map(n=>n.id===e?{...n,images:(n.images||[]).filter(e=>e.id!==t)}:n)}))},le=e=>{a(t=>({...t,actualImages:[...t.actualImages,{id:eU(),src:e}]}))},N=e=>{a(t=>({...t,actualImages:t.actualImages.filter(t=>t.id!==e)}))},P=e=>{a(t=>({...t,expectedImages:[...t.expectedImages,{id:eU(),src:e}]}))},F=e=>{a(t=>({...t,expectedImages:t.expectedImages.filter(t=>t.id!==e)}))},ue=(e,t)=>{let n=Array.from(e.clipboardData?.items||[]).filter(e=>e.type.startsWith(`image/`));n.length!==0&&(e.preventDefault(),n.forEach(e=>{let n=e.getAsFile();if(!n)return;let r=new FileReader;r.onload=()=>{typeof r.result==`string`&&t(r.result)},r.readAsDataURL(n)}))},de=(e,t)=>{a(n=>({...n,steps:n.steps.map(n=>n.id===e?{...n,text:t}:n)}))},fe=e=>{a(t=>({...t,steps:t.steps.filter(t=>t.id!==e)}))},pe=e=>{if(!e.destination)return;let t=Array.from(i.steps),[n]=t.splice(e.source.index,1);t.splice(e.destination.index,0,n),a(e=>({...e,steps:t}))},me=async()=>{i.title.trim()&&(await navigator.clipboard.writeText(i.title.trim()),l({type:`success`,message:`Title copied`}))},he=e=>{let t=cU(e);a(e=>({...e,account:t.account??e.account,password:t.password??e.password,mobileUser:t.mobileUser??e.mobileUser,mobilePassword:t.mobilePassword??e.mobilePassword,formName:t.formName??e.formName,jobTypeName:t.jobTypeName??e.jobTypeName,jobId:t.jobId??e.jobId,actual:t.actual??e.actual,expected:t.expected??e.expected,steps:t.steps?.length?t.steps.map(e=>({id:eU(),text:e,images:[]})):e.steps}))},ge=()=>{if(!f){l({type:`error`,message:`Speech recognition not supported`});return}if(u){D.current?.stop();return}let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){l({type:`error`,message:`Speech recognition not supported`});return}if(!D.current){let t=new e;t.continuous=!0,t.interimResults=!0,t.lang=`en-US`,t.onresult=e=>{for(let t=e.resultIndex;t<e.results.length;t+=1){let n=e.results[t];if(n.isFinal){let e=n[0]?.transcript?.trim();e&&(O.current+=`${O.current?` `:``}${e}`)}}},t.onerror=()=>{d(!1),l({type:`error`,message:`Speech recognition failed`})},t.onend=()=>{d(!1);let e=O.current.trim();if(e){he(e);let t=e.length>200?`${e.slice(0,200)}...`:e;l({type:`success`,message:`Transcript: ${t}`})}},D.current=t}O.current=``;try{D.current.start(),d(!0)}catch{l({type:`error`,message:`Speech recognition unavailable`}),d(!1)}},_e=async()=>{if(!re.trim())return;let e=oU(i);try{await sU(e,re)||await navigator.clipboard.writeText(re),l({type:`success`,message:`Bug copied`})}catch{await navigator.clipboard.writeText(re),l({type:`success`,message:`Bug copied`})}},ve=e?`bg-gray-900/70 border-gray-700 text-gray-100`:`bg-white border-gray-200 text-gray-900`,ye=e?`bg-gray-900 border-gray-700 text-gray-100 placeholder:text-gray-500`:`bg-white border-gray-300 text-gray-900 placeholder:text-gray-400`,be=e?`text-gray-400`:`text-gray-500`;return(0,$.jsxs)(`div`,{className:`w-full`,children:[(0,$.jsxs)(`div`,{className:`border rounded-xl p-4 mb-4 ${ve}`,children:[(0,$.jsxs)(`div`,{className:`flex flex-wrap items-center justify-center gap-3`,children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Environment`}),(0,$.jsx)(`select`,{value:m,onChange:e=>h(e.target.value),className:`border rounded px-3 py-2 ${ye}`,children:QH.map(e=>(0,$.jsx)(`option`,{value:e,children:e},e))}),C&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Recorder Port`}),(0,$.jsx)(`input`,{type:`number`,value:g,onChange:e=>_(Number(e.target.value)||ZH),className:`border rounded px-3 py-2 w-28 ${ye}`})]}),(0,$.jsx)(`button`,{onClick:()=>w(!C),className:`p-2 rounded border ${e?`border-gray-700 hover:bg-gray-800`:`border-gray-300 hover:bg-gray-50`}`,title:`Port settings`,children:(0,$.jsx)(dd,{className:`h-4 w-4`})}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2 text-sm`,children:[(0,$.jsx)(`span`,{className:`h-2 w-2 rounded-full ${y===`connected`?`bg-emerald-400`:y===`connecting`||y===`reconnecting`?`bg-yellow-400`:`bg-gray-400`}`}),(0,$.jsx)(`span`,{className:be,children:y===`connected`?`Connected`:`Disconnected`})]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsxs)(`a`,{href:ie,target:`_blank`,rel:`noreferrer`,className:`px-3 py-2 rounded border inline-flex items-center gap-2 ${e?`border-gray-700`:`border-gray-300`}`,children:[(0,$.jsx)(Ju,{className:`h-4 w-4`}),`Open Environment`]}),(0,$.jsx)(`button`,{onClick:A,className:`px-3 py-2 rounded border inline-flex items-center gap-2 ${e?`border-gray-700`:`border-gray-300`}`,title:`Copy commands to run locally`,children:(0,$.jsx)(md,{className:`h-4 w-4`})})]})]}),x&&(0,$.jsx)(`div`,{className:`mt-2 text-sm text-red-400 text-center`,children:x})]}),(0,$.jsxs)(`div`,{className:`flex flex-col lg:flex-row gap-4`,children:[(0,$.jsx)(`div`,{className:`flex-1 border rounded-xl p-4 ${ve}`,children:(0,$.jsxs)(`div`,{className:`flex flex-col gap-4`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between mb-2`,children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Title`}),(0,$.jsx)(`button`,{onClick:ge,className:`px-2 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,disabled:!f,title:f?`Speech to text`:`Speech not supported`,children:u?(0,$.jsx)(id,{className:`h-4 w-4`}):(0,$.jsx)(ad,{className:`h-4 w-4`})})]}),(0,$.jsx)(`input`,{value:i.title,onChange:e=>j(`title`,e.target.value),className:`w-full border rounded px-3 py-2 ${ye}`,placeholder:`Bug title`})]}),(0,$.jsxs)(`div`,{className:`border rounded-lg p-3 ${e?`border-gray-700`:`border-gray-200`}`,children:[(0,$.jsx)(`div`,{className:`text-sm font-semibold mb-2`,children:`Credentials`}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-3`,children:[(0,$.jsx)(`input`,{value:i.account,onChange:e=>j(`account`,e.target.value),placeholder:`Account`,className:`border rounded px-3 py-2 ${ye}`}),(0,$.jsx)(`input`,{value:i.password,onChange:e=>j(`password`,e.target.value),placeholder:`Password`,className:`border rounded px-3 py-2 ${ye}`}),(0,$.jsx)(`input`,{value:i.mobileUser,onChange:e=>j(`mobileUser`,e.target.value),placeholder:`Mobile User`,className:`border rounded px-3 py-2 ${ye}`}),(0,$.jsx)(`input`,{value:i.mobilePassword,onChange:e=>j(`mobilePassword`,e.target.value),placeholder:`Mobile Password`,className:`border rounded px-3 py-2 ${ye}`})]})]}),(0,$.jsxs)(`div`,{className:`border rounded-lg p-3 ${e?`border-gray-700`:`border-gray-200`}`,children:[(0,$.jsx)(`div`,{className:`text-sm font-semibold mb-2`,children:`Form / Job Details`}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-3`,children:[(0,$.jsx)(`input`,{value:i.formName,onChange:e=>j(`formName`,e.target.value),placeholder:`Form Name`,className:`border rounded px-3 py-2 ${ye}`}),(0,$.jsx)(`input`,{value:i.jobTypeName,onChange:e=>j(`jobTypeName`,e.target.value),placeholder:`Job Type Name`,className:`border rounded px-3 py-2 ${ye}`}),(0,$.jsx)(`input`,{value:i.jobId,onChange:e=>j(`jobId`,e.target.value),placeholder:`Job ID`,className:`border rounded px-3 py-2 ${ye}`})]})]}),(0,$.jsxs)(`div`,{className:`border rounded-lg p-3 ${e?`border-gray-700`:`border-gray-200`}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Steps`}),(0,$.jsx)(`button`,{onClick:oe,className:`px-2 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:(0,$.jsx)(Vu,{className:`h-4 w-4`})})]}),(0,$.jsx)(xl,{onDragEnd:pe,children:(0,$.jsx)(Su,{droppableId:`steps`,children:t=>(0,$.jsxs)(`div`,{ref:t.innerRef,...t.droppableProps,className:`flex flex-col gap-2 mt-3`,children:[i.steps.map((t,n)=>(0,$.jsx)(Gl,{draggableId:t.id,index:n,children:r=>(0,$.jsxs)(`div`,{ref:r.innerRef,...r.draggableProps,children:[(0,$.jsxs)(`div`,{className:`flex items-center gap-2 border rounded px-2 py-2 ${e?`border-gray-700`:`border-gray-200`}`,children:[(0,$.jsx)(`div`,{...r.dragHandleProps,className:`cursor-grab ${be}`,children:(0,$.jsx)(Xu,{className:`h-4 w-4`})}),(0,$.jsxs)(`span`,{className:`text-xs ${be}`,children:[n+1,`.`]}),(0,$.jsx)(`input`,{value:t.text,onChange:e=>de(t.id,e.target.value),onKeyDown:e=>{e.key===`Enter`&&(e.preventDefault(),se(n))},onPaste:e=>ue(e,e=>ce(t.id,e)),ref:e=>{e?T.current[t.id]=e:delete T.current[t.id]},placeholder:`Step description`,className:`flex-1 border rounded px-3 py-2 ${ye}`}),(0,$.jsx)(`button`,{onClick:()=>fe(t.id),children:(0,$.jsx)(hd,{className:`h-4 w-4 text-red-500`})})]}),t.images?.length>0&&(0,$.jsx)(`div`,{className:`ml-7 mt-2 flex flex-wrap gap-2`,children:t.images.map(e=>(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(`img`,{src:e.src,alt:`Step screenshot`,className:`h-24 w-32 object-cover rounded border`}),(0,$.jsx)(`button`,{onClick:()=>M(t.id,e.id),className:`absolute -top-2 -right-2 bg-white rounded-full border shadow`,"aria-label":`Remove screenshot`,children:(0,$.jsx)(yd,{className:`h-3 w-3`})})]},e.id))})]})},t.id)),t.placeholder]})})})]}),(0,$.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-3`,children:[(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Actual Result`}),(0,$.jsx)(`textarea`,{value:i.actual,onChange:e=>j(`actual`,e.target.value),onPaste:e=>ue(e,le),className:`w-full border rounded px-3 py-2 min-h-[120px] ${ye}`}),i.actualImages.length>0&&(0,$.jsx)(`div`,{className:`mt-2 flex flex-wrap gap-2`,children:i.actualImages.map(e=>(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(`img`,{src:e.src,alt:`Actual result screenshot`,className:`h-24 w-32 object-cover rounded border`}),(0,$.jsx)(`button`,{onClick:()=>N(e.id),className:`absolute -top-2 -right-2 bg-white rounded-full border shadow`,"aria-label":`Remove screenshot`,children:(0,$.jsx)(yd,{className:`h-3 w-3`})})]},e.id))})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`text-sm font-semibold`,children:`Expected Result`}),(0,$.jsx)(`textarea`,{value:i.expected,onChange:e=>j(`expected`,e.target.value),onPaste:e=>ue(e,P),className:`w-full border rounded px-3 py-2 min-h-[120px] ${ye}`}),i.expectedImages.length>0&&(0,$.jsx)(`div`,{className:`mt-2 flex flex-wrap gap-2`,children:i.expectedImages.map(e=>(0,$.jsxs)(`div`,{className:`relative`,children:[(0,$.jsx)(`img`,{src:e.src,alt:`Expected result screenshot`,className:`h-24 w-32 object-cover rounded border`}),(0,$.jsx)(`button`,{onClick:()=>F(e.id),className:`absolute -top-2 -right-2 bg-white rounded-full border shadow`,"aria-label":`Remove screenshot`,children:(0,$.jsx)(yd,{className:`h-3 w-3`})})]},e.id))})]})]})]})}),(0,$.jsxs)(`div`,{className:`flex-1 border rounded-xl p-4 ${ve}`,children:[(0,$.jsxs)(`div`,{className:`flex items-center justify-between gap-2 mb-4`,children:[(0,$.jsx)(`div`,{children:(0,$.jsx)(`h2`,{className:`text-lg font-semibold`,children:`Live Preview`})}),(0,$.jsxs)(`div`,{className:`flex flex-wrap gap-2`,children:[(0,$.jsx)(`button`,{onClick:me,className:`px-2 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:(0,$.jsx)(Ku,{className:`h-4 w-4`})}),(0,$.jsx)(`button`,{onClick:_e,className:`px-2 py-1 rounded border ${e?`border-gray-700`:`border-gray-300`}`,children:(0,$.jsx)(Uu,{className:`h-4 w-4`})})]})]}),(0,$.jsx)(`div`,{className:`overflow-y-auto max-h-[70vh] pr-2`,children:(0,$.jsx)(`div`,{className:`rounded-xl border p-4 ${e?`border-gray-700 bg-gray-900/60`:`border-gray-200 bg-white`}`,children:(0,$.jsxs)(`div`,{className:`space-y-4 text-sm`,children:[i.title&&(0,$.jsx)(`div`,{className:`text-lg font-semibold`,children:i.title}),(i.account||i.password||i.mobileUser||i.mobilePassword)&&(0,$.jsxs)(`div`,{className:`space-y-1`,children:[i.account&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`font-semibold`,children:`Account:`}),` `,i.account]}),i.password&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`font-semibold`,children:`Password:`}),` `,i.password]}),i.mobileUser&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`font-semibold`,children:`Mobile User:`}),` `,i.mobileUser]}),i.mobilePassword&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`font-semibold`,children:`Mobile Password:`}),` `,i.mobilePassword]})]}),i.steps.some(e=>e.text.trim())&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`font-semibold`,children:`Steps:`}),(0,$.jsx)(`ol`,{className:`list-decimal pl-5`,children:i.steps.filter(e=>e.text.trim()).map(e=>(0,$.jsxs)(`li`,{className:`mb-2`,children:[(0,$.jsx)(`div`,{children:e.text}),e.images?.length>0&&(0,$.jsx)(`div`,{className:`mt-2 flex flex-wrap gap-2`,children:e.images.map(e=>(0,$.jsx)(`img`,{src:e.src,alt:`Step screenshot`,className:`h-24 w-32 object-cover rounded border`},e.id))})]},e.id))})]}),(i.formName||i.jobTypeName||i.jobId)&&(0,$.jsxs)(`div`,{children:[i.formName&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`font-semibold`,children:`Form Name:`}),` `,i.formName]}),i.jobTypeName&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`font-semibold`,children:`Job Type Name:`}),` `,i.jobTypeName]}),i.jobId&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`span`,{className:`font-semibold`,children:`Job ID:`}),` `,i.jobId]})]}),i.actual&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`font-semibold`,children:`Actual Result:`}),(0,$.jsx)(`div`,{className:`whitespace-pre-wrap`,children:i.actual}),i.actualImages.length>0&&(0,$.jsx)(`div`,{className:`mt-2 flex flex-wrap gap-2`,children:i.actualImages.map(e=>(0,$.jsx)(`img`,{src:e.src,alt:`Actual result screenshot`,className:`h-24 w-32 object-cover rounded border`},e.id))})]}),i.expected&&(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`div`,{className:`font-semibold`,children:`Expected Result:`}),(0,$.jsx)(`div`,{className:`whitespace-pre-wrap`,children:i.expected}),i.expectedImages.length>0&&(0,$.jsx)(`div`,{className:`mt-2 flex flex-wrap gap-2`,children:i.expectedImages.map(e=>(0,$.jsx)(`img`,{src:e.src,alt:`Expected result screenshot`,className:`h-24 w-32 object-cover rounded border`},e.id))})]})]})})})]})]}),c&&(0,$.jsx)(`div`,{className:`fixed bottom-6 right-6 z-50`,children:(0,$.jsxs)(`div`,{className:`px-4 py-2 rounded shadow-lg text-sm ${c.type===`success`?`bg-emerald-500 text-white`:`bg-gray-900 text-white`}`,children:[c.message,(0,$.jsx)(`button`,{onClick:()=>l(null),className:`ml-2`,children:(0,$.jsx)(yd,{className:`h-4 w-4`})})]})})]})}const dU=v.createContext();var fU=`zenTasksMenuOrder`,pU=`zenTasksMenuLabels`,mU=[{id:`tasks`,to:`/`,label:`Tasks`,icon:Uu},{id:`environments`,to:`/environments`,label:`Environments`,icon:Zu},{id:`team-tasks`,to:`/team-tasks`,label:`Team Tasks`,icon:vd,adminOnly:!0},{id:`release-schedule`,to:`/release-schedule`,label:`Release Schedule`,icon:ju},{id:`bug-builder`,to:`/bug-builder`,label:`Bug Builder`,icon:Au}],hU=e=>{let t=e?.email===`sam.stanley@workmobileforms.com`,n=mU.filter(e=>!e.adminOnly||t),r=localStorage.getItem(fU),i=localStorage.getItem(pU),a=i?JSON.parse(i):{},o=n.map(e=>({...e,label:a[e.id]||e.label}));if(!r)return o;try{let e=JSON.parse(r);if(!Array.isArray(e))return o;let t=new Map(o.map(e=>[e.id,e])),n=e.map(e=>t.get(e)).filter(Boolean),i=o.filter(t=>!e.includes(t.id));return[...n,...i]}catch{return o}};function gU(){let[e,t]=v.useState(!1),[n,r]=v.useState(()=>{let e=localStorage.getItem(`zenTasksDarkMode`);return e?JSON.parse(e):!1}),{logout:i,currentUser:a}=iH(),[o,s]=v.useState(()=>hU(a)),[c,l]=v.useState(!1),u=Re(),d=v.useMemo(()=>o.find(e=>e.to===u.pathname)?.label||`Tasks`,[u.pathname,o]);v.useEffect(()=>{s(hU(a))},[a]),v.useEffect(()=>{localStorage.setItem(`zenTasksDarkMode`,JSON.stringify(n)),n?document.documentElement.classList.add(`dark`):document.documentElement.classList.remove(`dark`)},[n]),v.useEffect(()=>{localStorage.setItem(fU,JSON.stringify(o.map(e=>e.id)));let e=o.reduce((e,t)=>(e[t.id]=t.label,e),{});localStorage.setItem(pU,JSON.stringify(e))},[o]),v.useEffect(()=>{!e&&c&&l(!1)},[e,c]);let f=e=>{e.destination&&s(t=>{let n=Array.from(t),[r]=n.splice(e.source.index,1);return n.splice(e.destination.index,0,r),n})},p=(e,t)=>{s(n=>n.map(n=>n.id===e?{...n,label:t}:n))},m=n;return(0,$.jsx)(dU.Provider,{value:{darkMode:n,setDarkMode:r},children:(0,$.jsxs)(`div`,{className:`min-h-screen flex`,children:[e&&(0,$.jsx)(`div`,{onClick:()=>t(!1),className:`fixed inset-0 bg-black/30 z-30`}),(0,$.jsxs)(`div`,{className:`fixed inset-y-0 left-0 w-64 transform ${e?`translate-x-0`:`-translate-x-64`} transition-transform z-40 ${m?`bg-green-700 text-white`:`bg-green-400 text-white`}`,children:[(0,$.jsxs)(`div`,{className:`p-4 border-b flex items-center justify-between`,children:[(0,$.jsx)(`h3`,{className:`text-lg font-bold`,children:`Sam2.0`}),(0,$.jsx)(`button`,{onClick:()=>l(e=>!e),className:`p-2 rounded border ${c?`bg-white/10`:`border-white/30`}`,title:c?`Finish reordering`:`Reorder menu`,children:(0,$.jsx)(dd,{className:`h-4 w-4`})})]}),(0,$.jsx)(xl,{onDragEnd:f,children:(0,$.jsx)(Su,{droppableId:`menu`,children:e=>(0,$.jsxs)(`nav`,{ref:e.innerRef,...e.droppableProps,className:`p-4 flex flex-col gap-2`,children:[o.map((e,n)=>{let r=e.icon,i=u.pathname===e.to;return(0,$.jsx)(Gl,{draggableId:e.id,index:n,isDragDisabled:!c,children:n=>(0,$.jsx)(`div`,{ref:n.innerRef,...n.draggableProps,className:`rounded ${i?m?`bg-green-800`:`bg-green-500`:``}`,children:(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[c&&(0,$.jsx)(`div`,{...n.dragHandleProps,className:`px-2 py-2 cursor-grab text-white/70`,title:`Drag to reorder`,children:(0,$.jsx)(Xu,{className:`h-4 w-4`})}),c?(0,$.jsxs)(`div`,{className:`flex-1 px-2 py-2 rounded flex items-center gap-3`,children:[(0,$.jsx)(r,{className:`h-4 w-4`}),(0,$.jsx)(`input`,{value:e.label,onChange:t=>p(e.id,t.target.value),className:`bg-transparent border-b border-white/60 focus:outline-none text-white w-full`})]}):(0,$.jsxs)(Tt,{to:e.to,onClick:()=>t(!1),className:`flex-1 px-2 py-2 rounded flex items-center gap-3 ${i?``:`hover:bg-green-500/80`}`,children:[(0,$.jsx)(r,{className:`h-4 w-4`}),(0,$.jsx)(`span`,{children:e.label})]})]})})},e.id)}),e.placeholder]})})})]}),(0,$.jsxs)(`div`,{className:`flex-1 flex flex-col min-h-screen`,children:[(0,$.jsxs)(`header`,{className:`${m?`bg-gray-900 text-white`:`bg-green-400 text-white`} p-3 flex items-center justify-between shadow-md`,children:[(0,$.jsx)(`button`,{onClick:()=>t(e=>!e),className:`p-2 rounded border border-white/20 text-white`,children:(0,$.jsx)(nd,{})}),(0,$.jsxs)(`h2`,{className:`text-xl font-semibold`,children:[`Sam2.0 - `,d]}),(0,$.jsxs)(`div`,{className:`flex items-center gap-2`,children:[(0,$.jsx)(`button`,{onClick:()=>r(e=>!e),className:`p-2 rounded border border-white/20 text-white`,title:`Toggle Dark Mode`,children:m?(0,$.jsx)(od,{className:`h-5 w-5`}):(0,$.jsx)(fd,{className:`h-5 w-5`})}),(0,$.jsx)(`button`,{onClick:i,className:`p-2 rounded border border-white/20 text-white`,title:`Sign Out`,children:(0,$.jsx)(td,{className:`h-5 w-5`})})]})]}),(0,$.jsx)(`main`,{className:`flex-1 p-6 ${m?`bg-gray-900 text-white`:`bg-white text-gray-900`}`,children:(0,$.jsx)(ut,{})})]})]})})}function _U(){return(0,$.jsx)(St,{children:(0,$.jsx)(pt,{children:(0,$.jsxs)(dt,{path:`/`,element:(0,$.jsx)(gU,{}),children:[(0,$.jsx)(dt,{index:!0,element:(0,$.jsx)(sH,{})}),(0,$.jsx)(dt,{path:`environments`,element:(0,$.jsx)(mH,{})}),(0,$.jsx)(dt,{path:`team-tasks`,element:(0,$.jsx)(DH,{})}),(0,$.jsx)(dt,{path:`release-schedule`,element:(0,$.jsx)(JH,{})}),(0,$.jsx)(dt,{path:`bug-builder`,element:(0,$.jsx)(uU,{})})]})})})}function vU(){let[e,t]=(0,v.useState)(``),[n,r]=(0,v.useState)(``),[i,a]=(0,v.useState)(``),[o,s]=(0,v.useState)(!1),{login:c}=iH();return(0,$.jsxs)(`div`,{className:`min-h-screen flex items-center justify-center bg-gradient-to-br from-green-400 to-green-600 p-4`,children:[o&&(0,$.jsx)(`div`,{className:`fixed inset-0 bg-black/50 flex items-center justify-center z-50`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-2xl p-8 flex flex-col items-center gap-4`,children:[(0,$.jsx)($u,{className:`h-12 w-12 text-green-500 animate-spin`}),(0,$.jsx)(`p`,{className:`text-gray-700 font-medium`,children:`Signing in...`})]})}),(0,$.jsx)(`div`,{className:`w-full max-w-md`,children:(0,$.jsxs)(`div`,{className:`bg-white rounded-2xl shadow-2xl p-8`,children:[(0,$.jsx)(`div`,{className:`text-center mb-8`,children:(0,$.jsx)(`h1`,{className:`text-3xl font-bold text-gray-900`,children:`Sam2.0`})}),(0,$.jsxs)(`form`,{onSubmit:async t=>{t.preventDefault(),a(``),s(!0);try{await c(e,n)}catch(e){a(e.message||`Failed to authenticate`)}finally{s(!1)}},className:`space-y-4`,children:[i&&(0,$.jsxs)(`div`,{className:`bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2`,children:[(0,$.jsx)(Lu,{className:`h-5 w-5 text-red-500 flex-shrink-0 mt-0.5`}),(0,$.jsx)(`span`,{className:`text-sm text-red-700`,children:i})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-1`,children:`Email`}),(0,$.jsx)(`input`,{type:`email`,value:e,onChange:e=>t(e.target.value),required:!0,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none`})]}),(0,$.jsxs)(`div`,{children:[(0,$.jsx)(`label`,{className:`block text-sm font-medium text-gray-700 mb-1`,children:`Password`}),(0,$.jsx)(`input`,{type:`password`,value:n,onChange:e=>r(e.target.value),required:!0,minLength:6,className:`w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none`})]}),(0,$.jsxs)(`button`,{type:`submit`,disabled:o,className:`w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors`,children:[(0,$.jsx)(ed,{className:`h-5 w-5`}),`Sign In`]})]})]})})]})}function yU(){let{currentUser:e,loading:t}=iH();return t?(0,$.jsx)(`div`,{className:`min-h-screen flex items-center justify-center bg-gradient-to-br from-green-400 to-green-600`,children:(0,$.jsx)(`div`,{className:`text-white text-xl font-semibold`,children:`Loading...`})}):e?(0,$.jsx)(_U,{}):(0,$.jsx)(vU,{})}(0,_.createRoot)(document.getElementById(`root`)).render((0,$.jsx)(v.StrictMode,{children:(0,$.jsx)(aH,{children:(0,$.jsx)(yU,{})})}));